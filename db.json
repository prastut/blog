{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/galleria/LICENSE","path":"galleria/LICENSE","modified":0,"renderable":0},{"_id":"source/images/image01.png","path":"images/image01.png","modified":0,"renderable":0},{"_id":"source/images/image03.png","path":"images/image03.png","modified":0,"renderable":0},{"_id":"source/images/image05.png","path":"images/image05.png","modified":0,"renderable":0},{"_id":"source/images/image00.png","path":"images/image00.png","modified":1,"renderable":0},{"_id":"source/images/image02.png","path":"images/image02.png","modified":0,"renderable":0},{"_id":"source/images/image07.png","path":"images/image07.png","modified":0,"renderable":0},{"_id":"source/images/image08.png","path":"images/image08.png","modified":0,"renderable":0},{"_id":"source/images/image09.png","path":"images/image09.png","modified":0,"renderable":0},{"_id":"source/images/favicon/android-icon-144x144.png","path":"images/favicon/android-icon-144x144.png","modified":0,"renderable":0},{"_id":"source/images/favicon/android-icon-192x192.png","path":"images/favicon/android-icon-192x192.png","modified":0,"renderable":0},{"_id":"source/images/favicon/android-icon-36x36.png","path":"images/favicon/android-icon-36x36.png","modified":0,"renderable":0},{"_id":"source/images/favicon/android-icon-72x72.png","path":"images/favicon/android-icon-72x72.png","modified":0,"renderable":0},{"_id":"source/images/favicon/android-icon-96x96.png","path":"images/favicon/android-icon-96x96.png","modified":0,"renderable":0},{"_id":"source/images/favicon/android-icon-48x48.png","path":"images/favicon/android-icon-48x48.png","modified":0,"renderable":0},{"_id":"source/images/favicon/apple-icon-114x114.png","path":"images/favicon/apple-icon-114x114.png","modified":0,"renderable":0},{"_id":"source/images/favicon/apple-icon-120x120.png","path":"images/favicon/apple-icon-120x120.png","modified":0,"renderable":0},{"_id":"source/images/favicon/apple-icon-152x152.png","path":"images/favicon/apple-icon-152x152.png","modified":0,"renderable":0},{"_id":"source/images/favicon/apple-icon-144x144.png","path":"images/favicon/apple-icon-144x144.png","modified":0,"renderable":0},{"_id":"source/images/favicon/apple-icon-57x57.png","path":"images/favicon/apple-icon-57x57.png","modified":0,"renderable":0},{"_id":"source/images/favicon/apple-icon-180x180.png","path":"images/favicon/apple-icon-180x180.png","modified":0,"renderable":0},{"_id":"source/images/favicon/apple-icon-60x60.png","path":"images/favicon/apple-icon-60x60.png","modified":0,"renderable":0},{"_id":"source/images/favicon/apple-icon-72x72.png","path":"images/favicon/apple-icon-72x72.png","modified":0,"renderable":0},{"_id":"source/images/favicon/apple-icon-precomposed.png","path":"images/favicon/apple-icon-precomposed.png","modified":0,"renderable":0},{"_id":"source/images/favicon/favicon-16x16.png","path":"images/favicon/favicon-16x16.png","modified":0,"renderable":0},{"_id":"source/images/favicon/apple-icon.png","path":"images/favicon/apple-icon.png","modified":0,"renderable":0},{"_id":"source/images/favicon/favicon.ico","path":"images/favicon/favicon.ico","modified":0,"renderable":0},{"_id":"source/images/favicon/apple-icon-76x76.png","path":"images/favicon/apple-icon-76x76.png","modified":0,"renderable":0},{"_id":"source/images/favicon/favicon-32x32.png","path":"images/favicon/favicon-32x32.png","modified":0,"renderable":0},{"_id":"source/images/favicon/ms-icon-144x144.png","path":"images/favicon/ms-icon-144x144.png","modified":0,"renderable":0},{"_id":"source/images/favicon/favicon-96x96.png","path":"images/favicon/favicon-96x96.png","modified":0,"renderable":0},{"_id":"source/images/favicon/ms-icon-150x150.png","path":"images/favicon/ms-icon-150x150.png","modified":0,"renderable":0},{"_id":"source/images/favicon/ms-icon-70x70.png","path":"images/favicon/ms-icon-70x70.png","modified":0,"renderable":0},{"_id":"source/images/favicon/ms-icon-310x310.png","path":"images/favicon/ms-icon-310x310.png","modified":0,"renderable":0},{"_id":"source/images/gsoc/image06.png","path":"images/gsoc/image06.png","modified":0,"renderable":0},{"_id":"source/images/test.jpg","path":"images/test.jpg","modified":0,"renderable":0},{"_id":"themes/phantom/source/css/ie8.css","path":"css/ie8.css","modified":0,"renderable":1},{"_id":"themes/phantom/source/css/font-awesome.min.css","path":"css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/phantom/source/css/ie9.css","path":"css/ie9.css","modified":0,"renderable":1},{"_id":"themes/phantom/source/css/main.css","path":"css/main.css","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/ProximaNova-Bold.woff","path":"fonts/ProximaNova-Bold.woff","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/ProximaNova-Regular.woff","path":"fonts/ProximaNova-Regular.woff","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/ProximaNovaCond-Black.woff","path":"fonts/ProximaNovaCond-Black.woff","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/ProximaNovaCond-Light.woff","path":"fonts/ProximaNovaCond-Light.woff","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/ProximaNovaT-Thin.woff","path":"fonts/ProximaNovaT-Thin.woff","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/icomoone6d5.eot","path":"fonts/icomoone6d5.eot","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/icomoond41d.eot","path":"fonts/icomoond41d.eot","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/icomoone6d5.svg","path":"fonts/icomoone6d5.svg","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/icomoone6d5.ttf","path":"fonts/icomoone6d5.ttf","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/icomoone6d5.woff","path":"fonts/icomoone6d5.woff","modified":0,"renderable":1},{"_id":"themes/phantom/source/images/batman.svg","path":"images/batman.svg","modified":0,"renderable":1},{"_id":"themes/phantom/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"themes/phantom/source/images/guy.jpg","path":"images/guy.jpg","modified":0,"renderable":1},{"_id":"themes/phantom/source/js/main.js","path":"js/main.js","modified":1,"renderable":1},{"_id":"themes/phantom/source/js/skel.min.js","path":"js/skel.min.js","modified":0,"renderable":1},{"_id":"themes/phantom/source/js/nprogress.js","path":"js/nprogress.js","modified":0,"renderable":1},{"_id":"themes/phantom/source/js/util.js","path":"js/util.js","modified":0,"renderable":1},{"_id":"themes/phantom/source/sass/font-proximanova.css","path":"sass/font-proximanova.css","modified":0,"renderable":1},{"_id":"themes/phantom/source/sass/galleria.classic.css","path":"sass/galleria.classic.css","modified":0,"renderable":1},{"_id":"themes/phantom/source/sass/ie8.scss","path":"sass/ie8.scss","modified":0,"renderable":1},{"_id":"themes/phantom/source/sass/ie9.scss","path":"sass/ie9.scss","modified":0,"renderable":1},{"_id":"themes/phantom/source/sass/font-awesome.min.css","path":"sass/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/phantom/source/sass/main.scss","path":"sass/main.scss","modified":0,"renderable":1},{"_id":"themes/phantom/source/sass/nprogress.css","path":"sass/nprogress.css","modified":0,"renderable":1},{"_id":"source/images/image04.png","path":"images/image04.png","modified":0,"renderable":0},{"_id":"themes/phantom/source/fonts/FontAwesome.otf","path":"fonts/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/ProximaNova-Bold.eot","path":"fonts/ProximaNova-Bold.eot","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/ProximaNova-Bold.ttf","path":"fonts/ProximaNova-Bold.ttf","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/ProximaNova-Regular.ttf","path":"fonts/ProximaNova-Regular.ttf","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/ProximaNova-Regular.eot","path":"fonts/ProximaNova-Regular.eot","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/ProximaNova-Regulard41d.eot","path":"fonts/ProximaNova-Regulard41d.eot","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/ProximaNovaCond-Black.eot","path":"fonts/ProximaNovaCond-Black.eot","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/ProximaNovaCond-Black.ttf","path":"fonts/ProximaNovaCond-Black.ttf","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/ProximaNovaCond-Blackd41d.eot","path":"fonts/ProximaNovaCond-Blackd41d.eot","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/ProximaNovaCond-Light.ttf","path":"fonts/ProximaNovaCond-Light.ttf","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/fontawesome-webfont.eot","path":"fonts/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/fontawesome-webfont.woff","path":"fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/fontawesome-webfont.woff2","path":"fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/phantom/source/js/jquery.min.js","path":"js/jquery.min.js","modified":0,"renderable":1},{"_id":"themes/phantom/source/sass/animate.css","path":"sass/animate.css","modified":0,"renderable":1},{"_id":"source/galleria/plugins/flickr/flickr-loader.gif","path":"galleria/plugins/flickr/flickr-loader.gif","modified":0,"renderable":0},{"_id":"source/galleria/plugins/flickr/loader.gif","path":"galleria/plugins/flickr/loader.gif","modified":0,"renderable":0},{"_id":"source/galleria/plugins/picasa/loader.gif","path":"galleria/plugins/picasa/loader.gif","modified":0,"renderable":0},{"_id":"source/galleria/themes/classic/classic-loader.gif","path":"galleria/themes/classic/classic-loader.gif","modified":0,"renderable":0},{"_id":"source/galleria/themes/classic/classic-map.png","path":"galleria/themes/classic/classic-map.png","modified":0,"renderable":0},{"_id":"source/images/cambuzz/gallery/3.jpg","path":"images/cambuzz/gallery/3.jpg","modified":0,"renderable":0},{"_id":"source/images/cambuzz/gallery/posters.jpg","path":"images/cambuzz/gallery/posters.jpg","modified":0,"renderable":0},{"_id":"source/images/cambuzz/track_teacher.jpg","path":"images/cambuzz/track_teacher.jpg","modified":0,"renderable":0},{"_id":"source/images/posts/cambuzz_cover.jpg","path":"images/posts/cambuzz_cover.jpg","modified":0,"renderable":0},{"_id":"source/images/posts/film_cover.jpg","path":"images/posts/film_cover.jpg","modified":0,"renderable":0},{"_id":"source/images/posts/gsoc_cover.jpg","path":"images/posts/gsoc_cover.jpg","modified":0,"renderable":0},{"_id":"source/images/posts/wux_cover.jpg","path":"images/posts/wux_cover.jpg","modified":0,"renderable":0},{"_id":"themes/phantom/source/fonts/ProximaNovaCond-Light.eot","path":"fonts/ProximaNovaCond-Light.eot","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/ProximaNovaCond-Lightd41d.eot","path":"fonts/ProximaNovaCond-Lightd41d.eot","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/ProximaNovaT-Thin.eot","path":"fonts/ProximaNovaT-Thin.eot","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/ProximaNovaT-Thin.ttf","path":"fonts/ProximaNovaT-Thin.ttf","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/ProximaNovaT-Thind41d.eot","path":"fonts/ProximaNovaT-Thind41d.eot","modified":0,"renderable":1},{"_id":"themes/phantom/source/fonts/fontawesome-webfont.ttf","path":"fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/phantom/source/js/ie/html5shiv.js","path":"js/ie/html5shiv.js","modified":0,"renderable":1},{"_id":"themes/phantom/source/js/ie/respond.min.js","path":"js/ie/respond.min.js","modified":0,"renderable":1},{"_id":"source/images/cambuzz/ask_question1.jpg","path":"images/cambuzz/ask_question1.jpg","modified":0,"renderable":0},{"_id":"source/images/cambuzz/gallery/2.jpg","path":"images/cambuzz/gallery/2.jpg","modified":0,"renderable":0},{"_id":"source/images/cambuzz/gallery/party.jpg","path":"images/cambuzz/gallery/party.jpg","modified":0,"renderable":0},{"_id":"source/images/cambuzz/gallery/team.jpg","path":"images/cambuzz/gallery/team.jpg","modified":0,"renderable":0},{"_id":"source/images/speaking/college/1.jpeg","path":"images/speaking/college/1.jpeg","modified":0,"renderable":0},{"_id":"source/images/speaking/college/2.jpeg","path":"images/speaking/college/2.jpeg","modified":0,"renderable":0},{"_id":"source/images/speaking/pycon/1.jpg","path":"images/speaking/pycon/1.jpg","modified":0,"renderable":0},{"_id":"source/images/speaking/pycon/4.jpg","path":"images/speaking/pycon/4.jpg","modified":0,"renderable":0},{"_id":"source/images/speaking/pycon/5.jpg","path":"images/speaking/pycon/5.jpg","modified":0,"renderable":0},{"_id":"source/images/WUX/needfinding.jpg","path":"images/WUX/needfinding.jpg","modified":0,"renderable":0},{"_id":"source/images/WUX/participants.jpg","path":"images/WUX/participants.jpg","modified":0,"renderable":0},{"_id":"source/images/about_avatar.jpg","path":"images/about_avatar.jpg","modified":0,"renderable":0},{"_id":"source/images/cambuzz/architecture.jpg","path":"images/cambuzz/architecture.jpg","modified":0,"renderable":0},{"_id":"source/images/cambuzz/decentralisation.jpg","path":"images/cambuzz/decentralisation.jpg","modified":0,"renderable":0},{"_id":"source/images/posts/houseafic_cover.jpg","path":"images/posts/houseafic_cover.jpg","modified":0,"renderable":0},{"_id":"source/images/posts/participants.jpg","path":"images/posts/participants.jpg","modified":0,"renderable":0},{"_id":"source/images/WUX/app.jpg","path":"images/WUX/app.jpg","modified":0,"renderable":0},{"_id":"source/images/cambuzz/webapp-buzz.jpg","path":"images/cambuzz/webapp-buzz.jpg","modified":0,"renderable":0},{"_id":"source/images/houseafic/pc.jpg","path":"images/houseafic/pc.jpg","modified":0,"renderable":0},{"_id":"themes/phantom/source/fonts/fontawesome-webfont.svg","path":"fonts/fontawesome-webfont.svg","modified":0,"renderable":1},{"_id":"source/images/cambuzz/gallery/1.jpg","path":"images/cambuzz/gallery/1.jpg","modified":0,"renderable":0},{"_id":"source/images/betterbutter/finalhomepage.jpg","path":"images/betterbutter/finalhomepage.jpg","modified":0,"renderable":0},{"_id":"source/images/cambuzz/buzz.jpg","path":"images/cambuzz/buzz.jpg","modified":0,"renderable":0},{"_id":"source/images/cambuzz/cambuzz_intro.jpg","path":"images/cambuzz/cambuzz_intro.jpg","modified":0,"renderable":0},{"_id":"source/images/betterbutter/rejected.jpg","path":"images/betterbutter/rejected.jpg","modified":0,"renderable":0},{"_id":"source/images/WUX/task1.jpg","path":"images/WUX/task1.jpg","modified":0,"renderable":0},{"_id":"source/images/betterbutter/designrec.jpg","path":"images/betterbutter/designrec.jpg","modified":0,"renderable":0},{"_id":"source/images/cambuzz/funnel.jpg","path":"images/cambuzz/funnel.jpg","modified":0,"renderable":0},{"_id":"source/images/posts/betterbutter_cover.jpg","path":"images/posts/betterbutter_cover.jpg","modified":0,"renderable":0},{"_id":"source/images/image10.png","path":"images/image10.png","modified":0,"renderable":0},{"_id":"source/images/gsoc/about_teem.jpg","path":"images/gsoc/about_teem.jpg","modified":0,"renderable":0},{"_id":"source/images/gsoc/matchmaking.jpg","path":"images/gsoc/matchmaking.jpg","modified":0,"renderable":0},{"_id":"source/images/gsoc/intro2.jpg","path":"images/gsoc/intro2.jpg","modified":0,"renderable":0},{"_id":"source/images/betterbutter/hiring.jpg","path":"images/betterbutter/hiring.jpg","modified":0,"renderable":0},{"_id":"source/images/betterbutter/posters.jpg","path":"images/betterbutter/posters.jpg","modified":0,"renderable":0},{"_id":"source/images/gsoc/intro.jpg","path":"images/gsoc/intro.jpg","modified":0,"renderable":0},{"_id":"source/images/WUX/final.jpg","path":"images/WUX/final.jpg","modified":0,"renderable":0},{"_id":"source/images/betterbutter/contest.jpg","path":"images/betterbutter/contest.jpg","modified":0,"renderable":0},{"_id":"source/images/cambuzz/webapp.jpg","path":"images/cambuzz/webapp.jpg","modified":0,"renderable":0},{"_id":"source/images/gsoc/collabview.jpg","path":"images/gsoc/collabview.jpg","modified":0,"renderable":0},{"_id":"source/images/betterbutter/combined_improvements.jpg","path":"images/betterbutter/combined_improvements.jpg","modified":0,"renderable":0},{"_id":"source/images/cambuzz/problems.jpg","path":"images/cambuzz/problems.jpg","modified":0,"renderable":0},{"_id":"source/images/gsoc/matchmaking_mocks.jpg","path":"images/gsoc/matchmaking_mocks.jpg","modified":0,"renderable":0},{"_id":"source/images/speaking/pycon/3.jpg","path":"images/speaking/pycon/3.jpg","modified":0,"renderable":0},{"_id":"source/images/betterbutter/Welcome Email(Fresh_Everything).jpg","path":"images/betterbutter/Welcome Email(Fresh_Everything).jpg","modified":0,"renderable":0},{"_id":"source/images/cambuzz/lo_fi_mobile.jpg","path":"images/cambuzz/lo_fi_mobile.jpg","modified":0,"renderable":0},{"_id":"source/images/cambuzz/mobile.jpg","path":"images/cambuzz/mobile.jpg","modified":0,"renderable":0},{"_id":"source/images/cambuzz/posters.jpg","path":"images/cambuzz/posters.jpg","modified":0,"renderable":0},{"_id":"source/images/speaking/pycon/2.jpg","path":"images/speaking/pycon/2.jpg","modified":0,"renderable":0},{"_id":"source/images/betterbutter/cover_detail.png","path":"images/betterbutter/cover_detail.png","modified":0,"renderable":0},{"_id":"source/images/betterbutter/recipe.jpg","path":"images/betterbutter/recipe.jpg","modified":0,"renderable":0},{"_id":"source/images/speaking/pycon/6.jpg","path":"images/speaking/pycon/6.jpg","modified":0,"renderable":0},{"_id":"source/images/WUX/poster.jpg","path":"images/WUX/poster.jpg","modified":0,"renderable":0},{"_id":"source/images/cambuzz/lo_fi_webapp.jpg","path":"images/cambuzz/lo_fi_webapp.jpg","modified":0,"renderable":0},{"_id":"source/images/WUX/affinitywall.jpg","path":"images/WUX/affinitywall.jpg","modified":0,"renderable":0},{"_id":"themes/phantom/source/js/jquery.image-fit-window.js","path":"js/jquery.image-fit-window.js","modified":1,"renderable":1},{"_id":"source/images/dataviz/primresearch.jpg","path":"images/dataviz/primresearch.jpg","modified":1,"renderable":0},{"_id":"source/images/dataviz/resultresearch-1.jpg","path":"images/dataviz/resultresearch-1.jpg","modified":1,"renderable":0},{"_id":"source/images/dataviz/resultresearch-2.jpg","path":"images/dataviz/resultresearch-2.jpg","modified":1,"renderable":0},{"_id":"source/images/dataviz/framework.jpg","path":"images/dataviz/framework.jpg","modified":1,"renderable":0},{"_id":"source/images/dataviz/Dataviz-Cover.jpg","path":"images/dataviz/Dataviz-Cover.jpg","modified":1,"renderable":0},{"_id":"source/images/posts/dataviz_cover.jpg","path":"images/posts/dataviz_cover.jpg","modified":1,"renderable":0}],"Cache":[{"_id":"source/about.html","hash":"7c2396fb04e8ede6702698df545a3fcb1c68d69a","modified":1476132205000},{"_id":"source/cgraphics.html","hash":"3ba8c1f77fcea684e0f4771be5c210897cf9984d","modified":1485159784000},{"_id":"source/speaking.html","hash":"fd1a20fc1b96821ef773d66e79436cd411768500","modified":1476131838000},{"_id":"themes/phantom/_config.yml","hash":"b2671997545b02f861a2fb1d7491f91068072aea","modified":1498313490000},{"_id":"themes/phantom/README.md","hash":"44d2145a91a2058f37ed65a0334c948cdc8c30ec","modified":1471356389000},{"_id":"source/_posts/betterbutter.md","hash":"f694fff2c94f286702306eb2b3e7c365be40f3a4","modified":1484119644000},{"_id":"source/_posts/cambuzz.md","hash":"fc085094d67fea1c2688995ca8320b291a2f7d1d","modified":1484573032000},{"_id":"source/_posts/film.md","hash":"06d5cd0eab26fd60713eb1a347659d2f0d7e8413","modified":1476111953000},{"_id":"source/_posts/gsoc.md","hash":"6ac3e6ef2f161cf9438bc2e4822154c5f360dafc","modified":1484574103000},{"_id":"source/_posts/houseafic.md","hash":"0e89a27e4dc20de2f11b63b41c63132486a69497","modified":1484119584000},{"_id":"source/_posts/wux.md","hash":"fd902a245f13e801a6e0e3a7dc1bc9e2e9aa845c","modified":1484574079000},{"_id":"source/galleria/LICENSE","hash":"10de0a3ab37d46b7a51e9e42dfee602254d406bd","modified":1473954795000},{"_id":"source/images/image01.png","hash":"f588b239d8c98468504c33eb6a796b59702984f7","modified":1471327550000},{"_id":"source/images/image03.png","hash":"235eaf92881a1843355288f4bf683568d5fc8b85","modified":1471327550000},{"_id":"source/images/image05.png","hash":"cb5e9ad2cdd5d97b934679aa12638dcff65d57ce","modified":1471327550000},{"_id":"themes/phantom/languages/de.yml","hash":"424a9c1e6ab69334d7873f6574da02ca960aa572","modified":1471356389000},{"_id":"themes/phantom/languages/default.yml","hash":"97326c9e6518d9f379778178b3b8f9a58434725d","modified":1471356389000},{"_id":"themes/phantom/languages/es.yml","hash":"cb4eeca0ed3768a77e0cd216300f2b2549628b1b","modified":1471356389000},{"_id":"themes/phantom/languages/pl.yml","hash":"de7eb5850ae65ba7638e907c805fea90617a988c","modified":1471356389000},{"_id":"themes/phantom/languages/en.yml","hash":"97326c9e6518d9f379778178b3b8f9a58434725d","modified":1471356389000},{"_id":"themes/phantom/languages/no.yml","hash":"8ca475a3b4f8efe6603030f0013aae39668230e1","modified":1471356389000},{"_id":"themes/phantom/languages/ru.yml","hash":"42df7afeb7a35dc46d272b7f4fb880a9d9ebcaa5","modified":1471356389000},{"_id":"themes/phantom/languages/zh-CN.yml","hash":"7bfcb0b8e97d7e5edcfca8ab26d55d9da2573c1c","modified":1471356389000},{"_id":"themes/phantom/languages/zh-TW.yml","hash":"9acac6cc4f8002c3fa53ff69fb8cf66c915bd016","modified":1471356389000},{"_id":"themes/phantom/layout/index.ejs","hash":"09022447f0047ca04e14c27e8cdccc763131e9ad","modified":1471356389000},{"_id":"themes/phantom/layout/archive.ejs","hash":"7ab1832ba8a8156a61896e9b618b084771e77124","modified":1471356389000},{"_id":"themes/phantom/layout/page.ejs","hash":"54f11f374dd0903086bd5bf7db507908034a8f28","modified":1471356389000},{"_id":"themes/phantom/layout/layout.ejs","hash":"17345c68cf6059b92a28f4687ec66074c5d9b0df","modified":1473964841000},{"_id":"themes/phantom/layout/post.ejs","hash":"38382e9bbeb6b8d2eafbd53fff2984111f524c1a","modified":1471356389000},{"_id":"source/galleria/galleria-1.4.5.min.js","hash":"26b9cd617000457312d3a11b605f6ca59be9f952","modified":1473957778000},{"_id":"source/images/9.jpg","hash":"0ff558bbb10461704285728c29882e41d2eb24a9","modified":1473588395000},{"_id":"source/images/image00.png","hash":"038b2eff38138bde19019b3b77553befb9d44012","modified":1471327550000},{"_id":"source/images/image02.png","hash":"28ed9b1bef99727215c0f5b7e03558954c7c8863","modified":1471327550000},{"_id":"source/images/image07.png","hash":"00ffc45474f8215acb407b306eb278655ae755c0","modified":1471387739000},{"_id":"source/images/image08.png","hash":"cb520b7ef10b695b7efde480156af41cee9889d9","modified":1471389037000},{"_id":"source/images/image09.png","hash":"515f198785cc5dfa08871939e52d17a18ecbec88","modified":1471389073000},{"_id":"source/images/favicon/android-icon-144x144.png","hash":"be5fcf8452fdbd50af7752cfb58dd2c082bca0c7","modified":1454632721000},{"_id":"source/images/favicon/android-icon-192x192.png","hash":"61b010f3a52cbdb9e6e83af50f2a858daab1c379","modified":1454632721000},{"_id":"source/images/favicon/android-icon-36x36.png","hash":"b5e51ab8d82bad2fd3a38f9bf962c63a459b890b","modified":1454632721000},{"_id":"source/images/favicon/android-icon-72x72.png","hash":"eac6f48f81106ec5c15c3084e23c3452c74be265","modified":1454632721000},{"_id":"source/images/favicon/android-icon-96x96.png","hash":"43bef963478780efa6872f26fe977ee550a4e59e","modified":1454632721000},{"_id":"source/images/favicon/android-icon-48x48.png","hash":"92a849ac7dd2f03ecbaccd677616365428173b43","modified":1454632721000},{"_id":"source/images/favicon/apple-icon-114x114.png","hash":"08ccf2fc0aca6eb8446e3d43751d89e22e1b93a6","modified":1454632721000},{"_id":"source/images/favicon/apple-icon-120x120.png","hash":"68e0d165ad1e1d69db61f36bf36dbbdfd6d755f2","modified":1454632721000},{"_id":"source/images/favicon/apple-icon-152x152.png","hash":"e23eacf3e214480676118ecd0ae0b10ce93f4c89","modified":1454632721000},{"_id":"source/images/favicon/apple-icon-144x144.png","hash":"be5fcf8452fdbd50af7752cfb58dd2c082bca0c7","modified":1454632721000},{"_id":"source/images/favicon/apple-icon-57x57.png","hash":"218478b7601c6826b2c2a1bbb3b1b2bc3b882fb2","modified":1454632721000},{"_id":"source/images/favicon/apple-icon-180x180.png","hash":"4581151ad4de8ccdf4e870e021fe3f2b8854d81f","modified":1454632721000},{"_id":"source/images/favicon/apple-icon-60x60.png","hash":"528f70fe736efc3be2ca6876f94fc59d36c44973","modified":1454632721000},{"_id":"source/images/favicon/apple-icon-72x72.png","hash":"eac6f48f81106ec5c15c3084e23c3452c74be265","modified":1454632721000},{"_id":"source/images/favicon/apple-icon-precomposed.png","hash":"185d1d62d64f30494e4f202efa33af496003bbc4","modified":1454632721000},{"_id":"source/images/favicon/favicon-16x16.png","hash":"ccb7856d7cec2ae7548ab320ebc32f9bc2d4939d","modified":1454632721000},{"_id":"source/images/favicon/apple-icon.png","hash":"185d1d62d64f30494e4f202efa33af496003bbc4","modified":1454632721000},{"_id":"source/images/favicon/favicon.ico","hash":"8097f523ca1f6df3c44dfe768f4233a09409e446","modified":1454632721000},{"_id":"source/images/favicon/apple-icon-76x76.png","hash":"3ea819f62610877b316f55dd2b602af6002640c3","modified":1454632721000},{"_id":"source/images/favicon/favicon-32x32.png","hash":"5918fc6db38f24c9cd7821fcb37e1f33ed171817","modified":1454632721000},{"_id":"source/images/favicon/ms-icon-144x144.png","hash":"be5fcf8452fdbd50af7752cfb58dd2c082bca0c7","modified":1454632721000},{"_id":"source/images/favicon/favicon-96x96.png","hash":"43bef963478780efa6872f26fe977ee550a4e59e","modified":1454632721000},{"_id":"source/images/favicon/manifest.json","hash":"d11febf9e708a9e11baee37ed7dc5e99902580be","modified":1454632721000},{"_id":"source/images/favicon/ms-icon-150x150.png","hash":"047e78eab62a5ffb9b50d2db56786daaf7af2d17","modified":1454632721000},{"_id":"source/images/favicon/ms-icon-70x70.png","hash":"713a5377648aea657d334169ebec0ebf2308d905","modified":1454632721000},{"_id":"source/images/favicon/ms-icon-310x310.png","hash":"ddb6eddfdf3e2568ecc68322f08f13d6ce47fdea","modified":1454632721000},{"_id":"source/images/gsoc/image06.png","hash":"1e7e8baecddab808710b0273385c33421f751858","modified":1471385076000},{"_id":"source/images/test.jpg","hash":"4eec7959e080bd9e3deddc1c2799f54eb1e61b80","modified":1473819121000},{"_id":"themes/phantom/layout/_partial/article-full.ejs","hash":"6e165074d860230d50fcfbd2bcc62368adcbfb68","modified":1474409636000},{"_id":"themes/phantom/layout/_partial/after-footer.ejs","hash":"8461671ce19d4cbfe0b9855a29aba985a2affa9d","modified":1476130333000},{"_id":"themes/phantom/layout/_partial/article-archive.ejs","hash":"a59de36284b5fa1d1ae173ff69a08e20250b29d0","modified":1471356389000},{"_id":"themes/phantom/layout/_partial/article-index.ejs","hash":"25f5d7cd71b081d0fea8709a32ee04701a025cb5","modified":1473273303000},{"_id":"themes/phantom/layout/_partial/article-page.ejs","hash":"56bbf11584b920213a9ca811424400cdd767ebf9","modified":1473951488000},{"_id":"themes/phantom/layout/_partial/comments.ejs","hash":"3fedb75436439d1d6979b7e4d20d48a593e12be4","modified":1471356389000},{"_id":"themes/phantom/layout/_partial/article-tags.ejs","hash":"df2a96bad2f411ba2a8216721fc2996fa79bc58b","modified":1471356389000},{"_id":"themes/phantom/layout/_partial/footer.ejs","hash":"24256f1cf49ee2ce5de256af565760a3cb6ed817","modified":1476132722000},{"_id":"themes/phantom/layout/_partial/galleria.ejs","hash":"aea07714cb84010d95e5b897893cf565f0dac073","modified":1476124879000},{"_id":"themes/phantom/layout/_partial/google-analytics.ejs","hash":"4e6e8de9becea5a1636a4dcadcf7a10c06e2426e","modified":1474830462000},{"_id":"themes/phantom/layout/_partial/googleslides.ejs","hash":"576a18a8c051af2e7353125acda6249c8c8ea83a","modified":1474407429000},{"_id":"themes/phantom/layout/_partial/gallery.ejs","hash":"e03795a23a987c1c172526f68d729d9ca9e34df2","modified":1474130391000},{"_id":"themes/phantom/layout/_partial/menu.ejs","hash":"1e08ad924dc7c68acc2ff563114d8e8756abf8e3","modified":1474410924000},{"_id":"themes/phantom/layout/_partial/pagination.ejs","hash":"e093a501c62b8ac7587d6b684f39362955c83490","modified":1471356389000},{"_id":"themes/phantom/layout/_partial/head.ejs","hash":"87b294f4d9ed00fdcb843747067b188ecb8d1024","modified":1501340695000},{"_id":"themes/phantom/source/css/ie8.css","hash":"4f41720ed7a2d4831d248aa591b573383f22263a","modified":1471356389000},{"_id":"themes/phantom/source/css/font-awesome.min.css","hash":"12d6861075de8e293265ff6ff03b1f3adcb44c76","modified":1471356389000},{"_id":"themes/phantom/source/css/ie9.css","hash":"1dad1d8872d9d5c8d7013d9e2327c7ce947c5951","modified":1471356389000},{"_id":"themes/phantom/source/css/main.css","hash":"b2f2da229a7b59bba6a1fe5577bd0e00d0f3944d","modified":1471365855000},{"_id":"themes/phantom/source/fonts/ProximaNova-Bold.woff","hash":"343718063f5f0e1f2245f2624ec0c086e3e1b793","modified":1454632721000},{"_id":"themes/phantom/source/fonts/ProximaNova-Regular.woff","hash":"e27766454d739efcec7dd7e43ed1763399befb9c","modified":1454632721000},{"_id":"themes/phantom/source/fonts/ProximaNovaCond-Black.woff","hash":"b113e59e5b687a2eeb68e1f0624a1bc996210841","modified":1454632721000},{"_id":"themes/phantom/source/fonts/ProximaNovaCond-Light.woff","hash":"3bce3b293ffc97a6091c5833ed70b6d2a9237cc1","modified":1454632721000},{"_id":"themes/phantom/source/fonts/ProximaNovaT-Thin.woff","hash":"7417932d1dbbe42f275be480c15c6036161172cb","modified":1454632721000},{"_id":"themes/phantom/source/fonts/icomoone6d5.eot","hash":"f61b20cad990c3110c4cb13494f3a776871fcf0c","modified":1454632721000},{"_id":"themes/phantom/source/fonts/icomoond41d.eot","hash":"f61b20cad990c3110c4cb13494f3a776871fcf0c","modified":1454632721000},{"_id":"themes/phantom/source/fonts/icomoone6d5.svg","hash":"f7f8838a4626dca1018c4a15277d8ebafb37a201","modified":1454632721000},{"_id":"themes/phantom/source/fonts/icomoone6d5.ttf","hash":"69574544e64649df725b934ea4f3f4a22930d880","modified":1454632721000},{"_id":"themes/phantom/source/fonts/icomoone6d5.woff","hash":"ece1f6b44934735d7edc77cc4e420136c718a07d","modified":1454632721000},{"_id":"themes/phantom/source/images/batman.svg","hash":"9b05ee9c30f827ab7c3c3597216c58717112e83c","modified":1471704789000},{"_id":"themes/phantom/source/images/logo.svg","hash":"6de70d5f1da267250a06423e1fa9c32c0f61b3ed","modified":1474061405000},{"_id":"themes/phantom/source/images/guy.jpg","hash":"645780a58e5958856f9c6647e00eaf24258e0380","modified":1474064927000},{"_id":"themes/phantom/source/js/main.js","hash":"c8eb6199024a353f9617e14624361fdb1caf8851","modified":1501340433000},{"_id":"themes/phantom/source/js/skel.min.js","hash":"14f390065fddc652ca1717aaebf5b44f8de78f9d","modified":1471356389000},{"_id":"themes/phantom/source/js/nprogress.js","hash":"4b9142783b217ec5cbd2ab18327806e28d83c86c","modified":1476130184000},{"_id":"themes/phantom/source/js/util.js","hash":"9babe3882180bf5f535b08cd6eb49d6e707727d5","modified":1501340275000},{"_id":"themes/phantom/source/sass/font-proximanova.css","hash":"04f1cfff0bdd00cc107c3a9071407f50cdd31cba","modified":1473274247000},{"_id":"themes/phantom/source/sass/galleria.classic.css","hash":"c72009ce25b1def9cda84b1a5b1089044a6f04e5","modified":1473953675000},{"_id":"themes/phantom/source/sass/ie8.scss","hash":"0119f291fb39e5910a2a663f6fd8ef16f914d4f0","modified":1471356389000},{"_id":"themes/phantom/source/sass/ie9.scss","hash":"ead318fa43632d5f6756e59e4c91fc57bfffa8df","modified":1471356389000},{"_id":"themes/phantom/source/sass/font-awesome.min.css","hash":"12d6861075de8e293265ff6ff03b1f3adcb44c76","modified":1473274242000},{"_id":"themes/phantom/source/sass/main.scss","hash":"e2a1350f54a0189446430a58f3ac3d64963c1bf8","modified":1501189282000},{"_id":"themes/phantom/source/sass/nprogress.css","hash":"ea65cb433011fa7b8bffc48f3bdf64cd3b1afecc","modified":1476131178000},{"_id":"source/galleria/galleria-1.4.5.js","hash":"301358dec30a5974eb0f584c0a78848a66ab641c","modified":1473957947000},{"_id":"source/images/image04.png","hash":"8722e4eb8e12a62d86c84fe79a0d9e1ee0382b84","modified":1471327550000},{"_id":"themes/phantom/source/fonts/FontAwesome.otf","hash":"42c179eef588854b5ec151bcf6a3f58aa8b79b11","modified":1471356389000},{"_id":"themes/phantom/source/fonts/ProximaNova-Bold.eot","hash":"97725908481fe94e875c094abf46591bb2e59119","modified":1454632721000},{"_id":"themes/phantom/source/fonts/ProximaNova-Bold.ttf","hash":"a40bbcf8fded8df8d03b1e38a0e91b7d577d4ad2","modified":1454632721000},{"_id":"themes/phantom/source/fonts/ProximaNova-Regular.ttf","hash":"2d1af5d8b1e080b4e6df7c1a25c2b5c874a41062","modified":1454632721000},{"_id":"themes/phantom/source/fonts/ProximaNova-Regular.eot","hash":"b6b2ddf9f07ad92efc78c0f0635fb85d66eba279","modified":1454632721000},{"_id":"themes/phantom/source/fonts/ProximaNova-Regulard41d.eot","hash":"b6b2ddf9f07ad92efc78c0f0635fb85d66eba279","modified":1454632721000},{"_id":"themes/phantom/source/fonts/ProximaNovaCond-Black.eot","hash":"d84eb4631ee17a75d7e0d169e444130f8478c608","modified":1454632721000},{"_id":"themes/phantom/source/fonts/ProximaNovaCond-Black.ttf","hash":"b863c63bc52923c7e031b5e0bbd31175d55dba81","modified":1454632721000},{"_id":"themes/phantom/source/fonts/ProximaNovaCond-Blackd41d.eot","hash":"d84eb4631ee17a75d7e0d169e444130f8478c608","modified":1454632721000},{"_id":"themes/phantom/source/fonts/ProximaNovaCond-Light.ttf","hash":"dfce50bcf2d4c506fbda270fae3ba737b4de5373","modified":1454632721000},{"_id":"themes/phantom/source/fonts/fontawesome-webfont.eot","hash":"986eed8dca049714e43eeebcb3932741a4bec76d","modified":1471356389000},{"_id":"themes/phantom/source/fonts/fontawesome-webfont.woff","hash":"4a313eb93b959cc4154c684b915b0a31ddb68d84","modified":1471356389000},{"_id":"themes/phantom/source/fonts/fontawesome-webfont.woff2","hash":"638c652d623280a58144f93e7b552c66d1667a11","modified":1471356389000},{"_id":"themes/phantom/source/js/jquery.min.js","hash":"276c87ff3e1e3155679c318938e74e5c1b76d809","modified":1471356389000},{"_id":"themes/phantom/source/sass/animate.css","hash":"5bac0162dbfcfd0c701b8d0848411a288c27a2c2","modified":1473343636000},{"_id":"source/galleria/plugins/flickr/flickr-loader.gif","hash":"fd067df3aaccba7db4cf118b228e0196434e971c","modified":1473954795000},{"_id":"source/galleria/plugins/flickr/flickr-demo.html","hash":"f91f038fbe2909652eb51cd73d75f52e9576d135","modified":1473954795000},{"_id":"source/galleria/plugins/flickr/galleria.flickr.js","hash":"312cc0d7388b6904cc6d2271414e3c33cf58f375","modified":1473954795000},{"_id":"source/galleria/plugins/flickr/galleria.flickr.min.js","hash":"51fcd033312aa9898b4768f38713bb2580a44b27","modified":1473954795000},{"_id":"source/galleria/plugins/flickr/loader.gif","hash":"72caed9b8402bda9635d703092fbd5a7e786badd","modified":1473954795000},{"_id":"source/galleria/plugins/history/galleria.history.min.js","hash":"6ff84f5035ba0c87c27458d14d7b8920e10a11e5","modified":1473954795000},{"_id":"source/galleria/plugins/history/galleria.history.js","hash":"d10631695b92a855019f025959cf2e0cab828b6e","modified":1473954795000},{"_id":"source/galleria/plugins/history/history-demo.html","hash":"e47b590aaa5131e992e9988f4654f6ad2be70c6d","modified":1473954795000},{"_id":"source/galleria/plugins/picasa/galleria.picasa.js","hash":"09b068ff2a31e75c5114e2396e4ec3cf71cc8d35","modified":1473954795000},{"_id":"source/galleria/plugins/picasa/loader.gif","hash":"72caed9b8402bda9635d703092fbd5a7e786badd","modified":1473954795000},{"_id":"source/galleria/themes/classic/classic-demo.html","hash":"3ff0c50c927d0da3a599a279b87ae6d23d5d651a","modified":1473954795000},{"_id":"source/galleria/plugins/picasa/picasa-demo.html","hash":"866395516f5b336e3f00003c74354e5008db6bee","modified":1473954795000},{"_id":"source/galleria/themes/classic/classic-loader.gif","hash":"72caed9b8402bda9635d703092fbd5a7e786badd","modified":1473954795000},{"_id":"source/galleria/plugins/picasa/galleria.picasa.min.js","hash":"5d0d304ba44026eff58ce5dadbb2b923b94cb6d7","modified":1473954795000},{"_id":"source/galleria/themes/classic/classic-map.png","hash":"eb7f2e46cc3d87b7c90e980509b78944828c123a","modified":1473954795000},{"_id":"source/galleria/themes/classic/galleria.classic.js","hash":"df71b12d3230b1e9b355de410aae34965327138b","modified":1473954795000},{"_id":"source/galleria/themes/classic/galleria.classic.css","hash":"c72009ce25b1def9cda84b1a5b1089044a6f04e5","modified":1473954795000},{"_id":"source/galleria/themes/classic/galleria.classic.min.js","hash":"db4a4bddcd1f9dfb4e6d2d5c23855e0d192e054d","modified":1473954795000},{"_id":"source/images/cambuzz/gallery/3.jpg","hash":"26c32289544ae7c579de7542e70e203da4b5feb9","modified":1474055525000},{"_id":"source/images/cambuzz/gallery/posters.jpg","hash":"ab69fd7b9609a8949cc3f2412fb5214801b14ef2","modified":1473967212000},{"_id":"source/images/cambuzz/track_teacher.jpg","hash":"c70732ce47f51b2d010e1f7a8ecd414260522c47","modified":1473948015000},{"_id":"source/images/posts/cambuzz_cover.jpg","hash":"439aa019385bfcbf30037a0f19593f5046665537","modified":1473602252000},{"_id":"source/images/posts/film_cover.jpg","hash":"41a368b40747c16b4b47cf964bc63c72e0fe2f2b","modified":1476108661000},{"_id":"source/images/posts/gsoc_cover.jpg","hash":"5e638e51dd2e6515a381cca93b1fffbff04a8ff0","modified":1474382664000},{"_id":"source/images/posts/wux_cover.jpg","hash":"52d053804d65bdf715a4713124af60d28b34b633","modified":1473637294000},{"_id":"themes/phantom/source/fonts/ProximaNovaCond-Light.eot","hash":"563ef225ef7ea634f9e7bb68f7e97c18f220e26f","modified":1454632721000},{"_id":"themes/phantom/source/fonts/ProximaNovaCond-Lightd41d.eot","hash":"563ef225ef7ea634f9e7bb68f7e97c18f220e26f","modified":1454632721000},{"_id":"themes/phantom/source/fonts/ProximaNovaT-Thin.eot","hash":"39034f2ef028f99dc30ecd7f462c6188e59e3eda","modified":1454632721000},{"_id":"themes/phantom/source/fonts/ProximaNovaT-Thin.ttf","hash":"9aafc1c876934a604fed81cf1496e52ac449ad4e","modified":1454632721000},{"_id":"themes/phantom/source/fonts/ProximaNovaT-Thind41d.eot","hash":"39034f2ef028f99dc30ecd7f462c6188e59e3eda","modified":1454632721000},{"_id":"themes/phantom/source/fonts/fontawesome-webfont.ttf","hash":"6484f1af6b485d5096b71b344e67f4164c33dd1f","modified":1471356389000},{"_id":"themes/phantom/source/js/ie/html5shiv.js","hash":"6ee35415750b51dd65a6521d1dd91aba3e2ae828","modified":1471356389000},{"_id":"themes/phantom/source/js/ie/respond.min.js","hash":"8e786bcf921518f0c8c46d14a51235af2fb99926","modified":1471356389000},{"_id":"themes/phantom/source/sass/base/_code.scss","hash":"251e8e50689bee360c7132c86f26edee32f7aa1a","modified":1471356389000},{"_id":"themes/phantom/source/sass/base/_page.scss","hash":"ad76315b33bc518cde02dcce0bbd4083f826c68c","modified":1471356389000},{"_id":"themes/phantom/source/sass/components/_archives.scss","hash":"c67d35c13df4ba96780a9db92884113ba20527d7","modified":1471356389000},{"_id":"themes/phantom/source/sass/components/_box.scss","hash":"78e0660402876cece2af4d67e6a1ca4a8e259e46","modified":1473280263000},{"_id":"themes/phantom/source/sass/base/_typography.scss","hash":"38f700889a3e45fc2a10e87129ac147d0e4c9681","modified":1473895542000},{"_id":"themes/phantom/source/sass/components/_button.scss","hash":"b0a66782c3c971f27933adbbd9608abed4790011","modified":1471356389000},{"_id":"themes/phantom/source/sass/components/_icon.scss","hash":"49568ae1c71e15541644e9111ef5f9b0c1f9253b","modified":1473580299000},{"_id":"themes/phantom/source/sass/components/_form.scss","hash":"61f8aaf6469ba14b2d3a93ae1c2aceed959a203e","modified":1471356389000},{"_id":"themes/phantom/source/sass/components/_gallery.scss","hash":"40bc6bbcc49f4a22c11683ec4fca486eb049452a","modified":1476124868000},{"_id":"themes/phantom/source/sass/components/_image.scss","hash":"38353033c1f0c9c5b08541dce97ce5de1d3a9001","modified":1473280261000},{"_id":"themes/phantom/source/sass/components/_list.scss","hash":"3e026ecd8d3ec101f465c2b36b2a5500f8f50e8e","modified":1471356389000},{"_id":"themes/phantom/source/sass/components/_pagination.scss","hash":"291ae4dfa01d2417d8028aa8c7592de5151f4d9c","modified":1471356389000},{"_id":"themes/phantom/source/sass/components/_section.scss","hash":"53cfb6eb05860f34cb2722c0802754d423473e38","modified":1471356389000},{"_id":"themes/phantom/source/sass/components/_tiles.scss","hash":"cded6894d90cae8a7d7f34e3e5d48439543323e3","modified":1473585355000},{"_id":"themes/phantom/source/sass/layout/_footer.scss","hash":"00816f09388aabec39693587e1f248aea6ce4124","modified":1473585372000},{"_id":"themes/phantom/source/sass/components/_table.scss","hash":"835e25f31f283ab6ed1708f8d7d4c7f055d5307b","modified":1471356389000},{"_id":"themes/phantom/source/sass/layout/_header.scss","hash":"eb4854695ee7490c76eec64f334de9554555dbf9","modified":1471368454000},{"_id":"themes/phantom/source/sass/layout/_main.scss","hash":"7bd58935ed829297a1006ce51d51c4406f553709","modified":1473276820000},{"_id":"themes/phantom/source/sass/layout/_menu.scss","hash":"f50a3653795dc8e51ecf8fb13e50635e1202d5d8","modified":1473267762000},{"_id":"themes/phantom/source/sass/layout/_wrapper.scss","hash":"9cfc23901a22f850909015f22eea885eee790eb2","modified":1473357540000},{"_id":"themes/phantom/source/sass/libs/_functions.scss","hash":"4f1e4e3e65837ef26d6df42487ce0ee6d9a3c4cb","modified":1471356389000},{"_id":"themes/phantom/source/sass/libs/_skel.scss","hash":"da4ca53bc3308b9f4bf35a1a75958fbfb56b4b90","modified":1471356389000},{"_id":"themes/phantom/source/sass/libs/_mixins.scss","hash":"091d0598e9beda606514d7a87d0879ef0558ed40","modified":1471368225000},{"_id":"themes/phantom/source/sass/libs/_vars.scss","hash":"07a734394ed737baf87765cb5762819e29ee2fbf","modified":1501189321000},{"_id":"source/images/cambuzz/ask_question1.jpg","hash":"44e3a3d3472c4f8d85d3ee9a142a298f134460e9","modified":1473948055000},{"_id":"source/images/cambuzz/gallery/2.jpg","hash":"23c1c78a027c65075e5691ceb50fa82c95b10abd","modified":1474055521000},{"_id":"source/images/cambuzz/gallery/party.jpg","hash":"9449808612f32a31cb2eb367e986ae2a10d70828","modified":1473966713000},{"_id":"source/images/cambuzz/gallery/team.jpg","hash":"d541751926c79ae39330d690d510f82b1b6d7a59","modified":1473969675000},{"_id":"source/images/speaking/college/1.jpeg","hash":"171204cc4778825c03c110a532cc1c2f7b69124c","modified":1476131667000},{"_id":"source/images/speaking/college/2.jpeg","hash":"c891010577a4456ee2933abb5d22477844d1c2e8","modified":1476131669000},{"_id":"source/images/speaking/pycon/1.jpg","hash":"ede8b870d06e8e0c06ea0cc9d103a7086500db48","modified":1474916134000},{"_id":"source/images/speaking/pycon/4.jpg","hash":"818b749525104a83f2ac2110a8776dae30493176","modified":1474869464000},{"_id":"source/images/speaking/pycon/5.jpg","hash":"f346486d5d68ac92634f77a1a8cde18fe7d3c4ed","modified":1474916140000},{"_id":"source/images/WUX/needfinding.jpg","hash":"8ac5c58a5886b1a2b821c1e99d81600353ad2933","modified":1476288258000},{"_id":"source/images/WUX/participants.jpg","hash":"4b5fa839064863febc8a95c3a0eb6cddc116fffb","modified":1484120967000},{"_id":"source/images/about_avatar.jpg","hash":"b11379075c543c468dc01e3ec509967766b75d1e","modified":1476116438000},{"_id":"source/images/cambuzz/architecture.jpg","hash":"9749eae010083efa4168ef7069b583d43df28667","modified":1473977355000},{"_id":"source/images/cambuzz/decentralisation.jpg","hash":"d49e5d127e7ddfaf86be53eec68ff9444fed48b0","modified":1484116897000},{"_id":"source/images/posts/houseafic_cover.jpg","hash":"07dae750535262e5901ca5d6dab276ba57b91409","modified":1473635458000},{"_id":"source/images/posts/participants.jpg","hash":"4b5fa839064863febc8a95c3a0eb6cddc116fffb","modified":1484120967000},{"_id":"source/images/WUX/app.jpg","hash":"70a39075d88e95d0be837f74a4bbfd1cbc502bd6","modified":1484392518000},{"_id":"source/images/6.jpg","hash":"927e88bd8a0724dd95311741a640dd731eedee90","modified":1473587645000},{"_id":"source/images/cambuzz/webapp-buzz.jpg","hash":"7f14956ace416886a307b648ad0033abbddeabba","modified":1473948651000},{"_id":"source/images/houseafic/pc.jpg","hash":"5863263bba6d57c0bec1bef4c5f801bd08db7479","modified":1484119562000},{"_id":"themes/phantom/source/fonts/fontawesome-webfont.svg","hash":"b06b5c8f67fd632cdc62a33b62ae4f74194131b3","modified":1471356389000},{"_id":"source/images/cambuzz/gallery/1.jpg","hash":"38eae58d5f8f69bf7949732f755e0f3990f4858a","modified":1474055488000},{"_id":"source/images/betterbutter/finalhomepage.jpg","hash":"5b3067eba8d4bca96761ef07420941447599cf40","modified":1474122363000},{"_id":"source/images/cambuzz/buzz.jpg","hash":"d20ce49e348e7ea7f77b5eaaf6f954a0fddd5112","modified":1473948127000},{"_id":"source/images/cambuzz/cambuzz_intro.jpg","hash":"0cf7c8232fc3808f6b8df5d9a24f38277f3b26e0","modified":1473891028000},{"_id":"source/images/betterbutter/rejected.jpg","hash":"03a75eabcd96037d57d55f892f2180867a4d3212","modified":1474145410000},{"_id":"source/images/WUX/task1.jpg","hash":"89e9ca48a0b5fe5cd06080537dd0e87f039e7e5b","modified":1484142681000},{"_id":"source/images/betterbutter/designrec.jpg","hash":"1a23340dcd50b77110dbee04fa4ae6dee39ff72e","modified":1474123667000},{"_id":"source/images/cambuzz/funnel.jpg","hash":"0bd16db5ded2e0ae20d84a6091b258c30d23654f","modified":1473943068000},{"_id":"source/images/posts/betterbutter_cover.jpg","hash":"7beb5b192c910ee745f6c297adf75cb26a628f3b","modified":1473636262000},{"_id":"source/images/image10.png","hash":"d0ad065cdb8b0e460efed32ed64f01bf0d239943","modified":1471695908000},{"_id":"source/images/gsoc/about_teem.jpg","hash":"9242acfa73c43a9ffdd07d297f014c16206c9053","modified":1476049474000},{"_id":"source/images/gsoc/matchmaking.jpg","hash":"ccbc8ee05bf7932e8b134d3d74ee18d749ed1dc9","modified":1476060143000},{"_id":"source/images/gsoc/intro2.jpg","hash":"2d04883b668d396e097545fa3d39d49ecc08c3ef","modified":1476016658000},{"_id":"source/images/betterbutter/hiring.jpg","hash":"7d0311ded138c6c4b82af1e48eefb95e9ec08ef2","modified":1474118895000},{"_id":"source/images/betterbutter/posters.jpg","hash":"bdf07575b103c70b9d64583a00657c037af4de58","modified":1474141484000},{"_id":"source/images/gsoc/intro.jpg","hash":"03c7844bea93bfe7be51cd569dd59b571b189b00","modified":1476016032000},{"_id":"source/images/WUX/final.jpg","hash":"306a2f25b7045ca3102a5bf1b81913c1bb00be05","modified":1484327722000},{"_id":"source/images/betterbutter/contest.jpg","hash":"e8aa3d86602838373e1365a43df390d03891e082","modified":1474146292000},{"_id":"source/images/cambuzz/webapp.jpg","hash":"427d594ec811a27c2a831965c7dd0f50d4875ac7","modified":1473947928000},{"_id":"source/images/gsoc/collabview.jpg","hash":"fdf1a7e9e08d9b5eaff412162a7872056e70e37d","modified":1476052718000},{"_id":"source/images/betterbutter/combined_improvements.jpg","hash":"2d130504d9745f8e3f5b9f240fc95c0125789f14","modified":1476107544000},{"_id":"source/images/cambuzz/problems.jpg","hash":"b8e8e87f8212125353ea014de4b86e134e80df14","modified":1473942498000},{"_id":"source/images/gsoc/matchmaking_mocks.jpg","hash":"e14b9e0d4ef4464c3e923ae85ee2d6435e8082c8","modified":1476096192000},{"_id":"source/images/speaking/pycon/3.jpg","hash":"e8f369ef8d2eae556b9f2a43408233543d21480d","modified":1474870543000},{"_id":"source/images/betterbutter/Welcome Email(Fresh_Everything).jpg","hash":"5e5bb947ac79270200e8030d4c85441d4e6005e8","modified":1474144506000},{"_id":"source/images/cambuzz/lo_fi_mobile.jpg","hash":"c47f64b91c3ece7273d1756dc6bd50bcb60a3aee","modified":1474054533000},{"_id":"source/images/cambuzz/mobile.jpg","hash":"59f17b45f332a075bf402e8ed2d5ff63825cda77","modified":1474055349000},{"_id":"source/images/cambuzz/posters.jpg","hash":"89a949ce788e1d59818651193fab67b2bbaeadb2","modified":1484113697000},{"_id":"source/images/speaking/pycon/2.jpg","hash":"8e296bc6a3b47946fbe77d331641aed42e3ede54","modified":1474870470000},{"_id":"source/images/betterbutter/cover_detail.png","hash":"df5e187c1e692aa6d7ddb0d7e9c9b15723a601a5","modified":1474114451000},{"_id":"source/images/betterbutter/recipe.jpg","hash":"e6a5272d6f28d603f256c75318ede7a56521afd6","modified":1474124432000},{"_id":"source/images/speaking/pycon/6.jpg","hash":"1dbbac2c04c28f6fbf96fa3071dd2205dbad2773","modified":1474870560000},{"_id":"source/images/WUX/poster.jpg","hash":"3cea8fe72f937a0b5f24abfb6e8c10a82e38ce78","modified":1474416923000},{"_id":"source/images/cambuzz/lo_fi_webapp.jpg","hash":"a4fcec09a8c9ce23f0c76c0471b860566dc5480c","modified":1474053800000},{"_id":"source/images/WUX/affinitywall.jpg","hash":"73dbfd0b9787a32f0f30956beac98ea05217af61","modified":1484120498000},{"_id":"source/_posts/dataviz.md","hash":"ef36ce0712fb5c65184930b0167389984f7afbfb","modified":1501329931000},{"_id":"themes/phantom/source/js/jquery.image-fit-window.js","hash":"d875590aed90489599cc2fdee8c43b0b066c6a4b","modified":1501340353000}],"Category":[],"Data":[],"Page":[{"title":"About","_content":"\n<style>\n\nblockquote p{\n\tmargin: 0;\n}\n\n</style>\n\n<span class =\"image main\">\n\t<img src=\"/images/about_avatar.jpg\" alt=\"\">\n</span>\n\n<p>\n\tI'm a 20 year-old product designer and front-end engineer studying computer science at Vellore Institute of Technology, India. Born and brought up in Delhi, my high school and undergrad have been a cultural roller coaster. \n</p>\n<p>\n\tAs a child I loved tinkering with computers. As I progressed through high school, I realized I really liked beautifully designed things. My occasional hobby, when I sat in the backseat of my father's car, was to either spot new cars (well designed) and tell my parents about them excitedly, or notice billboards and comment on the design intricacies. I felt really proud when I started making PowerPoint presentations look really neat and minimalistic, and sometimes they turned out to better than the content of the PowerPoint. That time, I wanted to prove myself to my friends so one thing led to another, and armed with a pirated copy of Adobe Creative Suite, I started learning design.\n</p>\n\n<p>\n\tAt VIT, I realized that design is my calling and this is something I want to take up as a career. <br>\n\tQuestions were raised by family and friends such as:\n\t<ul>\n\t\t<li>\n\t\t\t<i>\"We wasted so much money for your computer science education, and you want to do design?\" </i>\n\t\t</li>\n\t\t<li>\n\t\t\t<i>\"Does Indian market even have jobs in design?\"</i>\n\t\t</li>\n\t\t<li>\n\t\t\t<i>\"Design is for girls!\"</i>\n\t\t</li>\n\t</ul>\n\n\tSaddened by this mentality coming from my closest, I decided to pursue design independently under the confines of my computer science major. I realized that my background in computer science made designing for Internet much more interesting and practical. After that I went onto do a couple of internships: all at the intersection of design and technology, spoke at various events and conferences and became much more confident in my abilities as a designer. Though I lack formal design education, I try to compensate them with dev skills. \n</p>\n\n<p>\nIf you'd like to take a look, here's my <a href=\"https://drive.google.com/file/d/0B2cR2veLdnt3N2JWUWxPaWRld3c/view?usp=sharing\" target=\"_blank\">rsum</a>. I write about design, entrepreneurship and hacking your undergrad education on <a href=\"https://www.quora.com/profile/Prastut-Kumar-1\">Quora.</a> I'd love to hear from you, so please do get in touch!\n</p>\n\n<h2>Theme</h2>\n<p>\n\tI am building my portfolio on top of Hexo's implementation of \n\t<a href=\"https://github.com/klugjo/hexo-theme-phantom\" target=\"_blank\">Phantom</a> \n\tby \n\t<a href=\"https://github.com/klugjo\" target=\"_blank\">@klugjo</a>, \n\tthough I have tailored it to suit my needs. I am using Proxima Nova as the primary typeface for headings and content. Fontawesome is being used for icons. \n</p>\n\n<p>\nI moved to this combination because it was more robust and automated, and I was much more comfortable writing posts in Markdown (rather than writing it in clunky HTML). Heavy inspiration is drawn from my old <a href=\"https://prastut.github.io/legacy\" target=\"blank\">portfolio design</a>. \n<h2>Quotes that I believe in</h2>\n\n{% blockquote Aditya Kumar Nayak, - Mentor %}\nI have a thumb rule in my life and that is to play the biggest game possible. Rate of learning is the highest in that case.\n{% endblockquote %}\n\n\n{% blockquote Steve Jobs, - Ex CEO Apple %}\nYou can't connect the dots looking forward; you can only connect them looking backwards. So you have to trust that the dots will somehow connect in your future.\n{% endblockquote %}\n\n{% blockquote Elon Musk, - CEO of Tesla & SpaceX %}\nWhen something is important enough, you do it even if the odds are not in your favor.\n{% endblockquote %}\n\n\n<br><br><br>","source":"about.html","raw":"---\ntitle: About\n---\n\n<style>\n\nblockquote p{\n\tmargin: 0;\n}\n\n</style>\n\n<span class =\"image main\">\n\t<img src=\"/images/about_avatar.jpg\" alt=\"\">\n</span>\n\n<p>\n\tI'm a 20 year-old product designer and front-end engineer studying computer science at Vellore Institute of Technology, India. Born and brought up in Delhi, my high school and undergrad have been a cultural roller coaster. \n</p>\n<p>\n\tAs a child I loved tinkering with computers. As I progressed through high school, I realized I really liked beautifully designed things. My occasional hobby, when I sat in the backseat of my father's car, was to either spot new cars (well designed) and tell my parents about them excitedly, or notice billboards and comment on the design intricacies. I felt really proud when I started making PowerPoint presentations look really neat and minimalistic, and sometimes they turned out to better than the content of the PowerPoint. That time, I wanted to prove myself to my friends so one thing led to another, and armed with a pirated copy of Adobe Creative Suite, I started learning design.\n</p>\n\n<p>\n\tAt VIT, I realized that design is my calling and this is something I want to take up as a career. <br>\n\tQuestions were raised by family and friends such as:\n\t<ul>\n\t\t<li>\n\t\t\t<i>\"We wasted so much money for your computer science education, and you want to do design?\" </i>\n\t\t</li>\n\t\t<li>\n\t\t\t<i>\"Does Indian market even have jobs in design?\"</i>\n\t\t</li>\n\t\t<li>\n\t\t\t<i>\"Design is for girls!\"</i>\n\t\t</li>\n\t</ul>\n\n\tSaddened by this mentality coming from my closest, I decided to pursue design independently under the confines of my computer science major. I realized that my background in computer science made designing for Internet much more interesting and practical. After that I went onto do a couple of internships: all at the intersection of design and technology, spoke at various events and conferences and became much more confident in my abilities as a designer. Though I lack formal design education, I try to compensate them with dev skills. \n</p>\n\n<p>\nIf you'd like to take a look, here's my <a href=\"https://drive.google.com/file/d/0B2cR2veLdnt3N2JWUWxPaWRld3c/view?usp=sharing\" target=\"_blank\">rsum</a>. I write about design, entrepreneurship and hacking your undergrad education on <a href=\"https://www.quora.com/profile/Prastut-Kumar-1\">Quora.</a> I'd love to hear from you, so please do get in touch!\n</p>\n\n<h2>Theme</h2>\n<p>\n\tI am building my portfolio on top of Hexo's implementation of \n\t<a href=\"https://github.com/klugjo/hexo-theme-phantom\" target=\"_blank\">Phantom</a> \n\tby \n\t<a href=\"https://github.com/klugjo\" target=\"_blank\">@klugjo</a>, \n\tthough I have tailored it to suit my needs. I am using Proxima Nova as the primary typeface for headings and content. Fontawesome is being used for icons. \n</p>\n\n<p>\nI moved to this combination because it was more robust and automated, and I was much more comfortable writing posts in Markdown (rather than writing it in clunky HTML). Heavy inspiration is drawn from my old <a href=\"https://prastut.github.io/legacy\" target=\"blank\">portfolio design</a>. \n<h2>Quotes that I believe in</h2>\n\n{% blockquote Aditya Kumar Nayak, - Mentor %}\nI have a thumb rule in my life and that is to play the biggest game possible. Rate of learning is the highest in that case.\n{% endblockquote %}\n\n\n{% blockquote Steve Jobs, - Ex CEO Apple %}\nYou can't connect the dots looking forward; you can only connect them looking backwards. So you have to trust that the dots will somehow connect in your future.\n{% endblockquote %}\n\n{% blockquote Elon Musk, - CEO of Tesla & SpaceX %}\nWhen something is important enough, you do it even if the odds are not in your favor.\n{% endblockquote %}\n\n\n<br><br><br>","date":"2017-06-24T13:46:41.000Z","updated":"2016-10-10T20:43:25.000Z","path":"about.html","comments":1,"layout":"page","_id":"cj5o1vdlb0000rtwyl2xmbuvp","content":"\n<style>\n\nblockquote p{\n\tmargin: 0;\n}\n\n</style>\n\n<span class=\"image main\">\n\t<img src=\"/images/about_avatar.jpg\" alt=\"\">\n</span>\n\n<p>\n\tI'm a 20 year-old product designer and front-end engineer studying computer science at Vellore Institute of Technology, India. Born and brought up in Delhi, my high school and undergrad have been a cultural roller coaster. \n</p>\n<p>\n\tAs a child I loved tinkering with computers. As I progressed through high school, I realized I really liked beautifully designed things. My occasional hobby, when I sat in the backseat of my father's car, was to either spot new cars (well designed) and tell my parents about them excitedly, or notice billboards and comment on the design intricacies. I felt really proud when I started making PowerPoint presentations look really neat and minimalistic, and sometimes they turned out to better than the content of the PowerPoint. That time, I wanted to prove myself to my friends so one thing led to another, and armed with a pirated copy of Adobe Creative Suite, I started learning design.\n</p>\n\n<p>\n\tAt VIT, I realized that design is my calling and this is something I want to take up as a career. <br>\n\tQuestions were raised by family and friends such as:\n\t<ul>\n\t\t<li>\n\t\t\t<i>\"We wasted so much money for your computer science education, and you want to do design?\" </i>\n\t\t</li>\n\t\t<li>\n\t\t\t<i>\"Does Indian market even have jobs in design?\"</i>\n\t\t</li>\n\t\t<li>\n\t\t\t<i>\"Design is for girls!\"</i>\n\t\t</li>\n\t</ul>\n\n\tSaddened by this mentality coming from my closest, I decided to pursue design independently under the confines of my computer science major. I realized that my background in computer science made designing for Internet much more interesting and practical. After that I went onto do a couple of internships: all at the intersection of design and technology, spoke at various events and conferences and became much more confident in my abilities as a designer. Though I lack formal design education, I try to compensate them with dev skills. \n</p>\n\n<p>\nIf you'd like to take a look, here's my <a href=\"https://drive.google.com/file/d/0B2cR2veLdnt3N2JWUWxPaWRld3c/view?usp=sharing\" target=\"_blank\">rsum</a>. I write about design, entrepreneurship and hacking your undergrad education on <a href=\"https://www.quora.com/profile/Prastut-Kumar-1\" target=\"_blank\" rel=\"external\">Quora.</a> I'd love to hear from you, so please do get in touch!\n</p>\n\n<h2>Theme</h2>\n<p>\n\tI am building my portfolio on top of Hexo's implementation of \n\t<a href=\"https://github.com/klugjo/hexo-theme-phantom\" target=\"_blank\">Phantom</a> \n\tby \n\t<a href=\"https://github.com/klugjo\" target=\"_blank\">@klugjo</a>, \n\tthough I have tailored it to suit my needs. I am using Proxima Nova as the primary typeface for headings and content. Fontawesome is being used for icons. \n</p>\n\n<p>\nI moved to this combination because it was more robust and automated, and I was much more comfortable writing posts in Markdown (rather than writing it in clunky HTML). Heavy inspiration is drawn from my old <a href=\"https://prastut.github.io/legacy\" target=\"blank\">portfolio design</a>. \n</p><h2>Quotes that I believe in</h2>\n\n<blockquote><p>I have a thumb rule in my life and that is to play the biggest game possible. Rate of learning is the highest in that case.</p>\n<footer><strong>Aditya Kumar Nayak</strong><cite>- Mentor</cite></footer></blockquote>\n\n\n<blockquote><p>You cant connect the dots looking forward; you can only connect them looking backwards. So you have to trust that the dots will somehow connect in your future.</p>\n<footer><strong>Steve Jobs</strong><cite>- Ex CEO Apple</cite></footer></blockquote>\n\n<blockquote><p>When something is important enough, you do it even if the odds are not in your favor.</p>\n<footer><strong>Elon Musk</strong><cite>- CEO of Tesla & SpaceX</cite></footer></blockquote>\n\n\n<br><br><br>","site":{"data":{}},"excerpt":"","more":"\n<style>\n\nblockquote p{\n\tmargin: 0;\n}\n\n</style>\n\n<span class=\"image main\">\n\t<img src=\"/images/about_avatar.jpg\" alt=\"\">\n</span>\n\n<p>\n\tI'm a 20 year-old product designer and front-end engineer studying computer science at Vellore Institute of Technology, India. Born and brought up in Delhi, my high school and undergrad have been a cultural roller coaster. \n</p>\n<p>\n\tAs a child I loved tinkering with computers. As I progressed through high school, I realized I really liked beautifully designed things. My occasional hobby, when I sat in the backseat of my father's car, was to either spot new cars (well designed) and tell my parents about them excitedly, or notice billboards and comment on the design intricacies. I felt really proud when I started making PowerPoint presentations look really neat and minimalistic, and sometimes they turned out to better than the content of the PowerPoint. That time, I wanted to prove myself to my friends so one thing led to another, and armed with a pirated copy of Adobe Creative Suite, I started learning design.\n</p>\n\n<p>\n\tAt VIT, I realized that design is my calling and this is something I want to take up as a career. <br>\n\tQuestions were raised by family and friends such as:\n\t<ul>\n\t\t<li>\n\t\t\t<i>\"We wasted so much money for your computer science education, and you want to do design?\" </i>\n\t\t</li>\n\t\t<li>\n\t\t\t<i>\"Does Indian market even have jobs in design?\"</i>\n\t\t</li>\n\t\t<li>\n\t\t\t<i>\"Design is for girls!\"</i>\n\t\t</li>\n\t</ul>\n\n\tSaddened by this mentality coming from my closest, I decided to pursue design independently under the confines of my computer science major. I realized that my background in computer science made designing for Internet much more interesting and practical. After that I went onto do a couple of internships: all at the intersection of design and technology, spoke at various events and conferences and became much more confident in my abilities as a designer. Though I lack formal design education, I try to compensate them with dev skills. \n</p>\n\n<p>\nIf you'd like to take a look, here's my <a href=\"https://drive.google.com/file/d/0B2cR2veLdnt3N2JWUWxPaWRld3c/view?usp=sharing\" target=\"_blank\">rsum</a>. I write about design, entrepreneurship and hacking your undergrad education on <a href=\"https://www.quora.com/profile/Prastut-Kumar-1\" target=\"_blank\" rel=\"external\">Quora.</a> I'd love to hear from you, so please do get in touch!\n</p>\n\n<h2>Theme</h2>\n<p>\n\tI am building my portfolio on top of Hexo's implementation of \n\t<a href=\"https://github.com/klugjo/hexo-theme-phantom\" target=\"_blank\">Phantom</a> \n\tby \n\t<a href=\"https://github.com/klugjo\" target=\"_blank\">@klugjo</a>, \n\tthough I have tailored it to suit my needs. I am using Proxima Nova as the primary typeface for headings and content. Fontawesome is being used for icons. \n</p>\n\n<p>\nI moved to this combination because it was more robust and automated, and I was much more comfortable writing posts in Markdown (rather than writing it in clunky HTML). Heavy inspiration is drawn from my old <a href=\"https://prastut.github.io/legacy\" target=\"blank\">portfolio design</a>. \n</p><h2>Quotes that I believe in</h2>\n\n<blockquote><p>I have a thumb rule in my life and that is to play the biggest game possible. Rate of learning is the highest in that case.</p>\n<footer><strong>Aditya Kumar Nayak</strong><cite>- Mentor</cite></footer></blockquote>\n\n\n<blockquote><p>You cant connect the dots looking forward; you can only connect them looking backwards. So you have to trust that the dots will somehow connect in your future.</p>\n<footer><strong>Steve Jobs</strong><cite>- Ex CEO Apple</cite></footer></blockquote>\n\n<blockquote><p>When something is important enough, you do it even if the odds are not in your favor.</p>\n<footer><strong>Elon Musk</strong><cite>- CEO of Tesla & SpaceX</cite></footer></blockquote>\n\n\n<br><br><br>"},{"title":"Computer Graphics Lab Compilation","_content":"\n<style>\n\nblockquote p{\n\tmargin: 0;\n}\n\n</style>\n\n<h2>Lab 1</h2>\n<p> This video gives a detailed explanation of our code for 2 player 3X3 Dot Game </p>\n\n\n<div class=\"video-container\">\n\t<iframe src=\"https://www.youtube.com/embed/zi129p_jn1E\" frameborder=\"0\" allowfullscreen></iframe>    \n</div>","source":"cgraphics.html","raw":"---\ntitle: Computer Graphics Lab Compilation \n---\n\n<style>\n\nblockquote p{\n\tmargin: 0;\n}\n\n</style>\n\n<h2>Lab 1</h2>\n<p> This video gives a detailed explanation of our code for 2 player 3X3 Dot Game </p>\n\n\n<div class=\"video-container\">\n\t<iframe src=\"https://www.youtube.com/embed/zi129p_jn1E\" frameborder=\"0\" allowfullscreen></iframe>    \n</div>","date":"2017-06-24T13:46:41.000Z","updated":"2017-01-23T08:23:04.000Z","path":"cgraphics.html","comments":1,"layout":"page","_id":"cj5o1vdld0001rtwyj4rxuhra","content":"\n<style>\n\nblockquote p{\n\tmargin: 0;\n}\n\n</style>\n\n<h2>Lab 1</h2>\n<p> This video gives a detailed explanation of our code for 2 player 3X3 Dot Game </p>\n\n\n<div class=\"video-container\">\n\t<iframe src=\"https://www.youtube.com/embed/zi129p_jn1E\" frameborder=\"0\" allowfullscreen></iframe>    \n</div>","site":{"data":{}},"excerpt":"","more":"\n<style>\n\nblockquote p{\n\tmargin: 0;\n}\n\n</style>\n\n<h2>Lab 1</h2>\n<p> This video gives a detailed explanation of our code for 2 player 3X3 Dot Game </p>\n\n\n<div class=\"video-container\">\n\t<iframe src=\"https://www.youtube.com/embed/zi129p_jn1E\" frameborder=\"0\" allowfullscreen></iframe>    \n</div>"},{"title":"Speaking","gallery":["/images/cambuzz/gallery/party.jpg"],"_content":"\n<style>\n\nblockquote p{\n\tmargin: 0;\n}\n\n</style>\n\n<h2>Imposter Syndrome</h2>\n\n<p>\n\tIn high school, \"imposter sydrome\" or the fear of performing had a very strong grip on me. Therefore I usually resorted to being \"behind the scenes guy\".\n</p>\n\n<p>\n\tI was always intrigued by the art of public speaking and in my freshman year in college, I attended almost every conference that made a little sense to me. Some quotes have stuck with me and I realized why conferences are held in the very first place. Nobody can teach you something in 30 minutes. It's humanly impossible. But what it can do is to be kicked out of your inertia. It is to hear people with years or decades of experience lift the veil on mystery. It is to leave with words burnt into your mind, changing you, and pushing you to do things you would never dare, otherwise.\n\n</p>\n\n{% blockquote%}\nIf you're passionate about your work, then sooner or later you will want to share that passion with others.\n{% endblockquote %}\n\n<p> \n\tI started sharing my experiences and knowledge with my college peers and juniors and gradually overcame my fear for public speaking. Lately, I was fortunate enough to speak at Pycon,  the premier conference in India on using and developing the Python programming language. \n\n</p>\n\n<h2> Speaking at Pycon, 2016 </h2>\n\n<p>\n\tI started using Python 5 months back and when I got selected, I was quite surprised myself. I had to give a talk to an audience who knew more about the language and it's ecosystem than me. Therefore I decided on leaving the technicalities, rather share my experience working with Python through this project and how it had made me come up here all the way from Chennai (the talk was in Delhi). I wanted to share the beauty of Python, that as a even a designer could learn and start hacking onto code. I used the example of my Google Summer of Code project and walked through it, describing the pain points and insights into how to ask for help.  \n</p>\n<p>\n\tThrough the project, I wanted to highlight how NLP (using NLTK toolkit in Python) can help in improving User Experience.\n\t<a href=\"https://docs.google.com/presentation/d/1VLjU2MQnB3GUw7p4z_Q6olFdYoW2q-LTsE8OUFZqrgI/edit?usp=sharing\">Slides.</a>\n</p>\n\n<div class=\"galleria\">\n\t<img src=\"/images/speaking/pycon/1.jpg\">\n\t<img src=\"/images/speaking/pycon/2.jpg\">\n\t<img src=\"/images/speaking/pycon/3.jpg\">\n\t<img src=\"/images/speaking/pycon/4.jpg\">\n\t<img src=\"/images/speaking/pycon/5.jpg\">\n\t<img src=\"/images/speaking/pycon/6.jpg\">\n</div>\n\n<h2> Workshops and Introductory talks</h2>\n\n<p>\n\tFollowing patterns in the success stories of my seniors and on the Internet, I have come to realize that most of the learning happens outside of the classroom. College is only to give you data points eg: if you didn't have an image processing course, you wouldn't get to know that such a field exists. What you do with that data point is upto you. The problem is of distribution of the information or more formally called: information asymmetry. By sharing our experience with juniors, I wanted to restore the imbalance of information so that the playground becomes level.    \n</p>\n<p> \n\tSo along with my group of friends, we organized couple of workshops ranging from the joy of software development to how to growth hack your undergrad dev career in python. \n</p>\n\n<div class=\"galleria\">\n\t<img src=\"/images/speaking/college/1.jpeg\">\n\t<img src=\"/images/speaking/college/2.jpeg\">\n</div>\n\n\n<br><br>","source":"speaking.html","raw":"---\ntitle: Speaking\ngallery:\n- /images/cambuzz/gallery/party.jpg\n\n---\n\n<style>\n\nblockquote p{\n\tmargin: 0;\n}\n\n</style>\n\n<h2>Imposter Syndrome</h2>\n\n<p>\n\tIn high school, \"imposter sydrome\" or the fear of performing had a very strong grip on me. Therefore I usually resorted to being \"behind the scenes guy\".\n</p>\n\n<p>\n\tI was always intrigued by the art of public speaking and in my freshman year in college, I attended almost every conference that made a little sense to me. Some quotes have stuck with me and I realized why conferences are held in the very first place. Nobody can teach you something in 30 minutes. It's humanly impossible. But what it can do is to be kicked out of your inertia. It is to hear people with years or decades of experience lift the veil on mystery. It is to leave with words burnt into your mind, changing you, and pushing you to do things you would never dare, otherwise.\n\n</p>\n\n{% blockquote%}\nIf you're passionate about your work, then sooner or later you will want to share that passion with others.\n{% endblockquote %}\n\n<p> \n\tI started sharing my experiences and knowledge with my college peers and juniors and gradually overcame my fear for public speaking. Lately, I was fortunate enough to speak at Pycon,  the premier conference in India on using and developing the Python programming language. \n\n</p>\n\n<h2> Speaking at Pycon, 2016 </h2>\n\n<p>\n\tI started using Python 5 months back and when I got selected, I was quite surprised myself. I had to give a talk to an audience who knew more about the language and it's ecosystem than me. Therefore I decided on leaving the technicalities, rather share my experience working with Python through this project and how it had made me come up here all the way from Chennai (the talk was in Delhi). I wanted to share the beauty of Python, that as a even a designer could learn and start hacking onto code. I used the example of my Google Summer of Code project and walked through it, describing the pain points and insights into how to ask for help.  \n</p>\n<p>\n\tThrough the project, I wanted to highlight how NLP (using NLTK toolkit in Python) can help in improving User Experience.\n\t<a href=\"https://docs.google.com/presentation/d/1VLjU2MQnB3GUw7p4z_Q6olFdYoW2q-LTsE8OUFZqrgI/edit?usp=sharing\">Slides.</a>\n</p>\n\n<div class=\"galleria\">\n\t<img src=\"/images/speaking/pycon/1.jpg\">\n\t<img src=\"/images/speaking/pycon/2.jpg\">\n\t<img src=\"/images/speaking/pycon/3.jpg\">\n\t<img src=\"/images/speaking/pycon/4.jpg\">\n\t<img src=\"/images/speaking/pycon/5.jpg\">\n\t<img src=\"/images/speaking/pycon/6.jpg\">\n</div>\n\n<h2> Workshops and Introductory talks</h2>\n\n<p>\n\tFollowing patterns in the success stories of my seniors and on the Internet, I have come to realize that most of the learning happens outside of the classroom. College is only to give you data points eg: if you didn't have an image processing course, you wouldn't get to know that such a field exists. What you do with that data point is upto you. The problem is of distribution of the information or more formally called: information asymmetry. By sharing our experience with juniors, I wanted to restore the imbalance of information so that the playground becomes level.    \n</p>\n<p> \n\tSo along with my group of friends, we organized couple of workshops ranging from the joy of software development to how to growth hack your undergrad dev career in python. \n</p>\n\n<div class=\"galleria\">\n\t<img src=\"/images/speaking/college/1.jpeg\">\n\t<img src=\"/images/speaking/college/2.jpeg\">\n</div>\n\n\n<br><br>","date":"2017-06-24T13:46:44.000Z","updated":"2016-10-10T20:37:18.000Z","path":"speaking.html","comments":1,"layout":"page","_id":"cj5o1vdle0002rtwy7cjqlsu7","content":"\n<style>\n\nblockquote p{\n\tmargin: 0;\n}\n\n</style>\n\n<h2>Imposter Syndrome</h2>\n\n<p>\n\tIn high school, \"imposter sydrome\" or the fear of performing had a very strong grip on me. Therefore I usually resorted to being \"behind the scenes guy\".\n</p>\n\n<p>\n\tI was always intrigued by the art of public speaking and in my freshman year in college, I attended almost every conference that made a little sense to me. Some quotes have stuck with me and I realized why conferences are held in the very first place. Nobody can teach you something in 30 minutes. It's humanly impossible. But what it can do is to be kicked out of your inertia. It is to hear people with years or decades of experience lift the veil on mystery. It is to leave with words burnt into your mind, changing you, and pushing you to do things you would never dare, otherwise.\n\n</p>\n\n<blockquote><p>If youre passionate about your work, then sooner or later you will want to share that passion with others.</p>\n</blockquote>\n\n<p> \n\tI started sharing my experiences and knowledge with my college peers and juniors and gradually overcame my fear for public speaking. Lately, I was fortunate enough to speak at Pycon,  the premier conference in India on using and developing the Python programming language. \n\n</p>\n\n<h2> Speaking at Pycon, 2016 </h2>\n\n<p>\n\tI started using Python 5 months back and when I got selected, I was quite surprised myself. I had to give a talk to an audience who knew more about the language and it's ecosystem than me. Therefore I decided on leaving the technicalities, rather share my experience working with Python through this project and how it had made me come up here all the way from Chennai (the talk was in Delhi). I wanted to share the beauty of Python, that as a even a designer could learn and start hacking onto code. I used the example of my Google Summer of Code project and walked through it, describing the pain points and insights into how to ask for help.  \n</p>\n<p>\n\tThrough the project, I wanted to highlight how NLP (using NLTK toolkit in Python) can help in improving User Experience.\n\t<a href=\"https://docs.google.com/presentation/d/1VLjU2MQnB3GUw7p4z_Q6olFdYoW2q-LTsE8OUFZqrgI/edit?usp=sharing\" target=\"_blank\" rel=\"external\">Slides.</a>\n</p>\n\n<div class=\"galleria\">\n\t<img src=\"/images/speaking/pycon/1.jpg\">\n\t<img src=\"/images/speaking/pycon/2.jpg\">\n\t<img src=\"/images/speaking/pycon/3.jpg\">\n\t<img src=\"/images/speaking/pycon/4.jpg\">\n\t<img src=\"/images/speaking/pycon/5.jpg\">\n\t<img src=\"/images/speaking/pycon/6.jpg\">\n</div>\n\n<h2> Workshops and Introductory talks</h2>\n\n<p>\n\tFollowing patterns in the success stories of my seniors and on the Internet, I have come to realize that most of the learning happens outside of the classroom. College is only to give you data points eg: if you didn't have an image processing course, you wouldn't get to know that such a field exists. What you do with that data point is upto you. The problem is of distribution of the information or more formally called: information asymmetry. By sharing our experience with juniors, I wanted to restore the imbalance of information so that the playground becomes level.    \n</p>\n<p> \n\tSo along with my group of friends, we organized couple of workshops ranging from the joy of software development to how to growth hack your undergrad dev career in python. \n</p>\n\n<div class=\"galleria\">\n\t<img src=\"/images/speaking/college/1.jpeg\">\n\t<img src=\"/images/speaking/college/2.jpeg\">\n</div>\n\n\n<br><br>","site":{"data":{}},"excerpt":"","more":"\n<style>\n\nblockquote p{\n\tmargin: 0;\n}\n\n</style>\n\n<h2>Imposter Syndrome</h2>\n\n<p>\n\tIn high school, \"imposter sydrome\" or the fear of performing had a very strong grip on me. Therefore I usually resorted to being \"behind the scenes guy\".\n</p>\n\n<p>\n\tI was always intrigued by the art of public speaking and in my freshman year in college, I attended almost every conference that made a little sense to me. Some quotes have stuck with me and I realized why conferences are held in the very first place. Nobody can teach you something in 30 minutes. It's humanly impossible. But what it can do is to be kicked out of your inertia. It is to hear people with years or decades of experience lift the veil on mystery. It is to leave with words burnt into your mind, changing you, and pushing you to do things you would never dare, otherwise.\n\n</p>\n\n<blockquote><p>If youre passionate about your work, then sooner or later you will want to share that passion with others.</p>\n</blockquote>\n\n<p> \n\tI started sharing my experiences and knowledge with my college peers and juniors and gradually overcame my fear for public speaking. Lately, I was fortunate enough to speak at Pycon,  the premier conference in India on using and developing the Python programming language. \n\n</p>\n\n<h2> Speaking at Pycon, 2016 </h2>\n\n<p>\n\tI started using Python 5 months back and when I got selected, I was quite surprised myself. I had to give a talk to an audience who knew more about the language and it's ecosystem than me. Therefore I decided on leaving the technicalities, rather share my experience working with Python through this project and how it had made me come up here all the way from Chennai (the talk was in Delhi). I wanted to share the beauty of Python, that as a even a designer could learn and start hacking onto code. I used the example of my Google Summer of Code project and walked through it, describing the pain points and insights into how to ask for help.  \n</p>\n<p>\n\tThrough the project, I wanted to highlight how NLP (using NLTK toolkit in Python) can help in improving User Experience.\n\t<a href=\"https://docs.google.com/presentation/d/1VLjU2MQnB3GUw7p4z_Q6olFdYoW2q-LTsE8OUFZqrgI/edit?usp=sharing\" target=\"_blank\" rel=\"external\">Slides.</a>\n</p>\n\n<div class=\"galleria\">\n\t<img src=\"/images/speaking/pycon/1.jpg\">\n\t<img src=\"/images/speaking/pycon/2.jpg\">\n\t<img src=\"/images/speaking/pycon/3.jpg\">\n\t<img src=\"/images/speaking/pycon/4.jpg\">\n\t<img src=\"/images/speaking/pycon/5.jpg\">\n\t<img src=\"/images/speaking/pycon/6.jpg\">\n</div>\n\n<h2> Workshops and Introductory talks</h2>\n\n<p>\n\tFollowing patterns in the success stories of my seniors and on the Internet, I have come to realize that most of the learning happens outside of the classroom. College is only to give you data points eg: if you didn't have an image processing course, you wouldn't get to know that such a field exists. What you do with that data point is upto you. The problem is of distribution of the information or more formally called: information asymmetry. By sharing our experience with juniors, I wanted to restore the imbalance of information so that the playground becomes level.    \n</p>\n<p> \n\tSo along with my group of friends, we organized couple of workshops ranging from the joy of software development to how to growth hack your undergrad dev career in python. \n</p>\n\n<div class=\"galleria\">\n\t<img src=\"/images/speaking/college/1.jpeg\">\n\t<img src=\"/images/speaking/college/2.jpeg\">\n</div>\n\n\n<br><br>"},{"_content":"!function(t,e,i,n){var a=e.document,o=t(a),r=t(e),s=Array.prototype,c=1.44,l=!0,h=3e4,u=!1,d=navigator.userAgent.toLowerCase(),p=e.location.hash.replace(/#\\//,\"\"),f=\"file:\"==e.location.protocol?\"http:\":e.location.protocol,g=Math,m=function(){},v=function(){return!1},y=function(){var t=3,e=a.createElement(\"div\"),i=e.getElementsByTagName(\"i\");do e.innerHTML=\"<!--[if gt IE \"+ ++t+\"]><i></i><![endif]-->\";while(i[0]);return t>4?t:a.documentMode||n}(),_=function(){return{html:a.documentElement,body:a.body,head:a.getElementsByTagName(\"head\")[0],title:a.title}},b=e.parent!==e.self,w=\"data ready thumbnail loadstart loadfinish image play pause progress fullscreen_enter fullscreen_exit idle_enter idle_exit rescale lightbox_open lightbox_close lightbox_image\",x=function(){var e=[];return t.each(w.split(\" \"),function(t,i){e.push(i),/_/.test(i)&&e.push(i.replace(/_/g,\"\"))}),e}(),T=function(e){var i;return\"object\"!=typeof e?e:(t.each(e,function(n,a){/^[a-z]+_/.test(n)&&(i=\"\",t.each(n.split(\"_\"),function(t,e){i+=t>0?e.substr(0,1).toUpperCase()+e.substr(1):e}),e[i]=a,delete e[n])}),e)},k=function(e){return t.inArray(e,x)>-1?i[e.toUpperCase()]:e},C={youtube:{reg:/https?:\\/\\/(?:[a-zA_Z]{2,3}.)?(?:youtube\\.com\\/watch\\?)((?:[\\w\\d\\-\\_\\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\\-\\_]+))/i,embed:function(){return f+\"//www.youtube.com/embed/\"+this.id},get_thumb:function(t){return f+\"//img.youtube.com/vi/\"+this.id+\"/default.jpg\"},get_image:function(t){return f+\"//img.youtube.com/vi/\"+this.id+\"/hqdefault.jpg\"}},vimeo:{reg:/https?:\\/\\/(?:www\\.)?(vimeo\\.com)\\/(?:hd#)?([0-9]+)/i,embed:function(){return f+\"//player.vimeo.com/video/\"+this.id},getUrl:function(){return f+\"//vimeo.com/api/v2/video/\"+this.id+\".json?callback=?\"},get_thumb:function(t){return t[0].thumbnail_medium},get_image:function(t){return t[0].thumbnail_large}},dailymotion:{reg:/https?:\\/\\/(?:www\\.)?(dailymotion\\.com)\\/video\\/([^_]+)/,embed:function(){return f+\"//www.dailymotion.com/embed/video/\"+this.id},getUrl:function(){return\"https://api.dailymotion.com/video/\"+this.id+\"?fields=thumbnail_240_url,thumbnail_720_url&callback=?\"},get_thumb:function(t){return t.thumbnail_240_url},get_image:function(t){return t.thumbnail_720_url}},_inst:[]},I=function(i,n){for(var a=0;a<C._inst.length;a++)if(C._inst[a].id===n&&C._inst[a].type==i)return C._inst[a];this.type=i,this.id=n,this.readys=[],C._inst.push(this);var o=this;t.extend(this,C[i]),_videoThumbs=function(e){o.data=e,t.each(o.readys,function(t,e){e(o.data)}),o.readys=[]},this.hasOwnProperty(\"getUrl\")?t.getJSON(this.getUrl(),_videoThumbs):e.setTimeout(_videoThumbs,400),this.getMedia=function(t,e,i){i=i||m;var n=this,a=function(i){e(n[\"get_\"+t](i))};try{n.data?a(n.data):n.readys.push(a)}catch(t){i()}}},S=function(t){var e;for(var i in C)if(e=t&&C[i].reg&&t.match(C[i].reg),e&&e.length)return{id:e[2],provider:i};return!1},A={support:function(){var t=_().html;return!b&&(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen)}(),callback:m,enter:function(t,e,i){this.instance=t,this.callback=e||m,i=i||_().html,i.requestFullscreen?i.requestFullscreen():i.msRequestFullscreen?i.msRequestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullScreen&&i.webkitRequestFullScreen()},exit:function(t){this.callback=t||m,a.exitFullscreen?a.exitFullscreen():a.msExitFullscreen?a.msExitFullscreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.webkitCancelFullScreen&&a.webkitCancelFullScreen()},instance:null,listen:function(){if(this.support){var t=function(){if(A.instance){var t=A.instance._fullscreen;a.fullscreen||a.mozFullScreen||a.webkitIsFullScreen||a.msFullscreenElement&&null!==a.msFullscreenElement?t._enter(A.callback):t._exit(A.callback)}};a.addEventListener(\"fullscreenchange\",t,!1),a.addEventListener(\"MSFullscreenChange\",t,!1),a.addEventListener(\"mozfullscreenchange\",t,!1),a.addEventListener(\"webkitfullscreenchange\",t,!1)}}},E=[],D=[],L=!1,$=!1,P=[],z=[],F=function(e){z.push(e),t.each(P,function(t,i){i._options.theme!=e.name&&(i._initialized||i._options.theme)||(i.theme=e,i._init.call(i))})},H=function(){return{clearTimer:function(e){t.each(i.get(),function(){this.clearTimer(e)})},addTimer:function(e){t.each(i.get(),function(){this.addTimer(e)})},array:function(t){return s.slice.call(t,0)},create:function(t,e){e=e||\"div\";var i=a.createElement(e);return i.className=t,i},removeFromArray:function(e,i){return t.each(e,function(t,n){if(n==i)return e.splice(t,1),!1}),e},getScriptPath:function(e){e=e||t(\"script:last\").attr(\"src\");var i=e.split(\"/\");return 1==i.length?\"\":(i.pop(),i.join(\"/\")+\"/\")},animate:function(){var n,o,r,s,c,l,h,u=function(t){var i,n=\"transition WebkitTransition MozTransition OTransition\".split(\" \");if(e.opera)return!1;for(i=0;n[i];i++)if(\"undefined\"!=typeof t[n[i]])return n[i];return!1}((a.body||a.documentElement).style),d={MozTransition:\"transitionend\",OTransition:\"oTransitionEnd\",WebkitTransition:\"webkitTransitionEnd\",transition:\"transitionend\"}[u],p={_default:[.25,.1,.25,1],galleria:[.645,.045,.355,1],galleriaIn:[.55,.085,.68,.53],galleriaOut:[.25,.46,.45,.94],ease:[.25,0,.25,1],linear:[.25,.25,.75,.75],\"ease-in\":[.42,0,1,1],\"ease-out\":[0,0,.58,1],\"ease-in-out\":[.42,0,.58,1]},f=function(e,i,n){var a={};n=n||\"transition\",t.each(\"webkit moz ms o\".split(\" \"),function(){a[\"-\"+this+\"-\"+n]=i}),e.css(a)},g=function(t){f(t,\"none\",\"transition\"),i.WEBKIT&&i.TOUCH&&(f(t,\"translate3d(0,0,0)\",\"transform\"),t.data(\"revert\")&&(t.css(t.data(\"revert\")),t.data(\"revert\",null)))};return function(a,v,y){return y=t.extend({duration:400,complete:m,stop:!1},y),a=t(a),y.duration?u?(y.stop&&(a.off(d),g(a)),n=!1,t.each(v,function(t,e){h=a.css(t),H.parseValue(h)!=H.parseValue(e)&&(n=!0),a.css(t,h)}),n?(o=[],r=y.easing in p?p[y.easing]:p._default,s=\" \"+y.duration+\"ms cubic-bezier(\"+r.join(\",\")+\")\",void e.setTimeout(function(e,n,a,r){return function(){e.one(n,function(t){return function(){g(t),y.complete.call(t[0])}}(e)),i.WEBKIT&&i.TOUCH&&(c={},l=[0,0,0],t.each([\"left\",\"top\"],function(t,i){i in a&&(l[t]=H.parseValue(a[i])-H.parseValue(e.css(i))+\"px\",c[i]=a[i],delete a[i])}),(l[0]||l[1])&&(e.data(\"revert\",c),o.push(\"-webkit-transform\"+r),f(e,\"translate3d(\"+l.join(\",\")+\")\",\"transform\"))),t.each(a,function(t,e){o.push(t+r)}),f(e,o.join(\",\")),e.css(a)}}(a,d,v,s),2)):void e.setTimeout(function(){y.complete.call(a[0])},y.duration)):void a.animate(v,y):(a.css(v),void y.complete.call(a[0]))}}(),removeAlpha:function(t){if(t instanceof jQuery&&(t=t[0]),y<9&&t){var e=t.style,i=t.currentStyle,n=i&&i.filter||e.filter||\"\";/alpha/.test(n)&&(e.filter=n.replace(/alpha\\([^)]*\\)/i,\"\"))}},forceStyles:function(e,i){e=t(e),e.attr(\"style\")&&e.data(\"styles\",e.attr(\"style\")).removeAttr(\"style\"),e.css(i)},revertStyles:function(){t.each(H.array(arguments),function(e,i){i=t(i),i.removeAttr(\"style\"),i.attr(\"style\",\"\"),i.data(\"styles\")&&i.attr(\"style\",i.data(\"styles\")).data(\"styles\",null)})},moveOut:function(t){H.forceStyles(t,{position:\"absolute\",left:-1e4})},moveIn:function(){H.revertStyles.apply(H,H.array(arguments))},hide:function(e,i,n){n=n||m;var a=t(e);e=a[0],a.data(\"opacity\")||a.data(\"opacity\",a.css(\"opacity\"));var o={opacity:0};if(i){var r=y<9&&e?function(){H.removeAlpha(e),e.style.visibility=\"hidden\",n.call(e)}:n;H.animate(e,o,{duration:i,complete:r,stop:!0})}else y<9&&e?(H.removeAlpha(e),e.style.visibility=\"hidden\"):a.css(o)},show:function(e,i,n){n=n||m;var a=t(e);e=a[0];var o=parseFloat(a.data(\"opacity\"))||1,r={opacity:o};if(i){y<9&&(a.css(\"opacity\",0),e.style.visibility=\"visible\");var s=y<9&&e?function(){1==r.opacity&&H.removeAlpha(e),n.call(e)}:n;H.animate(e,r,{duration:i,complete:s,stop:!0})}else y<9&&1==r.opacity&&e?(H.removeAlpha(e),e.style.visibility=\"visible\"):a.css(r)},wait:function(n){i._waiters=i._waiters||[],n=t.extend({until:v,success:m,error:function(){i.raise(\"Could not complete wait function.\")},timeout:3e3},n);var a,o,r,s=H.timestamp(),c=function(){return o=H.timestamp(),a=o-s,H.removeFromArray(i._waiters,r),n.until(a)?(n.success(),!1):\"number\"==typeof n.timeout&&o>=s+n.timeout?(n.error(),!1):void i._waiters.push(r=e.setTimeout(c,10))};i._waiters.push(r=e.setTimeout(c,10))},toggleQuality:function(t,e){7!==y&&8!==y||!t||\"IMG\"!=t.nodeName.toUpperCase()||(\"undefined\"==typeof e&&(e=\"nearest-neighbor\"===t.style.msInterpolationMode),t.style.msInterpolationMode=e?\"bicubic\":\"nearest-neighbor\")},insertStyleTag:function(e,i){if(!i||!t(\"#\"+i).length){var n=a.createElement(\"style\");if(i&&(n.id=i),_().head.appendChild(n),n.styleSheet)n.styleSheet.cssText=e;else{var o=a.createTextNode(e);n.appendChild(o)}}},loadScript:function(e,i){var n=!1,a=t(\"<script>\").attr({src:e,async:!0}).get(0);a.onload=a.onreadystatechange=function(){n||this.readyState&&\"loaded\"!==this.readyState&&\"complete\"!==this.readyState||(n=!0,a.onload=a.onreadystatechange=null,\"function\"==typeof i&&i.call(this,this))},_().head.appendChild(a)},parseValue:function(t){if(\"number\"==typeof t)return t;if(\"string\"==typeof t){var e=t.match(/\\-?\\d|\\./g);return e&&e.constructor===Array?1*e.join(\"\"):0}return 0},timestamp:function(){return(new Date).getTime()},loadCSS:function(e,o,r){var s,c;if(t(\"link[rel=stylesheet]\").each(function(){if(new RegExp(e).test(this.href))return s=this,!1}),\"function\"==typeof o&&(r=o,o=n),r=r||m,s)return r.call(s,s),s;if(c=a.styleSheets.length,t(\"#\"+o).length)t(\"#\"+o).attr(\"href\",e),c--;else{s=t(\"<link>\").attr({rel:\"stylesheet\",href:e,id:o}).get(0);var l=t('link[rel=\"stylesheet\"], style');if(l.length?l.get(0).parentNode.insertBefore(s,l[0]):_().head.appendChild(s),y&&c>=31)return void i.raise(\"You have reached the browser stylesheet limit (31)\",!0)}if(\"function\"==typeof r){var h=t(\"<s>\").attr(\"id\",\"galleria-loader\").hide().appendTo(_().body);H.wait({until:function(){return 1==h.height()},success:function(){h.remove(),r.call(s,s)},error:function(){h.remove(),i.raise(\"Theme CSS could not load after 20 sec. \"+(i.QUIRK?\"Your browser is in Quirks Mode, please add a correct doctype.\":\"Please download the latest theme at http://galleria.io/customer/.\"),!0)},timeout:5e3})}return s}}}(),O=function(e){var i=\".galleria-videoicon{width:60px;height:60px;position:absolute;top:50%;left:50%;z-index:1;margin:-30px 0 0 -30px;cursor:pointer;background:#000;background:rgba(0,0,0,.8);border-radius:3px;-webkit-transition:all 150ms}.galleria-videoicon i{width:0px;height:0px;border-style:solid;border-width:10px 0 10px 16px;display:block;border-color:transparent transparent transparent #ffffff;margin:20px 0 0 22px}.galleria-image:hover .galleria-videoicon{background:#000}\";return H.insertStyleTag(i,\"galleria-videoicon\"),t(H.create(\"galleria-videoicon\")).html(\"<i></i>\").appendTo(e).click(function(){t(this).siblings(\"img\").mouseup()})},M=function(){var e=function(e,i,n,a){var o=this.getOptions(\"easing\"),r=this.getStageWidth(),s={left:r*(e.rewind?-1:1)},c={left:0};n?(s.opacity=0,c.opacity=1):s.opacity=1,t(e.next).css(s),H.animate(e.next,c,{duration:e.speed,complete:function(t){return function(){i(),t.css({left:0})}}(t(e.next).add(e.prev)),queue:!1,easing:o}),a&&(e.rewind=!e.rewind),e.prev&&(s={left:0},c={left:r*(e.rewind?1:-1)},n&&(s.opacity=1,c.opacity=0),t(e.prev).css(s),H.animate(e.prev,c,{duration:e.speed,queue:!1,easing:o,complete:function(){t(this).css(\"opacity\",0)}}))};return{active:!1,init:function(t,e,i){M.effects.hasOwnProperty(t)&&M.effects[t].call(this,e,i)},effects:{fade:function(e,i){t(e.next).css({opacity:0,left:0}),H.animate(e.next,{opacity:1},{duration:e.speed,complete:i}),e.prev&&(t(e.prev).css(\"opacity\",1).show(),H.animate(e.prev,{opacity:0},{duration:e.speed}))},flash:function(e,i){t(e.next).css({opacity:0,left:0}),e.prev?H.animate(e.prev,{opacity:0},{duration:e.speed/2,complete:function(){H.animate(e.next,{opacity:1},{duration:e.speed,complete:i})}}):H.animate(e.next,{opacity:1},{duration:e.speed,complete:i})},pulse:function(e,i){e.prev&&t(e.prev).hide(),t(e.next).css({opacity:0,left:0}).show(),H.animate(e.next,{opacity:1},{duration:e.speed,complete:i})},slide:function(t,i){e.apply(this,H.array(arguments))},fadeslide:function(t,i){e.apply(this,H.array(arguments).concat([!0]))},doorslide:function(t,i){e.apply(this,H.array(arguments).concat([!1,!0]))}}}}();A.listen(),t.event.special[\"click:fast\"]={propagate:!0,add:function(i){var n=function(t){if(t.touches&&t.touches.length){var e=t.touches[0];return{x:e.pageX,y:e.pageY}}},a={touched:!1,touchdown:!1,coords:{x:0,y:0},evObj:{}};t(this).data({clickstate:a,timer:0}).on(\"touchstart.fast\",function(i){e.clearTimeout(t(this).data(\"timer\")),t(this).data(\"clickstate\",{touched:!0,touchdown:!0,coords:n(i.originalEvent),evObj:i})}).on(\"touchmove.fast\",function(e){var i=n(e.originalEvent),a=t(this).data(\"clickstate\"),o=Math.max(Math.abs(a.coords.x-i.x),Math.abs(a.coords.y-i.y));o>6&&t(this).data(\"clickstate\",t.extend(a,{touchdown:!1}))}).on(\"touchend.fast\",function(n){var o=t(this),r=o.data(\"clickstate\");r.touchdown&&i.handler.call(this,n),o.data(\"timer\",e.setTimeout(function(){o.data(\"clickstate\",a)},400))}).on(\"click.fast\",function(e){var n=t(this).data(\"clickstate\");return!n.touched&&(t(this).data(\"clickstate\",a),void i.handler.call(this,e))})},remove:function(){t(this).off(\"touchstart.fast touchmove.fast touchend.fast click.fast\")}},r.on(\"orientationchange\",function(){t(this).resize()}),i=function(){var s=this;this._options={},this._playing=!1,this._playtime=5e3,this._active=null,this._queue={length:0},this._data=[],this._dom={},this._thumbnails=[],this._layers=[],this._initialized=!1,this._firstrun=!1,this._stageWidth=0,this._stageHeight=0,this._target=n,this._binds=[],this._id=parseInt(1e4*g.random(),10);var c=\"container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip\",l=\"current total\";t.each(c.split(\" \"),function(t,e){s._dom[e]=H.create(\"galleria-\"+e)}),t.each(l.split(\" \"),function(t,e){s._dom[e]=H.create(\"galleria-\"+e,\"span\")});var h=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(t){var e=t.keyCode||t.which;e in h.map&&\"function\"==typeof h.map[e]&&h.map[e].call(s,t)},attach:function(t){var e,i;for(e in t)t.hasOwnProperty(e)&&(i=e.toUpperCase(),i in h.keys?h.map[h.keys[i]]=t[e]:h.map[i]=t[e]);h.bound||(h.bound=!0,o.on(\"keydown\",h.press))},detach:function(){h.bound=!1,h.map={},o.off(\"keydown\",h.press)}},u=this._controls={0:n,1:n,active:0,swap:function(){u.active=u.active?0:1},getActive:function(){return s._options.swipe?u.slides[s._active]:u[u.active]},getNext:function(){return s._options.swipe?u.slides[s.getNext(s._active)]:u[1-u.active]},slides:[],frames:[],layers:[]},p=this._carousel={next:s.$(\"thumb-nav-right\"),prev:s.$(\"thumb-nav-left\"),width:0,current:0,max:0,hooks:[],update:function(){var e=0,i=0,n=[0];t.each(s._thumbnails,function(a,o){if(o.ready){e+=o.outerWidth||t(o.container).outerWidth(!0);var r=t(o.container).width();e+=r-g.floor(r),n[a+1]=e,i=g.max(i,o.outerHeight||t(o.container).outerHeight(!0))}}),s.$(\"thumbnails\").css({width:e,height:i}),p.max=e,p.hooks=n,p.width=s.$(\"thumbnails-list\").width(),p.setClasses(),s.$(\"thumbnails-container\").toggleClass(\"galleria-carousel\",e>p.width),p.width=s.$(\"thumbnails-list\").width()},bindControls:function(){var t;p.next.on(\"click:fast\",function(e){if(e.preventDefault(),\"auto\"===s._options.carouselSteps){for(t=p.current;t<p.hooks.length;t++)if(p.hooks[t]-p.hooks[p.current]>p.width){p.set(t-2);break}}else p.set(p.current+s._options.carouselSteps)}),p.prev.on(\"click:fast\",function(e){if(e.preventDefault(),\"auto\"===s._options.carouselSteps)for(t=p.current;t>=0;t--){if(p.hooks[p.current]-p.hooks[t]>p.width){p.set(t+2);break}if(0===t){p.set(0);break}}else p.set(p.current-s._options.carouselSteps)})},set:function(t){for(t=g.max(t,0);p.hooks[t-1]+p.width>=p.max&&t>=0;)t--;p.current=t,p.animate()},getLast:function(t){return(t||p.current)-1},follow:function(t){if(0===t||t===p.hooks.length-2)return void p.set(t);for(var e=p.current;p.hooks[e]-p.hooks[p.current]<p.width&&e<=p.hooks.length;)e++;t-1<p.current?p.set(t-1):t+2>e&&p.set(t-e+p.current+2)},setClasses:function(){p.prev.toggleClass(\"disabled\",!p.current),p.next.toggleClass(\"disabled\",p.hooks[p.current]+p.width>=p.max)},animate:function(e){p.setClasses();var i=p.hooks[p.current]*-1;isNaN(i)||(s.$(\"thumbnails\").css(\"left\",function(){return t(this).css(\"left\")}),H.animate(s.get(\"thumbnails\"),{left:i},{duration:s._options.carouselSpeed,easing:s._options.easing,queue:!1}))}},f=this._tooltip={initialized:!1,open:!1,timer:\"tooltip\"+s._id,swapTimer:\"swap\"+s._id,init:function(){f.initialized=!0;var t=\".galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}\";H.insertStyleTag(t,\"galleria-tooltip\"),s.$(\"tooltip\").css({opacity:.8,visibility:\"visible\",display:\"none\"})},move:function(t){var e=s.getMousePosition(t).x,i=s.getMousePosition(t).y,n=s.$(\"tooltip\"),a=e,o=i,r=n.outerHeight(!0)+1,c=n.outerWidth(!0),l=r+15,h=s.$(\"container\").width()-c-2,u=s.$(\"container\").height()-r-2;isNaN(a)||isNaN(o)||(a+=10,o-=r+8,a=g.max(0,g.min(h,a)),o=g.max(0,g.min(u,o)),i<l&&(o=l),n.css({left:a,top:o}))},bind:function(e,n){if(!i.TOUCH){f.initialized||f.init();var a=function(){s.$(\"container\").off(\"mousemove\",f.move),s.clearTimer(f.timer),s.$(\"tooltip\").stop().animate({opacity:0},200,function(){s.$(\"tooltip\").hide(),s.addTimer(f.swapTimer,function(){f.open=!1},1e3)})},o=function(e,i){f.define(e,i),t(e).hover(function(){s.clearTimer(f.swapTimer),s.$(\"container\").off(\"mousemove\",f.move).on(\"mousemove\",f.move).trigger(\"mousemove\"),f.show(e),s.addTimer(f.timer,function(){s.$(\"tooltip\").stop().show().animate({opacity:1}),f.open=!0},f.open?0:500)},a).click(a)};\"string\"==typeof n?o(e in s._dom?s.get(e):e,n):t.each(e,function(t,e){o(s.get(t),e)})}},show:function(i){i=t(i in s._dom?s.get(i):i);var n=i.data(\"tt\"),a=function(t){e.setTimeout(function(t){return function(){f.move(t)}}(t),10),i.off(\"mouseup\",a)};n=\"function\"==typeof n?n():n,n&&(s.$(\"tooltip\").html(n.replace(/\\s/,\"&#160;\")),i.on(\"mouseup\",a))},define:function(e,i){if(\"function\"!=typeof i){var n=i;i=function(){return n}}e=t(e in s._dom?s.get(e):e).data(\"tt\",i),f.show(e)}},m=this._fullscreen={scrolled:0,crop:n,active:!1,prev:t(),beforeEnter:function(t){t()},beforeExit:function(t){t()},keymap:s._keyboard.map,parseCallback:function(e,i){return M.active?function(){\"function\"==typeof e&&e.call(s);var n=s._controls.getActive(),a=s._controls.getNext();s._scaleImage(a),s._scaleImage(n),i&&s._options.trueFullscreen&&t(n.container).add(a.container).trigger(\"transitionend\")}:e},enter:function(t){m.beforeEnter(function(){t=m.parseCallback(t,!0),s._options.trueFullscreen&&A.support?(m.active=!0,H.forceStyles(s.get(\"container\"),{width:\"100%\",height:\"100%\"}),s.rescale(),i.MAC?i.SAFARI&&/version\\/[1-5]/.test(d)?(s.$(\"stage\").css(\"opacity\",0),e.setTimeout(function(){m.scale(),s.$(\"stage\").css(\"opacity\",1)},4)):(s.$(\"container\").css(\"opacity\",0).addClass(\"fullscreen\"),e.setTimeout(function(){m.scale(),s.$(\"container\").css(\"opacity\",1)},50)):s.$(\"container\").addClass(\"fullscreen\"),r.resize(m.scale),A.enter(s,t,s.get(\"container\"))):(m.scrolled=r.scrollTop(),i.TOUCH||e.scrollTo(0,0),m._enter(t))})},_enter:function(o){m.active=!0,b&&(m.iframe=function(){var n,o=a.referrer,r=a.createElement(\"a\"),s=e.location;return r.href=o,r.protocol!=s.protocol||r.hostname!=s.hostname||r.port!=s.port?(i.raise(\"Parent fullscreen not available. Iframe protocol, domains and ports must match.\"),!1):(m.pd=e.parent.document,t(m.pd).find(\"iframe\").each(function(){var t=this.contentDocument||this.contentWindow.document;if(t===a)return n=this,!1}),n)}()),H.hide(s.getActiveImage()),b&&m.iframe&&(m.iframe.scrolled=t(e.parent).scrollTop(),e.parent.scrollTo(0,0));var c=s.getData(),l=s._options,h=!s._options.trueFullscreen||!A.support,u={height:\"100%\",overflow:\"hidden\",margin:0,padding:0};if(h&&(s.$(\"container\").addClass(\"fullscreen\"),m.prev=s.$(\"container\").prev(),m.prev.length||(m.parent=s.$(\"container\").parent()),s.$(\"container\").appendTo(\"body\"),H.forceStyles(s.get(\"container\"),{position:i.TOUCH?\"absolute\":\"fixed\",top:0,left:0,width:\"100%\",height:\"100%\",zIndex:1e4}),H.forceStyles(_().html,u),H.forceStyles(_().body,u)),b&&m.iframe&&(H.forceStyles(m.pd.documentElement,u),H.forceStyles(m.pd.body,u),H.forceStyles(m.iframe,t.extend(u,{width:\"100%\",height:\"100%\",top:0,left:0,position:\"fixed\",zIndex:1e4,border:\"none\"}))),m.keymap=t.extend({},s._keyboard.map),s.attachKeyboard({escape:s.exitFullscreen,right:s.next,left:s.prev}),m.crop=l.imageCrop,l.fullscreenCrop!=n&&(l.imageCrop=l.fullscreenCrop),c&&c.big&&c.image!==c.big){var d=new i.Picture,p=d.isCached(c.big),f=s.getIndex(),g=s._thumbnails[f];s.trigger({type:i.LOADSTART,cached:p,rewind:!1,index:f,imageTarget:s.getActiveImage(),thumbTarget:g,galleriaData:c}),d.load(c.big,function(e){s._scaleImage(e,{complete:function(e){s.trigger({type:i.LOADFINISH,cached:p,index:f,rewind:!1,imageTarget:e.image,thumbTarget:g});var n=s._controls.getActive().image;n&&t(n).width(e.image.width).height(e.image.height).attr(\"style\",t(e.image).attr(\"style\")).attr(\"src\",e.image.src)}})});var v=s.getNext(f),y=new i.Picture,w=s.getData(v);y.preload(s.isFullscreen()&&w.big?w.big:w.image)}s.rescale(function(){s.addTimer(!1,function(){h&&H.show(s.getActiveImage()),\"function\"==typeof o&&o.call(s),s.rescale()},100),s.trigger(i.FULLSCREEN_ENTER)}),h?r.resize(m.scale):H.show(s.getActiveImage())},scale:function(){s.rescale()},exit:function(t){m.beforeExit(function(){t=m.parseCallback(t),s._options.trueFullscreen&&A.support?A.exit(t):m._exit(t)})},_exit:function(t){m.active=!1;var n=!s._options.trueFullscreen||!A.support,a=s.$(\"container\").removeClass(\"fullscreen\");if(m.parent?m.parent.prepend(a):a.insertAfter(m.prev),n){H.hide(s.getActiveImage()),H.revertStyles(s.get(\"container\"),_().html,_().body),i.TOUCH||e.scrollTo(0,m.scrolled);var o=s._controls.frames[s._controls.active];o&&o.image&&(o.image.src=o.image.src)}b&&m.iframe&&(H.revertStyles(m.pd.documentElement,m.pd.body,m.iframe),m.iframe.scrolled&&e.parent.scrollTo(0,m.iframe.scrolled)),s.detachKeyboard(),s.attachKeyboard(m.keymap),s._options.imageCrop=m.crop;var c=s.getData().big,l=s._controls.getActive().image;!s.getData().iframe&&l&&c&&c==l.src&&e.setTimeout(function(t){return function(){l.src=t}}(s.getData().image),1),s.rescale(function(){s.addTimer(!1,function(){n&&H.show(s.getActiveImage()),\"function\"==typeof t&&t.call(s),r.trigger(\"resize\")},50),s.trigger(i.FULLSCREEN_EXIT)}),r.off(\"resize\",m.scale)}},v=this._idle={trunk:[],bound:!1,active:!1,add:function(e,n,a,o){if(e&&!i.TOUCH){v.bound||v.addEvent(),e=t(e),\"boolean\"==typeof a&&(o=a,a={}),a=a||{};var r,s={};for(r in n)n.hasOwnProperty(r)&&(s[r]=e.css(r));e.data(\"idle\",{from:t.extend(s,a),to:n,complete:!0,busy:!1}),o?e.css(n):v.addTimer(),v.trunk.push(e)}},remove:function(e){e=t(e),t.each(v.trunk,function(t,i){i&&i.length&&!i.not(e).length&&(e.css(e.data(\"idle\").from),v.trunk.splice(t,1))}),v.trunk.length||(v.removeEvent(),s.clearTimer(v.timer))},addEvent:function(){v.bound=!0,s.$(\"container\").on(\"mousemove click\",v.showAll),\"hover\"==s._options.idleMode&&s.$(\"container\").on(\"mouseleave\",v.hide)},removeEvent:function(){v.bound=!1,s.$(\"container\").on(\"mousemove click\",v.showAll),\"hover\"==s._options.idleMode&&s.$(\"container\").off(\"mouseleave\",v.hide)},addTimer:function(){\"hover\"!=s._options.idleMode&&s.addTimer(\"idle\",function(){v.hide()},s._options.idleTime)},hide:function(){if(s._options.idleMode&&s.getIndex()!==!1){s.trigger(i.IDLE_ENTER);var e=v.trunk.length;t.each(v.trunk,function(t,i){var n=i.data(\"idle\");n&&(i.data(\"idle\").complete=!1,H.animate(i,n.to,{duration:s._options.idleSpeed,complete:function(){t==e-1&&(v.active=!1)}}))})}},showAll:function(){s.clearTimer(\"idle\"),t.each(v.trunk,function(t,e){v.show(e)})},show:function(e){var n=e.data(\"idle\");v.active&&(n.busy||n.complete)||(n.busy=!0,s.trigger(i.IDLE_EXIT),s.clearTimer(\"idle\"),H.animate(e,n.from,{duration:s._options.idleSpeed/2,complete:function(){v.active=!0,t(e).data(\"idle\").busy=!1,t(e).data(\"idle\").complete=!0}})),v.addTimer()}},w=this._lightbox={width:0,height:0,initialized:!1,active:null,image:null,elems:{},keymap:!1,init:function(){if(!w.initialized){w.initialized=!0;var e=\"overlay box content shadow title info close prevholder prev nextholder next counter image\",n={},a=s._options,o=\"\",r=\"position:absolute;\",c=\"lightbox-\",l={overlay:\"position:fixed;display:none;opacity:\"+a.overlayOpacity+\";filter:alpha(opacity=\"+100*a.overlayOpacity+\");top:0;left:0;width:100%;height:100%;background:\"+a.overlayBackground+\";z-index:99990\",box:\"position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991\",shadow:r+\"background:#000;width:100%;height:100%;\",content:r+\"background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden\",info:r+\"bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px\",close:r+\"top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999\",image:r+\"top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;\",prevholder:r+\"width:50%;top:0;bottom:40px;cursor:pointer;\",nextholder:r+\"width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;\",prev:r+\"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif\",next:r+\"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000\",title:\"float:left\",counter:\"float:right;margin-left:8px;\"},h=function(e){return e.hover(function(){t(this).css(\"color\",\"#bbb\")},function(){t(this).css(\"color\",\"#444\")})},u={},d=\"\";d=y>7?y<9?\"background:#000;filter:alpha(opacity=0);\":\"background:rgba(0,0,0,0);\":\"z-index:99999\",l.nextholder+=d,l.prevholder+=d,t.each(l,function(t,e){o+=\".galleria-\"+c+t+\"{\"+e+\"}\"}),o+=\".galleria-\"+c+\"box.iframe .galleria-\"+c+\"prevholder,.galleria-\"+c+\"box.iframe .galleria-\"+c+\"nextholder{width:100px;height:100px;top:50%;margin-top:-70px}\",H.insertStyleTag(o,\"galleria-lightbox\"),t.each(e.split(\" \"),function(t,e){s.addElement(\"lightbox-\"+e),n[e]=w.elems[e]=s.get(\"lightbox-\"+e)}),w.image=new i.Picture,t.each({box:\"shadow content close prevholder nextholder\",info:\"title counter\",content:\"info image\",prevholder:\"prev\",nextholder:\"next\"},function(e,i){var n=[];t.each(i.split(\" \"),function(t,e){n.push(c+e)}),u[c+e]=n}),s.append(u),t(n.image).append(w.image.container),t(_().body).append(n.overlay,n.box),h(t(n.close).on(\"click:fast\",w.hide).html(\"&#215;\")),t.each([\"Prev\",\"Next\"],function(e,a){var o=t(n[a.toLowerCase()]).html(/v/.test(a)?\"&#8249;&#160;\":\"&#160;&#8250;\"),r=t(n[a.toLowerCase()+\"holder\"]);return r.on(\"click:fast\",function(){w[\"show\"+a]()}),y<8||i.TOUCH?void o.show():void r.hover(function(){o.show()},function(t){o.stop().fadeOut(200)})}),t(n.overlay).on(\"click:fast\",w.hide),i.IPAD&&(s._options.lightboxTransitionSpeed=0)}},rescale:function(e){var n=g.min(r.width()-40,w.width),a=g.min(r.height()-60,w.height),o=g.min(n/w.width,a/w.height),c=g.round(w.width*o)+40,l=g.round(w.height*o)+60,h={width:c,height:l,\"margin-top\":g.ceil(l/2)*-1,\"margin-left\":g.ceil(c/2)*-1};e?t(w.elems.box).css(h):t(w.elems.box).animate(h,{duration:s._options.lightboxTransitionSpeed,easing:s._options.easing,complete:function(){var e=w.image,n=s._options.lightboxFadeSpeed;s.trigger({type:i.LIGHTBOX_IMAGE,imageTarget:e.image}),t(e.container).show(),t(e.image).animate({opacity:1},n),H.show(w.elems.info,n)}})},hide:function(){w.image.image=null,r.off(\"resize\",w.rescale),t(w.elems.box).hide().find(\"iframe\").remove(),H.hide(w.elems.info),s.detachKeyboard(),s.attachKeyboard(w.keymap),w.keymap=!1,H.hide(w.elems.overlay,200,function(){t(this).hide().css(\"opacity\",s._options.overlayOpacity),s.trigger(i.LIGHTBOX_CLOSE)})},showNext:function(){w.show(s.getNext(w.active))},showPrev:function(){w.show(s.getPrev(w.active))},show:function(n){w.active=n=\"number\"==typeof n?n:s.getIndex()||0,w.initialized||w.init(),s.trigger(i.LIGHTBOX_OPEN),w.keymap||(w.keymap=t.extend({},s._keyboard.map),s.attachKeyboard({escape:w.hide,right:w.showNext,left:w.showPrev})),r.off(\"resize\",w.rescale);var a,o,c,l=s.getData(n),h=s.getDataLength(),u=s.getNext(n);H.hide(w.elems.info);try{for(c=s._options.preload;c>0;c--)o=new i.Picture,a=s.getData(u),o.preload(a.big?a.big:a.image),u=s.getNext(u)}catch(t){}w.image.isIframe=l.iframe&&!l.image,t(w.elems.box).toggleClass(\"iframe\",w.image.isIframe),t(w.image.container).find(\".galleria-videoicon\").remove(),w.image.load(l.big||l.image||l.iframe,function(i){if(i.isIframe){var a=t(e).width(),o=t(e).height();if(i.video&&s._options.maxVideoSize){var c=g.min(s._options.maxVideoSize/a,s._options.maxVideoSize/o);c<1&&(a*=c,o*=c)}w.width=a,w.height=o}else w.width=i.original.width,w.height=i.original.height;if(t(i.image).css({width:i.isIframe?\"100%\":\"100.1%\",height:i.isIframe?\"100%\":\"100.1%\",top:0,bottom:0,zIndex:99998,opacity:0,visibility:\"visible\"}).parent().height(\"100%\"),w.elems.title.innerHTML=l.title||\"\",w.elems.counter.innerHTML=n+1+\" / \"+h,r.resize(w.rescale),w.rescale(),l.image&&l.iframe){if(t(w.elems.box).addClass(\"iframe\"),l.video){var u=O(i.container).hide();e.setTimeout(function(){u.fadeIn(200)},200)}t(i.image).css(\"cursor\",\"pointer\").mouseup(function(e,i){return function(n){t(w.image.container).find(\".galleria-videoicon\").remove(),n.preventDefault(),i.isIframe=!0,i.load(e.iframe+(e.video?\"&autoplay=1\":\"\"),{width:\"100%\",height:y<8?t(w.image.container).height():\"100%\"})}}(l,i))}}),t(w.elems.overlay).show().css(\"visibility\",\"visible\"),t(w.elems.box).show()}},x=this._timer={trunk:{},add:function(t,i,n,a){if(t=t||(new Date).getTime(),a=a||!1,this.clear(t),a){var o=i;i=function(){o(),x.add(t,i,n)}}this.trunk[t]=e.setTimeout(i,n)},clear:function(t){var i,n=function(t){e.clearTimeout(this.trunk[t]),delete this.trunk[t]};if(t&&t in this.trunk)n.call(this,t);else if(\"undefined\"==typeof t)for(i in this.trunk)this.trunk.hasOwnProperty(i)&&n.call(this,i)}};return this},i.prototype={constructor:i,init:function(e,a){if(a=T(a),this._original={target:e,options:a,data:null},this._target=this._dom.target=e.nodeName?e:t(e).get(0),this._original.html=this._target.innerHTML,D.push(this),!this._target)return void i.raise(\"Target not found\",!0);if(this._options={autoplay:!1,carousel:!0,carouselFollow:!0,carouselSpeed:400,carouselSteps:\"auto\",clicknext:!1,dailymotion:{foreground:\"%23EEEEEE\",highlight:\"%235BCEC5\",background:\"%23222222\",logo:0,hideInfos:1},dataConfig:function(t){return{}},dataSelector:\"img\",dataSort:!1,dataSource:this._target,debug:n,dummy:n,easing:\"galleria\",extend:function(t){},fullscreenCrop:n,fullscreenDoubleTap:!0,fullscreenTransition:n,height:0,idleMode:!0,idleTime:3e3,idleSpeed:200,imageCrop:!1,imageMargin:0,imagePan:!1,imagePanSmoothness:12,imagePosition:\"50%\",imageTimeout:n,initialTransition:n,keepSource:!1,layerFollow:!0,lightbox:!1,lightboxFadeSpeed:200,lightboxTransitionSpeed:200,linkSourceImages:!0,maxScaleRatio:n,maxVideoSize:n,minScaleRatio:n,overlayOpacity:.85,overlayBackground:\"#0b0b0b\",pauseOnInteraction:!0,popupLinks:!1,preload:2,queue:!0,responsive:!0,show:0,showInfo:!0,showCounter:!0,showImagenav:!0,swipe:\"auto\",theme:null,thumbCrop:!0,thumbEventType:\"click:fast\",thumbMargin:0,thumbQuality:\"auto\",thumbDisplayOrder:!0,thumbPosition:\"50%\",thumbnails:!0,touchTransition:n,transition:\"fade\",transitionInitial:n,transitionSpeed:400,trueFullscreen:!0,useCanvas:!1,variation:\"\",videoPoster:!0,vimeo:{title:0,byline:0,portrait:0,color:\"aaaaaa\"},wait:5e3,width:\"auto\",youtube:{modestbranding:1,autohide:1,color:\"white\",hd:1,rel:0,showinfo:0}},this._options.initialTransition=this._options.initialTransition||this._options.transitionInitial,\na&&(a.debug===!1&&(l=!1),\"number\"==typeof a.imageTimeout&&(h=a.imageTimeout),\"string\"==typeof a.dummy&&(u=a.dummy),\"string\"==typeof a.theme&&(this._options.theme=a.theme)),t(this._target).children().hide(),i.QUIRK&&i.raise(\"Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML and add a correct doctype.\"),z.length)if(this._options.theme){for(var o=0;o<z.length;o++)if(this._options.theme===z[o].name){this.theme=z[o];break}}else this.theme=z[0];return\"object\"==typeof this.theme?this._init():P.push(this),this},_init:function(){var o=this,s=this._options;if(this._initialized)return i.raise(\"Init failed: Gallery instance already initialized.\"),this;if(this._initialized=!0,!this.theme)return i.raise(\"Init failed: No theme found.\",!0),this;if(t.extend(!0,s,this.theme.defaults,this._original.options,i.configure.options),s.swipe=function(t){return\"enforced\"==t||t!==!1&&\"disabled\"!=t&&!!i.TOUCH}(s.swipe),s.swipe&&(s.clicknext=!1,s.imagePan=!1),function(t){return\"getContext\"in t?void($=$||{elem:t,context:t.getContext(\"2d\"),cache:{},length:0}):void(t=null)}(a.createElement(\"canvas\")),this.bind(i.DATA,function(){e.screen&&e.screen.width&&Array.prototype.forEach&&this._data.forEach(function(t){var i=\"devicePixelRatio\"in e?e.devicePixelRatio:1,n=g.max(e.screen.width,e.screen.height);n*i<1024&&(t.big=t.image)}),this._original.data=this._data,this.get(\"total\").innerHTML=this.getDataLength();var t=this.$(\"container\");o._options.height<2&&(o._userRatio=o._ratio=o._options.height);var n={width:0,height:0},a=function(){return o.$(\"stage\").height()};H.wait({until:function(){return n=o._getWH(),t.width(n.width).height(n.height),a()&&n.width&&n.height>50},success:function(){o._width=n.width,o._height=n.height,o._ratio=o._ratio||n.height/n.width,i.WEBKIT?e.setTimeout(function(){o._run()},1):o._run()},error:function(){a()?i.raise(\"Could not extract sufficient width/height of the gallery container. Traced measures: width:\"+n.width+\"px, height: \"+n.height+\"px.\",!0):i.raise(\"Could not extract a stage height from the CSS. Traced height: \"+a()+\"px.\",!0)},timeout:\"number\"==typeof this._options.wait&&this._options.wait})}),this.append({\"info-text\":[\"info-title\",\"info-description\"],info:[\"info-text\"],\"image-nav\":[\"image-nav-right\",\"image-nav-left\"],stage:[\"images\",\"loader\",\"counter\",\"image-nav\"],\"thumbnails-list\":[\"thumbnails\"],\"thumbnails-container\":[\"thumb-nav-left\",\"thumbnails-list\",\"thumb-nav-right\"],container:[\"stage\",\"thumbnails-container\",\"info\",\"tooltip\"]}),H.hide(this.$(\"counter\").append(this.get(\"current\"),a.createTextNode(\" / \"),this.get(\"total\"))),this.setCounter(\"&#8211;\"),H.hide(o.get(\"tooltip\")),this.$(\"container\").addClass([i.TOUCH?\"touch\":\"notouch\",this._options.variation,\"galleria-theme-\"+this.theme.name].join(\" \")),this._options.swipe||t.each(new Array(2),function(e){var n=new i.Picture;t(n.container).css({position:\"absolute\",top:0,left:0}).prepend(o._layers[e]=t(H.create(\"galleria-layer\")).css({position:\"absolute\",top:0,left:0,right:0,bottom:0,zIndex:2})[0]),o.$(\"images\").append(n.container),o._controls[e]=n;var a=new i.Picture;a.isIframe=!0,t(a.container).attr(\"class\",\"galleria-frame\").css({position:\"absolute\",top:0,left:0,zIndex:4,background:\"#000\",display:\"none\"}).appendTo(n.container),o._controls.frames[e]=a}),this.$(\"images\").css({position:\"relative\",top:0,left:0,width:\"100%\",height:\"100%\"}),s.swipe&&(this.$(\"images\").css({position:\"absolute\",top:0,left:0,width:0,height:\"100%\"}),this.finger=new i.Finger(this.get(\"stage\"),{onchange:function(t){o.pause().show(t)},oncomplete:function(e){var i=g.max(0,g.min(parseInt(e,10),o.getDataLength()-1)),n=o.getData(i);t(o._thumbnails[i].container).addClass(\"active\").siblings(\".active\").removeClass(\"active\"),n&&(o.$(\"images\").find(\".galleria-frame\").css(\"opacity\",0).hide().find(\"iframe\").remove(),o._options.carousel&&o._options.carouselFollow&&o._carousel.follow(i))}}),this.bind(i.RESCALE,function(){this.finger.setup()}),this.$(\"stage\").on(\"click\",function(i){var a=o.getData();if(a){if(a.iframe){o.isPlaying()&&o.pause();var r=o._controls.frames[o._active],s=o._stageWidth,c=o._stageHeight;if(t(r.container).find(\"iframe\").length)return;return t(r.container).css({width:s,height:c,opacity:0}).show().animate({opacity:1},200),void e.setTimeout(function(){r.load(a.iframe+(a.video?\"&autoplay=1\":\"\"),{width:s,height:c},function(t){o.$(\"container\").addClass(\"videoplay\"),t.scale({width:o._stageWidth,height:o._stageHeight,iframelimit:a.video?o._options.maxVideoSize:n})})},100)}if(a.link)if(o._options.popupLinks){e.open(a.link,\"_blank\")}else e.location.href=a.link;else;}}),this.bind(i.IMAGE,function(e){o.setCounter(e.index),o.setInfo(e.index);var i=this.getNext(),n=this.getPrev(),a=[n,i];a.push(this.getNext(i),this.getPrev(n),o._controls.slides.length-1);var r=[];t.each(a,function(e,i){t.inArray(i,r)==-1&&r.push(i)}),t.each(r,function(e,i){var n=o.getData(i),a=o._controls.slides[i],r=o.isFullscreen()&&n.big?n.big:n.image||n.iframe;n.iframe&&!n.image&&(a.isIframe=!0),a.ready||o._controls.slides[i].load(r,function(e){e.isIframe||t(e.image).css(\"visibility\",\"hidden\"),o._scaleImage(e,{complete:function(e){e.isIframe||t(e.image).css({opacity:0,visibility:\"visible\"}).animate({opacity:1},200)}})})})})),this.$(\"thumbnails, thumbnails-list\").css({overflow:\"hidden\",position:\"relative\"}),this.$(\"image-nav-right, image-nav-left\").on(\"click:fast\",function(t){s.pauseOnInteraction&&o.pause();var e=/right/.test(this.className)?\"next\":\"prev\";o[e]()}).on(\"click\",function(t){t.preventDefault(),(s.clicknext||s.swipe)&&t.stopPropagation()}),t.each([\"info\",\"counter\",\"image-nav\"],function(t,e){s[\"show\"+e.substr(0,1).toUpperCase()+e.substr(1).replace(/-/,\"\")]===!1&&H.moveOut(o.get(e.toLowerCase()))}),this.load(),s.keepSource||y||(this._target.innerHTML=\"\"),this.get(\"errors\")&&this.appendChild(\"target\",\"errors\"),this.appendChild(\"target\",\"container\"),s.carousel){var c=0,l=s.show;this.bind(i.THUMBNAIL,function(){this.updateCarousel(),++c==this.getDataLength()&&\"number\"==typeof l&&l>0&&this._carousel.follow(l)})}return s.responsive&&r.on(\"resize\",function(){o.isFullscreen()||o.resize()}),s.fullscreenDoubleTap&&this.$(\"stage\").on(\"touchstart\",function(){var t,e,i,n,a,r,s=function(t){return t.originalEvent.touches?t.originalEvent.touches[0]:t};return o.$(\"stage\").on(\"touchmove\",function(){t=0}),function(c){if(!/(-left|-right)/.test(c.target.className)){if(r=H.timestamp(),e=s(c).pageX,i=s(c).pageY,c.originalEvent.touches.length<2&&r-t<300&&e-n<20&&i-a<20)return o.toggleFullscreen(),void c.preventDefault();t=r,n=e,a=i}}}()),t.each(i.on.binds,function(e,i){t.inArray(i.hash,o._binds)==-1&&o.bind(i.type,i.callback)}),this},addTimer:function(){return this._timer.add.apply(this._timer,H.array(arguments)),this},clearTimer:function(){return this._timer.clear.apply(this._timer,H.array(arguments)),this},_getWH:function(){var e,i=this.$(\"container\"),n=this.$(\"target\"),a=this,o={};return t.each([\"width\",\"height\"],function(t,r){a._options[r]&&\"number\"==typeof a._options[r]?o[r]=a._options[r]:(e=[H.parseValue(i.css(r)),H.parseValue(n.css(r)),i[r](),n[r]()],a[\"_\"+r]||e.splice(e.length,H.parseValue(i.css(\"min-\"+r)),H.parseValue(n.css(\"min-\"+r))),o[r]=g.max.apply(g,e))}),a._userRatio&&(o.height=o.width*a._userRatio),o},_createThumbnails:function(n){this.get(\"total\").innerHTML=this.getDataLength();var o,r,s,c,l=this,h=this._options,u=n?this._data.length-n.length:0,d=u,p=[],f=0,g=y<8?\"http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif\":\"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D\",m=function(){var t=l.$(\"thumbnails\").find(\".active\");return!!t.length&&t.find(\"img\").attr(\"src\")}(),v=\"string\"==typeof h.thumbnails?h.thumbnails.toLowerCase():null,_=function(t){return a.defaultView&&a.defaultView.getComputedStyle?a.defaultView.getComputedStyle(r.container,null)[t]:c.css(t)},b=function(e,n,a){return function(){t(a).append(e),l.trigger({type:i.THUMBNAIL,thumbTarget:e,index:n,galleriaData:l.getData(n)})}},w=function(e){h.pauseOnInteraction&&l.pause();var i=t(e.currentTarget).data(\"index\");l.getIndex()!==i&&l.show(i),e.preventDefault()},x=function(e,n){t(e.container).css(\"visibility\",\"visible\"),l.trigger({type:i.THUMBNAIL,thumbTarget:e.image,index:e.data.order,galleriaData:l.getData(e.data.order)}),\"function\"==typeof n&&n.call(l,e)},T=function(e,i){e.scale({width:e.data.width,height:e.data.height,crop:h.thumbCrop,margin:h.thumbMargin,canvas:h.useCanvas,position:h.thumbPosition,complete:function(e){var n,a,o=[\"left\",\"top\"],r=[\"Width\",\"Height\"];l.getData(e.index);t.each(r,function(i,r){n=r.toLowerCase(),h.thumbCrop===!0&&h.thumbCrop!==n||(a={},a[n]=e[n],t(e.container).css(a),a={},a[o[i]]=0,t(e.image).css(a)),e[\"outer\"+r]=t(e.container)[\"outer\"+r](!0)}),H.toggleQuality(e.image,h.thumbQuality===!0||\"auto\"===h.thumbQuality&&e.original.width<3*e.width),h.thumbDisplayOrder&&!e.lazy?t.each(p,function(t,e){if(t===f&&e.ready&&!e.displayed)return f++,e.displayed=!0,void x(e,i)}):x(e,i)}})};for(n||(this._thumbnails=[],this.$(\"thumbnails\").empty());this._data[u];u++)s=this._data[u],o=s.thumb||s.image,h.thumbnails!==!0&&\"lazy\"!=v||!s.thumb&&!s.image?s.iframe&&null!==v||\"empty\"===v||\"numbers\"===v?(r={container:H.create(\"galleria-image\"),image:H.create(\"img\",\"span\"),ready:!0,data:{order:u}},\"numbers\"===v&&t(r.image).text(u+1),s.iframe&&t(r.image).addClass(\"iframe\"),this.$(\"thumbnails\").append(r.container),e.setTimeout(b(r.image,u,r.container),50+20*u)):r={container:null,image:null}:(r=new i.Picture(u),r.index=u,r.displayed=!1,r.lazy=!1,r.video=!1,this.$(\"thumbnails\").append(r.container),c=t(r.container),c.css(\"visibility\",\"hidden\"),r.data={width:H.parseValue(_(\"width\")),height:H.parseValue(_(\"height\")),order:u,src:o},h.thumbCrop!==!0?c.css({width:\"auto\",height:\"auto\"}):c.css({width:r.data.width,height:r.data.height}),\"lazy\"==v?(c.addClass(\"lazy\"),r.lazy=!0,r.load(g,{height:r.data.height,width:r.data.width})):r.load(o,T),\"all\"===h.preload&&r.preload(s.image)),t(r.container).add(h.keepSource&&h.linkSourceImages?s.original:null).data(\"index\",u).on(h.thumbEventType,w).data(\"thumbload\",T),m===o&&t(r.container).addClass(\"active\"),this._thumbnails.push(r);return p=this._thumbnails.slice(d),this},lazyLoad:function(e,i){var n=e.constructor==Array?e:[e],a=this,o=0;return t.each(n,function(e,r){if(!(r>a._thumbnails.length-1)){var s=a._thumbnails[r],c=s.data,l=function(){++o==n.length&&\"function\"==typeof i&&i.call(a)},h=t(s.container).data(\"thumbload\");s.video?h.call(a,s,l):s.load(c.src,function(t){h.call(a,t,l)})}}),this},lazyLoadChunks:function(t,i){var n=this.getDataLength(),a=0,o=0,r=[],s=[],c=this;for(i=i||0;a<n;a++)s.push(a),++o!=t&&a!=n-1||(r.push(s),o=0,s=[]);var l=function(t){var n=r.shift();n&&e.setTimeout(function(){c.lazyLoad(n,function(){l(!0)})},i&&t?i:0)};return l(!1),this},_run:function(){var a=this;a._createThumbnails(),H.wait({timeout:1e4,until:function(){return i.OPERA&&a.$(\"stage\").css(\"display\",\"inline-block\"),a._stageWidth=a.$(\"stage\").width(),a._stageHeight=a.$(\"stage\").height(),a._stageWidth&&a._stageHeight>50},success:function(){if(E.push(a),a._options.swipe){var o=a.$(\"images\").width(a.getDataLength()*a._stageWidth);t.each(new Array(a.getDataLength()),function(e){var n=new i.Picture,r=a.getData(e);t(n.container).css({position:\"absolute\",top:0,left:a._stageWidth*e}).prepend(a._layers[e]=t(H.create(\"galleria-layer\")).css({position:\"absolute\",top:0,left:0,right:0,bottom:0,zIndex:2})[0]).appendTo(o),r.video&&O(n.container),a._controls.slides.push(n);var s=new i.Picture;s.isIframe=!0,t(s.container).attr(\"class\",\"galleria-frame\").css({position:\"absolute\",top:0,left:0,zIndex:4,background:\"#000\",display:\"none\"}).appendTo(n.container),a._controls.frames.push(s)}),a.finger.setup()}return H.show(a.get(\"counter\")),a._options.carousel&&a._carousel.bindControls(),a._options.autoplay&&(a.pause(),\"number\"==typeof a._options.autoplay&&(a._playtime=a._options.autoplay),a._playing=!0),a._firstrun?(a._options.autoplay&&a.trigger(i.PLAY),void(\"number\"==typeof a._options.show&&a.show(a._options.show))):(a._firstrun=!0,i.History&&i.History.change(function(t){isNaN(t)?e.history.go(-1):a.show(t,n,!0)}),a.trigger(i.READY),a.theme.init.call(a,a._options),t.each(i.ready.callbacks,function(t,e){\"function\"==typeof e&&e.call(a,a._options)}),a._options.extend.call(a,a._options),/^[0-9]{1,4}$/.test(p)&&i.History?a.show(p,n,!0):a._data[a._options.show]&&a.show(a._options.show),void(a._options.autoplay&&a.trigger(i.PLAY)))},error:function(){i.raise(\"Stage width or height is too small to show the gallery. Traced measures: width:\"+a._stageWidth+\"px, height: \"+a._stageHeight+\"px.\",!0)}})},load:function(e,n,a){var o=this,r=this._options;return this._data=[],this._thumbnails=[],this.$(\"thumbnails\").empty(),\"function\"==typeof n&&(a=n,n=null),e=e||r.dataSource,n=n||r.dataSelector,a=a||r.dataConfig,t.isPlainObject(e)&&(e=[e]),t.isArray(e)?this.validate(e)?this._data=e:i.raise(\"Load failed: JSON Array not valid.\"):(n+=\",.video,.iframe\",t(e).find(n).each(function(e,i){i=t(i);var n={},r=i.parent(),s=r.attr(\"href\"),c=r.attr(\"rel\");s&&(\"IMG\"==i[0].nodeName||i.hasClass(\"video\"))&&S(s)?n.video=s:s&&i.hasClass(\"iframe\")?n.iframe=s:n.image=n.big=s,c&&(n.big=c),t.each(\"big title description link layer image\".split(\" \"),function(t,e){i.data(e)&&(n[e]=i.data(e).toString())}),n.big||(n.big=n.image),o._data.push(t.extend({title:i.attr(\"title\")||\"\",thumb:i.attr(\"src\"),image:i.attr(\"src\"),big:i.attr(\"src\"),description:i.attr(\"alt\")||\"\",link:i.attr(\"longdesc\"),original:i.get(0)},n,a(i)))})),\"function\"==typeof r.dataSort?s.sort.call(this._data,r.dataSort):\"random\"==r.dataSort&&this._data.sort(function(){return g.round(g.random())-.5}),this.getDataLength()&&this._parseData(function(){this.trigger(i.DATA)}),this},_parseData:function(e){var i,a=this,o=!1,r=function(){var i=!0;t.each(a._data,function(t,e){if(e.loading)return i=!1,!1}),i&&!o&&(o=!0,e.call(a))};return t.each(this._data,function(e,o){if(i=a._data[e],\"thumb\"in o==!1&&(i.thumb=o.image),o.big||(i.big=o.image),\"video\"in o){var s=S(o.video);s&&(i.iframe=new I(s.provider,s.id).embed()+function(){if(\"object\"==typeof a._options[s.provider]){var e=\"?\",i=[];return t.each(a._options[s.provider],function(t,e){i.push(t+\"=\"+e)}),\"youtube\"==s.provider&&(i=[\"wmode=opaque\"].concat(i)),e+i.join(\"&\")}return\"\"}(),i.thumb&&i.image||t.each([\"thumb\",\"image\"],function(t,e){if(\"image\"==e&&!a._options.videoPoster)return void(i.image=n);var o=new I(s.provider,s.id);i[e]||(i.loading=!0,o.getMedia(e,function(t,e){return function(i){t[e]=i,\"image\"!=e||t.big||(t.big=t.image),delete t.loading,r()}}(i,e)))}))}}),r(),this},destroy:function(){return this.$(\"target\").data(\"galleria\",null),this.$(\"container\").off(\"galleria\"),this.get(\"target\").innerHTML=this._original.html,this.clearTimer(),H.removeFromArray(D,this),H.removeFromArray(E,this),i._waiters.length&&t.each(i._waiters,function(t,i){i&&e.clearTimeout(i)}),this},splice:function(){var t=this,i=H.array(arguments);return e.setTimeout(function(){s.splice.apply(t._data,i),t._parseData(function(){t._createThumbnails()})},2),t},push:function(){var t=this,i=H.array(arguments);return 1==i.length&&i[0].constructor==Array&&(i=i[0]),e.setTimeout(function(){s.push.apply(t._data,i),t._parseData(function(){t._createThumbnails(i)})},2),t},_getActive:function(){return this._controls.getActive()},validate:function(t){return!0},bind:function(t,e){return t=k(t),this.$(\"container\").on(t,this.proxy(e)),this},unbind:function(t){return t=k(t),this.$(\"container\").off(t),this},trigger:function(e){return e=\"object\"==typeof e?t.extend(e,{scope:this}):{type:k(e),scope:this},this.$(\"container\").trigger(e),this},addIdleState:function(t,e,i,n){return this._idle.add.apply(this._idle,H.array(arguments)),this},removeIdleState:function(t){return this._idle.remove.apply(this._idle,H.array(arguments)),this},enterIdleMode:function(){return this._idle.hide(),this},exitIdleMode:function(){return this._idle.showAll(),this},enterFullscreen:function(t){return this._fullscreen.enter.apply(this,H.array(arguments)),this},exitFullscreen:function(t){return this._fullscreen.exit.apply(this,H.array(arguments)),this},toggleFullscreen:function(t){return this._fullscreen[this.isFullscreen()?\"exit\":\"enter\"].apply(this,H.array(arguments)),this},bindTooltip:function(t,e){return this._tooltip.bind.apply(this._tooltip,H.array(arguments)),this},defineTooltip:function(t,e){return this._tooltip.define.apply(this._tooltip,H.array(arguments)),this},refreshTooltip:function(t){return this._tooltip.show.apply(this._tooltip,H.array(arguments)),this},openLightbox:function(){return this._lightbox.show.apply(this._lightbox,H.array(arguments)),this},closeLightbox:function(){return this._lightbox.hide.apply(this._lightbox,H.array(arguments)),this},hasVariation:function(e){return t.inArray(e,this._options.variation.split(/\\s+/))>-1},getActiveImage:function(){var t=this._getActive();return t?t.image:n},getActiveThumb:function(){return this._thumbnails[this._active].image||n},getMousePosition:function(t){return{x:t.pageX-this.$(\"container\").offset().left,y:t.pageY-this.$(\"container\").offset().top}},addPan:function(e){if(this._options.imageCrop!==!1){e=t(e||this.getActiveImage());var i=this,n=e.width()/2,a=e.height()/2,o=parseInt(e.css(\"left\"),10),r=parseInt(e.css(\"top\"),10),s=o||0,c=r||0,l=0,h=0,u=!1,d=H.timestamp(),p=0,f=0,m=function(t,i,n){if(t>0&&(f=g.round(g.max(t*-1,g.min(0,i))),p!==f))if(p=f,8===y)e.parent()[\"scroll\"+n](f*-1);else{var a={};a[n.toLowerCase()]=f,e.css(a)}},v=function(t){H.timestamp()-d<50||(u=!0,n=i.getMousePosition(t).x,a=i.getMousePosition(t).y)},_=function(t){u&&(l=e.width()-i._stageWidth,h=e.height()-i._stageHeight,o=n/i._stageWidth*l*-1,r=a/i._stageHeight*h*-1,s+=(o-s)/i._options.imagePanSmoothness,c+=(r-c)/i._options.imagePanSmoothness,m(h,c,\"Top\"),m(l,s,\"Left\"))};return 8===y&&(e.parent().scrollTop(c*-1).scrollLeft(s*-1),e.css({top:0,left:0})),this.$(\"stage\").off(\"mousemove\",v).on(\"mousemove\",v),this.addTimer(\"pan\"+i._id,_,50,!0),this}},proxy:function(t,e){return\"function\"!=typeof t?m:(e=e||this,function(){return t.apply(e,H.array(arguments))})},getThemeName:function(){return this.theme.name},removePan:function(){return this.$(\"stage\").off(\"mousemove\"),this.clearTimer(\"pan\"+this._id),this},addElement:function(e){var i=this._dom;return t.each(H.array(arguments),function(t,e){i[e]=H.create(\"galleria-\"+e)}),this},attachKeyboard:function(t){return this._keyboard.attach.apply(this._keyboard,H.array(arguments)),this},detachKeyboard:function(){return this._keyboard.detach.apply(this._keyboard,H.array(arguments)),this},appendChild:function(t,e){return this.$(t).append(this.get(e)||e),this},prependChild:function(t,e){return this.$(t).prepend(this.get(e)||e),this},remove:function(t){return this.$(H.array(arguments).join(\",\")).remove(),this},append:function(t){var e,i;for(e in t)if(t.hasOwnProperty(e))if(t[e].constructor===Array)for(i=0;t[e][i];i++)this.appendChild(e,t[e][i]);else this.appendChild(e,t[e]);return this},_scaleImage:function(e,i){if(e=e||this._controls.getActive()){var n,a=function(e){t(e.container).children(\":first\").css({top:g.max(0,H.parseValue(e.image.style.top)),left:g.max(0,H.parseValue(e.image.style.left)),width:H.parseValue(e.image.width),height:H.parseValue(e.image.height)})};return i=t.extend({width:this._stageWidth,height:this._stageHeight,crop:this._options.imageCrop,max:this._options.maxScaleRatio,min:this._options.minScaleRatio,margin:this._options.imageMargin,position:this._options.imagePosition,iframelimit:this._options.maxVideoSize},i),this._options.layerFollow&&this._options.imageCrop!==!0?\"function\"==typeof i.complete?(n=i.complete,i.complete=function(){n.call(e,e),a(e)}):i.complete=a:t(e.container).children(\":first\").css({top:0,left:0}),e.scale(i),this}},updateCarousel:function(){return this._carousel.update(),this},resize:function(e,i){\"function\"==typeof e&&(i=e,e=n),e=t.extend({width:0,height:0},e);var a=this,o=this.$(\"container\");return t.each(e,function(t,i){i||(o[t](\"auto\"),e[t]=a._getWH()[t])}),t.each(e,function(t,e){o[t](e)}),this.rescale(i)},rescale:function(e,a,o){var r=this;\"function\"==typeof e&&(o=e,e=n);var s=function(){r._stageWidth=e||r.$(\"stage\").width(),r._stageHeight=a||r.$(\"stage\").height(),r._options.swipe?(t.each(r._controls.slides,function(e,i){r._scaleImage(i),t(i.container).css(\"left\",r._stageWidth*e)}),r.$(\"images\").css(\"width\",r._stageWidth*r.getDataLength())):r._scaleImage(),r._options.carousel&&r.updateCarousel();var n=r._controls.frames[r._controls.active];n&&r._controls.frames[r._controls.active].scale({width:r._stageWidth,height:r._stageHeight,iframelimit:r._options.maxVideoSize}),r.trigger(i.RESCALE),\"function\"==typeof o&&o.call(r)};return s.call(r),this},refreshImage:function(){return this._scaleImage(),this._options.imagePan&&this.addPan(),this},_preload:function(){if(this._options.preload){var t,e,n,a=this.getNext();try{for(e=this._options.preload;e>0;e--)t=new i.Picture,n=this.getData(a),t.preload(this.isFullscreen()&&n.big?n.big:n.image),a=this.getNext(a)}catch(t){}}},show:function(n,a,o){var r=this._options.swipe;if(r||!(this._queue.length>3||n===!1||!this._options.queue&&this._queue.stalled)){if(n=g.max(0,g.min(parseInt(n,10),this.getDataLength()-1)),a=\"undefined\"!=typeof a?!!a:n<this.getIndex(),o=o||!1,!o&&i.History)return void i.History.set(n.toString());if(this.finger&&n!==this._active&&(this.finger.to=-(n*this.finger.width),this.finger.index=n),this._active=n,r){var c=this.getData(n),l=this;if(!c)return;var h=this.isFullscreen()&&c.big?c.big:c.image||c.iframe,u=this._controls.slides[n],d=u.isCached(h),p=this._thumbnails[n],f={cached:d,index:n,rewind:a,imageTarget:u.image,thumbTarget:p.image,galleriaData:c};this.trigger(t.extend(f,{type:i.LOADSTART})),l.$(\"container\").removeClass(\"videoplay\");var m=function(){l._layers[n].innerHTML=l.getData().layer||\"\",l.trigger(t.extend(f,{type:i.LOADFINISH})),l._playCheck()};l._preload(),e.setTimeout(function(){u.ready&&t(u.image).attr(\"src\")==h?(l.trigger(t.extend(f,{type:i.IMAGE})),m()):(c.iframe&&!c.image&&(u.isIframe=!0),u.load(h,function(e){f.imageTarget=e.image,l._scaleImage(e,m).trigger(t.extend(f,{type:i.IMAGE})),m()}))},100)}else s.push.call(this._queue,{index:n,rewind:a}),this._queue.stalled||this._show();return this}},_show:function(){var a=this,o=this._queue[0],r=this.getData(o.index);if(r){var c=this.isFullscreen()&&r.big?r.big:r.image||r.iframe,l=this._controls.getActive(),h=this._controls.getNext(),u=h.isCached(c),d=this._thumbnails[o.index],p=function(){t(h.image).trigger(\"mouseup\")};a.$(\"container\").toggleClass(\"iframe\",!!r.isIframe).removeClass(\"videoplay\");var f=function(o,r,c,l,h){return function(){var u;M.active=!1,H.toggleQuality(r.image,a._options.imageQuality),a._layers[a._controls.active].innerHTML=\"\",t(c.container).css({zIndex:0,opacity:0}).show(),t(c.container).find(\"iframe, .galleria-videoicon\").remove(),t(a._controls.frames[a._controls.active].container).hide(),t(r.container).css({zIndex:1,left:0,top:0}).show(),a._controls.swap(),a._options.imagePan&&a.addPan(r.image),(o.iframe&&o.image||o.link||a._options.lightbox||a._options.clicknext)&&t(r.image).css({cursor:\"pointer\"}).on(\"mouseup\",function(r){if(!(\"number\"==typeof r.which&&r.which>1)){if(o.iframe){a.isPlaying()&&a.pause();var s=a._controls.frames[a._controls.active],c=a._stageWidth,l=a._stageHeight;return t(s.container).css({width:c,height:l,opacity:0}).show().animate({opacity:1},200),void e.setTimeout(function(){s.load(o.iframe+(o.video?\"&autoplay=1\":\"\"),{width:c,height:l},function(t){a.$(\"container\").addClass(\"videoplay\"),t.scale({width:a._stageWidth,height:a._stageHeight,iframelimit:o.video?a._options.maxVideoSize:n})})},100)}return a._options.clicknext&&!i.TOUCH?(a._options.pauseOnInteraction&&a.pause(),void a.next()):o.link?void(a._options.popupLinks?u=e.open(o.link,\"_blank\"):e.location.href=o.link):void(a._options.lightbox&&a.openLightbox())}}),a._playCheck(),a.trigger({type:i.IMAGE,index:l.index,imageTarget:r.image,thumbTarget:h.image,galleriaData:o}),s.shift.call(a._queue),a._queue.stalled=!1,a._queue.length&&a._show()}}(r,h,l,o,d);this._options.carousel&&this._options.carouselFollow&&this._carousel.follow(o.index),a._preload(),H.show(h.container),h.isIframe=r.iframe&&!r.image,t(a._thumbnails[o.index].container).addClass(\"active\").siblings(\".active\").removeClass(\"active\"),a.trigger({type:i.LOADSTART,cached:u,index:o.index,rewind:o.rewind,imageTarget:h.image,thumbTarget:d.image,galleriaData:r}),a._queue.stalled=!0,h.load(c,function(e){var s=t(a._layers[1-a._controls.active]).html(r.layer||\"\").hide();a._scaleImage(e,{complete:function(e){\"image\"in l&&H.toggleQuality(l.image,!1),H.toggleQuality(e.image,!1),a.removePan(),a.setInfo(o.index),a.setCounter(o.index),r.layer&&(s.show(),(r.iframe&&r.image||r.link||a._options.lightbox||a._options.clicknext)&&s.css(\"cursor\",\"pointer\").off(\"mouseup\").mouseup(p)),r.video&&r.image&&O(e.container);var c=a._options.transition;if(t.each({initial:null===l.image,touch:i.TOUCH,fullscreen:a.isFullscreen()},function(t,e){if(e&&a._options[t+\"Transition\"]!==n)return c=a._options[t+\"Transition\"],!1}),c in M.effects==!1)f();else{var h={prev:l.container,next:e.container,rewind:o.rewind,speed:a._options.transitionSpeed||400};M.active=!0,M.init.call(a,c,h,f)}a.trigger({type:i.LOADFINISH,cached:u,index:o.index,rewind:o.rewind,imageTarget:e.image,thumbTarget:a._thumbnails[o.index].image,galleriaData:a.getData(o.index)})}})})}},getNext:function(t){return t=\"number\"==typeof t?t:this.getIndex(),t===this.getDataLength()-1?0:t+1},getPrev:function(t){return t=\"number\"==typeof t?t:this.getIndex(),0===t?this.getDataLength()-1:t-1},next:function(){return this.getDataLength()>1&&this.show(this.getNext(),!1),this},prev:function(){return this.getDataLength()>1&&this.show(this.getPrev(),!0),this},get:function(t){return t in this._dom?this._dom[t]:null},getData:function(t){return t in this._data?this._data[t]:this._data[this._active]},getDataLength:function(){return this._data.length},getIndex:function(){return\"number\"==typeof this._active&&this._active},getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:function(t){return\"undefined\"==typeof t?this._options:this._options[t]},setOptions:function(e,i){return\"object\"==typeof e?t.extend(this._options,e):this._options[e]=i,this},play:function(t){return this._playing=!0,this._playtime=t||this._playtime,this._playCheck(),this.trigger(i.PLAY),this},pause:function(){return this._playing=!1,this.trigger(i.PAUSE),this},playToggle:function(t){return this._playing?this.pause():this.play(t)},isPlaying:function(){return this._playing},isFullscreen:function(){return this._fullscreen.active},_playCheck:function(){var t=this,e=0,n=20,a=H.timestamp(),o=\"play\"+this._id;if(this._playing){this.clearTimer(o);var r=function(){return e=H.timestamp()-a,e>=t._playtime&&t._playing?(t.clearTimer(o),void t.next()):void(t._playing&&(t.trigger({type:i.PROGRESS,percent:g.ceil(e/t._playtime*100),seconds:g.floor(e/1e3),milliseconds:e}),t.addTimer(o,r,n)))};t.addTimer(o,r,n)}},setPlaytime:function(t){return this._playtime=t,this},setIndex:function(t){return this._active=t,this},setCounter:function(t){if(\"number\"==typeof t?t++:\"undefined\"==typeof t&&(t=this.getIndex()+1),this.get(\"current\").innerHTML=t,y){var e=this.$(\"counter\"),i=e.css(\"opacity\");1===parseInt(i,10)?H.removeAlpha(e[0]):this.$(\"counter\").css(\"opacity\",i)}return this},setInfo:function(e){var i=this,n=this.getData(e);return t.each([\"title\",\"description\"],function(t,e){var a=i.$(\"info-\"+e);n[e]?a[n[e].length?\"show\":\"hide\"]().html(n[e]):a.empty().hide()}),this},hasInfo:function(t){var e,i=\"title description\".split(\" \");for(e=0;i[e];e++)if(this.getData(t)[i[e]])return!0;return!1},jQuery:function(e){var i=this,n=[];t.each(e.split(\",\"),function(e,a){a=t.trim(a),i.get(a)&&n.push(a)});var a=t(i.get(n.shift()));return t.each(n,function(t,e){a=a.add(i.get(e))}),a},$:function(t){return this.jQuery.apply(this,H.array(arguments))}},t.each(x,function(t,e){var n=/_/.test(e)?e.replace(/_/g,\"\"):e;i[e.toUpperCase()]=\"galleria.\"+n}),t.extend(i,{IE9:9===y,IE8:8===y,IE7:7===y,IE6:6===y,IE:y,WEBKIT:/webkit/.test(d),CHROME:/chrome/.test(d),SAFARI:/safari/.test(d)&&!/chrome/.test(d),QUIRK:y&&a.compatMode&&\"BackCompat\"===a.compatMode,MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!e.opera,IPHONE:/iphone/.test(d),IPAD:/ipad/.test(d),ANDROID:/android/.test(d),TOUCH:\"ontouchstart\"in a}),i.addTheme=function(n){n.name||i.raise(\"No theme name specified\"),\"object\"!=typeof n.defaults?n.defaults={}:n.defaults=T(n.defaults);var a,o=!1;return\"string\"==typeof n.css?(t(\"link\").each(function(t,e){if(a=new RegExp(n.css),a.test(e.href))return o=!0,F(n),!1}),o||t(function(){var r=0,s=function(){t(\"script\").each(function(t,i){a=new RegExp(\"galleria\\\\.\"+n.name.toLowerCase()+\"\\\\.\"),a.test(i.src)&&(o=i.src.replace(/[^\\/]*$/,\"\")+n.css,e.setTimeout(function(){H.loadCSS(o,\"galleria-theme-\"+n.name,function(){F(n)})},1))}),o||(r++>5?i.raise(\"No theme CSS loaded\"):e.setTimeout(s,500))};s()})):F(n),n},i.loadTheme=function(n,a){if(!t(\"script\").filter(function(){return t(this).attr(\"src\")==n}).length){var o,r=!1;return t(e).load(function(){r||(o=e.setTimeout(function(){r||i.raise(\"Galleria had problems loading theme at \"+n+\". Please check theme path or load manually.\",!0)},2e4))}),H.loadScript(n,function(){r=!0,e.clearTimeout(o)}),i}},i.get=function(t){return D[t]?D[t]:\"number\"!=typeof t?D:void i.raise(\"Gallery index \"+t+\" not found\")},i.configure=function(e,n){var a={};return\"string\"==typeof e&&n?(a[e]=n,e=a):t.extend(a,e),i.configure.options=a,t.each(i.get(),function(t,e){e.setOptions(a)}),i},i.configure.options={},i.on=function(e,n){if(e){n=n||m;var a=e+n.toString().replace(/\\s/g,\"\")+H.timestamp();return t.each(i.get(),function(t,i){i._binds.push(a),i.bind(e,n)}),i.on.binds.push({type:e,callback:n,hash:a}),i}},i.on.binds=[],i.run=function(e,n){return t.isFunction(n)&&(n={extend:n}),t(e||\"#galleria\").galleria(n),i},i.addTransition=function(t,e){return M.effects[t]=e,i},i.utils=H,i.log=function(){var i=H.array(arguments);if(!(\"console\"in e&&\"log\"in e.console))return e.alert(i.join(\"<br>\"));try{return e.console.log.apply(e.console,i)}catch(n){t.each(i,function(){e.console.log(this)})}},i.ready=function(e){return\"function\"!=typeof e?i:(t.each(E,function(t,i){e.call(i,i._options)}),i.ready.callbacks.push(e),i)},i.ready.callbacks=[],i.raise=function(e,i){var n=i?\"Fatal error\":\"Error\",a={color:\"#fff\",position:\"absolute\",top:0,left:0,zIndex:1e5},o=function(e){var o='<div style=\"padding:4px;margin:0 0 2px;background:#'+(i?\"811\":\"222\")+';\">'+(i?\"<strong>\"+n+\": </strong>\":\"\")+e+\"</div>\";t.each(D,function(){var t=this.$(\"errors\"),e=this.$(\"target\");t.length||(e.css(\"position\",\"relative\"),t=this.addElement(\"errors\").appendChild(\"target\",\"errors\").$(\"errors\").css(a)),t.append(o)}),D.length||t(\"<div>\").css(t.extend(a,{position:\"fixed\"})).append(o).appendTo(_().body)};if(l){if(o(e),i)throw new Error(n+\": \"+e)}else if(i){if(L)return;L=!0,i=!1,o(\"Gallery could not load.\")}},i.version=c,i.getLoadedThemes=function(){return t.map(z,function(t){return t.name})},i.requires=function(t,e){return e=e||\"You need to upgrade Galleria to version \"+t+\" to use one or more components.\",i.version<t&&i.raise(e,!0),i},i.Picture=function(e){this.id=e||null,this.image=null,this.container=H.create(\"galleria-image\"),t(this.container).css({overflow:\"hidden\",position:\"relative\"}),this.original={width:0,height:0},this.ready=!1,this.isIframe=!1},i.Picture.prototype={cache:{},show:function(){H.show(this.image)},hide:function(){H.moveOut(this.image)},clear:function(){this.image=null},isCached:function(t){return!!this.cache[t]},preload:function(e){t(new Image).load(function(t,e){return function(){e[t]=t}}(e,this.cache)).attr(\"src\",e)},load:function(n,a,o){if(\"function\"==typeof a&&(o=a,a=null),this.isIframe){var r=\"if\"+(new Date).getTime(),s=this.image=t(\"<iframe>\",{src:n,frameborder:0,id:r,allowfullscreen:!0,css:{visibility:\"hidden\"\n}})[0];return a&&t(s).css(a),t(this.container).find(\"iframe,img\").remove(),this.container.appendChild(this.image),t(\"#\"+r).load(function(i,n){return function(){e.setTimeout(function(){t(i.image).css(\"visibility\",\"visible\"),\"function\"==typeof n&&n.call(i,i)},10)}}(this,o)),this.container}this.image=new Image,i.IE8&&t(this.image).css(\"filter\",\"inherit\"),i.IE||i.CHROME||i.SAFARI||t(this.image).css(\"image-rendering\",\"optimizequality\");var c=!1,l=!1,h=t(this.container),d=t(this.image),p=function(){c?u?t(this).attr(\"src\",u):i.raise(\"Image not found: \"+n):(c=!0,e.setTimeout(function(t,e){return function(){t.attr(\"src\",e+(e.indexOf(\"?\")>-1?\"&\":\"?\")+H.timestamp())}}(t(this),n),50))},f=function(n,o,r){return function(){var s=function(){t(this).off(\"load\"),n.original=a||{height:this.height,width:this.width},i.HAS3D&&(this.style.MozTransform=this.style.webkitTransform=\"translate3d(0,0,0)\"),h.append(this),n.cache[r]=r,\"function\"==typeof o&&e.setTimeout(function(){o.call(n,n)},1)};this.width&&this.height?s.call(this):!function(e){H.wait({until:function(){return e.width&&e.height},success:function(){s.call(e)},error:function(){l?i.raise(\"Could not extract width/height from image: \"+e.src+\". Traced measures: width:\"+e.width+\"px, height: \"+e.height+\"px.\"):(t(new Image).load(f).attr(\"src\",e.src),l=!0)},timeout:100})}(this)}}(this,o,n);return h.find(\"iframe,img\").remove(),d.css(\"display\",\"block\"),H.hide(this.image),t.each(\"minWidth minHeight maxWidth maxHeight\".split(\" \"),function(t,e){d.css(e,/min/.test(e)?\"0\":\"none\")}),d.load(f).on(\"error\",p).attr(\"src\",n),this.container},scale:function(e){var a=this;if(e=t.extend({width:0,height:0,min:n,max:n,margin:0,complete:m,position:\"center\",crop:!1,canvas:!1,iframelimit:n},e),this.isIframe){var o,r,s=e.width,c=e.height;if(e.iframelimit){var l=g.min(e.iframelimit/s,e.iframelimit/c);l<1?(o=s*l,r=c*l,t(this.image).css({top:c/2-r/2,left:s/2-o/2,position:\"absolute\"})):t(this.image).css({top:0,left:0})}t(this.image).width(o||s).height(r||c).removeAttr(\"width\").removeAttr(\"height\"),t(this.container).width(s).height(c),e.complete.call(a,a);try{this.image.contentWindow&&t(this.image.contentWindow).trigger(\"resize\")}catch(t){}return this.container}if(!this.image)return this.container;var h,u,d,p=t(a.container);return H.wait({until:function(){return h=e.width||p.width()||H.parseValue(p.css(\"width\")),u=e.height||p.height()||H.parseValue(p.css(\"height\")),h&&u},success:function(){var i=(h-2*e.margin)/a.original.width,n=(u-2*e.margin)/a.original.height,o=g.min(i,n),r=g.max(i,n),s={true:r,width:i,height:n,false:o,landscape:a.original.width>a.original.height?r:o,portrait:a.original.width<a.original.height?r:o},c=s[e.crop.toString()],l=\"\";e.max&&(c=g.min(e.max,c)),e.min&&(c=g.max(e.min,c)),t.each([\"width\",\"height\"],function(e,i){t(a.image)[i](a[i]=a.image[i]=g.round(a.original[i]*c))}),t(a.container).width(h).height(u),e.canvas&&$&&($.elem.width=a.width,$.elem.height=a.height,l=a.image.src+\":\"+a.width+\"x\"+a.height,a.image.src=$.cache[l]||function(t){$.context.drawImage(a.image,0,0,a.original.width*c,a.original.height*c);try{return d=$.elem.toDataURL(),$.length+=d.length,$.cache[t]=d,d}catch(t){return a.image.src}}(l));var p={},f={},m=function(e,i,n){var o=0;if(/\\%/.test(e)){var r=parseInt(e,10)/100,s=a.image[i]||t(a.image)[i]();o=g.ceil(s*-1*r+n*r)}else o=H.parseValue(e);return o},v={top:{top:0},left:{left:0},right:{left:\"100%\"},bottom:{top:\"100%\"}};t.each(e.position.toLowerCase().split(\" \"),function(t,e){\"center\"===e&&(e=\"50%\"),p[t?\"top\":\"left\"]=e}),t.each(p,function(e,i){v.hasOwnProperty(i)&&t.extend(f,v[i])}),p=p.top?t.extend(p,f):f,p=t.extend({top:\"50%\",left:\"50%\"},p),t(a.image).css({position:\"absolute\",top:m(p.top,\"height\",u),left:m(p.left,\"width\",h)}),a.show(),a.ready=!0,e.complete.call(a,a)},error:function(){i.raise(\"Could not scale image: \"+a.image.src)},timeout:1e3}),this}},t.extend(t.easing,{galleria:function(t,e,i,n,a){return(e/=a/2)<1?n/2*e*e*e+i:n/2*((e-=2)*e*e+2)+i},galleriaIn:function(t,e,i,n,a){return n*(e/=a)*e+i},galleriaOut:function(t,e,i,n,a){return-n*(e/=a)*(e-2)+i}}),i.Finger=function(){var n=(g.abs,i.HAS3D=function(){var e,i,n=a.createElement(\"p\"),o=[\"webkit\",\"O\",\"ms\",\"Moz\",\"\"],r=0,s=\"transform\";for(_().html.insertBefore(n,null);o[r];r++)i=o[r]?o[r]+\"Transform\":s,void 0!==n.style[i]&&(n.style[i]=\"translate3d(1px,1px,1px)\",e=t(n).css(o[r]?\"-\"+o[r].toLowerCase()+\"-\"+s:s));return _().html.removeChild(n),void 0!==e&&e.length>0&&\"none\"!==e}()),r=function(){var t=\"RequestAnimationFrame\";return e.requestAnimationFrame||e[\"webkit\"+t]||e[\"moz\"+t]||e[\"o\"+t]||e[\"ms\"+t]||function(t){e.setTimeout(t,1e3/60)}}(),s=function(i,a){if(this.config={start:0,duration:500,onchange:function(){},oncomplete:function(){},easing:function(t,e,i,n,a){return-n*((e=e/a-1)*e*e*e-1)+i}},this.easeout=function(t,e,i,n,a){return n*((e=e/a-1)*e*e*e*e+1)+i},i.children.length){var o=this;t.extend(this.config,a),this.elem=i,this.child=i.children[0],this.to=this.pos=0,this.touching=!1,this.start={},this.index=this.config.start,this.anim=0,this.easing=this.config.easing,n||(this.child.style.position=\"absolute\",this.elem.style.position=\"relative\"),t.each([\"ontouchstart\",\"ontouchmove\",\"ontouchend\",\"setup\"],function(t,e){o[e]=function(t){return function(){t.apply(o,arguments)}}(o[e])}),this.setX=function(){var t=o.child.style;return n?void(t.MozTransform=t.webkitTransform=t.transform=\"translate3d(\"+o.pos+\"px,0,0)\"):void(t.left=o.pos+\"px\")},t(i).on(\"touchstart\",this.ontouchstart),t(e).on(\"resize\",this.setup),t(e).on(\"orientationchange\",this.setup),this.setup(),function t(){r(t),o.loop.call(o)}()}};return s.prototype={constructor:s,setup:function(){this.width=t(this.elem).width(),this.length=g.ceil(t(this.child).width()/this.width),0!==this.index&&(this.index=g.max(0,g.min(this.index,this.length-1)),this.pos=this.to=-this.width*this.index)},setPosition:function(t){this.pos=t,this.to=t},ontouchstart:function(t){var e=t.originalEvent.touches;this.start={pageX:e[0].pageX,pageY:e[0].pageY,time:+new Date},this.isScrolling=null,this.touching=!0,this.deltaX=0,o.on(\"touchmove\",this.ontouchmove),o.on(\"touchend\",this.ontouchend)},ontouchmove:function(t){var e=t.originalEvent.touches;e&&e.length>1||t.scale&&1!==t.scale||(this.deltaX=e[0].pageX-this.start.pageX,null===this.isScrolling&&(this.isScrolling=!!(this.isScrolling||g.abs(this.deltaX)<g.abs(e[0].pageY-this.start.pageY))),this.isScrolling||(t.preventDefault(),this.deltaX/=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0?g.abs(this.deltaX)/this.width+1.8:1,this.to=this.deltaX-this.index*this.width),t.stopPropagation())},ontouchend:function(t){this.touching=!1;var e=+new Date-this.start.time<250&&g.abs(this.deltaX)>40||g.abs(this.deltaX)>this.width/2,i=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0;this.isScrolling||this.show(this.index+(e&&!i?this.deltaX<0?1:-1:0)),o.off(\"touchmove\",this.ontouchmove),o.off(\"touchend\",this.ontouchend)},show:function(t){t!=this.index?this.config.onchange.call(this,t):this.to=-(t*this.width)},moveTo:function(t){t!=this.index&&(this.pos=this.to=-(t*this.width),this.index=t)},loop:function(){var t=this.to-this.pos,e=1;if(this.width&&t&&(e=g.max(.5,g.min(1.5,g.abs(t/this.width)))),this.touching||g.abs(t)<=1)this.pos=this.to,t=0,this.anim&&!this.touching&&this.config.oncomplete(this.index),this.anim=0,this.easing=this.config.easing;else{this.anim||(this.anim={start:this.pos,time:+new Date,distance:t,factor:e,destination:this.to});var i=+new Date-this.anim.time,n=this.config.duration*this.anim.factor;if(i>n||this.anim.destination!=this.to)return this.anim=0,void(this.easing=this.easeout);this.pos=this.easing(null,i,this.anim.start,this.anim.distance,n)}this.setX()}},s}(),t.fn.galleria=function(e){var n=this.selector;return t(this).length?this.each(function(){t.data(this,\"galleria\")&&(t.data(this,\"galleria\").destroy(),t(this).find(\"*\").hide()),t.data(this,\"galleria\",(new i).init(this,e))}):(t(function(){t(n).length?t(n).galleria(e):i.utils.wait({until:function(){return t(n).length},success:function(){t(n).galleria(e)},error:function(){i.raise('Init failed: Galleria could not find the element \"'+n+'\".')},timeout:5e3})}),this)},\"object\"==typeof module&&module&&\"object\"==typeof module.exports?module.exports=i:(e.Galleria=i,\"function\"==typeof define&&define.amd&&define(\"galleria\",[\"jquery\"],function(){return i}))}(jQuery,this);\n//# sourceMappingURL=galleria.min.js.map","source":"galleria/galleria-1.4.5.min.js","raw":"!function(t,e,i,n){var a=e.document,o=t(a),r=t(e),s=Array.prototype,c=1.44,l=!0,h=3e4,u=!1,d=navigator.userAgent.toLowerCase(),p=e.location.hash.replace(/#\\//,\"\"),f=\"file:\"==e.location.protocol?\"http:\":e.location.protocol,g=Math,m=function(){},v=function(){return!1},y=function(){var t=3,e=a.createElement(\"div\"),i=e.getElementsByTagName(\"i\");do e.innerHTML=\"<!--[if gt IE \"+ ++t+\"]><i></i><![endif]-->\";while(i[0]);return t>4?t:a.documentMode||n}(),_=function(){return{html:a.documentElement,body:a.body,head:a.getElementsByTagName(\"head\")[0],title:a.title}},b=e.parent!==e.self,w=\"data ready thumbnail loadstart loadfinish image play pause progress fullscreen_enter fullscreen_exit idle_enter idle_exit rescale lightbox_open lightbox_close lightbox_image\",x=function(){var e=[];return t.each(w.split(\" \"),function(t,i){e.push(i),/_/.test(i)&&e.push(i.replace(/_/g,\"\"))}),e}(),T=function(e){var i;return\"object\"!=typeof e?e:(t.each(e,function(n,a){/^[a-z]+_/.test(n)&&(i=\"\",t.each(n.split(\"_\"),function(t,e){i+=t>0?e.substr(0,1).toUpperCase()+e.substr(1):e}),e[i]=a,delete e[n])}),e)},k=function(e){return t.inArray(e,x)>-1?i[e.toUpperCase()]:e},C={youtube:{reg:/https?:\\/\\/(?:[a-zA_Z]{2,3}.)?(?:youtube\\.com\\/watch\\?)((?:[\\w\\d\\-\\_\\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\\-\\_]+))/i,embed:function(){return f+\"//www.youtube.com/embed/\"+this.id},get_thumb:function(t){return f+\"//img.youtube.com/vi/\"+this.id+\"/default.jpg\"},get_image:function(t){return f+\"//img.youtube.com/vi/\"+this.id+\"/hqdefault.jpg\"}},vimeo:{reg:/https?:\\/\\/(?:www\\.)?(vimeo\\.com)\\/(?:hd#)?([0-9]+)/i,embed:function(){return f+\"//player.vimeo.com/video/\"+this.id},getUrl:function(){return f+\"//vimeo.com/api/v2/video/\"+this.id+\".json?callback=?\"},get_thumb:function(t){return t[0].thumbnail_medium},get_image:function(t){return t[0].thumbnail_large}},dailymotion:{reg:/https?:\\/\\/(?:www\\.)?(dailymotion\\.com)\\/video\\/([^_]+)/,embed:function(){return f+\"//www.dailymotion.com/embed/video/\"+this.id},getUrl:function(){return\"https://api.dailymotion.com/video/\"+this.id+\"?fields=thumbnail_240_url,thumbnail_720_url&callback=?\"},get_thumb:function(t){return t.thumbnail_240_url},get_image:function(t){return t.thumbnail_720_url}},_inst:[]},I=function(i,n){for(var a=0;a<C._inst.length;a++)if(C._inst[a].id===n&&C._inst[a].type==i)return C._inst[a];this.type=i,this.id=n,this.readys=[],C._inst.push(this);var o=this;t.extend(this,C[i]),_videoThumbs=function(e){o.data=e,t.each(o.readys,function(t,e){e(o.data)}),o.readys=[]},this.hasOwnProperty(\"getUrl\")?t.getJSON(this.getUrl(),_videoThumbs):e.setTimeout(_videoThumbs,400),this.getMedia=function(t,e,i){i=i||m;var n=this,a=function(i){e(n[\"get_\"+t](i))};try{n.data?a(n.data):n.readys.push(a)}catch(t){i()}}},S=function(t){var e;for(var i in C)if(e=t&&C[i].reg&&t.match(C[i].reg),e&&e.length)return{id:e[2],provider:i};return!1},A={support:function(){var t=_().html;return!b&&(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen)}(),callback:m,enter:function(t,e,i){this.instance=t,this.callback=e||m,i=i||_().html,i.requestFullscreen?i.requestFullscreen():i.msRequestFullscreen?i.msRequestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullScreen&&i.webkitRequestFullScreen()},exit:function(t){this.callback=t||m,a.exitFullscreen?a.exitFullscreen():a.msExitFullscreen?a.msExitFullscreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.webkitCancelFullScreen&&a.webkitCancelFullScreen()},instance:null,listen:function(){if(this.support){var t=function(){if(A.instance){var t=A.instance._fullscreen;a.fullscreen||a.mozFullScreen||a.webkitIsFullScreen||a.msFullscreenElement&&null!==a.msFullscreenElement?t._enter(A.callback):t._exit(A.callback)}};a.addEventListener(\"fullscreenchange\",t,!1),a.addEventListener(\"MSFullscreenChange\",t,!1),a.addEventListener(\"mozfullscreenchange\",t,!1),a.addEventListener(\"webkitfullscreenchange\",t,!1)}}},E=[],D=[],L=!1,$=!1,P=[],z=[],F=function(e){z.push(e),t.each(P,function(t,i){i._options.theme!=e.name&&(i._initialized||i._options.theme)||(i.theme=e,i._init.call(i))})},H=function(){return{clearTimer:function(e){t.each(i.get(),function(){this.clearTimer(e)})},addTimer:function(e){t.each(i.get(),function(){this.addTimer(e)})},array:function(t){return s.slice.call(t,0)},create:function(t,e){e=e||\"div\";var i=a.createElement(e);return i.className=t,i},removeFromArray:function(e,i){return t.each(e,function(t,n){if(n==i)return e.splice(t,1),!1}),e},getScriptPath:function(e){e=e||t(\"script:last\").attr(\"src\");var i=e.split(\"/\");return 1==i.length?\"\":(i.pop(),i.join(\"/\")+\"/\")},animate:function(){var n,o,r,s,c,l,h,u=function(t){var i,n=\"transition WebkitTransition MozTransition OTransition\".split(\" \");if(e.opera)return!1;for(i=0;n[i];i++)if(\"undefined\"!=typeof t[n[i]])return n[i];return!1}((a.body||a.documentElement).style),d={MozTransition:\"transitionend\",OTransition:\"oTransitionEnd\",WebkitTransition:\"webkitTransitionEnd\",transition:\"transitionend\"}[u],p={_default:[.25,.1,.25,1],galleria:[.645,.045,.355,1],galleriaIn:[.55,.085,.68,.53],galleriaOut:[.25,.46,.45,.94],ease:[.25,0,.25,1],linear:[.25,.25,.75,.75],\"ease-in\":[.42,0,1,1],\"ease-out\":[0,0,.58,1],\"ease-in-out\":[.42,0,.58,1]},f=function(e,i,n){var a={};n=n||\"transition\",t.each(\"webkit moz ms o\".split(\" \"),function(){a[\"-\"+this+\"-\"+n]=i}),e.css(a)},g=function(t){f(t,\"none\",\"transition\"),i.WEBKIT&&i.TOUCH&&(f(t,\"translate3d(0,0,0)\",\"transform\"),t.data(\"revert\")&&(t.css(t.data(\"revert\")),t.data(\"revert\",null)))};return function(a,v,y){return y=t.extend({duration:400,complete:m,stop:!1},y),a=t(a),y.duration?u?(y.stop&&(a.off(d),g(a)),n=!1,t.each(v,function(t,e){h=a.css(t),H.parseValue(h)!=H.parseValue(e)&&(n=!0),a.css(t,h)}),n?(o=[],r=y.easing in p?p[y.easing]:p._default,s=\" \"+y.duration+\"ms cubic-bezier(\"+r.join(\",\")+\")\",void e.setTimeout(function(e,n,a,r){return function(){e.one(n,function(t){return function(){g(t),y.complete.call(t[0])}}(e)),i.WEBKIT&&i.TOUCH&&(c={},l=[0,0,0],t.each([\"left\",\"top\"],function(t,i){i in a&&(l[t]=H.parseValue(a[i])-H.parseValue(e.css(i))+\"px\",c[i]=a[i],delete a[i])}),(l[0]||l[1])&&(e.data(\"revert\",c),o.push(\"-webkit-transform\"+r),f(e,\"translate3d(\"+l.join(\",\")+\")\",\"transform\"))),t.each(a,function(t,e){o.push(t+r)}),f(e,o.join(\",\")),e.css(a)}}(a,d,v,s),2)):void e.setTimeout(function(){y.complete.call(a[0])},y.duration)):void a.animate(v,y):(a.css(v),void y.complete.call(a[0]))}}(),removeAlpha:function(t){if(t instanceof jQuery&&(t=t[0]),y<9&&t){var e=t.style,i=t.currentStyle,n=i&&i.filter||e.filter||\"\";/alpha/.test(n)&&(e.filter=n.replace(/alpha\\([^)]*\\)/i,\"\"))}},forceStyles:function(e,i){e=t(e),e.attr(\"style\")&&e.data(\"styles\",e.attr(\"style\")).removeAttr(\"style\"),e.css(i)},revertStyles:function(){t.each(H.array(arguments),function(e,i){i=t(i),i.removeAttr(\"style\"),i.attr(\"style\",\"\"),i.data(\"styles\")&&i.attr(\"style\",i.data(\"styles\")).data(\"styles\",null)})},moveOut:function(t){H.forceStyles(t,{position:\"absolute\",left:-1e4})},moveIn:function(){H.revertStyles.apply(H,H.array(arguments))},hide:function(e,i,n){n=n||m;var a=t(e);e=a[0],a.data(\"opacity\")||a.data(\"opacity\",a.css(\"opacity\"));var o={opacity:0};if(i){var r=y<9&&e?function(){H.removeAlpha(e),e.style.visibility=\"hidden\",n.call(e)}:n;H.animate(e,o,{duration:i,complete:r,stop:!0})}else y<9&&e?(H.removeAlpha(e),e.style.visibility=\"hidden\"):a.css(o)},show:function(e,i,n){n=n||m;var a=t(e);e=a[0];var o=parseFloat(a.data(\"opacity\"))||1,r={opacity:o};if(i){y<9&&(a.css(\"opacity\",0),e.style.visibility=\"visible\");var s=y<9&&e?function(){1==r.opacity&&H.removeAlpha(e),n.call(e)}:n;H.animate(e,r,{duration:i,complete:s,stop:!0})}else y<9&&1==r.opacity&&e?(H.removeAlpha(e),e.style.visibility=\"visible\"):a.css(r)},wait:function(n){i._waiters=i._waiters||[],n=t.extend({until:v,success:m,error:function(){i.raise(\"Could not complete wait function.\")},timeout:3e3},n);var a,o,r,s=H.timestamp(),c=function(){return o=H.timestamp(),a=o-s,H.removeFromArray(i._waiters,r),n.until(a)?(n.success(),!1):\"number\"==typeof n.timeout&&o>=s+n.timeout?(n.error(),!1):void i._waiters.push(r=e.setTimeout(c,10))};i._waiters.push(r=e.setTimeout(c,10))},toggleQuality:function(t,e){7!==y&&8!==y||!t||\"IMG\"!=t.nodeName.toUpperCase()||(\"undefined\"==typeof e&&(e=\"nearest-neighbor\"===t.style.msInterpolationMode),t.style.msInterpolationMode=e?\"bicubic\":\"nearest-neighbor\")},insertStyleTag:function(e,i){if(!i||!t(\"#\"+i).length){var n=a.createElement(\"style\");if(i&&(n.id=i),_().head.appendChild(n),n.styleSheet)n.styleSheet.cssText=e;else{var o=a.createTextNode(e);n.appendChild(o)}}},loadScript:function(e,i){var n=!1,a=t(\"<script>\").attr({src:e,async:!0}).get(0);a.onload=a.onreadystatechange=function(){n||this.readyState&&\"loaded\"!==this.readyState&&\"complete\"!==this.readyState||(n=!0,a.onload=a.onreadystatechange=null,\"function\"==typeof i&&i.call(this,this))},_().head.appendChild(a)},parseValue:function(t){if(\"number\"==typeof t)return t;if(\"string\"==typeof t){var e=t.match(/\\-?\\d|\\./g);return e&&e.constructor===Array?1*e.join(\"\"):0}return 0},timestamp:function(){return(new Date).getTime()},loadCSS:function(e,o,r){var s,c;if(t(\"link[rel=stylesheet]\").each(function(){if(new RegExp(e).test(this.href))return s=this,!1}),\"function\"==typeof o&&(r=o,o=n),r=r||m,s)return r.call(s,s),s;if(c=a.styleSheets.length,t(\"#\"+o).length)t(\"#\"+o).attr(\"href\",e),c--;else{s=t(\"<link>\").attr({rel:\"stylesheet\",href:e,id:o}).get(0);var l=t('link[rel=\"stylesheet\"], style');if(l.length?l.get(0).parentNode.insertBefore(s,l[0]):_().head.appendChild(s),y&&c>=31)return void i.raise(\"You have reached the browser stylesheet limit (31)\",!0)}if(\"function\"==typeof r){var h=t(\"<s>\").attr(\"id\",\"galleria-loader\").hide().appendTo(_().body);H.wait({until:function(){return 1==h.height()},success:function(){h.remove(),r.call(s,s)},error:function(){h.remove(),i.raise(\"Theme CSS could not load after 20 sec. \"+(i.QUIRK?\"Your browser is in Quirks Mode, please add a correct doctype.\":\"Please download the latest theme at http://galleria.io/customer/.\"),!0)},timeout:5e3})}return s}}}(),O=function(e){var i=\".galleria-videoicon{width:60px;height:60px;position:absolute;top:50%;left:50%;z-index:1;margin:-30px 0 0 -30px;cursor:pointer;background:#000;background:rgba(0,0,0,.8);border-radius:3px;-webkit-transition:all 150ms}.galleria-videoicon i{width:0px;height:0px;border-style:solid;border-width:10px 0 10px 16px;display:block;border-color:transparent transparent transparent #ffffff;margin:20px 0 0 22px}.galleria-image:hover .galleria-videoicon{background:#000}\";return H.insertStyleTag(i,\"galleria-videoicon\"),t(H.create(\"galleria-videoicon\")).html(\"<i></i>\").appendTo(e).click(function(){t(this).siblings(\"img\").mouseup()})},M=function(){var e=function(e,i,n,a){var o=this.getOptions(\"easing\"),r=this.getStageWidth(),s={left:r*(e.rewind?-1:1)},c={left:0};n?(s.opacity=0,c.opacity=1):s.opacity=1,t(e.next).css(s),H.animate(e.next,c,{duration:e.speed,complete:function(t){return function(){i(),t.css({left:0})}}(t(e.next).add(e.prev)),queue:!1,easing:o}),a&&(e.rewind=!e.rewind),e.prev&&(s={left:0},c={left:r*(e.rewind?1:-1)},n&&(s.opacity=1,c.opacity=0),t(e.prev).css(s),H.animate(e.prev,c,{duration:e.speed,queue:!1,easing:o,complete:function(){t(this).css(\"opacity\",0)}}))};return{active:!1,init:function(t,e,i){M.effects.hasOwnProperty(t)&&M.effects[t].call(this,e,i)},effects:{fade:function(e,i){t(e.next).css({opacity:0,left:0}),H.animate(e.next,{opacity:1},{duration:e.speed,complete:i}),e.prev&&(t(e.prev).css(\"opacity\",1).show(),H.animate(e.prev,{opacity:0},{duration:e.speed}))},flash:function(e,i){t(e.next).css({opacity:0,left:0}),e.prev?H.animate(e.prev,{opacity:0},{duration:e.speed/2,complete:function(){H.animate(e.next,{opacity:1},{duration:e.speed,complete:i})}}):H.animate(e.next,{opacity:1},{duration:e.speed,complete:i})},pulse:function(e,i){e.prev&&t(e.prev).hide(),t(e.next).css({opacity:0,left:0}).show(),H.animate(e.next,{opacity:1},{duration:e.speed,complete:i})},slide:function(t,i){e.apply(this,H.array(arguments))},fadeslide:function(t,i){e.apply(this,H.array(arguments).concat([!0]))},doorslide:function(t,i){e.apply(this,H.array(arguments).concat([!1,!0]))}}}}();A.listen(),t.event.special[\"click:fast\"]={propagate:!0,add:function(i){var n=function(t){if(t.touches&&t.touches.length){var e=t.touches[0];return{x:e.pageX,y:e.pageY}}},a={touched:!1,touchdown:!1,coords:{x:0,y:0},evObj:{}};t(this).data({clickstate:a,timer:0}).on(\"touchstart.fast\",function(i){e.clearTimeout(t(this).data(\"timer\")),t(this).data(\"clickstate\",{touched:!0,touchdown:!0,coords:n(i.originalEvent),evObj:i})}).on(\"touchmove.fast\",function(e){var i=n(e.originalEvent),a=t(this).data(\"clickstate\"),o=Math.max(Math.abs(a.coords.x-i.x),Math.abs(a.coords.y-i.y));o>6&&t(this).data(\"clickstate\",t.extend(a,{touchdown:!1}))}).on(\"touchend.fast\",function(n){var o=t(this),r=o.data(\"clickstate\");r.touchdown&&i.handler.call(this,n),o.data(\"timer\",e.setTimeout(function(){o.data(\"clickstate\",a)},400))}).on(\"click.fast\",function(e){var n=t(this).data(\"clickstate\");return!n.touched&&(t(this).data(\"clickstate\",a),void i.handler.call(this,e))})},remove:function(){t(this).off(\"touchstart.fast touchmove.fast touchend.fast click.fast\")}},r.on(\"orientationchange\",function(){t(this).resize()}),i=function(){var s=this;this._options={},this._playing=!1,this._playtime=5e3,this._active=null,this._queue={length:0},this._data=[],this._dom={},this._thumbnails=[],this._layers=[],this._initialized=!1,this._firstrun=!1,this._stageWidth=0,this._stageHeight=0,this._target=n,this._binds=[],this._id=parseInt(1e4*g.random(),10);var c=\"container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip\",l=\"current total\";t.each(c.split(\" \"),function(t,e){s._dom[e]=H.create(\"galleria-\"+e)}),t.each(l.split(\" \"),function(t,e){s._dom[e]=H.create(\"galleria-\"+e,\"span\")});var h=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(t){var e=t.keyCode||t.which;e in h.map&&\"function\"==typeof h.map[e]&&h.map[e].call(s,t)},attach:function(t){var e,i;for(e in t)t.hasOwnProperty(e)&&(i=e.toUpperCase(),i in h.keys?h.map[h.keys[i]]=t[e]:h.map[i]=t[e]);h.bound||(h.bound=!0,o.on(\"keydown\",h.press))},detach:function(){h.bound=!1,h.map={},o.off(\"keydown\",h.press)}},u=this._controls={0:n,1:n,active:0,swap:function(){u.active=u.active?0:1},getActive:function(){return s._options.swipe?u.slides[s._active]:u[u.active]},getNext:function(){return s._options.swipe?u.slides[s.getNext(s._active)]:u[1-u.active]},slides:[],frames:[],layers:[]},p=this._carousel={next:s.$(\"thumb-nav-right\"),prev:s.$(\"thumb-nav-left\"),width:0,current:0,max:0,hooks:[],update:function(){var e=0,i=0,n=[0];t.each(s._thumbnails,function(a,o){if(o.ready){e+=o.outerWidth||t(o.container).outerWidth(!0);var r=t(o.container).width();e+=r-g.floor(r),n[a+1]=e,i=g.max(i,o.outerHeight||t(o.container).outerHeight(!0))}}),s.$(\"thumbnails\").css({width:e,height:i}),p.max=e,p.hooks=n,p.width=s.$(\"thumbnails-list\").width(),p.setClasses(),s.$(\"thumbnails-container\").toggleClass(\"galleria-carousel\",e>p.width),p.width=s.$(\"thumbnails-list\").width()},bindControls:function(){var t;p.next.on(\"click:fast\",function(e){if(e.preventDefault(),\"auto\"===s._options.carouselSteps){for(t=p.current;t<p.hooks.length;t++)if(p.hooks[t]-p.hooks[p.current]>p.width){p.set(t-2);break}}else p.set(p.current+s._options.carouselSteps)}),p.prev.on(\"click:fast\",function(e){if(e.preventDefault(),\"auto\"===s._options.carouselSteps)for(t=p.current;t>=0;t--){if(p.hooks[p.current]-p.hooks[t]>p.width){p.set(t+2);break}if(0===t){p.set(0);break}}else p.set(p.current-s._options.carouselSteps)})},set:function(t){for(t=g.max(t,0);p.hooks[t-1]+p.width>=p.max&&t>=0;)t--;p.current=t,p.animate()},getLast:function(t){return(t||p.current)-1},follow:function(t){if(0===t||t===p.hooks.length-2)return void p.set(t);for(var e=p.current;p.hooks[e]-p.hooks[p.current]<p.width&&e<=p.hooks.length;)e++;t-1<p.current?p.set(t-1):t+2>e&&p.set(t-e+p.current+2)},setClasses:function(){p.prev.toggleClass(\"disabled\",!p.current),p.next.toggleClass(\"disabled\",p.hooks[p.current]+p.width>=p.max)},animate:function(e){p.setClasses();var i=p.hooks[p.current]*-1;isNaN(i)||(s.$(\"thumbnails\").css(\"left\",function(){return t(this).css(\"left\")}),H.animate(s.get(\"thumbnails\"),{left:i},{duration:s._options.carouselSpeed,easing:s._options.easing,queue:!1}))}},f=this._tooltip={initialized:!1,open:!1,timer:\"tooltip\"+s._id,swapTimer:\"swap\"+s._id,init:function(){f.initialized=!0;var t=\".galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}\";H.insertStyleTag(t,\"galleria-tooltip\"),s.$(\"tooltip\").css({opacity:.8,visibility:\"visible\",display:\"none\"})},move:function(t){var e=s.getMousePosition(t).x,i=s.getMousePosition(t).y,n=s.$(\"tooltip\"),a=e,o=i,r=n.outerHeight(!0)+1,c=n.outerWidth(!0),l=r+15,h=s.$(\"container\").width()-c-2,u=s.$(\"container\").height()-r-2;isNaN(a)||isNaN(o)||(a+=10,o-=r+8,a=g.max(0,g.min(h,a)),o=g.max(0,g.min(u,o)),i<l&&(o=l),n.css({left:a,top:o}))},bind:function(e,n){if(!i.TOUCH){f.initialized||f.init();var a=function(){s.$(\"container\").off(\"mousemove\",f.move),s.clearTimer(f.timer),s.$(\"tooltip\").stop().animate({opacity:0},200,function(){s.$(\"tooltip\").hide(),s.addTimer(f.swapTimer,function(){f.open=!1},1e3)})},o=function(e,i){f.define(e,i),t(e).hover(function(){s.clearTimer(f.swapTimer),s.$(\"container\").off(\"mousemove\",f.move).on(\"mousemove\",f.move).trigger(\"mousemove\"),f.show(e),s.addTimer(f.timer,function(){s.$(\"tooltip\").stop().show().animate({opacity:1}),f.open=!0},f.open?0:500)},a).click(a)};\"string\"==typeof n?o(e in s._dom?s.get(e):e,n):t.each(e,function(t,e){o(s.get(t),e)})}},show:function(i){i=t(i in s._dom?s.get(i):i);var n=i.data(\"tt\"),a=function(t){e.setTimeout(function(t){return function(){f.move(t)}}(t),10),i.off(\"mouseup\",a)};n=\"function\"==typeof n?n():n,n&&(s.$(\"tooltip\").html(n.replace(/\\s/,\"&#160;\")),i.on(\"mouseup\",a))},define:function(e,i){if(\"function\"!=typeof i){var n=i;i=function(){return n}}e=t(e in s._dom?s.get(e):e).data(\"tt\",i),f.show(e)}},m=this._fullscreen={scrolled:0,crop:n,active:!1,prev:t(),beforeEnter:function(t){t()},beforeExit:function(t){t()},keymap:s._keyboard.map,parseCallback:function(e,i){return M.active?function(){\"function\"==typeof e&&e.call(s);var n=s._controls.getActive(),a=s._controls.getNext();s._scaleImage(a),s._scaleImage(n),i&&s._options.trueFullscreen&&t(n.container).add(a.container).trigger(\"transitionend\")}:e},enter:function(t){m.beforeEnter(function(){t=m.parseCallback(t,!0),s._options.trueFullscreen&&A.support?(m.active=!0,H.forceStyles(s.get(\"container\"),{width:\"100%\",height:\"100%\"}),s.rescale(),i.MAC?i.SAFARI&&/version\\/[1-5]/.test(d)?(s.$(\"stage\").css(\"opacity\",0),e.setTimeout(function(){m.scale(),s.$(\"stage\").css(\"opacity\",1)},4)):(s.$(\"container\").css(\"opacity\",0).addClass(\"fullscreen\"),e.setTimeout(function(){m.scale(),s.$(\"container\").css(\"opacity\",1)},50)):s.$(\"container\").addClass(\"fullscreen\"),r.resize(m.scale),A.enter(s,t,s.get(\"container\"))):(m.scrolled=r.scrollTop(),i.TOUCH||e.scrollTo(0,0),m._enter(t))})},_enter:function(o){m.active=!0,b&&(m.iframe=function(){var n,o=a.referrer,r=a.createElement(\"a\"),s=e.location;return r.href=o,r.protocol!=s.protocol||r.hostname!=s.hostname||r.port!=s.port?(i.raise(\"Parent fullscreen not available. Iframe protocol, domains and ports must match.\"),!1):(m.pd=e.parent.document,t(m.pd).find(\"iframe\").each(function(){var t=this.contentDocument||this.contentWindow.document;if(t===a)return n=this,!1}),n)}()),H.hide(s.getActiveImage()),b&&m.iframe&&(m.iframe.scrolled=t(e.parent).scrollTop(),e.parent.scrollTo(0,0));var c=s.getData(),l=s._options,h=!s._options.trueFullscreen||!A.support,u={height:\"100%\",overflow:\"hidden\",margin:0,padding:0};if(h&&(s.$(\"container\").addClass(\"fullscreen\"),m.prev=s.$(\"container\").prev(),m.prev.length||(m.parent=s.$(\"container\").parent()),s.$(\"container\").appendTo(\"body\"),H.forceStyles(s.get(\"container\"),{position:i.TOUCH?\"absolute\":\"fixed\",top:0,left:0,width:\"100%\",height:\"100%\",zIndex:1e4}),H.forceStyles(_().html,u),H.forceStyles(_().body,u)),b&&m.iframe&&(H.forceStyles(m.pd.documentElement,u),H.forceStyles(m.pd.body,u),H.forceStyles(m.iframe,t.extend(u,{width:\"100%\",height:\"100%\",top:0,left:0,position:\"fixed\",zIndex:1e4,border:\"none\"}))),m.keymap=t.extend({},s._keyboard.map),s.attachKeyboard({escape:s.exitFullscreen,right:s.next,left:s.prev}),m.crop=l.imageCrop,l.fullscreenCrop!=n&&(l.imageCrop=l.fullscreenCrop),c&&c.big&&c.image!==c.big){var d=new i.Picture,p=d.isCached(c.big),f=s.getIndex(),g=s._thumbnails[f];s.trigger({type:i.LOADSTART,cached:p,rewind:!1,index:f,imageTarget:s.getActiveImage(),thumbTarget:g,galleriaData:c}),d.load(c.big,function(e){s._scaleImage(e,{complete:function(e){s.trigger({type:i.LOADFINISH,cached:p,index:f,rewind:!1,imageTarget:e.image,thumbTarget:g});var n=s._controls.getActive().image;n&&t(n).width(e.image.width).height(e.image.height).attr(\"style\",t(e.image).attr(\"style\")).attr(\"src\",e.image.src)}})});var v=s.getNext(f),y=new i.Picture,w=s.getData(v);y.preload(s.isFullscreen()&&w.big?w.big:w.image)}s.rescale(function(){s.addTimer(!1,function(){h&&H.show(s.getActiveImage()),\"function\"==typeof o&&o.call(s),s.rescale()},100),s.trigger(i.FULLSCREEN_ENTER)}),h?r.resize(m.scale):H.show(s.getActiveImage())},scale:function(){s.rescale()},exit:function(t){m.beforeExit(function(){t=m.parseCallback(t),s._options.trueFullscreen&&A.support?A.exit(t):m._exit(t)})},_exit:function(t){m.active=!1;var n=!s._options.trueFullscreen||!A.support,a=s.$(\"container\").removeClass(\"fullscreen\");if(m.parent?m.parent.prepend(a):a.insertAfter(m.prev),n){H.hide(s.getActiveImage()),H.revertStyles(s.get(\"container\"),_().html,_().body),i.TOUCH||e.scrollTo(0,m.scrolled);var o=s._controls.frames[s._controls.active];o&&o.image&&(o.image.src=o.image.src)}b&&m.iframe&&(H.revertStyles(m.pd.documentElement,m.pd.body,m.iframe),m.iframe.scrolled&&e.parent.scrollTo(0,m.iframe.scrolled)),s.detachKeyboard(),s.attachKeyboard(m.keymap),s._options.imageCrop=m.crop;var c=s.getData().big,l=s._controls.getActive().image;!s.getData().iframe&&l&&c&&c==l.src&&e.setTimeout(function(t){return function(){l.src=t}}(s.getData().image),1),s.rescale(function(){s.addTimer(!1,function(){n&&H.show(s.getActiveImage()),\"function\"==typeof t&&t.call(s),r.trigger(\"resize\")},50),s.trigger(i.FULLSCREEN_EXIT)}),r.off(\"resize\",m.scale)}},v=this._idle={trunk:[],bound:!1,active:!1,add:function(e,n,a,o){if(e&&!i.TOUCH){v.bound||v.addEvent(),e=t(e),\"boolean\"==typeof a&&(o=a,a={}),a=a||{};var r,s={};for(r in n)n.hasOwnProperty(r)&&(s[r]=e.css(r));e.data(\"idle\",{from:t.extend(s,a),to:n,complete:!0,busy:!1}),o?e.css(n):v.addTimer(),v.trunk.push(e)}},remove:function(e){e=t(e),t.each(v.trunk,function(t,i){i&&i.length&&!i.not(e).length&&(e.css(e.data(\"idle\").from),v.trunk.splice(t,1))}),v.trunk.length||(v.removeEvent(),s.clearTimer(v.timer))},addEvent:function(){v.bound=!0,s.$(\"container\").on(\"mousemove click\",v.showAll),\"hover\"==s._options.idleMode&&s.$(\"container\").on(\"mouseleave\",v.hide)},removeEvent:function(){v.bound=!1,s.$(\"container\").on(\"mousemove click\",v.showAll),\"hover\"==s._options.idleMode&&s.$(\"container\").off(\"mouseleave\",v.hide)},addTimer:function(){\"hover\"!=s._options.idleMode&&s.addTimer(\"idle\",function(){v.hide()},s._options.idleTime)},hide:function(){if(s._options.idleMode&&s.getIndex()!==!1){s.trigger(i.IDLE_ENTER);var e=v.trunk.length;t.each(v.trunk,function(t,i){var n=i.data(\"idle\");n&&(i.data(\"idle\").complete=!1,H.animate(i,n.to,{duration:s._options.idleSpeed,complete:function(){t==e-1&&(v.active=!1)}}))})}},showAll:function(){s.clearTimer(\"idle\"),t.each(v.trunk,function(t,e){v.show(e)})},show:function(e){var n=e.data(\"idle\");v.active&&(n.busy||n.complete)||(n.busy=!0,s.trigger(i.IDLE_EXIT),s.clearTimer(\"idle\"),H.animate(e,n.from,{duration:s._options.idleSpeed/2,complete:function(){v.active=!0,t(e).data(\"idle\").busy=!1,t(e).data(\"idle\").complete=!0}})),v.addTimer()}},w=this._lightbox={width:0,height:0,initialized:!1,active:null,image:null,elems:{},keymap:!1,init:function(){if(!w.initialized){w.initialized=!0;var e=\"overlay box content shadow title info close prevholder prev nextholder next counter image\",n={},a=s._options,o=\"\",r=\"position:absolute;\",c=\"lightbox-\",l={overlay:\"position:fixed;display:none;opacity:\"+a.overlayOpacity+\";filter:alpha(opacity=\"+100*a.overlayOpacity+\");top:0;left:0;width:100%;height:100%;background:\"+a.overlayBackground+\";z-index:99990\",box:\"position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991\",shadow:r+\"background:#000;width:100%;height:100%;\",content:r+\"background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden\",info:r+\"bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px\",close:r+\"top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999\",image:r+\"top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;\",prevholder:r+\"width:50%;top:0;bottom:40px;cursor:pointer;\",nextholder:r+\"width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;\",prev:r+\"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif\",next:r+\"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000\",title:\"float:left\",counter:\"float:right;margin-left:8px;\"},h=function(e){return e.hover(function(){t(this).css(\"color\",\"#bbb\")},function(){t(this).css(\"color\",\"#444\")})},u={},d=\"\";d=y>7?y<9?\"background:#000;filter:alpha(opacity=0);\":\"background:rgba(0,0,0,0);\":\"z-index:99999\",l.nextholder+=d,l.prevholder+=d,t.each(l,function(t,e){o+=\".galleria-\"+c+t+\"{\"+e+\"}\"}),o+=\".galleria-\"+c+\"box.iframe .galleria-\"+c+\"prevholder,.galleria-\"+c+\"box.iframe .galleria-\"+c+\"nextholder{width:100px;height:100px;top:50%;margin-top:-70px}\",H.insertStyleTag(o,\"galleria-lightbox\"),t.each(e.split(\" \"),function(t,e){s.addElement(\"lightbox-\"+e),n[e]=w.elems[e]=s.get(\"lightbox-\"+e)}),w.image=new i.Picture,t.each({box:\"shadow content close prevholder nextholder\",info:\"title counter\",content:\"info image\",prevholder:\"prev\",nextholder:\"next\"},function(e,i){var n=[];t.each(i.split(\" \"),function(t,e){n.push(c+e)}),u[c+e]=n}),s.append(u),t(n.image).append(w.image.container),t(_().body).append(n.overlay,n.box),h(t(n.close).on(\"click:fast\",w.hide).html(\"&#215;\")),t.each([\"Prev\",\"Next\"],function(e,a){var o=t(n[a.toLowerCase()]).html(/v/.test(a)?\"&#8249;&#160;\":\"&#160;&#8250;\"),r=t(n[a.toLowerCase()+\"holder\"]);return r.on(\"click:fast\",function(){w[\"show\"+a]()}),y<8||i.TOUCH?void o.show():void r.hover(function(){o.show()},function(t){o.stop().fadeOut(200)})}),t(n.overlay).on(\"click:fast\",w.hide),i.IPAD&&(s._options.lightboxTransitionSpeed=0)}},rescale:function(e){var n=g.min(r.width()-40,w.width),a=g.min(r.height()-60,w.height),o=g.min(n/w.width,a/w.height),c=g.round(w.width*o)+40,l=g.round(w.height*o)+60,h={width:c,height:l,\"margin-top\":g.ceil(l/2)*-1,\"margin-left\":g.ceil(c/2)*-1};e?t(w.elems.box).css(h):t(w.elems.box).animate(h,{duration:s._options.lightboxTransitionSpeed,easing:s._options.easing,complete:function(){var e=w.image,n=s._options.lightboxFadeSpeed;s.trigger({type:i.LIGHTBOX_IMAGE,imageTarget:e.image}),t(e.container).show(),t(e.image).animate({opacity:1},n),H.show(w.elems.info,n)}})},hide:function(){w.image.image=null,r.off(\"resize\",w.rescale),t(w.elems.box).hide().find(\"iframe\").remove(),H.hide(w.elems.info),s.detachKeyboard(),s.attachKeyboard(w.keymap),w.keymap=!1,H.hide(w.elems.overlay,200,function(){t(this).hide().css(\"opacity\",s._options.overlayOpacity),s.trigger(i.LIGHTBOX_CLOSE)})},showNext:function(){w.show(s.getNext(w.active))},showPrev:function(){w.show(s.getPrev(w.active))},show:function(n){w.active=n=\"number\"==typeof n?n:s.getIndex()||0,w.initialized||w.init(),s.trigger(i.LIGHTBOX_OPEN),w.keymap||(w.keymap=t.extend({},s._keyboard.map),s.attachKeyboard({escape:w.hide,right:w.showNext,left:w.showPrev})),r.off(\"resize\",w.rescale);var a,o,c,l=s.getData(n),h=s.getDataLength(),u=s.getNext(n);H.hide(w.elems.info);try{for(c=s._options.preload;c>0;c--)o=new i.Picture,a=s.getData(u),o.preload(a.big?a.big:a.image),u=s.getNext(u)}catch(t){}w.image.isIframe=l.iframe&&!l.image,t(w.elems.box).toggleClass(\"iframe\",w.image.isIframe),t(w.image.container).find(\".galleria-videoicon\").remove(),w.image.load(l.big||l.image||l.iframe,function(i){if(i.isIframe){var a=t(e).width(),o=t(e).height();if(i.video&&s._options.maxVideoSize){var c=g.min(s._options.maxVideoSize/a,s._options.maxVideoSize/o);c<1&&(a*=c,o*=c)}w.width=a,w.height=o}else w.width=i.original.width,w.height=i.original.height;if(t(i.image).css({width:i.isIframe?\"100%\":\"100.1%\",height:i.isIframe?\"100%\":\"100.1%\",top:0,bottom:0,zIndex:99998,opacity:0,visibility:\"visible\"}).parent().height(\"100%\"),w.elems.title.innerHTML=l.title||\"\",w.elems.counter.innerHTML=n+1+\" / \"+h,r.resize(w.rescale),w.rescale(),l.image&&l.iframe){if(t(w.elems.box).addClass(\"iframe\"),l.video){var u=O(i.container).hide();e.setTimeout(function(){u.fadeIn(200)},200)}t(i.image).css(\"cursor\",\"pointer\").mouseup(function(e,i){return function(n){t(w.image.container).find(\".galleria-videoicon\").remove(),n.preventDefault(),i.isIframe=!0,i.load(e.iframe+(e.video?\"&autoplay=1\":\"\"),{width:\"100%\",height:y<8?t(w.image.container).height():\"100%\"})}}(l,i))}}),t(w.elems.overlay).show().css(\"visibility\",\"visible\"),t(w.elems.box).show()}},x=this._timer={trunk:{},add:function(t,i,n,a){if(t=t||(new Date).getTime(),a=a||!1,this.clear(t),a){var o=i;i=function(){o(),x.add(t,i,n)}}this.trunk[t]=e.setTimeout(i,n)},clear:function(t){var i,n=function(t){e.clearTimeout(this.trunk[t]),delete this.trunk[t]};if(t&&t in this.trunk)n.call(this,t);else if(\"undefined\"==typeof t)for(i in this.trunk)this.trunk.hasOwnProperty(i)&&n.call(this,i)}};return this},i.prototype={constructor:i,init:function(e,a){if(a=T(a),this._original={target:e,options:a,data:null},this._target=this._dom.target=e.nodeName?e:t(e).get(0),this._original.html=this._target.innerHTML,D.push(this),!this._target)return void i.raise(\"Target not found\",!0);if(this._options={autoplay:!1,carousel:!0,carouselFollow:!0,carouselSpeed:400,carouselSteps:\"auto\",clicknext:!1,dailymotion:{foreground:\"%23EEEEEE\",highlight:\"%235BCEC5\",background:\"%23222222\",logo:0,hideInfos:1},dataConfig:function(t){return{}},dataSelector:\"img\",dataSort:!1,dataSource:this._target,debug:n,dummy:n,easing:\"galleria\",extend:function(t){},fullscreenCrop:n,fullscreenDoubleTap:!0,fullscreenTransition:n,height:0,idleMode:!0,idleTime:3e3,idleSpeed:200,imageCrop:!1,imageMargin:0,imagePan:!1,imagePanSmoothness:12,imagePosition:\"50%\",imageTimeout:n,initialTransition:n,keepSource:!1,layerFollow:!0,lightbox:!1,lightboxFadeSpeed:200,lightboxTransitionSpeed:200,linkSourceImages:!0,maxScaleRatio:n,maxVideoSize:n,minScaleRatio:n,overlayOpacity:.85,overlayBackground:\"#0b0b0b\",pauseOnInteraction:!0,popupLinks:!1,preload:2,queue:!0,responsive:!0,show:0,showInfo:!0,showCounter:!0,showImagenav:!0,swipe:\"auto\",theme:null,thumbCrop:!0,thumbEventType:\"click:fast\",thumbMargin:0,thumbQuality:\"auto\",thumbDisplayOrder:!0,thumbPosition:\"50%\",thumbnails:!0,touchTransition:n,transition:\"fade\",transitionInitial:n,transitionSpeed:400,trueFullscreen:!0,useCanvas:!1,variation:\"\",videoPoster:!0,vimeo:{title:0,byline:0,portrait:0,color:\"aaaaaa\"},wait:5e3,width:\"auto\",youtube:{modestbranding:1,autohide:1,color:\"white\",hd:1,rel:0,showinfo:0}},this._options.initialTransition=this._options.initialTransition||this._options.transitionInitial,\na&&(a.debug===!1&&(l=!1),\"number\"==typeof a.imageTimeout&&(h=a.imageTimeout),\"string\"==typeof a.dummy&&(u=a.dummy),\"string\"==typeof a.theme&&(this._options.theme=a.theme)),t(this._target).children().hide(),i.QUIRK&&i.raise(\"Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML and add a correct doctype.\"),z.length)if(this._options.theme){for(var o=0;o<z.length;o++)if(this._options.theme===z[o].name){this.theme=z[o];break}}else this.theme=z[0];return\"object\"==typeof this.theme?this._init():P.push(this),this},_init:function(){var o=this,s=this._options;if(this._initialized)return i.raise(\"Init failed: Gallery instance already initialized.\"),this;if(this._initialized=!0,!this.theme)return i.raise(\"Init failed: No theme found.\",!0),this;if(t.extend(!0,s,this.theme.defaults,this._original.options,i.configure.options),s.swipe=function(t){return\"enforced\"==t||t!==!1&&\"disabled\"!=t&&!!i.TOUCH}(s.swipe),s.swipe&&(s.clicknext=!1,s.imagePan=!1),function(t){return\"getContext\"in t?void($=$||{elem:t,context:t.getContext(\"2d\"),cache:{},length:0}):void(t=null)}(a.createElement(\"canvas\")),this.bind(i.DATA,function(){e.screen&&e.screen.width&&Array.prototype.forEach&&this._data.forEach(function(t){var i=\"devicePixelRatio\"in e?e.devicePixelRatio:1,n=g.max(e.screen.width,e.screen.height);n*i<1024&&(t.big=t.image)}),this._original.data=this._data,this.get(\"total\").innerHTML=this.getDataLength();var t=this.$(\"container\");o._options.height<2&&(o._userRatio=o._ratio=o._options.height);var n={width:0,height:0},a=function(){return o.$(\"stage\").height()};H.wait({until:function(){return n=o._getWH(),t.width(n.width).height(n.height),a()&&n.width&&n.height>50},success:function(){o._width=n.width,o._height=n.height,o._ratio=o._ratio||n.height/n.width,i.WEBKIT?e.setTimeout(function(){o._run()},1):o._run()},error:function(){a()?i.raise(\"Could not extract sufficient width/height of the gallery container. Traced measures: width:\"+n.width+\"px, height: \"+n.height+\"px.\",!0):i.raise(\"Could not extract a stage height from the CSS. Traced height: \"+a()+\"px.\",!0)},timeout:\"number\"==typeof this._options.wait&&this._options.wait})}),this.append({\"info-text\":[\"info-title\",\"info-description\"],info:[\"info-text\"],\"image-nav\":[\"image-nav-right\",\"image-nav-left\"],stage:[\"images\",\"loader\",\"counter\",\"image-nav\"],\"thumbnails-list\":[\"thumbnails\"],\"thumbnails-container\":[\"thumb-nav-left\",\"thumbnails-list\",\"thumb-nav-right\"],container:[\"stage\",\"thumbnails-container\",\"info\",\"tooltip\"]}),H.hide(this.$(\"counter\").append(this.get(\"current\"),a.createTextNode(\" / \"),this.get(\"total\"))),this.setCounter(\"&#8211;\"),H.hide(o.get(\"tooltip\")),this.$(\"container\").addClass([i.TOUCH?\"touch\":\"notouch\",this._options.variation,\"galleria-theme-\"+this.theme.name].join(\" \")),this._options.swipe||t.each(new Array(2),function(e){var n=new i.Picture;t(n.container).css({position:\"absolute\",top:0,left:0}).prepend(o._layers[e]=t(H.create(\"galleria-layer\")).css({position:\"absolute\",top:0,left:0,right:0,bottom:0,zIndex:2})[0]),o.$(\"images\").append(n.container),o._controls[e]=n;var a=new i.Picture;a.isIframe=!0,t(a.container).attr(\"class\",\"galleria-frame\").css({position:\"absolute\",top:0,left:0,zIndex:4,background:\"#000\",display:\"none\"}).appendTo(n.container),o._controls.frames[e]=a}),this.$(\"images\").css({position:\"relative\",top:0,left:0,width:\"100%\",height:\"100%\"}),s.swipe&&(this.$(\"images\").css({position:\"absolute\",top:0,left:0,width:0,height:\"100%\"}),this.finger=new i.Finger(this.get(\"stage\"),{onchange:function(t){o.pause().show(t)},oncomplete:function(e){var i=g.max(0,g.min(parseInt(e,10),o.getDataLength()-1)),n=o.getData(i);t(o._thumbnails[i].container).addClass(\"active\").siblings(\".active\").removeClass(\"active\"),n&&(o.$(\"images\").find(\".galleria-frame\").css(\"opacity\",0).hide().find(\"iframe\").remove(),o._options.carousel&&o._options.carouselFollow&&o._carousel.follow(i))}}),this.bind(i.RESCALE,function(){this.finger.setup()}),this.$(\"stage\").on(\"click\",function(i){var a=o.getData();if(a){if(a.iframe){o.isPlaying()&&o.pause();var r=o._controls.frames[o._active],s=o._stageWidth,c=o._stageHeight;if(t(r.container).find(\"iframe\").length)return;return t(r.container).css({width:s,height:c,opacity:0}).show().animate({opacity:1},200),void e.setTimeout(function(){r.load(a.iframe+(a.video?\"&autoplay=1\":\"\"),{width:s,height:c},function(t){o.$(\"container\").addClass(\"videoplay\"),t.scale({width:o._stageWidth,height:o._stageHeight,iframelimit:a.video?o._options.maxVideoSize:n})})},100)}if(a.link)if(o._options.popupLinks){e.open(a.link,\"_blank\")}else e.location.href=a.link;else;}}),this.bind(i.IMAGE,function(e){o.setCounter(e.index),o.setInfo(e.index);var i=this.getNext(),n=this.getPrev(),a=[n,i];a.push(this.getNext(i),this.getPrev(n),o._controls.slides.length-1);var r=[];t.each(a,function(e,i){t.inArray(i,r)==-1&&r.push(i)}),t.each(r,function(e,i){var n=o.getData(i),a=o._controls.slides[i],r=o.isFullscreen()&&n.big?n.big:n.image||n.iframe;n.iframe&&!n.image&&(a.isIframe=!0),a.ready||o._controls.slides[i].load(r,function(e){e.isIframe||t(e.image).css(\"visibility\",\"hidden\"),o._scaleImage(e,{complete:function(e){e.isIframe||t(e.image).css({opacity:0,visibility:\"visible\"}).animate({opacity:1},200)}})})})})),this.$(\"thumbnails, thumbnails-list\").css({overflow:\"hidden\",position:\"relative\"}),this.$(\"image-nav-right, image-nav-left\").on(\"click:fast\",function(t){s.pauseOnInteraction&&o.pause();var e=/right/.test(this.className)?\"next\":\"prev\";o[e]()}).on(\"click\",function(t){t.preventDefault(),(s.clicknext||s.swipe)&&t.stopPropagation()}),t.each([\"info\",\"counter\",\"image-nav\"],function(t,e){s[\"show\"+e.substr(0,1).toUpperCase()+e.substr(1).replace(/-/,\"\")]===!1&&H.moveOut(o.get(e.toLowerCase()))}),this.load(),s.keepSource||y||(this._target.innerHTML=\"\"),this.get(\"errors\")&&this.appendChild(\"target\",\"errors\"),this.appendChild(\"target\",\"container\"),s.carousel){var c=0,l=s.show;this.bind(i.THUMBNAIL,function(){this.updateCarousel(),++c==this.getDataLength()&&\"number\"==typeof l&&l>0&&this._carousel.follow(l)})}return s.responsive&&r.on(\"resize\",function(){o.isFullscreen()||o.resize()}),s.fullscreenDoubleTap&&this.$(\"stage\").on(\"touchstart\",function(){var t,e,i,n,a,r,s=function(t){return t.originalEvent.touches?t.originalEvent.touches[0]:t};return o.$(\"stage\").on(\"touchmove\",function(){t=0}),function(c){if(!/(-left|-right)/.test(c.target.className)){if(r=H.timestamp(),e=s(c).pageX,i=s(c).pageY,c.originalEvent.touches.length<2&&r-t<300&&e-n<20&&i-a<20)return o.toggleFullscreen(),void c.preventDefault();t=r,n=e,a=i}}}()),t.each(i.on.binds,function(e,i){t.inArray(i.hash,o._binds)==-1&&o.bind(i.type,i.callback)}),this},addTimer:function(){return this._timer.add.apply(this._timer,H.array(arguments)),this},clearTimer:function(){return this._timer.clear.apply(this._timer,H.array(arguments)),this},_getWH:function(){var e,i=this.$(\"container\"),n=this.$(\"target\"),a=this,o={};return t.each([\"width\",\"height\"],function(t,r){a._options[r]&&\"number\"==typeof a._options[r]?o[r]=a._options[r]:(e=[H.parseValue(i.css(r)),H.parseValue(n.css(r)),i[r](),n[r]()],a[\"_\"+r]||e.splice(e.length,H.parseValue(i.css(\"min-\"+r)),H.parseValue(n.css(\"min-\"+r))),o[r]=g.max.apply(g,e))}),a._userRatio&&(o.height=o.width*a._userRatio),o},_createThumbnails:function(n){this.get(\"total\").innerHTML=this.getDataLength();var o,r,s,c,l=this,h=this._options,u=n?this._data.length-n.length:0,d=u,p=[],f=0,g=y<8?\"http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif\":\"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D\",m=function(){var t=l.$(\"thumbnails\").find(\".active\");return!!t.length&&t.find(\"img\").attr(\"src\")}(),v=\"string\"==typeof h.thumbnails?h.thumbnails.toLowerCase():null,_=function(t){return a.defaultView&&a.defaultView.getComputedStyle?a.defaultView.getComputedStyle(r.container,null)[t]:c.css(t)},b=function(e,n,a){return function(){t(a).append(e),l.trigger({type:i.THUMBNAIL,thumbTarget:e,index:n,galleriaData:l.getData(n)})}},w=function(e){h.pauseOnInteraction&&l.pause();var i=t(e.currentTarget).data(\"index\");l.getIndex()!==i&&l.show(i),e.preventDefault()},x=function(e,n){t(e.container).css(\"visibility\",\"visible\"),l.trigger({type:i.THUMBNAIL,thumbTarget:e.image,index:e.data.order,galleriaData:l.getData(e.data.order)}),\"function\"==typeof n&&n.call(l,e)},T=function(e,i){e.scale({width:e.data.width,height:e.data.height,crop:h.thumbCrop,margin:h.thumbMargin,canvas:h.useCanvas,position:h.thumbPosition,complete:function(e){var n,a,o=[\"left\",\"top\"],r=[\"Width\",\"Height\"];l.getData(e.index);t.each(r,function(i,r){n=r.toLowerCase(),h.thumbCrop===!0&&h.thumbCrop!==n||(a={},a[n]=e[n],t(e.container).css(a),a={},a[o[i]]=0,t(e.image).css(a)),e[\"outer\"+r]=t(e.container)[\"outer\"+r](!0)}),H.toggleQuality(e.image,h.thumbQuality===!0||\"auto\"===h.thumbQuality&&e.original.width<3*e.width),h.thumbDisplayOrder&&!e.lazy?t.each(p,function(t,e){if(t===f&&e.ready&&!e.displayed)return f++,e.displayed=!0,void x(e,i)}):x(e,i)}})};for(n||(this._thumbnails=[],this.$(\"thumbnails\").empty());this._data[u];u++)s=this._data[u],o=s.thumb||s.image,h.thumbnails!==!0&&\"lazy\"!=v||!s.thumb&&!s.image?s.iframe&&null!==v||\"empty\"===v||\"numbers\"===v?(r={container:H.create(\"galleria-image\"),image:H.create(\"img\",\"span\"),ready:!0,data:{order:u}},\"numbers\"===v&&t(r.image).text(u+1),s.iframe&&t(r.image).addClass(\"iframe\"),this.$(\"thumbnails\").append(r.container),e.setTimeout(b(r.image,u,r.container),50+20*u)):r={container:null,image:null}:(r=new i.Picture(u),r.index=u,r.displayed=!1,r.lazy=!1,r.video=!1,this.$(\"thumbnails\").append(r.container),c=t(r.container),c.css(\"visibility\",\"hidden\"),r.data={width:H.parseValue(_(\"width\")),height:H.parseValue(_(\"height\")),order:u,src:o},h.thumbCrop!==!0?c.css({width:\"auto\",height:\"auto\"}):c.css({width:r.data.width,height:r.data.height}),\"lazy\"==v?(c.addClass(\"lazy\"),r.lazy=!0,r.load(g,{height:r.data.height,width:r.data.width})):r.load(o,T),\"all\"===h.preload&&r.preload(s.image)),t(r.container).add(h.keepSource&&h.linkSourceImages?s.original:null).data(\"index\",u).on(h.thumbEventType,w).data(\"thumbload\",T),m===o&&t(r.container).addClass(\"active\"),this._thumbnails.push(r);return p=this._thumbnails.slice(d),this},lazyLoad:function(e,i){var n=e.constructor==Array?e:[e],a=this,o=0;return t.each(n,function(e,r){if(!(r>a._thumbnails.length-1)){var s=a._thumbnails[r],c=s.data,l=function(){++o==n.length&&\"function\"==typeof i&&i.call(a)},h=t(s.container).data(\"thumbload\");s.video?h.call(a,s,l):s.load(c.src,function(t){h.call(a,t,l)})}}),this},lazyLoadChunks:function(t,i){var n=this.getDataLength(),a=0,o=0,r=[],s=[],c=this;for(i=i||0;a<n;a++)s.push(a),++o!=t&&a!=n-1||(r.push(s),o=0,s=[]);var l=function(t){var n=r.shift();n&&e.setTimeout(function(){c.lazyLoad(n,function(){l(!0)})},i&&t?i:0)};return l(!1),this},_run:function(){var a=this;a._createThumbnails(),H.wait({timeout:1e4,until:function(){return i.OPERA&&a.$(\"stage\").css(\"display\",\"inline-block\"),a._stageWidth=a.$(\"stage\").width(),a._stageHeight=a.$(\"stage\").height(),a._stageWidth&&a._stageHeight>50},success:function(){if(E.push(a),a._options.swipe){var o=a.$(\"images\").width(a.getDataLength()*a._stageWidth);t.each(new Array(a.getDataLength()),function(e){var n=new i.Picture,r=a.getData(e);t(n.container).css({position:\"absolute\",top:0,left:a._stageWidth*e}).prepend(a._layers[e]=t(H.create(\"galleria-layer\")).css({position:\"absolute\",top:0,left:0,right:0,bottom:0,zIndex:2})[0]).appendTo(o),r.video&&O(n.container),a._controls.slides.push(n);var s=new i.Picture;s.isIframe=!0,t(s.container).attr(\"class\",\"galleria-frame\").css({position:\"absolute\",top:0,left:0,zIndex:4,background:\"#000\",display:\"none\"}).appendTo(n.container),a._controls.frames.push(s)}),a.finger.setup()}return H.show(a.get(\"counter\")),a._options.carousel&&a._carousel.bindControls(),a._options.autoplay&&(a.pause(),\"number\"==typeof a._options.autoplay&&(a._playtime=a._options.autoplay),a._playing=!0),a._firstrun?(a._options.autoplay&&a.trigger(i.PLAY),void(\"number\"==typeof a._options.show&&a.show(a._options.show))):(a._firstrun=!0,i.History&&i.History.change(function(t){isNaN(t)?e.history.go(-1):a.show(t,n,!0)}),a.trigger(i.READY),a.theme.init.call(a,a._options),t.each(i.ready.callbacks,function(t,e){\"function\"==typeof e&&e.call(a,a._options)}),a._options.extend.call(a,a._options),/^[0-9]{1,4}$/.test(p)&&i.History?a.show(p,n,!0):a._data[a._options.show]&&a.show(a._options.show),void(a._options.autoplay&&a.trigger(i.PLAY)))},error:function(){i.raise(\"Stage width or height is too small to show the gallery. Traced measures: width:\"+a._stageWidth+\"px, height: \"+a._stageHeight+\"px.\",!0)}})},load:function(e,n,a){var o=this,r=this._options;return this._data=[],this._thumbnails=[],this.$(\"thumbnails\").empty(),\"function\"==typeof n&&(a=n,n=null),e=e||r.dataSource,n=n||r.dataSelector,a=a||r.dataConfig,t.isPlainObject(e)&&(e=[e]),t.isArray(e)?this.validate(e)?this._data=e:i.raise(\"Load failed: JSON Array not valid.\"):(n+=\",.video,.iframe\",t(e).find(n).each(function(e,i){i=t(i);var n={},r=i.parent(),s=r.attr(\"href\"),c=r.attr(\"rel\");s&&(\"IMG\"==i[0].nodeName||i.hasClass(\"video\"))&&S(s)?n.video=s:s&&i.hasClass(\"iframe\")?n.iframe=s:n.image=n.big=s,c&&(n.big=c),t.each(\"big title description link layer image\".split(\" \"),function(t,e){i.data(e)&&(n[e]=i.data(e).toString())}),n.big||(n.big=n.image),o._data.push(t.extend({title:i.attr(\"title\")||\"\",thumb:i.attr(\"src\"),image:i.attr(\"src\"),big:i.attr(\"src\"),description:i.attr(\"alt\")||\"\",link:i.attr(\"longdesc\"),original:i.get(0)},n,a(i)))})),\"function\"==typeof r.dataSort?s.sort.call(this._data,r.dataSort):\"random\"==r.dataSort&&this._data.sort(function(){return g.round(g.random())-.5}),this.getDataLength()&&this._parseData(function(){this.trigger(i.DATA)}),this},_parseData:function(e){var i,a=this,o=!1,r=function(){var i=!0;t.each(a._data,function(t,e){if(e.loading)return i=!1,!1}),i&&!o&&(o=!0,e.call(a))};return t.each(this._data,function(e,o){if(i=a._data[e],\"thumb\"in o==!1&&(i.thumb=o.image),o.big||(i.big=o.image),\"video\"in o){var s=S(o.video);s&&(i.iframe=new I(s.provider,s.id).embed()+function(){if(\"object\"==typeof a._options[s.provider]){var e=\"?\",i=[];return t.each(a._options[s.provider],function(t,e){i.push(t+\"=\"+e)}),\"youtube\"==s.provider&&(i=[\"wmode=opaque\"].concat(i)),e+i.join(\"&\")}return\"\"}(),i.thumb&&i.image||t.each([\"thumb\",\"image\"],function(t,e){if(\"image\"==e&&!a._options.videoPoster)return void(i.image=n);var o=new I(s.provider,s.id);i[e]||(i.loading=!0,o.getMedia(e,function(t,e){return function(i){t[e]=i,\"image\"!=e||t.big||(t.big=t.image),delete t.loading,r()}}(i,e)))}))}}),r(),this},destroy:function(){return this.$(\"target\").data(\"galleria\",null),this.$(\"container\").off(\"galleria\"),this.get(\"target\").innerHTML=this._original.html,this.clearTimer(),H.removeFromArray(D,this),H.removeFromArray(E,this),i._waiters.length&&t.each(i._waiters,function(t,i){i&&e.clearTimeout(i)}),this},splice:function(){var t=this,i=H.array(arguments);return e.setTimeout(function(){s.splice.apply(t._data,i),t._parseData(function(){t._createThumbnails()})},2),t},push:function(){var t=this,i=H.array(arguments);return 1==i.length&&i[0].constructor==Array&&(i=i[0]),e.setTimeout(function(){s.push.apply(t._data,i),t._parseData(function(){t._createThumbnails(i)})},2),t},_getActive:function(){return this._controls.getActive()},validate:function(t){return!0},bind:function(t,e){return t=k(t),this.$(\"container\").on(t,this.proxy(e)),this},unbind:function(t){return t=k(t),this.$(\"container\").off(t),this},trigger:function(e){return e=\"object\"==typeof e?t.extend(e,{scope:this}):{type:k(e),scope:this},this.$(\"container\").trigger(e),this},addIdleState:function(t,e,i,n){return this._idle.add.apply(this._idle,H.array(arguments)),this},removeIdleState:function(t){return this._idle.remove.apply(this._idle,H.array(arguments)),this},enterIdleMode:function(){return this._idle.hide(),this},exitIdleMode:function(){return this._idle.showAll(),this},enterFullscreen:function(t){return this._fullscreen.enter.apply(this,H.array(arguments)),this},exitFullscreen:function(t){return this._fullscreen.exit.apply(this,H.array(arguments)),this},toggleFullscreen:function(t){return this._fullscreen[this.isFullscreen()?\"exit\":\"enter\"].apply(this,H.array(arguments)),this},bindTooltip:function(t,e){return this._tooltip.bind.apply(this._tooltip,H.array(arguments)),this},defineTooltip:function(t,e){return this._tooltip.define.apply(this._tooltip,H.array(arguments)),this},refreshTooltip:function(t){return this._tooltip.show.apply(this._tooltip,H.array(arguments)),this},openLightbox:function(){return this._lightbox.show.apply(this._lightbox,H.array(arguments)),this},closeLightbox:function(){return this._lightbox.hide.apply(this._lightbox,H.array(arguments)),this},hasVariation:function(e){return t.inArray(e,this._options.variation.split(/\\s+/))>-1},getActiveImage:function(){var t=this._getActive();return t?t.image:n},getActiveThumb:function(){return this._thumbnails[this._active].image||n},getMousePosition:function(t){return{x:t.pageX-this.$(\"container\").offset().left,y:t.pageY-this.$(\"container\").offset().top}},addPan:function(e){if(this._options.imageCrop!==!1){e=t(e||this.getActiveImage());var i=this,n=e.width()/2,a=e.height()/2,o=parseInt(e.css(\"left\"),10),r=parseInt(e.css(\"top\"),10),s=o||0,c=r||0,l=0,h=0,u=!1,d=H.timestamp(),p=0,f=0,m=function(t,i,n){if(t>0&&(f=g.round(g.max(t*-1,g.min(0,i))),p!==f))if(p=f,8===y)e.parent()[\"scroll\"+n](f*-1);else{var a={};a[n.toLowerCase()]=f,e.css(a)}},v=function(t){H.timestamp()-d<50||(u=!0,n=i.getMousePosition(t).x,a=i.getMousePosition(t).y)},_=function(t){u&&(l=e.width()-i._stageWidth,h=e.height()-i._stageHeight,o=n/i._stageWidth*l*-1,r=a/i._stageHeight*h*-1,s+=(o-s)/i._options.imagePanSmoothness,c+=(r-c)/i._options.imagePanSmoothness,m(h,c,\"Top\"),m(l,s,\"Left\"))};return 8===y&&(e.parent().scrollTop(c*-1).scrollLeft(s*-1),e.css({top:0,left:0})),this.$(\"stage\").off(\"mousemove\",v).on(\"mousemove\",v),this.addTimer(\"pan\"+i._id,_,50,!0),this}},proxy:function(t,e){return\"function\"!=typeof t?m:(e=e||this,function(){return t.apply(e,H.array(arguments))})},getThemeName:function(){return this.theme.name},removePan:function(){return this.$(\"stage\").off(\"mousemove\"),this.clearTimer(\"pan\"+this._id),this},addElement:function(e){var i=this._dom;return t.each(H.array(arguments),function(t,e){i[e]=H.create(\"galleria-\"+e)}),this},attachKeyboard:function(t){return this._keyboard.attach.apply(this._keyboard,H.array(arguments)),this},detachKeyboard:function(){return this._keyboard.detach.apply(this._keyboard,H.array(arguments)),this},appendChild:function(t,e){return this.$(t).append(this.get(e)||e),this},prependChild:function(t,e){return this.$(t).prepend(this.get(e)||e),this},remove:function(t){return this.$(H.array(arguments).join(\",\")).remove(),this},append:function(t){var e,i;for(e in t)if(t.hasOwnProperty(e))if(t[e].constructor===Array)for(i=0;t[e][i];i++)this.appendChild(e,t[e][i]);else this.appendChild(e,t[e]);return this},_scaleImage:function(e,i){if(e=e||this._controls.getActive()){var n,a=function(e){t(e.container).children(\":first\").css({top:g.max(0,H.parseValue(e.image.style.top)),left:g.max(0,H.parseValue(e.image.style.left)),width:H.parseValue(e.image.width),height:H.parseValue(e.image.height)})};return i=t.extend({width:this._stageWidth,height:this._stageHeight,crop:this._options.imageCrop,max:this._options.maxScaleRatio,min:this._options.minScaleRatio,margin:this._options.imageMargin,position:this._options.imagePosition,iframelimit:this._options.maxVideoSize},i),this._options.layerFollow&&this._options.imageCrop!==!0?\"function\"==typeof i.complete?(n=i.complete,i.complete=function(){n.call(e,e),a(e)}):i.complete=a:t(e.container).children(\":first\").css({top:0,left:0}),e.scale(i),this}},updateCarousel:function(){return this._carousel.update(),this},resize:function(e,i){\"function\"==typeof e&&(i=e,e=n),e=t.extend({width:0,height:0},e);var a=this,o=this.$(\"container\");return t.each(e,function(t,i){i||(o[t](\"auto\"),e[t]=a._getWH()[t])}),t.each(e,function(t,e){o[t](e)}),this.rescale(i)},rescale:function(e,a,o){var r=this;\"function\"==typeof e&&(o=e,e=n);var s=function(){r._stageWidth=e||r.$(\"stage\").width(),r._stageHeight=a||r.$(\"stage\").height(),r._options.swipe?(t.each(r._controls.slides,function(e,i){r._scaleImage(i),t(i.container).css(\"left\",r._stageWidth*e)}),r.$(\"images\").css(\"width\",r._stageWidth*r.getDataLength())):r._scaleImage(),r._options.carousel&&r.updateCarousel();var n=r._controls.frames[r._controls.active];n&&r._controls.frames[r._controls.active].scale({width:r._stageWidth,height:r._stageHeight,iframelimit:r._options.maxVideoSize}),r.trigger(i.RESCALE),\"function\"==typeof o&&o.call(r)};return s.call(r),this},refreshImage:function(){return this._scaleImage(),this._options.imagePan&&this.addPan(),this},_preload:function(){if(this._options.preload){var t,e,n,a=this.getNext();try{for(e=this._options.preload;e>0;e--)t=new i.Picture,n=this.getData(a),t.preload(this.isFullscreen()&&n.big?n.big:n.image),a=this.getNext(a)}catch(t){}}},show:function(n,a,o){var r=this._options.swipe;if(r||!(this._queue.length>3||n===!1||!this._options.queue&&this._queue.stalled)){if(n=g.max(0,g.min(parseInt(n,10),this.getDataLength()-1)),a=\"undefined\"!=typeof a?!!a:n<this.getIndex(),o=o||!1,!o&&i.History)return void i.History.set(n.toString());if(this.finger&&n!==this._active&&(this.finger.to=-(n*this.finger.width),this.finger.index=n),this._active=n,r){var c=this.getData(n),l=this;if(!c)return;var h=this.isFullscreen()&&c.big?c.big:c.image||c.iframe,u=this._controls.slides[n],d=u.isCached(h),p=this._thumbnails[n],f={cached:d,index:n,rewind:a,imageTarget:u.image,thumbTarget:p.image,galleriaData:c};this.trigger(t.extend(f,{type:i.LOADSTART})),l.$(\"container\").removeClass(\"videoplay\");var m=function(){l._layers[n].innerHTML=l.getData().layer||\"\",l.trigger(t.extend(f,{type:i.LOADFINISH})),l._playCheck()};l._preload(),e.setTimeout(function(){u.ready&&t(u.image).attr(\"src\")==h?(l.trigger(t.extend(f,{type:i.IMAGE})),m()):(c.iframe&&!c.image&&(u.isIframe=!0),u.load(h,function(e){f.imageTarget=e.image,l._scaleImage(e,m).trigger(t.extend(f,{type:i.IMAGE})),m()}))},100)}else s.push.call(this._queue,{index:n,rewind:a}),this._queue.stalled||this._show();return this}},_show:function(){var a=this,o=this._queue[0],r=this.getData(o.index);if(r){var c=this.isFullscreen()&&r.big?r.big:r.image||r.iframe,l=this._controls.getActive(),h=this._controls.getNext(),u=h.isCached(c),d=this._thumbnails[o.index],p=function(){t(h.image).trigger(\"mouseup\")};a.$(\"container\").toggleClass(\"iframe\",!!r.isIframe).removeClass(\"videoplay\");var f=function(o,r,c,l,h){return function(){var u;M.active=!1,H.toggleQuality(r.image,a._options.imageQuality),a._layers[a._controls.active].innerHTML=\"\",t(c.container).css({zIndex:0,opacity:0}).show(),t(c.container).find(\"iframe, .galleria-videoicon\").remove(),t(a._controls.frames[a._controls.active].container).hide(),t(r.container).css({zIndex:1,left:0,top:0}).show(),a._controls.swap(),a._options.imagePan&&a.addPan(r.image),(o.iframe&&o.image||o.link||a._options.lightbox||a._options.clicknext)&&t(r.image).css({cursor:\"pointer\"}).on(\"mouseup\",function(r){if(!(\"number\"==typeof r.which&&r.which>1)){if(o.iframe){a.isPlaying()&&a.pause();var s=a._controls.frames[a._controls.active],c=a._stageWidth,l=a._stageHeight;return t(s.container).css({width:c,height:l,opacity:0}).show().animate({opacity:1},200),void e.setTimeout(function(){s.load(o.iframe+(o.video?\"&autoplay=1\":\"\"),{width:c,height:l},function(t){a.$(\"container\").addClass(\"videoplay\"),t.scale({width:a._stageWidth,height:a._stageHeight,iframelimit:o.video?a._options.maxVideoSize:n})})},100)}return a._options.clicknext&&!i.TOUCH?(a._options.pauseOnInteraction&&a.pause(),void a.next()):o.link?void(a._options.popupLinks?u=e.open(o.link,\"_blank\"):e.location.href=o.link):void(a._options.lightbox&&a.openLightbox())}}),a._playCheck(),a.trigger({type:i.IMAGE,index:l.index,imageTarget:r.image,thumbTarget:h.image,galleriaData:o}),s.shift.call(a._queue),a._queue.stalled=!1,a._queue.length&&a._show()}}(r,h,l,o,d);this._options.carousel&&this._options.carouselFollow&&this._carousel.follow(o.index),a._preload(),H.show(h.container),h.isIframe=r.iframe&&!r.image,t(a._thumbnails[o.index].container).addClass(\"active\").siblings(\".active\").removeClass(\"active\"),a.trigger({type:i.LOADSTART,cached:u,index:o.index,rewind:o.rewind,imageTarget:h.image,thumbTarget:d.image,galleriaData:r}),a._queue.stalled=!0,h.load(c,function(e){var s=t(a._layers[1-a._controls.active]).html(r.layer||\"\").hide();a._scaleImage(e,{complete:function(e){\"image\"in l&&H.toggleQuality(l.image,!1),H.toggleQuality(e.image,!1),a.removePan(),a.setInfo(o.index),a.setCounter(o.index),r.layer&&(s.show(),(r.iframe&&r.image||r.link||a._options.lightbox||a._options.clicknext)&&s.css(\"cursor\",\"pointer\").off(\"mouseup\").mouseup(p)),r.video&&r.image&&O(e.container);var c=a._options.transition;if(t.each({initial:null===l.image,touch:i.TOUCH,fullscreen:a.isFullscreen()},function(t,e){if(e&&a._options[t+\"Transition\"]!==n)return c=a._options[t+\"Transition\"],!1}),c in M.effects==!1)f();else{var h={prev:l.container,next:e.container,rewind:o.rewind,speed:a._options.transitionSpeed||400};M.active=!0,M.init.call(a,c,h,f)}a.trigger({type:i.LOADFINISH,cached:u,index:o.index,rewind:o.rewind,imageTarget:e.image,thumbTarget:a._thumbnails[o.index].image,galleriaData:a.getData(o.index)})}})})}},getNext:function(t){return t=\"number\"==typeof t?t:this.getIndex(),t===this.getDataLength()-1?0:t+1},getPrev:function(t){return t=\"number\"==typeof t?t:this.getIndex(),0===t?this.getDataLength()-1:t-1},next:function(){return this.getDataLength()>1&&this.show(this.getNext(),!1),this},prev:function(){return this.getDataLength()>1&&this.show(this.getPrev(),!0),this},get:function(t){return t in this._dom?this._dom[t]:null},getData:function(t){return t in this._data?this._data[t]:this._data[this._active]},getDataLength:function(){return this._data.length},getIndex:function(){return\"number\"==typeof this._active&&this._active},getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:function(t){return\"undefined\"==typeof t?this._options:this._options[t]},setOptions:function(e,i){return\"object\"==typeof e?t.extend(this._options,e):this._options[e]=i,this},play:function(t){return this._playing=!0,this._playtime=t||this._playtime,this._playCheck(),this.trigger(i.PLAY),this},pause:function(){return this._playing=!1,this.trigger(i.PAUSE),this},playToggle:function(t){return this._playing?this.pause():this.play(t)},isPlaying:function(){return this._playing},isFullscreen:function(){return this._fullscreen.active},_playCheck:function(){var t=this,e=0,n=20,a=H.timestamp(),o=\"play\"+this._id;if(this._playing){this.clearTimer(o);var r=function(){return e=H.timestamp()-a,e>=t._playtime&&t._playing?(t.clearTimer(o),void t.next()):void(t._playing&&(t.trigger({type:i.PROGRESS,percent:g.ceil(e/t._playtime*100),seconds:g.floor(e/1e3),milliseconds:e}),t.addTimer(o,r,n)))};t.addTimer(o,r,n)}},setPlaytime:function(t){return this._playtime=t,this},setIndex:function(t){return this._active=t,this},setCounter:function(t){if(\"number\"==typeof t?t++:\"undefined\"==typeof t&&(t=this.getIndex()+1),this.get(\"current\").innerHTML=t,y){var e=this.$(\"counter\"),i=e.css(\"opacity\");1===parseInt(i,10)?H.removeAlpha(e[0]):this.$(\"counter\").css(\"opacity\",i)}return this},setInfo:function(e){var i=this,n=this.getData(e);return t.each([\"title\",\"description\"],function(t,e){var a=i.$(\"info-\"+e);n[e]?a[n[e].length?\"show\":\"hide\"]().html(n[e]):a.empty().hide()}),this},hasInfo:function(t){var e,i=\"title description\".split(\" \");for(e=0;i[e];e++)if(this.getData(t)[i[e]])return!0;return!1},jQuery:function(e){var i=this,n=[];t.each(e.split(\",\"),function(e,a){a=t.trim(a),i.get(a)&&n.push(a)});var a=t(i.get(n.shift()));return t.each(n,function(t,e){a=a.add(i.get(e))}),a},$:function(t){return this.jQuery.apply(this,H.array(arguments))}},t.each(x,function(t,e){var n=/_/.test(e)?e.replace(/_/g,\"\"):e;i[e.toUpperCase()]=\"galleria.\"+n}),t.extend(i,{IE9:9===y,IE8:8===y,IE7:7===y,IE6:6===y,IE:y,WEBKIT:/webkit/.test(d),CHROME:/chrome/.test(d),SAFARI:/safari/.test(d)&&!/chrome/.test(d),QUIRK:y&&a.compatMode&&\"BackCompat\"===a.compatMode,MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!e.opera,IPHONE:/iphone/.test(d),IPAD:/ipad/.test(d),ANDROID:/android/.test(d),TOUCH:\"ontouchstart\"in a}),i.addTheme=function(n){n.name||i.raise(\"No theme name specified\"),\"object\"!=typeof n.defaults?n.defaults={}:n.defaults=T(n.defaults);var a,o=!1;return\"string\"==typeof n.css?(t(\"link\").each(function(t,e){if(a=new RegExp(n.css),a.test(e.href))return o=!0,F(n),!1}),o||t(function(){var r=0,s=function(){t(\"script\").each(function(t,i){a=new RegExp(\"galleria\\\\.\"+n.name.toLowerCase()+\"\\\\.\"),a.test(i.src)&&(o=i.src.replace(/[^\\/]*$/,\"\")+n.css,e.setTimeout(function(){H.loadCSS(o,\"galleria-theme-\"+n.name,function(){F(n)})},1))}),o||(r++>5?i.raise(\"No theme CSS loaded\"):e.setTimeout(s,500))};s()})):F(n),n},i.loadTheme=function(n,a){if(!t(\"script\").filter(function(){return t(this).attr(\"src\")==n}).length){var o,r=!1;return t(e).load(function(){r||(o=e.setTimeout(function(){r||i.raise(\"Galleria had problems loading theme at \"+n+\". Please check theme path or load manually.\",!0)},2e4))}),H.loadScript(n,function(){r=!0,e.clearTimeout(o)}),i}},i.get=function(t){return D[t]?D[t]:\"number\"!=typeof t?D:void i.raise(\"Gallery index \"+t+\" not found\")},i.configure=function(e,n){var a={};return\"string\"==typeof e&&n?(a[e]=n,e=a):t.extend(a,e),i.configure.options=a,t.each(i.get(),function(t,e){e.setOptions(a)}),i},i.configure.options={},i.on=function(e,n){if(e){n=n||m;var a=e+n.toString().replace(/\\s/g,\"\")+H.timestamp();return t.each(i.get(),function(t,i){i._binds.push(a),i.bind(e,n)}),i.on.binds.push({type:e,callback:n,hash:a}),i}},i.on.binds=[],i.run=function(e,n){return t.isFunction(n)&&(n={extend:n}),t(e||\"#galleria\").galleria(n),i},i.addTransition=function(t,e){return M.effects[t]=e,i},i.utils=H,i.log=function(){var i=H.array(arguments);if(!(\"console\"in e&&\"log\"in e.console))return e.alert(i.join(\"<br>\"));try{return e.console.log.apply(e.console,i)}catch(n){t.each(i,function(){e.console.log(this)})}},i.ready=function(e){return\"function\"!=typeof e?i:(t.each(E,function(t,i){e.call(i,i._options)}),i.ready.callbacks.push(e),i)},i.ready.callbacks=[],i.raise=function(e,i){var n=i?\"Fatal error\":\"Error\",a={color:\"#fff\",position:\"absolute\",top:0,left:0,zIndex:1e5},o=function(e){var o='<div style=\"padding:4px;margin:0 0 2px;background:#'+(i?\"811\":\"222\")+';\">'+(i?\"<strong>\"+n+\": </strong>\":\"\")+e+\"</div>\";t.each(D,function(){var t=this.$(\"errors\"),e=this.$(\"target\");t.length||(e.css(\"position\",\"relative\"),t=this.addElement(\"errors\").appendChild(\"target\",\"errors\").$(\"errors\").css(a)),t.append(o)}),D.length||t(\"<div>\").css(t.extend(a,{position:\"fixed\"})).append(o).appendTo(_().body)};if(l){if(o(e),i)throw new Error(n+\": \"+e)}else if(i){if(L)return;L=!0,i=!1,o(\"Gallery could not load.\")}},i.version=c,i.getLoadedThemes=function(){return t.map(z,function(t){return t.name})},i.requires=function(t,e){return e=e||\"You need to upgrade Galleria to version \"+t+\" to use one or more components.\",i.version<t&&i.raise(e,!0),i},i.Picture=function(e){this.id=e||null,this.image=null,this.container=H.create(\"galleria-image\"),t(this.container).css({overflow:\"hidden\",position:\"relative\"}),this.original={width:0,height:0},this.ready=!1,this.isIframe=!1},i.Picture.prototype={cache:{},show:function(){H.show(this.image)},hide:function(){H.moveOut(this.image)},clear:function(){this.image=null},isCached:function(t){return!!this.cache[t]},preload:function(e){t(new Image).load(function(t,e){return function(){e[t]=t}}(e,this.cache)).attr(\"src\",e)},load:function(n,a,o){if(\"function\"==typeof a&&(o=a,a=null),this.isIframe){var r=\"if\"+(new Date).getTime(),s=this.image=t(\"<iframe>\",{src:n,frameborder:0,id:r,allowfullscreen:!0,css:{visibility:\"hidden\"\n}})[0];return a&&t(s).css(a),t(this.container).find(\"iframe,img\").remove(),this.container.appendChild(this.image),t(\"#\"+r).load(function(i,n){return function(){e.setTimeout(function(){t(i.image).css(\"visibility\",\"visible\"),\"function\"==typeof n&&n.call(i,i)},10)}}(this,o)),this.container}this.image=new Image,i.IE8&&t(this.image).css(\"filter\",\"inherit\"),i.IE||i.CHROME||i.SAFARI||t(this.image).css(\"image-rendering\",\"optimizequality\");var c=!1,l=!1,h=t(this.container),d=t(this.image),p=function(){c?u?t(this).attr(\"src\",u):i.raise(\"Image not found: \"+n):(c=!0,e.setTimeout(function(t,e){return function(){t.attr(\"src\",e+(e.indexOf(\"?\")>-1?\"&\":\"?\")+H.timestamp())}}(t(this),n),50))},f=function(n,o,r){return function(){var s=function(){t(this).off(\"load\"),n.original=a||{height:this.height,width:this.width},i.HAS3D&&(this.style.MozTransform=this.style.webkitTransform=\"translate3d(0,0,0)\"),h.append(this),n.cache[r]=r,\"function\"==typeof o&&e.setTimeout(function(){o.call(n,n)},1)};this.width&&this.height?s.call(this):!function(e){H.wait({until:function(){return e.width&&e.height},success:function(){s.call(e)},error:function(){l?i.raise(\"Could not extract width/height from image: \"+e.src+\". Traced measures: width:\"+e.width+\"px, height: \"+e.height+\"px.\"):(t(new Image).load(f).attr(\"src\",e.src),l=!0)},timeout:100})}(this)}}(this,o,n);return h.find(\"iframe,img\").remove(),d.css(\"display\",\"block\"),H.hide(this.image),t.each(\"minWidth minHeight maxWidth maxHeight\".split(\" \"),function(t,e){d.css(e,/min/.test(e)?\"0\":\"none\")}),d.load(f).on(\"error\",p).attr(\"src\",n),this.container},scale:function(e){var a=this;if(e=t.extend({width:0,height:0,min:n,max:n,margin:0,complete:m,position:\"center\",crop:!1,canvas:!1,iframelimit:n},e),this.isIframe){var o,r,s=e.width,c=e.height;if(e.iframelimit){var l=g.min(e.iframelimit/s,e.iframelimit/c);l<1?(o=s*l,r=c*l,t(this.image).css({top:c/2-r/2,left:s/2-o/2,position:\"absolute\"})):t(this.image).css({top:0,left:0})}t(this.image).width(o||s).height(r||c).removeAttr(\"width\").removeAttr(\"height\"),t(this.container).width(s).height(c),e.complete.call(a,a);try{this.image.contentWindow&&t(this.image.contentWindow).trigger(\"resize\")}catch(t){}return this.container}if(!this.image)return this.container;var h,u,d,p=t(a.container);return H.wait({until:function(){return h=e.width||p.width()||H.parseValue(p.css(\"width\")),u=e.height||p.height()||H.parseValue(p.css(\"height\")),h&&u},success:function(){var i=(h-2*e.margin)/a.original.width,n=(u-2*e.margin)/a.original.height,o=g.min(i,n),r=g.max(i,n),s={true:r,width:i,height:n,false:o,landscape:a.original.width>a.original.height?r:o,portrait:a.original.width<a.original.height?r:o},c=s[e.crop.toString()],l=\"\";e.max&&(c=g.min(e.max,c)),e.min&&(c=g.max(e.min,c)),t.each([\"width\",\"height\"],function(e,i){t(a.image)[i](a[i]=a.image[i]=g.round(a.original[i]*c))}),t(a.container).width(h).height(u),e.canvas&&$&&($.elem.width=a.width,$.elem.height=a.height,l=a.image.src+\":\"+a.width+\"x\"+a.height,a.image.src=$.cache[l]||function(t){$.context.drawImage(a.image,0,0,a.original.width*c,a.original.height*c);try{return d=$.elem.toDataURL(),$.length+=d.length,$.cache[t]=d,d}catch(t){return a.image.src}}(l));var p={},f={},m=function(e,i,n){var o=0;if(/\\%/.test(e)){var r=parseInt(e,10)/100,s=a.image[i]||t(a.image)[i]();o=g.ceil(s*-1*r+n*r)}else o=H.parseValue(e);return o},v={top:{top:0},left:{left:0},right:{left:\"100%\"},bottom:{top:\"100%\"}};t.each(e.position.toLowerCase().split(\" \"),function(t,e){\"center\"===e&&(e=\"50%\"),p[t?\"top\":\"left\"]=e}),t.each(p,function(e,i){v.hasOwnProperty(i)&&t.extend(f,v[i])}),p=p.top?t.extend(p,f):f,p=t.extend({top:\"50%\",left:\"50%\"},p),t(a.image).css({position:\"absolute\",top:m(p.top,\"height\",u),left:m(p.left,\"width\",h)}),a.show(),a.ready=!0,e.complete.call(a,a)},error:function(){i.raise(\"Could not scale image: \"+a.image.src)},timeout:1e3}),this}},t.extend(t.easing,{galleria:function(t,e,i,n,a){return(e/=a/2)<1?n/2*e*e*e+i:n/2*((e-=2)*e*e+2)+i},galleriaIn:function(t,e,i,n,a){return n*(e/=a)*e+i},galleriaOut:function(t,e,i,n,a){return-n*(e/=a)*(e-2)+i}}),i.Finger=function(){var n=(g.abs,i.HAS3D=function(){var e,i,n=a.createElement(\"p\"),o=[\"webkit\",\"O\",\"ms\",\"Moz\",\"\"],r=0,s=\"transform\";for(_().html.insertBefore(n,null);o[r];r++)i=o[r]?o[r]+\"Transform\":s,void 0!==n.style[i]&&(n.style[i]=\"translate3d(1px,1px,1px)\",e=t(n).css(o[r]?\"-\"+o[r].toLowerCase()+\"-\"+s:s));return _().html.removeChild(n),void 0!==e&&e.length>0&&\"none\"!==e}()),r=function(){var t=\"RequestAnimationFrame\";return e.requestAnimationFrame||e[\"webkit\"+t]||e[\"moz\"+t]||e[\"o\"+t]||e[\"ms\"+t]||function(t){e.setTimeout(t,1e3/60)}}(),s=function(i,a){if(this.config={start:0,duration:500,onchange:function(){},oncomplete:function(){},easing:function(t,e,i,n,a){return-n*((e=e/a-1)*e*e*e-1)+i}},this.easeout=function(t,e,i,n,a){return n*((e=e/a-1)*e*e*e*e+1)+i},i.children.length){var o=this;t.extend(this.config,a),this.elem=i,this.child=i.children[0],this.to=this.pos=0,this.touching=!1,this.start={},this.index=this.config.start,this.anim=0,this.easing=this.config.easing,n||(this.child.style.position=\"absolute\",this.elem.style.position=\"relative\"),t.each([\"ontouchstart\",\"ontouchmove\",\"ontouchend\",\"setup\"],function(t,e){o[e]=function(t){return function(){t.apply(o,arguments)}}(o[e])}),this.setX=function(){var t=o.child.style;return n?void(t.MozTransform=t.webkitTransform=t.transform=\"translate3d(\"+o.pos+\"px,0,0)\"):void(t.left=o.pos+\"px\")},t(i).on(\"touchstart\",this.ontouchstart),t(e).on(\"resize\",this.setup),t(e).on(\"orientationchange\",this.setup),this.setup(),function t(){r(t),o.loop.call(o)}()}};return s.prototype={constructor:s,setup:function(){this.width=t(this.elem).width(),this.length=g.ceil(t(this.child).width()/this.width),0!==this.index&&(this.index=g.max(0,g.min(this.index,this.length-1)),this.pos=this.to=-this.width*this.index)},setPosition:function(t){this.pos=t,this.to=t},ontouchstart:function(t){var e=t.originalEvent.touches;this.start={pageX:e[0].pageX,pageY:e[0].pageY,time:+new Date},this.isScrolling=null,this.touching=!0,this.deltaX=0,o.on(\"touchmove\",this.ontouchmove),o.on(\"touchend\",this.ontouchend)},ontouchmove:function(t){var e=t.originalEvent.touches;e&&e.length>1||t.scale&&1!==t.scale||(this.deltaX=e[0].pageX-this.start.pageX,null===this.isScrolling&&(this.isScrolling=!!(this.isScrolling||g.abs(this.deltaX)<g.abs(e[0].pageY-this.start.pageY))),this.isScrolling||(t.preventDefault(),this.deltaX/=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0?g.abs(this.deltaX)/this.width+1.8:1,this.to=this.deltaX-this.index*this.width),t.stopPropagation())},ontouchend:function(t){this.touching=!1;var e=+new Date-this.start.time<250&&g.abs(this.deltaX)>40||g.abs(this.deltaX)>this.width/2,i=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0;this.isScrolling||this.show(this.index+(e&&!i?this.deltaX<0?1:-1:0)),o.off(\"touchmove\",this.ontouchmove),o.off(\"touchend\",this.ontouchend)},show:function(t){t!=this.index?this.config.onchange.call(this,t):this.to=-(t*this.width)},moveTo:function(t){t!=this.index&&(this.pos=this.to=-(t*this.width),this.index=t)},loop:function(){var t=this.to-this.pos,e=1;if(this.width&&t&&(e=g.max(.5,g.min(1.5,g.abs(t/this.width)))),this.touching||g.abs(t)<=1)this.pos=this.to,t=0,this.anim&&!this.touching&&this.config.oncomplete(this.index),this.anim=0,this.easing=this.config.easing;else{this.anim||(this.anim={start:this.pos,time:+new Date,distance:t,factor:e,destination:this.to});var i=+new Date-this.anim.time,n=this.config.duration*this.anim.factor;if(i>n||this.anim.destination!=this.to)return this.anim=0,void(this.easing=this.easeout);this.pos=this.easing(null,i,this.anim.start,this.anim.distance,n)}this.setX()}},s}(),t.fn.galleria=function(e){var n=this.selector;return t(this).length?this.each(function(){t.data(this,\"galleria\")&&(t.data(this,\"galleria\").destroy(),t(this).find(\"*\").hide()),t.data(this,\"galleria\",(new i).init(this,e))}):(t(function(){t(n).length?t(n).galleria(e):i.utils.wait({until:function(){return t(n).length},success:function(){t(n).galleria(e)},error:function(){i.raise('Init failed: Galleria could not find the element \"'+n+'\".')},timeout:5e3})}),this)},\"object\"==typeof module&&module&&\"object\"==typeof module.exports?module.exports=i:(e.Galleria=i,\"function\"==typeof define&&define.amd&&define(\"galleria\",[\"jquery\"],function(){return i}))}(jQuery,this);\n//# sourceMappingURL=galleria.min.js.map","date":"2017-06-24T13:46:41.000Z","updated":"2016-09-15T16:42:58.000Z","path":"galleria/galleria-1.4.5.min.js","layout":"false","title":"","comments":1,"_id":"cj5o1vdnv0009rtwy7klss6w5","content":"!function(t,e,i,n){var a=e.document,o=t(a),r=t(e),s=Array.prototype,c=1.44,l=!0,h=3e4,u=!1,d=navigator.userAgent.toLowerCase(),p=e.location.hash.replace(/#\\//,\"\"),f=\"file:\"==e.location.protocol?\"http:\":e.location.protocol,g=Math,m=function(){},v=function(){return!1},y=function(){var t=3,e=a.createElement(\"div\"),i=e.getElementsByTagName(\"i\");do e.innerHTML=\"<!--[if gt IE \"+ ++t+\"]><i></i><![endif]-->\";while(i[0]);return t>4?t:a.documentMode||n}(),_=function(){return{html:a.documentElement,body:a.body,head:a.getElementsByTagName(\"head\")[0],title:a.title}},b=e.parent!==e.self,w=\"data ready thumbnail loadstart loadfinish image play pause progress fullscreen_enter fullscreen_exit idle_enter idle_exit rescale lightbox_open lightbox_close lightbox_image\",x=function(){var e=[];return t.each(w.split(\" \"),function(t,i){e.push(i),/_/.test(i)&&e.push(i.replace(/_/g,\"\"))}),e}(),T=function(e){var i;return\"object\"!=typeof e?e:(t.each(e,function(n,a){/^[a-z]+_/.test(n)&&(i=\"\",t.each(n.split(\"_\"),function(t,e){i+=t>0?e.substr(0,1).toUpperCase()+e.substr(1):e}),e[i]=a,delete e[n])}),e)},k=function(e){return t.inArray(e,x)>-1?i[e.toUpperCase()]:e},C={youtube:{reg:/https?:\\/\\/(?:[a-zA_Z]{2,3}.)?(?:youtube\\.com\\/watch\\?)((?:[\\w\\d\\-\\_\\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\\-\\_]+))/i,embed:function(){return f+\"//www.youtube.com/embed/\"+this.id},get_thumb:function(t){return f+\"//img.youtube.com/vi/\"+this.id+\"/default.jpg\"},get_image:function(t){return f+\"//img.youtube.com/vi/\"+this.id+\"/hqdefault.jpg\"}},vimeo:{reg:/https?:\\/\\/(?:www\\.)?(vimeo\\.com)\\/(?:hd#)?([0-9]+)/i,embed:function(){return f+\"//player.vimeo.com/video/\"+this.id},getUrl:function(){return f+\"//vimeo.com/api/v2/video/\"+this.id+\".json?callback=?\"},get_thumb:function(t){return t[0].thumbnail_medium},get_image:function(t){return t[0].thumbnail_large}},dailymotion:{reg:/https?:\\/\\/(?:www\\.)?(dailymotion\\.com)\\/video\\/([^_]+)/,embed:function(){return f+\"//www.dailymotion.com/embed/video/\"+this.id},getUrl:function(){return\"https://api.dailymotion.com/video/\"+this.id+\"?fields=thumbnail_240_url,thumbnail_720_url&callback=?\"},get_thumb:function(t){return t.thumbnail_240_url},get_image:function(t){return t.thumbnail_720_url}},_inst:[]},I=function(i,n){for(var a=0;a<c._inst.length;a++)if(c._inst[a].id===n&&c._inst[a].type==i)return 1=\"=i.length?\"\":(i.pop(),i.join(\"/\")+\"/\")},animate:function(){var\" c._inst[a];this.type=\"i,this.id=n,this.readys=[],C._inst.push(this);var\" o=\"this;t.extend(this,C[i]),_videoThumbs=function(e){o.data=e,t.each(o.readys,function(t,e){e(o.data)}),o.readys=[]},this.hasOwnProperty(\"getUrl\")?t.getJSON(this.getUrl(),_videoThumbs):e.setTimeout(_videoThumbs,400),this.getMedia=function(t,e,i){i=i||m;var\" n=\"this,a=function(i){e(n[\"get_\"+t](i))};try{n.data?a(n.data):n.readys.push(a)}catch(t){i()}}},S=function(t){var\" e;for(var=\"\" i=\"\" in=\"\" c)if(e=\"t&&C[i].reg&&t.match(C[i].reg),e&&e.length)return{id:e[2],provider:i};return!1},A={support:function(){var\" t=\"_().html;return!b&&(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen)}(),callback:m,enter:function(t,e,i){this.instance=t,this.callback=e||m,i=i||_().html,i.requestFullscreen?i.requestFullscreen():i.msRequestFullscreen?i.msRequestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullScreen&&i.webkitRequestFullScreen()},exit:function(t){this.callback=t||m,a.exitFullscreen?a.exitFullscreen():a.msExitFullscreen?a.msExitFullscreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.webkitCancelFullScreen&&a.webkitCancelFullScreen()},instance:null,listen:function(){if(this.support){var\" s.slice.call(t,0)},create:function(t,e){e=\"e||\"div\";var\" i.classname=\"t,i},removeFromArray:function(e,i){return\" t.each(e,function(t,n){if(n=\"=i)return\" e.splice(t,1),!1}),e},getscriptpath:function(e){e=\"e||t(\"script:last\").attr(\"src\");var\" n,o,r,s,c,l,h,u=\"function(t){var\" i,n=\"transition WebkitTransition MozTransition OTransition\" .split(\"=\"\" \");if(e.opera)return!1;for(i=\"0;n[i];i++)if(\"undefined\"!=typeof\" t[n[i]])return=\"\" n[i];return!1}((a.body||a.documentelement).style),d=\"{MozTransition:\"transitionend\",OTransition:\"oTransitionEnd\",WebkitTransition:\"webkitTransitionEnd\",transition:\"transitionend\"}[u],p={_default:[.25,.1,.25,1],galleria:[.645,.045,.355,1],galleriaIn:[.55,.085,.68,.53],galleriaOut:[.25,.46,.45,.94],ease:[.25,0,.25,1],linear:[.25,.25,.75,.75],\"ease-in\":[.42,0,1,1],\"ease-out\":[0,0,.58,1],\"ease-in-out\":[.42,0,.58,1]},f=function(e,i,n){var\" a=\"{};n=n||\"transition\",t.each(\"webkit\" moz=\"\" ms=\"\" o\".split(\"=\"\" \"),function(){a[\"-\"+this+\"-\"+n]=\"i}),e.css(a)},g=function(t){f(t,\"none\",\"transition\"),i.WEBKIT&&i.TOUCH&&(f(t,\"translate3d(0,0,0)\",\"transform\"),t.data(\"revert\")&&(t.css(t.data(\"revert\")),t.data(\"revert\",null)))};return\" function(a,v,y){return=\"\" y=\"t.extend({duration:400,complete:m,stop:!1},y),a=t(a),y.duration?u?(y.stop&&(a.off(d),g(a)),n=!1,t.each(v,function(t,e){h=a.css(t),H.parseValue(h)!=H.parseValue(e)&&(n=!0),a.css(t,h)}),n?(o=[],r=y.easing\" p?p[y.easing]:p._default,s=\" \" +y.duration+\"ms=\"\" cubic-bezier(\"+r.join(\",\")+\")\",void=\"\" e.settimeout(function(e,n,a,r){return=\"\" function(){e.one(n,function(t){return=\"\" function(){g(t),y.complete.call(t[0])}}(e)),i.webkit&&i.touch&&(c=\"{},l=[0,0,0],t.each([\"left\",\"top\"],function(t,i){i\" a&&(l[t]=\"H.parseValue(a[i])-H.parseValue(e.css(i))+\"px\",c[i]=a[i],delete\" a[i])}),(l[0]||l[1])&&(e.data(\"revert\",c),o.push(\"-webkit-transform\"+r),f(e,\"translate3d(\"+l.join(\",\")+\")\",\"transform\"))),t.each(a,function(t,e){o.push(t+r)}),f(e,o.join(\",\")),e.css(a)}}(a,d,v,s),2)):void=\"\" e.settimeout(function(){y.complete.call(a[0])},y.duration)):void=\"\" a.animate(v,y):(a.css(v),void=\"\" y.complete.call(a[0]))}}(),removealpha:function(t){if(t=\"\" instanceof=\"\" jquery&&(t=\"t[0]),y<9&&t){var\" e=\"t.style,i=t.currentStyle,n=i&&i.filter||e.filter||\"\";/alpha/.test(n)&&(e.filter=n.replace(/alpha\\([^)]*\\)/i,\"\"))}},forceStyles:function(e,i){e=t(e),e.attr(\"style\")&&e.data(\"styles\",e.attr(\"style\")).removeAttr(\"style\"),e.css(i)},revertStyles:function(){t.each(H.array(arguments),function(e,i){i=t(i),i.removeAttr(\"style\"),i.attr(\"style\",\"\"),i.data(\"styles\")&&i.attr(\"style\",i.data(\"styles\")).data(\"styles\",null)})},moveOut:function(t){H.forceStyles(t,{position:\"absolute\",left:-1e4})},moveIn:function(){H.revertStyles.apply(H,H.array(arguments))},hide:function(e,i,n){n=n||m;var\" r=\"y<9&&e?function(){H.removeAlpha(e),e.style.visibility=\"hidden\",n.call(e)}:n;H.animate(e,o,{duration:i,complete:r,stop:!0})}else\" y<9&&e?(h.removealpha(e),e.style.visibility=\"hidden\" ):a.css(o)},show:function(e,i,n){n=\"n||m;var\" s=\"y<9&&e?function(){1==r.opacity&&H.removeAlpha(e),n.call(e)}:n;H.animate(e,r,{duration:i,complete:s,stop:!0})}else\" y<9&&1=\"=r.opacity&&e?(H.removeAlpha(e),e.style.visibility=\"visible\"):a.css(r)},wait:function(n){i._waiters=i._waiters||[],n=t.extend({until:v,success:m,error:function(){i.raise(\"Could\" not=\"\" complete=\"\" wait=\"\" function.\")},timeout:3e3},n);var=\"\" a,o,r,s=\"H.timestamp(),c=function(){return\" n.timeout&&o=\"\">=s+n.timeout?(n.error(),!1):void i._waiters.push(r=e.setTimeout(c,10))};i._waiters.push(r=e.setTimeout(c,10))},toggleQuality:function(t,e){7!==y&&8!==y||!t||\"IMG\"!=t.nodeName.toUpperCase()||(\"undefined\"==typeof e&&(e=\"nearest-neighbor\"===t.style.msInterpolationMode),t.style.msInterpolationMode=e?\"bicubic\":\"nearest-neighbor\")},insertStyleTag:function(e,i){if(!i||!t(\"#\"+i).length){var n=a.createElement(\"style\");if(i&&(n.id=i),_().head.appendChild(n),n.styleSheet)n.styleSheet.cssText=e;else{var o=a.createTextNode(e);n.appendChild(o)}}},loadScript:function(e,i){var n=!1,a=t(\"<script>\").attr({src:e,async:!0}).get(0);a.onload=a.onreadystatechange=function(){n||this.readyState&&\"loaded\"!==this.readyState&&\"complete\"!==this.readyState||(n=!0,a.onload=a.onreadystatechange=null,\"function\"==typeof i&&i.call(this,this))},_().head.appendChild(a)},parseValue:function(t){if(\"number\"==typeof t)return t;if(\"string\"==typeof t){var e=t.match(/\\-?\\d|\\./g);return e&&e.constructor===Array?1*e.join(\"\"):0}return 0},timestamp:function(){return(new Date).getTime()},loadCSS:function(e,o,r){var s,c;if(t(\"link[rel=stylesheet]\").each(function(){if(new RegExp(e).test(this.href))return s=this,!1}),\"function\"==typeof o&&(r=o,o=n),r=r||m,s)return r.call(s,s),s;if(c=a.styleSheets.length,t(\"#\"+o).length)t(\"#\"+o).attr(\"href\",e),c--;else{s=t(\"<link>\").attr({rel:\"stylesheet\",href:e,id:o}).get(0);var l=t('link[rel=\"stylesheet\"], style');if(l.length?l.get(0).parentNode.insertBefore(s,l[0]):_().head.appendChild(s),y&&c>=31)return void i.raise(\"You have reached the browser stylesheet limit (31)\",!0)}if(\"function\"==typeof r){var h=t(\"<s>\").attr(\"id\",\"galleria-loader\").hide().appendTo(_().body);H.wait({until:function(){return 1==h.height()},success:function(){h.remove(),r.call(s,s)},error:function(){h.remove(),i.raise(\"Theme CSS could not load after 20 sec. \"+(i.QUIRK?\"Your browser is in Quirks Mode, please add a correct doctype.\":\"Please download the latest theme at http://galleria.io/customer/.\"),!0)},timeout:5e3})}return s}}}(),O=function(e){var i=\".galleria-videoicon{width:60px;height:60px;position:absolute;top:50%;left:50%;z-index:1;margin:-30px 0 0 -30px;cursor:pointer;background:#000;background:rgba(0,0,0,.8);border-radius:3px;-webkit-transition:all 150ms}.galleria-videoicon i{width:0px;height:0px;border-style:solid;border-width:10px 0 10px 16px;display:block;border-color:transparent transparent transparent #ffffff;margin:20px 0 0 22px}.galleria-image:hover .galleria-videoicon{background:#000}\";return H.insertStyleTag(i,\"galleria-videoicon\"),t(H.create(\"galleria-videoicon\")).html(\"<i></i>\").appendTo(e).click(function(){t(this).siblings(\"img\").mouseup()})},M=function(){var e=function(e,i,n,a){var o=this.getOptions(\"easing\"),r=this.getStageWidth(),s={left:r*(e.rewind?-1:1)},c={left:0};n?(s.opacity=0,c.opacity=1):s.opacity=1,t(e.next).css(s),H.animate(e.next,c,{duration:e.speed,complete:function(t){return function(){i(),t.css({left:0})}}(t(e.next).add(e.prev)),queue:!1,easing:o}),a&&(e.rewind=!e.rewind),e.prev&&(s={left:0},c={left:r*(e.rewind?1:-1)},n&&(s.opacity=1,c.opacity=0),t(e.prev).css(s),H.animate(e.prev,c,{duration:e.speed,queue:!1,easing:o,complete:function(){t(this).css(\"opacity\",0)}}))};return{active:!1,init:function(t,e,i){M.effects.hasOwnProperty(t)&&M.effects[t].call(this,e,i)},effects:{fade:function(e,i){t(e.next).css({opacity:0,left:0}),H.animate(e.next,{opacity:1},{duration:e.speed,complete:i}),e.prev&&(t(e.prev).css(\"opacity\",1).show(),H.animate(e.prev,{opacity:0},{duration:e.speed}))},flash:function(e,i){t(e.next).css({opacity:0,left:0}),e.prev?H.animate(e.prev,{opacity:0},{duration:e.speed/2,complete:function(){H.animate(e.next,{opacity:1},{duration:e.speed,complete:i})}}):H.animate(e.next,{opacity:1},{duration:e.speed,complete:i})},pulse:function(e,i){e.prev&&t(e.prev).hide(),t(e.next).css({opacity:0,left:0}).show(),H.animate(e.next,{opacity:1},{duration:e.speed,complete:i})},slide:function(t,i){e.apply(this,H.array(arguments))},fadeslide:function(t,i){e.apply(this,H.array(arguments).concat([!0]))},doorslide:function(t,i){e.apply(this,H.array(arguments).concat([!1,!0]))}}}}();A.listen(),t.event.special[\"click:fast\"]={propagate:!0,add:function(i){var n=function(t){if(t.touches&&t.touches.length){var e=t.touches[0];return{x:e.pageX,y:e.pageY}}},a={touched:!1,touchdown:!1,coords:{x:0,y:0},evObj:{}};t(this).data({clickstate:a,timer:0}).on(\"touchstart.fast\",function(i){e.clearTimeout(t(this).data(\"timer\")),t(this).data(\"clickstate\",{touched:!0,touchdown:!0,coords:n(i.originalEvent),evObj:i})}).on(\"touchmove.fast\",function(e){var i=n(e.originalEvent),a=t(this).data(\"clickstate\"),o=Math.max(Math.abs(a.coords.x-i.x),Math.abs(a.coords.y-i.y));o>6&&t(this).data(\"clickstate\",t.extend(a,{touchdown:!1}))}).on(\"touchend.fast\",function(n){var o=t(this),r=o.data(\"clickstate\");r.touchdown&&i.handler.call(this,n),o.data(\"timer\",e.setTimeout(function(){o.data(\"clickstate\",a)},400))}).on(\"click.fast\",function(e){var n=t(this).data(\"clickstate\");return!n.touched&&(t(this).data(\"clickstate\",a),void i.handler.call(this,e))})},remove:function(){t(this).off(\"touchstart.fast touchmove.fast touchend.fast click.fast\")}},r.on(\"orientationchange\",function(){t(this).resize()}),i=function(){var s=this;this._options={},this._playing=!1,this._playtime=5e3,this._active=null,this._queue={length:0},this._data=[],this._dom={},this._thumbnails=[],this._layers=[],this._initialized=!1,this._firstrun=!1,this._stageWidth=0,this._stageHeight=0,this._target=n,this._binds=[],this._id=parseInt(1e4*g.random(),10);var c=\"container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip\",l=\"current total\";t.each(c.split(\" \"),function(t,e){s._dom[e]=H.create(\"galleria-\"+e)}),t.each(l.split(\" \"),function(t,e){s._dom[e]=H.create(\"galleria-\"+e,\"span\")});var h=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(t){var e=t.keyCode||t.which;e in h.map&&\"function\"==typeof h.map[e]&&h.map[e].call(s,t)},attach:function(t){var e,i;for(e in t)t.hasOwnProperty(e)&&(i=e.toUpperCase(),i in h.keys?h.map[h.keys[i]]=t[e]:h.map[i]=t[e]);h.bound||(h.bound=!0,o.on(\"keydown\",h.press))},detach:function(){h.bound=!1,h.map={},o.off(\"keydown\",h.press)}},u=this._controls={0:n,1:n,active:0,swap:function(){u.active=u.active?0:1},getActive:function(){return s._options.swipe?u.slides[s._active]:u[u.active]},getNext:function(){return s._options.swipe?u.slides[s.getNext(s._active)]:u[1-u.active]},slides:[],frames:[],layers:[]},p=this._carousel={next:s.$(\"thumb-nav-right\"),prev:s.$(\"thumb-nav-left\"),width:0,current:0,max:0,hooks:[],update:function(){var e=0,i=0,n=[0];t.each(s._thumbnails,function(a,o){if(o.ready){e+=o.outerWidth||t(o.container).outerWidth(!0);var r=t(o.container).width();e+=r-g.floor(r),n[a+1]=e,i=g.max(i,o.outerHeight||t(o.container).outerHeight(!0))}}),s.$(\"thumbnails\").css({width:e,height:i}),p.max=e,p.hooks=n,p.width=s.$(\"thumbnails-list\").width(),p.setClasses(),s.$(\"thumbnails-container\").toggleClass(\"galleria-carousel\",e>p.width),p.width=s.$(\"thumbnails-list\").width()},bindControls:function(){var t;p.next.on(\"click:fast\",function(e){if(e.preventDefault(),\"auto\"===s._options.carouselSteps){for(t=p.current;t<p.hooks.length;t++)if(p.hooks[t]-p.hooks[p.current]>p.width){p.set(t-2);break}}else p.set(p.current+s._options.carouselSteps)}),p.prev.on(\"click:fast\",function(e){if(e.preventDefault(),\"auto\"===s._options.carouselSteps)for(t=p.current;t>=0;t--){if(p.hooks[p.current]-p.hooks[t]>p.width){p.set(t+2);break}if(0===t){p.set(0);break}}else p.set(p.current-s._options.carouselSteps)})},set:function(t){for(t=g.max(t,0);p.hooks[t-1]+p.width>=p.max&&t>=0;)t--;p.current=t,p.animate()},getLast:function(t){return(t||p.current)-1},follow:function(t){if(0===t||t===p.hooks.length-2)return void p.set(t);for(var e=p.current;p.hooks[e]-p.hooks[p.current]<p.width&&e<=p.hooks.length;)e++;t-1<p.current?p.set(t-1):t+2>e&&p.set(t-e+p.current+2)},setClasses:function(){p.prev.toggleClass(\"disabled\",!p.current),p.next.toggleClass(\"disabled\",p.hooks[p.current]+p.width>=p.max)},animate:function(e){p.setClasses();var i=p.hooks[p.current]*-1;isNaN(i)||(s.$(\"thumbnails\").css(\"left\",function(){return t(this).css(\"left\")}),H.animate(s.get(\"thumbnails\"),{left:i},{duration:s._options.carouselSpeed,easing:s._options.easing,queue:!1}))}},f=this._tooltip={initialized:!1,open:!1,timer:\"tooltip\"+s._id,swapTimer:\"swap\"+s._id,init:function(){f.initialized=!0;var t=\".galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}\";H.insertStyleTag(t,\"galleria-tooltip\"),s.$(\"tooltip\").css({opacity:.8,visibility:\"visible\",display:\"none\"})},move:function(t){var e=s.getMousePosition(t).x,i=s.getMousePosition(t).y,n=s.$(\"tooltip\"),a=e,o=i,r=n.outerHeight(!0)+1,c=n.outerWidth(!0),l=r+15,h=s.$(\"container\").width()-c-2,u=s.$(\"container\").height()-r-2;isNaN(a)||isNaN(o)||(a+=10,o-=r+8,a=g.max(0,g.min(h,a)),o=g.max(0,g.min(u,o)),i<l&&(o=l),n.css({left:a,top:o}))},bind:function(e,n){if(!i.TOUCH){f.initialized||f.init();var a=function(){s.$(\"container\").off(\"mousemove\",f.move),s.clearTimer(f.timer),s.$(\"tooltip\").stop().animate({opacity:0},200,function(){s.$(\"tooltip\").hide(),s.addTimer(f.swapTimer,function(){f.open=!1},1e3)})},o=function(e,i){f.define(e,i),t(e).hover(function(){s.clearTimer(f.swapTimer),s.$(\"container\").off(\"mousemove\",f.move).on(\"mousemove\",f.move).trigger(\"mousemove\"),f.show(e),s.addTimer(f.timer,function(){s.$(\"tooltip\").stop().show().animate({opacity:1}),f.open=!0},f.open?0:500)},a).click(a)};\"string\"==typeof n?o(e in s._dom?s.get(e):e,n):t.each(e,function(t,e){o(s.get(t),e)})}},show:function(i){i=t(i in s._dom?s.get(i):i);var n=i.data(\"tt\"),a=function(t){e.setTimeout(function(t){return function(){f.move(t)}}(t),10),i.off(\"mouseup\",a)};n=\"function\"==typeof n?n():n,n&&(s.$(\"tooltip\").html(n.replace(/\\s/,\"&#160;\")),i.on(\"mouseup\",a))},define:function(e,i){if(\"function\"!=typeof i){var n=i;i=function(){return n}}e=t(e in s._dom?s.get(e):e).data(\"tt\",i),f.show(e)}},m=this._fullscreen={scrolled:0,crop:n,active:!1,prev:t(),beforeEnter:function(t){t()},beforeExit:function(t){t()},keymap:s._keyboard.map,parseCallback:function(e,i){return M.active?function(){\"function\"==typeof e&&e.call(s);var n=s._controls.getActive(),a=s._controls.getNext();s._scaleImage(a),s._scaleImage(n),i&&s._options.trueFullscreen&&t(n.container).add(a.container).trigger(\"transitionend\")}:e},enter:function(t){m.beforeEnter(function(){t=m.parseCallback(t,!0),s._options.trueFullscreen&&A.support?(m.active=!0,H.forceStyles(s.get(\"container\"),{width:\"100%\",height:\"100%\"}),s.rescale(),i.MAC?i.SAFARI&&/version\\/[1-5]/.test(d)?(s.$(\"stage\").css(\"opacity\",0),e.setTimeout(function(){m.scale(),s.$(\"stage\").css(\"opacity\",1)},4)):(s.$(\"container\").css(\"opacity\",0).addClass(\"fullscreen\"),e.setTimeout(function(){m.scale(),s.$(\"container\").css(\"opacity\",1)},50)):s.$(\"container\").addClass(\"fullscreen\"),r.resize(m.scale),A.enter(s,t,s.get(\"container\"))):(m.scrolled=r.scrollTop(),i.TOUCH||e.scrollTo(0,0),m._enter(t))})},_enter:function(o){m.active=!0,b&&(m.iframe=function(){var n,o=a.referrer,r=a.createElement(\"a\"),s=e.location;return r.href=o,r.protocol!=s.protocol||r.hostname!=s.hostname||r.port!=s.port?(i.raise(\"Parent fullscreen not available. Iframe protocol, domains and ports must match.\"),!1):(m.pd=e.parent.document,t(m.pd).find(\"iframe\").each(function(){var t=this.contentDocument||this.contentWindow.document;if(t===a)return n=this,!1}),n)}()),H.hide(s.getActiveImage()),b&&m.iframe&&(m.iframe.scrolled=t(e.parent).scrollTop(),e.parent.scrollTo(0,0));var c=s.getData(),l=s._options,h=!s._options.trueFullscreen||!A.support,u={height:\"100%\",overflow:\"hidden\",margin:0,padding:0};if(h&&(s.$(\"container\").addClass(\"fullscreen\"),m.prev=s.$(\"container\").prev(),m.prev.length||(m.parent=s.$(\"container\").parent()),s.$(\"container\").appendTo(\"body\"),H.forceStyles(s.get(\"container\"),{position:i.TOUCH?\"absolute\":\"fixed\",top:0,left:0,width:\"100%\",height:\"100%\",zIndex:1e4}),H.forceStyles(_().html,u),H.forceStyles(_().body,u)),b&&m.iframe&&(H.forceStyles(m.pd.documentElement,u),H.forceStyles(m.pd.body,u),H.forceStyles(m.iframe,t.extend(u,{width:\"100%\",height:\"100%\",top:0,left:0,position:\"fixed\",zIndex:1e4,border:\"none\"}))),m.keymap=t.extend({},s._keyboard.map),s.attachKeyboard({escape:s.exitFullscreen,right:s.next,left:s.prev}),m.crop=l.imageCrop,l.fullscreenCrop!=n&&(l.imageCrop=l.fullscreenCrop),c&&c.big&&c.image!==c.big){var d=new i.Picture,p=d.isCached(c.big),f=s.getIndex(),g=s._thumbnails[f];s.trigger({type:i.LOADSTART,cached:p,rewind:!1,index:f,imageTarget:s.getActiveImage(),thumbTarget:g,galleriaData:c}),d.load(c.big,function(e){s._scaleImage(e,{complete:function(e){s.trigger({type:i.LOADFINISH,cached:p,index:f,rewind:!1,imageTarget:e.image,thumbTarget:g});var n=s._controls.getActive().image;n&&t(n).width(e.image.width).height(e.image.height).attr(\"style\",t(e.image).attr(\"style\")).attr(\"src\",e.image.src)}})});var v=s.getNext(f),y=new i.Picture,w=s.getData(v);y.preload(s.isFullscreen()&&w.big?w.big:w.image)}s.rescale(function(){s.addTimer(!1,function(){h&&H.show(s.getActiveImage()),\"function\"==typeof o&&o.call(s),s.rescale()},100),s.trigger(i.FULLSCREEN_ENTER)}),h?r.resize(m.scale):H.show(s.getActiveImage())},scale:function(){s.rescale()},exit:function(t){m.beforeExit(function(){t=m.parseCallback(t),s._options.trueFullscreen&&A.support?A.exit(t):m._exit(t)})},_exit:function(t){m.active=!1;var n=!s._options.trueFullscreen||!A.support,a=s.$(\"container\").removeClass(\"fullscreen\");if(m.parent?m.parent.prepend(a):a.insertAfter(m.prev),n){H.hide(s.getActiveImage()),H.revertStyles(s.get(\"container\"),_().html,_().body),i.TOUCH||e.scrollTo(0,m.scrolled);var o=s._controls.frames[s._controls.active];o&&o.image&&(o.image.src=o.image.src)}b&&m.iframe&&(H.revertStyles(m.pd.documentElement,m.pd.body,m.iframe),m.iframe.scrolled&&e.parent.scrollTo(0,m.iframe.scrolled)),s.detachKeyboard(),s.attachKeyboard(m.keymap),s._options.imageCrop=m.crop;var c=s.getData().big,l=s._controls.getActive().image;!s.getData().iframe&&l&&c&&c==l.src&&e.setTimeout(function(t){return function(){l.src=t}}(s.getData().image),1),s.rescale(function(){s.addTimer(!1,function(){n&&H.show(s.getActiveImage()),\"function\"==typeof t&&t.call(s),r.trigger(\"resize\")},50),s.trigger(i.FULLSCREEN_EXIT)}),r.off(\"resize\",m.scale)}},v=this._idle={trunk:[],bound:!1,active:!1,add:function(e,n,a,o){if(e&&!i.TOUCH){v.bound||v.addEvent(),e=t(e),\"boolean\"==typeof a&&(o=a,a={}),a=a||{};var r,s={};for(r in n)n.hasOwnProperty(r)&&(s[r]=e.css(r));e.data(\"idle\",{from:t.extend(s,a),to:n,complete:!0,busy:!1}),o?e.css(n):v.addTimer(),v.trunk.push(e)}},remove:function(e){e=t(e),t.each(v.trunk,function(t,i){i&&i.length&&!i.not(e).length&&(e.css(e.data(\"idle\").from),v.trunk.splice(t,1))}),v.trunk.length||(v.removeEvent(),s.clearTimer(v.timer))},addEvent:function(){v.bound=!0,s.$(\"container\").on(\"mousemove click\",v.showAll),\"hover\"==s._options.idleMode&&s.$(\"container\").on(\"mouseleave\",v.hide)},removeEvent:function(){v.bound=!1,s.$(\"container\").on(\"mousemove click\",v.showAll),\"hover\"==s._options.idleMode&&s.$(\"container\").off(\"mouseleave\",v.hide)},addTimer:function(){\"hover\"!=s._options.idleMode&&s.addTimer(\"idle\",function(){v.hide()},s._options.idleTime)},hide:function(){if(s._options.idleMode&&s.getIndex()!==!1){s.trigger(i.IDLE_ENTER);var e=v.trunk.length;t.each(v.trunk,function(t,i){var n=i.data(\"idle\");n&&(i.data(\"idle\").complete=!1,H.animate(i,n.to,{duration:s._options.idleSpeed,complete:function(){t==e-1&&(v.active=!1)}}))})}},showAll:function(){s.clearTimer(\"idle\"),t.each(v.trunk,function(t,e){v.show(e)})},show:function(e){var n=e.data(\"idle\");v.active&&(n.busy||n.complete)||(n.busy=!0,s.trigger(i.IDLE_EXIT),s.clearTimer(\"idle\"),H.animate(e,n.from,{duration:s._options.idleSpeed/2,complete:function(){v.active=!0,t(e).data(\"idle\").busy=!1,t(e).data(\"idle\").complete=!0}})),v.addTimer()}},w=this._lightbox={width:0,height:0,initialized:!1,active:null,image:null,elems:{},keymap:!1,init:function(){if(!w.initialized){w.initialized=!0;var e=\"overlay box content shadow title info close prevholder prev nextholder next counter image\",n={},a=s._options,o=\"\",r=\"position:absolute;\",c=\"lightbox-\",l={overlay:\"position:fixed;display:none;opacity:\"+a.overlayOpacity+\";filter:alpha(opacity=\"+100*a.overlayOpacity+\");top:0;left:0;width:100%;height:100%;background:\"+a.overlayBackground+\";z-index:99990\",box:\"position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991\",shadow:r+\"background:#000;width:100%;height:100%;\",content:r+\"background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden\",info:r+\"bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px\",close:r+\"top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999\",image:r+\"top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;\",prevholder:r+\"width:50%;top:0;bottom:40px;cursor:pointer;\",nextholder:r+\"width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;\",prev:r+\"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif\",next:r+\"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000\",title:\"float:left\",counter:\"float:right;margin-left:8px;\"},h=function(e){return e.hover(function(){t(this).css(\"color\",\"#bbb\")},function(){t(this).css(\"color\",\"#444\")})},u={},d=\"\";d=y>7?y<9?\"background:#000;filter:alpha(opacity=0);\":\"background:rgba(0,0,0,0);\":\"z-index:99999\",l.nextholder+=d,l.prevholder+=d,t.each(l,function(t,e){o+=\".galleria-\"+c+t+\"{\"+e+\"}\"}),o+=\".galleria-\"+c+\"box.iframe .galleria-\"+c+\"prevholder,.galleria-\"+c+\"box.iframe .galleria-\"+c+\"nextholder{width:100px;height:100px;top:50%;margin-top:-70px}\",H.insertStyleTag(o,\"galleria-lightbox\"),t.each(e.split(\" \"),function(t,e){s.addElement(\"lightbox-\"+e),n[e]=w.elems[e]=s.get(\"lightbox-\"+e)}),w.image=new i.Picture,t.each({box:\"shadow content close prevholder nextholder\",info:\"title counter\",content:\"info image\",prevholder:\"prev\",nextholder:\"next\"},function(e,i){var n=[];t.each(i.split(\" \"),function(t,e){n.push(c+e)}),u[c+e]=n}),s.append(u),t(n.image).append(w.image.container),t(_().body).append(n.overlay,n.box),h(t(n.close).on(\"click:fast\",w.hide).html(\"&#215;\")),t.each([\"Prev\",\"Next\"],function(e,a){var o=t(n[a.toLowerCase()]).html(/v/.test(a)?\"&#8249;&#160;\":\"&#160;&#8250;\"),r=t(n[a.toLowerCase()+\"holder\"]);return r.on(\"click:fast\",function(){w[\"show\"+a]()}),y<8||i.TOUCH?void o.show():void r.hover(function(){o.show()},function(t){o.stop().fadeOut(200)})}),t(n.overlay).on(\"click:fast\",w.hide),i.IPAD&&(s._options.lightboxTransitionSpeed=0)}},rescale:function(e){var n=g.min(r.width()-40,w.width),a=g.min(r.height()-60,w.height),o=g.min(n/w.width,a/w.height),c=g.round(w.width*o)+40,l=g.round(w.height*o)+60,h={width:c,height:l,\"margin-top\":g.ceil(l/2)*-1,\"margin-left\":g.ceil(c/2)*-1};e?t(w.elems.box).css(h):t(w.elems.box).animate(h,{duration:s._options.lightboxTransitionSpeed,easing:s._options.easing,complete:function(){var e=w.image,n=s._options.lightboxFadeSpeed;s.trigger({type:i.LIGHTBOX_IMAGE,imageTarget:e.image}),t(e.container).show(),t(e.image).animate({opacity:1},n),H.show(w.elems.info,n)}})},hide:function(){w.image.image=null,r.off(\"resize\",w.rescale),t(w.elems.box).hide().find(\"iframe\").remove(),H.hide(w.elems.info),s.detachKeyboard(),s.attachKeyboard(w.keymap),w.keymap=!1,H.hide(w.elems.overlay,200,function(){t(this).hide().css(\"opacity\",s._options.overlayOpacity),s.trigger(i.LIGHTBOX_CLOSE)})},showNext:function(){w.show(s.getNext(w.active))},showPrev:function(){w.show(s.getPrev(w.active))},show:function(n){w.active=n=\"number\"==typeof n?n:s.getIndex()||0,w.initialized||w.init(),s.trigger(i.LIGHTBOX_OPEN),w.keymap||(w.keymap=t.extend({},s._keyboard.map),s.attachKeyboard({escape:w.hide,right:w.showNext,left:w.showPrev})),r.off(\"resize\",w.rescale);var a,o,c,l=s.getData(n),h=s.getDataLength(),u=s.getNext(n);H.hide(w.elems.info);try{for(c=s._options.preload;c>0;c--)o=new i.Picture,a=s.getData(u),o.preload(a.big?a.big:a.image),u=s.getNext(u)}catch(t){}w.image.isIframe=l.iframe&&!l.image,t(w.elems.box).toggleClass(\"iframe\",w.image.isIframe),t(w.image.container).find(\".galleria-videoicon\").remove(),w.image.load(l.big||l.image||l.iframe,function(i){if(i.isIframe){var a=t(e).width(),o=t(e).height();if(i.video&&s._options.maxVideoSize){var c=g.min(s._options.maxVideoSize/a,s._options.maxVideoSize/o);c<1&&(a*=c,o*=c)}w.width=a,w.height=o}else w.width=i.original.width,w.height=i.original.height;if(t(i.image).css({width:i.isIframe?\"100%\":\"100.1%\",height:i.isIframe?\"100%\":\"100.1%\",top:0,bottom:0,zIndex:99998,opacity:0,visibility:\"visible\"}).parent().height(\"100%\"),w.elems.title.innerHTML=l.title||\"\",w.elems.counter.innerHTML=n+1+\" / \"+h,r.resize(w.rescale),w.rescale(),l.image&&l.iframe){if(t(w.elems.box).addClass(\"iframe\"),l.video){var u=O(i.container).hide();e.setTimeout(function(){u.fadeIn(200)},200)}t(i.image).css(\"cursor\",\"pointer\").mouseup(function(e,i){return function(n){t(w.image.container).find(\".galleria-videoicon\").remove(),n.preventDefault(),i.isIframe=!0,i.load(e.iframe+(e.video?\"&autoplay=1\":\"\"),{width:\"100%\",height:y<8?t(w.image.container).height():\"100%\"})}}(l,i))}}),t(w.elems.overlay).show().css(\"visibility\",\"visible\"),t(w.elems.box).show()}},x=this._timer={trunk:{},add:function(t,i,n,a){if(t=t||(new Date).getTime(),a=a||!1,this.clear(t),a){var o=i;i=function(){o(),x.add(t,i,n)}}this.trunk[t]=e.setTimeout(i,n)},clear:function(t){var i,n=function(t){e.clearTimeout(this.trunk[t]),delete this.trunk[t]};if(t&&t in this.trunk)n.call(this,t);else if(\"undefined\"==typeof t)for(i in this.trunk)this.trunk.hasOwnProperty(i)&&n.call(this,i)}};return this},i.prototype={constructor:i,init:function(e,a){if(a=T(a),this._original={target:e,options:a,data:null},this._target=this._dom.target=e.nodeName?e:t(e).get(0),this._original.html=this._target.innerHTML,D.push(this),!this._target)return void i.raise(\"Target not found\",!0);if(this._options={autoplay:!1,carousel:!0,carouselFollow:!0,carouselSpeed:400,carouselSteps:\"auto\",clicknext:!1,dailymotion:{foreground:\"%23EEEEEE\",highlight:\"%235BCEC5\",background:\"%23222222\",logo:0,hideInfos:1},dataConfig:function(t){return{}},dataSelector:\"img\",dataSort:!1,dataSource:this._target,debug:n,dummy:n,easing:\"galleria\",extend:function(t){},fullscreenCrop:n,fullscreenDoubleTap:!0,fullscreenTransition:n,height:0,idleMode:!0,idleTime:3e3,idleSpeed:200,imageCrop:!1,imageMargin:0,imagePan:!1,imagePanSmoothness:12,imagePosition:\"50%\",imageTimeout:n,initialTransition:n,keepSource:!1,layerFollow:!0,lightbox:!1,lightboxFadeSpeed:200,lightboxTransitionSpeed:200,linkSourceImages:!0,maxScaleRatio:n,maxVideoSize:n,minScaleRatio:n,overlayOpacity:.85,overlayBackground:\"#0b0b0b\",pauseOnInteraction:!0,popupLinks:!1,preload:2,queue:!0,responsive:!0,show:0,showInfo:!0,showCounter:!0,showImagenav:!0,swipe:\"auto\",theme:null,thumbCrop:!0,thumbEventType:\"click:fast\",thumbMargin:0,thumbQuality:\"auto\",thumbDisplayOrder:!0,thumbPosition:\"50%\",thumbnails:!0,touchTransition:n,transition:\"fade\",transitionInitial:n,transitionSpeed:400,trueFullscreen:!0,useCanvas:!1,variation:\"\",videoPoster:!0,vimeo:{title:0,byline:0,portrait:0,color:\"aaaaaa\"},wait:5e3,width:\"auto\",youtube:{modestbranding:1,autohide:1,color:\"white\",hd:1,rel:0,showinfo:0}},this._options.initialTransition=this._options.initialTransition||this._options.transitionInitial,\na&&(a.debug===!1&&(l=!1),\"number\"==typeof a.imageTimeout&&(h=a.imageTimeout),\"string\"==typeof a.dummy&&(u=a.dummy),\"string\"==typeof a.theme&&(this._options.theme=a.theme)),t(this._target).children().hide(),i.QUIRK&&i.raise(\"Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML and add a correct doctype.\"),z.length)if(this._options.theme){for(var o=0;o<z.length;o++)if(this._options.theme===z[o].name){this.theme=z[o];break}}else this.theme=z[0];return\"object\"==typeof this.theme?this._init():P.push(this),this},_init:function(){var o=this,s=this._options;if(this._initialized)return i.raise(\"Init failed: Gallery instance already initialized.\"),this;if(this._initialized=!0,!this.theme)return i.raise(\"Init failed: No theme found.\",!0),this;if(t.extend(!0,s,this.theme.defaults,this._original.options,i.configure.options),s.swipe=function(t){return\"enforced\"==t||t!==!1&&\"disabled\"!=t&&!!i.TOUCH}(s.swipe),s.swipe&&(s.clicknext=!1,s.imagePan=!1),function(t){return\"getContext\"in t?void($=$||{elem:t,context:t.getContext(\"2d\"),cache:{},length:0}):void(t=null)}(a.createElement(\"canvas\")),this.bind(i.DATA,function(){e.screen&&e.screen.width&&Array.prototype.forEach&&this._data.forEach(function(t){var i=\"devicePixelRatio\"in e?e.devicePixelRatio:1,n=g.max(e.screen.width,e.screen.height);n*i<1024&&(t.big=t.image)}),this._original.data=this._data,this.get(\"total\").innerHTML=this.getDataLength();var t=this.$(\"container\");o._options.height<2&&(o._userRatio=o._ratio=o._options.height);var n={width:0,height:0},a=function(){return o.$(\"stage\").height()};H.wait({until:function(){return n=o._getWH(),t.width(n.width).height(n.height),a()&&n.width&&n.height>50},success:function(){o._width=n.width,o._height=n.height,o._ratio=o._ratio||n.height/n.width,i.WEBKIT?e.setTimeout(function(){o._run()},1):o._run()},error:function(){a()?i.raise(\"Could not extract sufficient width/height of the gallery container. Traced measures: width:\"+n.width+\"px, height: \"+n.height+\"px.\",!0):i.raise(\"Could not extract a stage height from the CSS. Traced height: \"+a()+\"px.\",!0)},timeout:\"number\"==typeof this._options.wait&&this._options.wait})}),this.append({\"info-text\":[\"info-title\",\"info-description\"],info:[\"info-text\"],\"image-nav\":[\"image-nav-right\",\"image-nav-left\"],stage:[\"images\",\"loader\",\"counter\",\"image-nav\"],\"thumbnails-list\":[\"thumbnails\"],\"thumbnails-container\":[\"thumb-nav-left\",\"thumbnails-list\",\"thumb-nav-right\"],container:[\"stage\",\"thumbnails-container\",\"info\",\"tooltip\"]}),H.hide(this.$(\"counter\").append(this.get(\"current\"),a.createTextNode(\" / \"),this.get(\"total\"))),this.setCounter(\"&#8211;\"),H.hide(o.get(\"tooltip\")),this.$(\"container\").addClass([i.TOUCH?\"touch\":\"notouch\",this._options.variation,\"galleria-theme-\"+this.theme.name].join(\" \")),this._options.swipe||t.each(new Array(2),function(e){var n=new i.Picture;t(n.container).css({position:\"absolute\",top:0,left:0}).prepend(o._layers[e]=t(H.create(\"galleria-layer\")).css({position:\"absolute\",top:0,left:0,right:0,bottom:0,zIndex:2})[0]),o.$(\"images\").append(n.container),o._controls[e]=n;var a=new i.Picture;a.isIframe=!0,t(a.container).attr(\"class\",\"galleria-frame\").css({position:\"absolute\",top:0,left:0,zIndex:4,background:\"#000\",display:\"none\"}).appendTo(n.container),o._controls.frames[e]=a}),this.$(\"images\").css({position:\"relative\",top:0,left:0,width:\"100%\",height:\"100%\"}),s.swipe&&(this.$(\"images\").css({position:\"absolute\",top:0,left:0,width:0,height:\"100%\"}),this.finger=new i.Finger(this.get(\"stage\"),{onchange:function(t){o.pause().show(t)},oncomplete:function(e){var i=g.max(0,g.min(parseInt(e,10),o.getDataLength()-1)),n=o.getData(i);t(o._thumbnails[i].container).addClass(\"active\").siblings(\".active\").removeClass(\"active\"),n&&(o.$(\"images\").find(\".galleria-frame\").css(\"opacity\",0).hide().find(\"iframe\").remove(),o._options.carousel&&o._options.carouselFollow&&o._carousel.follow(i))}}),this.bind(i.RESCALE,function(){this.finger.setup()}),this.$(\"stage\").on(\"click\",function(i){var a=o.getData();if(a){if(a.iframe){o.isPlaying()&&o.pause();var r=o._controls.frames[o._active],s=o._stageWidth,c=o._stageHeight;if(t(r.container).find(\"iframe\").length)return;return t(r.container).css({width:s,height:c,opacity:0}).show().animate({opacity:1},200),void e.setTimeout(function(){r.load(a.iframe+(a.video?\"&autoplay=1\":\"\"),{width:s,height:c},function(t){o.$(\"container\").addClass(\"videoplay\"),t.scale({width:o._stageWidth,height:o._stageHeight,iframelimit:a.video?o._options.maxVideoSize:n})})},100)}if(a.link)if(o._options.popupLinks){e.open(a.link,\"_blank\")}else e.location.href=a.link;else;}}),this.bind(i.IMAGE,function(e){o.setCounter(e.index),o.setInfo(e.index);var i=this.getNext(),n=this.getPrev(),a=[n,i];a.push(this.getNext(i),this.getPrev(n),o._controls.slides.length-1);var r=[];t.each(a,function(e,i){t.inArray(i,r)==-1&&r.push(i)}),t.each(r,function(e,i){var n=o.getData(i),a=o._controls.slides[i],r=o.isFullscreen()&&n.big?n.big:n.image||n.iframe;n.iframe&&!n.image&&(a.isIframe=!0),a.ready||o._controls.slides[i].load(r,function(e){e.isIframe||t(e.image).css(\"visibility\",\"hidden\"),o._scaleImage(e,{complete:function(e){e.isIframe||t(e.image).css({opacity:0,visibility:\"visible\"}).animate({opacity:1},200)}})})})})),this.$(\"thumbnails, thumbnails-list\").css({overflow:\"hidden\",position:\"relative\"}),this.$(\"image-nav-right, image-nav-left\").on(\"click:fast\",function(t){s.pauseOnInteraction&&o.pause();var e=/right/.test(this.className)?\"next\":\"prev\";o[e]()}).on(\"click\",function(t){t.preventDefault(),(s.clicknext||s.swipe)&&t.stopPropagation()}),t.each([\"info\",\"counter\",\"image-nav\"],function(t,e){s[\"show\"+e.substr(0,1).toUpperCase()+e.substr(1).replace(/-/,\"\")]===!1&&H.moveOut(o.get(e.toLowerCase()))}),this.load(),s.keepSource||y||(this._target.innerHTML=\"\"),this.get(\"errors\")&&this.appendChild(\"target\",\"errors\"),this.appendChild(\"target\",\"container\"),s.carousel){var c=0,l=s.show;this.bind(i.THUMBNAIL,function(){this.updateCarousel(),++c==this.getDataLength()&&\"number\"==typeof l&&l>0&&this._carousel.follow(l)})}return s.responsive&&r.on(\"resize\",function(){o.isFullscreen()||o.resize()}),s.fullscreenDoubleTap&&this.$(\"stage\").on(\"touchstart\",function(){var t,e,i,n,a,r,s=function(t){return t.originalEvent.touches?t.originalEvent.touches[0]:t};return o.$(\"stage\").on(\"touchmove\",function(){t=0}),function(c){if(!/(-left|-right)/.test(c.target.className)){if(r=H.timestamp(),e=s(c).pageX,i=s(c).pageY,c.originalEvent.touches.length<2&&r-t<300&&e-n<20&&i-a<20)return o.toggleFullscreen(),void c.preventDefault();t=r,n=e,a=i}}}()),t.each(i.on.binds,function(e,i){t.inArray(i.hash,o._binds)==-1&&o.bind(i.type,i.callback)}),this},addTimer:function(){return this._timer.add.apply(this._timer,H.array(arguments)),this},clearTimer:function(){return this._timer.clear.apply(this._timer,H.array(arguments)),this},_getWH:function(){var e,i=this.$(\"container\"),n=this.$(\"target\"),a=this,o={};return t.each([\"width\",\"height\"],function(t,r){a._options[r]&&\"number\"==typeof a._options[r]?o[r]=a._options[r]:(e=[H.parseValue(i.css(r)),H.parseValue(n.css(r)),i[r](),n[r]()],a[\"_\"+r]||e.splice(e.length,H.parseValue(i.css(\"min-\"+r)),H.parseValue(n.css(\"min-\"+r))),o[r]=g.max.apply(g,e))}),a._userRatio&&(o.height=o.width*a._userRatio),o},_createThumbnails:function(n){this.get(\"total\").innerHTML=this.getDataLength();var o,r,s,c,l=this,h=this._options,u=n?this._data.length-n.length:0,d=u,p=[],f=0,g=y<8?\"http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif\":\"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D\",m=function(){var t=l.$(\"thumbnails\").find(\".active\");return!!t.length&&t.find(\"img\").attr(\"src\")}(),v=\"string\"==typeof h.thumbnails?h.thumbnails.toLowerCase():null,_=function(t){return a.defaultView&&a.defaultView.getComputedStyle?a.defaultView.getComputedStyle(r.container,null)[t]:c.css(t)},b=function(e,n,a){return function(){t(a).append(e),l.trigger({type:i.THUMBNAIL,thumbTarget:e,index:n,galleriaData:l.getData(n)})}},w=function(e){h.pauseOnInteraction&&l.pause();var i=t(e.currentTarget).data(\"index\");l.getIndex()!==i&&l.show(i),e.preventDefault()},x=function(e,n){t(e.container).css(\"visibility\",\"visible\"),l.trigger({type:i.THUMBNAIL,thumbTarget:e.image,index:e.data.order,galleriaData:l.getData(e.data.order)}),\"function\"==typeof n&&n.call(l,e)},T=function(e,i){e.scale({width:e.data.width,height:e.data.height,crop:h.thumbCrop,margin:h.thumbMargin,canvas:h.useCanvas,position:h.thumbPosition,complete:function(e){var n,a,o=[\"left\",\"top\"],r=[\"Width\",\"Height\"];l.getData(e.index);t.each(r,function(i,r){n=r.toLowerCase(),h.thumbCrop===!0&&h.thumbCrop!==n||(a={},a[n]=e[n],t(e.container).css(a),a={},a[o[i]]=0,t(e.image).css(a)),e[\"outer\"+r]=t(e.container)[\"outer\"+r](!0)}),H.toggleQuality(e.image,h.thumbQuality===!0||\"auto\"===h.thumbQuality&&e.original.width<3*e.width),h.thumbDisplayOrder&&!e.lazy?t.each(p,function(t,e){if(t===f&&e.ready&&!e.displayed)return f++,e.displayed=!0,void x(e,i)}):x(e,i)}})};for(n||(this._thumbnails=[],this.$(\"thumbnails\").empty());this._data[u];u++)s=this._data[u],o=s.thumb||s.image,h.thumbnails!==!0&&\"lazy\"!=v||!s.thumb&&!s.image?s.iframe&&null!==v||\"empty\"===v||\"numbers\"===v?(r={container:H.create(\"galleria-image\"),image:H.create(\"img\",\"span\"),ready:!0,data:{order:u}},\"numbers\"===v&&t(r.image).text(u+1),s.iframe&&t(r.image).addClass(\"iframe\"),this.$(\"thumbnails\").append(r.container),e.setTimeout(b(r.image,u,r.container),50+20*u)):r={container:null,image:null}:(r=new i.Picture(u),r.index=u,r.displayed=!1,r.lazy=!1,r.video=!1,this.$(\"thumbnails\").append(r.container),c=t(r.container),c.css(\"visibility\",\"hidden\"),r.data={width:H.parseValue(_(\"width\")),height:H.parseValue(_(\"height\")),order:u,src:o},h.thumbCrop!==!0?c.css({width:\"auto\",height:\"auto\"}):c.css({width:r.data.width,height:r.data.height}),\"lazy\"==v?(c.addClass(\"lazy\"),r.lazy=!0,r.load(g,{height:r.data.height,width:r.data.width})):r.load(o,T),\"all\"===h.preload&&r.preload(s.image)),t(r.container).add(h.keepSource&&h.linkSourceImages?s.original:null).data(\"index\",u).on(h.thumbEventType,w).data(\"thumbload\",T),m===o&&t(r.container).addClass(\"active\"),this._thumbnails.push(r);return p=this._thumbnails.slice(d),this},lazyLoad:function(e,i){var n=e.constructor==Array?e:[e],a=this,o=0;return t.each(n,function(e,r){if(!(r>a._thumbnails.length-1)){var s=a._thumbnails[r],c=s.data,l=function(){++o==n.length&&\"function\"==typeof i&&i.call(a)},h=t(s.container).data(\"thumbload\");s.video?h.call(a,s,l):s.load(c.src,function(t){h.call(a,t,l)})}}),this},lazyLoadChunks:function(t,i){var n=this.getDataLength(),a=0,o=0,r=[],s=[],c=this;for(i=i||0;a<n;a++)s.push(a),++o!=t&&a!=n-1||(r.push(s),o=0,s=[]);var l=function(t){var n=r.shift();n&&e.setTimeout(function(){c.lazyLoad(n,function(){l(!0)})},i&&t?i:0)};return l(!1),this},_run:function(){var a=this;a._createThumbnails(),H.wait({timeout:1e4,until:function(){return i.OPERA&&a.$(\"stage\").css(\"display\",\"inline-block\"),a._stageWidth=a.$(\"stage\").width(),a._stageHeight=a.$(\"stage\").height(),a._stageWidth&&a._stageHeight>50},success:function(){if(E.push(a),a._options.swipe){var o=a.$(\"images\").width(a.getDataLength()*a._stageWidth);t.each(new Array(a.getDataLength()),function(e){var n=new i.Picture,r=a.getData(e);t(n.container).css({position:\"absolute\",top:0,left:a._stageWidth*e}).prepend(a._layers[e]=t(H.create(\"galleria-layer\")).css({position:\"absolute\",top:0,left:0,right:0,bottom:0,zIndex:2})[0]).appendTo(o),r.video&&O(n.container),a._controls.slides.push(n);var s=new i.Picture;s.isIframe=!0,t(s.container).attr(\"class\",\"galleria-frame\").css({position:\"absolute\",top:0,left:0,zIndex:4,background:\"#000\",display:\"none\"}).appendTo(n.container),a._controls.frames.push(s)}),a.finger.setup()}return H.show(a.get(\"counter\")),a._options.carousel&&a._carousel.bindControls(),a._options.autoplay&&(a.pause(),\"number\"==typeof a._options.autoplay&&(a._playtime=a._options.autoplay),a._playing=!0),a._firstrun?(a._options.autoplay&&a.trigger(i.PLAY),void(\"number\"==typeof a._options.show&&a.show(a._options.show))):(a._firstrun=!0,i.History&&i.History.change(function(t){isNaN(t)?e.history.go(-1):a.show(t,n,!0)}),a.trigger(i.READY),a.theme.init.call(a,a._options),t.each(i.ready.callbacks,function(t,e){\"function\"==typeof e&&e.call(a,a._options)}),a._options.extend.call(a,a._options),/^[0-9]{1,4}$/.test(p)&&i.History?a.show(p,n,!0):a._data[a._options.show]&&a.show(a._options.show),void(a._options.autoplay&&a.trigger(i.PLAY)))},error:function(){i.raise(\"Stage width or height is too small to show the gallery. Traced measures: width:\"+a._stageWidth+\"px, height: \"+a._stageHeight+\"px.\",!0)}})},load:function(e,n,a){var o=this,r=this._options;return this._data=[],this._thumbnails=[],this.$(\"thumbnails\").empty(),\"function\"==typeof n&&(a=n,n=null),e=e||r.dataSource,n=n||r.dataSelector,a=a||r.dataConfig,t.isPlainObject(e)&&(e=[e]),t.isArray(e)?this.validate(e)?this._data=e:i.raise(\"Load failed: JSON Array not valid.\"):(n+=\",.video,.iframe\",t(e).find(n).each(function(e,i){i=t(i);var n={},r=i.parent(),s=r.attr(\"href\"),c=r.attr(\"rel\");s&&(\"IMG\"==i[0].nodeName||i.hasClass(\"video\"))&&S(s)?n.video=s:s&&i.hasClass(\"iframe\")?n.iframe=s:n.image=n.big=s,c&&(n.big=c),t.each(\"big title description link layer image\".split(\" \"),function(t,e){i.data(e)&&(n[e]=i.data(e).toString())}),n.big||(n.big=n.image),o._data.push(t.extend({title:i.attr(\"title\")||\"\",thumb:i.attr(\"src\"),image:i.attr(\"src\"),big:i.attr(\"src\"),description:i.attr(\"alt\")||\"\",link:i.attr(\"longdesc\"),original:i.get(0)},n,a(i)))})),\"function\"==typeof r.dataSort?s.sort.call(this._data,r.dataSort):\"random\"==r.dataSort&&this._data.sort(function(){return g.round(g.random())-.5}),this.getDataLength()&&this._parseData(function(){this.trigger(i.DATA)}),this},_parseData:function(e){var i,a=this,o=!1,r=function(){var i=!0;t.each(a._data,function(t,e){if(e.loading)return i=!1,!1}),i&&!o&&(o=!0,e.call(a))};return t.each(this._data,function(e,o){if(i=a._data[e],\"thumb\"in o==!1&&(i.thumb=o.image),o.big||(i.big=o.image),\"video\"in o){var s=S(o.video);s&&(i.iframe=new I(s.provider,s.id).embed()+function(){if(\"object\"==typeof a._options[s.provider]){var e=\"?\",i=[];return t.each(a._options[s.provider],function(t,e){i.push(t+\"=\"+e)}),\"youtube\"==s.provider&&(i=[\"wmode=opaque\"].concat(i)),e+i.join(\"&\")}return\"\"}(),i.thumb&&i.image||t.each([\"thumb\",\"image\"],function(t,e){if(\"image\"==e&&!a._options.videoPoster)return void(i.image=n);var o=new I(s.provider,s.id);i[e]||(i.loading=!0,o.getMedia(e,function(t,e){return function(i){t[e]=i,\"image\"!=e||t.big||(t.big=t.image),delete t.loading,r()}}(i,e)))}))}}),r(),this},destroy:function(){return this.$(\"target\").data(\"galleria\",null),this.$(\"container\").off(\"galleria\"),this.get(\"target\").innerHTML=this._original.html,this.clearTimer(),H.removeFromArray(D,this),H.removeFromArray(E,this),i._waiters.length&&t.each(i._waiters,function(t,i){i&&e.clearTimeout(i)}),this},splice:function(){var t=this,i=H.array(arguments);return e.setTimeout(function(){s.splice.apply(t._data,i),t._parseData(function(){t._createThumbnails()})},2),t},push:function(){var t=this,i=H.array(arguments);return 1==i.length&&i[0].constructor==Array&&(i=i[0]),e.setTimeout(function(){s.push.apply(t._data,i),t._parseData(function(){t._createThumbnails(i)})},2),t},_getActive:function(){return this._controls.getActive()},validate:function(t){return!0},bind:function(t,e){return t=k(t),this.$(\"container\").on(t,this.proxy(e)),this},unbind:function(t){return t=k(t),this.$(\"container\").off(t),this},trigger:function(e){return e=\"object\"==typeof e?t.extend(e,{scope:this}):{type:k(e),scope:this},this.$(\"container\").trigger(e),this},addIdleState:function(t,e,i,n){return this._idle.add.apply(this._idle,H.array(arguments)),this},removeIdleState:function(t){return this._idle.remove.apply(this._idle,H.array(arguments)),this},enterIdleMode:function(){return this._idle.hide(),this},exitIdleMode:function(){return this._idle.showAll(),this},enterFullscreen:function(t){return this._fullscreen.enter.apply(this,H.array(arguments)),this},exitFullscreen:function(t){return this._fullscreen.exit.apply(this,H.array(arguments)),this},toggleFullscreen:function(t){return this._fullscreen[this.isFullscreen()?\"exit\":\"enter\"].apply(this,H.array(arguments)),this},bindTooltip:function(t,e){return this._tooltip.bind.apply(this._tooltip,H.array(arguments)),this},defineTooltip:function(t,e){return this._tooltip.define.apply(this._tooltip,H.array(arguments)),this},refreshTooltip:function(t){return this._tooltip.show.apply(this._tooltip,H.array(arguments)),this},openLightbox:function(){return this._lightbox.show.apply(this._lightbox,H.array(arguments)),this},closeLightbox:function(){return this._lightbox.hide.apply(this._lightbox,H.array(arguments)),this},hasVariation:function(e){return t.inArray(e,this._options.variation.split(/\\s+/))>-1},getActiveImage:function(){var t=this._getActive();return t?t.image:n},getActiveThumb:function(){return this._thumbnails[this._active].image||n},getMousePosition:function(t){return{x:t.pageX-this.$(\"container\").offset().left,y:t.pageY-this.$(\"container\").offset().top}},addPan:function(e){if(this._options.imageCrop!==!1){e=t(e||this.getActiveImage());var i=this,n=e.width()/2,a=e.height()/2,o=parseInt(e.css(\"left\"),10),r=parseInt(e.css(\"top\"),10),s=o||0,c=r||0,l=0,h=0,u=!1,d=H.timestamp(),p=0,f=0,m=function(t,i,n){if(t>0&&(f=g.round(g.max(t*-1,g.min(0,i))),p!==f))if(p=f,8===y)e.parent()[\"scroll\"+n](f*-1);else{var a={};a[n.toLowerCase()]=f,e.css(a)}},v=function(t){H.timestamp()-d<50||(u=!0,n=i.getMousePosition(t).x,a=i.getMousePosition(t).y)},_=function(t){u&&(l=e.width()-i._stageWidth,h=e.height()-i._stageHeight,o=n/i._stageWidth*l*-1,r=a/i._stageHeight*h*-1,s+=(o-s)/i._options.imagePanSmoothness,c+=(r-c)/i._options.imagePanSmoothness,m(h,c,\"Top\"),m(l,s,\"Left\"))};return 8===y&&(e.parent().scrollTop(c*-1).scrollLeft(s*-1),e.css({top:0,left:0})),this.$(\"stage\").off(\"mousemove\",v).on(\"mousemove\",v),this.addTimer(\"pan\"+i._id,_,50,!0),this}},proxy:function(t,e){return\"function\"!=typeof t?m:(e=e||this,function(){return t.apply(e,H.array(arguments))})},getThemeName:function(){return this.theme.name},removePan:function(){return this.$(\"stage\").off(\"mousemove\"),this.clearTimer(\"pan\"+this._id),this},addElement:function(e){var i=this._dom;return t.each(H.array(arguments),function(t,e){i[e]=H.create(\"galleria-\"+e)}),this},attachKeyboard:function(t){return this._keyboard.attach.apply(this._keyboard,H.array(arguments)),this},detachKeyboard:function(){return this._keyboard.detach.apply(this._keyboard,H.array(arguments)),this},appendChild:function(t,e){return this.$(t).append(this.get(e)||e),this},prependChild:function(t,e){return this.$(t).prepend(this.get(e)||e),this},remove:function(t){return this.$(H.array(arguments).join(\",\")).remove(),this},append:function(t){var e,i;for(e in t)if(t.hasOwnProperty(e))if(t[e].constructor===Array)for(i=0;t[e][i];i++)this.appendChild(e,t[e][i]);else this.appendChild(e,t[e]);return this},_scaleImage:function(e,i){if(e=e||this._controls.getActive()){var n,a=function(e){t(e.container).children(\":first\").css({top:g.max(0,H.parseValue(e.image.style.top)),left:g.max(0,H.parseValue(e.image.style.left)),width:H.parseValue(e.image.width),height:H.parseValue(e.image.height)})};return i=t.extend({width:this._stageWidth,height:this._stageHeight,crop:this._options.imageCrop,max:this._options.maxScaleRatio,min:this._options.minScaleRatio,margin:this._options.imageMargin,position:this._options.imagePosition,iframelimit:this._options.maxVideoSize},i),this._options.layerFollow&&this._options.imageCrop!==!0?\"function\"==typeof i.complete?(n=i.complete,i.complete=function(){n.call(e,e),a(e)}):i.complete=a:t(e.container).children(\":first\").css({top:0,left:0}),e.scale(i),this}},updateCarousel:function(){return this._carousel.update(),this},resize:function(e,i){\"function\"==typeof e&&(i=e,e=n),e=t.extend({width:0,height:0},e);var a=this,o=this.$(\"container\");return t.each(e,function(t,i){i||(o[t](\"auto\"),e[t]=a._getWH()[t])}),t.each(e,function(t,e){o[t](e)}),this.rescale(i)},rescale:function(e,a,o){var r=this;\"function\"==typeof e&&(o=e,e=n);var s=function(){r._stageWidth=e||r.$(\"stage\").width(),r._stageHeight=a||r.$(\"stage\").height(),r._options.swipe?(t.each(r._controls.slides,function(e,i){r._scaleImage(i),t(i.container).css(\"left\",r._stageWidth*e)}),r.$(\"images\").css(\"width\",r._stageWidth*r.getDataLength())):r._scaleImage(),r._options.carousel&&r.updateCarousel();var n=r._controls.frames[r._controls.active];n&&r._controls.frames[r._controls.active].scale({width:r._stageWidth,height:r._stageHeight,iframelimit:r._options.maxVideoSize}),r.trigger(i.RESCALE),\"function\"==typeof o&&o.call(r)};return s.call(r),this},refreshImage:function(){return this._scaleImage(),this._options.imagePan&&this.addPan(),this},_preload:function(){if(this._options.preload){var t,e,n,a=this.getNext();try{for(e=this._options.preload;e>0;e--)t=new i.Picture,n=this.getData(a),t.preload(this.isFullscreen()&&n.big?n.big:n.image),a=this.getNext(a)}catch(t){}}},show:function(n,a,o){var r=this._options.swipe;if(r||!(this._queue.length>3||n===!1||!this._options.queue&&this._queue.stalled)){if(n=g.max(0,g.min(parseInt(n,10),this.getDataLength()-1)),a=\"undefined\"!=typeof a?!!a:n<this.getIndex(),o=o||!1,!o&&i.History)return void i.History.set(n.toString());if(this.finger&&n!==this._active&&(this.finger.to=-(n*this.finger.width),this.finger.index=n),this._active=n,r){var c=this.getData(n),l=this;if(!c)return;var h=this.isFullscreen()&&c.big?c.big:c.image||c.iframe,u=this._controls.slides[n],d=u.isCached(h),p=this._thumbnails[n],f={cached:d,index:n,rewind:a,imageTarget:u.image,thumbTarget:p.image,galleriaData:c};this.trigger(t.extend(f,{type:i.LOADSTART})),l.$(\"container\").removeClass(\"videoplay\");var m=function(){l._layers[n].innerHTML=l.getData().layer||\"\",l.trigger(t.extend(f,{type:i.LOADFINISH})),l._playCheck()};l._preload(),e.setTimeout(function(){u.ready&&t(u.image).attr(\"src\")==h?(l.trigger(t.extend(f,{type:i.IMAGE})),m()):(c.iframe&&!c.image&&(u.isIframe=!0),u.load(h,function(e){f.imageTarget=e.image,l._scaleImage(e,m).trigger(t.extend(f,{type:i.IMAGE})),m()}))},100)}else s.push.call(this._queue,{index:n,rewind:a}),this._queue.stalled||this._show();return this}},_show:function(){var a=this,o=this._queue[0],r=this.getData(o.index);if(r){var c=this.isFullscreen()&&r.big?r.big:r.image||r.iframe,l=this._controls.getActive(),h=this._controls.getNext(),u=h.isCached(c),d=this._thumbnails[o.index],p=function(){t(h.image).trigger(\"mouseup\")};a.$(\"container\").toggleClass(\"iframe\",!!r.isIframe).removeClass(\"videoplay\");var f=function(o,r,c,l,h){return function(){var u;M.active=!1,H.toggleQuality(r.image,a._options.imageQuality),a._layers[a._controls.active].innerHTML=\"\",t(c.container).css({zIndex:0,opacity:0}).show(),t(c.container).find(\"iframe, .galleria-videoicon\").remove(),t(a._controls.frames[a._controls.active].container).hide(),t(r.container).css({zIndex:1,left:0,top:0}).show(),a._controls.swap(),a._options.imagePan&&a.addPan(r.image),(o.iframe&&o.image||o.link||a._options.lightbox||a._options.clicknext)&&t(r.image).css({cursor:\"pointer\"}).on(\"mouseup\",function(r){if(!(\"number\"==typeof r.which&&r.which>1)){if(o.iframe){a.isPlaying()&&a.pause();var s=a._controls.frames[a._controls.active],c=a._stageWidth,l=a._stageHeight;return t(s.container).css({width:c,height:l,opacity:0}).show().animate({opacity:1},200),void e.setTimeout(function(){s.load(o.iframe+(o.video?\"&autoplay=1\":\"\"),{width:c,height:l},function(t){a.$(\"container\").addClass(\"videoplay\"),t.scale({width:a._stageWidth,height:a._stageHeight,iframelimit:o.video?a._options.maxVideoSize:n})})},100)}return a._options.clicknext&&!i.TOUCH?(a._options.pauseOnInteraction&&a.pause(),void a.next()):o.link?void(a._options.popupLinks?u=e.open(o.link,\"_blank\"):e.location.href=o.link):void(a._options.lightbox&&a.openLightbox())}}),a._playCheck(),a.trigger({type:i.IMAGE,index:l.index,imageTarget:r.image,thumbTarget:h.image,galleriaData:o}),s.shift.call(a._queue),a._queue.stalled=!1,a._queue.length&&a._show()}}(r,h,l,o,d);this._options.carousel&&this._options.carouselFollow&&this._carousel.follow(o.index),a._preload(),H.show(h.container),h.isIframe=r.iframe&&!r.image,t(a._thumbnails[o.index].container).addClass(\"active\").siblings(\".active\").removeClass(\"active\"),a.trigger({type:i.LOADSTART,cached:u,index:o.index,rewind:o.rewind,imageTarget:h.image,thumbTarget:d.image,galleriaData:r}),a._queue.stalled=!0,h.load(c,function(e){var s=t(a._layers[1-a._controls.active]).html(r.layer||\"\").hide();a._scaleImage(e,{complete:function(e){\"image\"in l&&H.toggleQuality(l.image,!1),H.toggleQuality(e.image,!1),a.removePan(),a.setInfo(o.index),a.setCounter(o.index),r.layer&&(s.show(),(r.iframe&&r.image||r.link||a._options.lightbox||a._options.clicknext)&&s.css(\"cursor\",\"pointer\").off(\"mouseup\").mouseup(p)),r.video&&r.image&&O(e.container);var c=a._options.transition;if(t.each({initial:null===l.image,touch:i.TOUCH,fullscreen:a.isFullscreen()},function(t,e){if(e&&a._options[t+\"Transition\"]!==n)return c=a._options[t+\"Transition\"],!1}),c in M.effects==!1)f();else{var h={prev:l.container,next:e.container,rewind:o.rewind,speed:a._options.transitionSpeed||400};M.active=!0,M.init.call(a,c,h,f)}a.trigger({type:i.LOADFINISH,cached:u,index:o.index,rewind:o.rewind,imageTarget:e.image,thumbTarget:a._thumbnails[o.index].image,galleriaData:a.getData(o.index)})}})})}},getNext:function(t){return t=\"number\"==typeof t?t:this.getIndex(),t===this.getDataLength()-1?0:t+1},getPrev:function(t){return t=\"number\"==typeof t?t:this.getIndex(),0===t?this.getDataLength()-1:t-1},next:function(){return this.getDataLength()>1&&this.show(this.getNext(),!1),this},prev:function(){return this.getDataLength()>1&&this.show(this.getPrev(),!0),this},get:function(t){return t in this._dom?this._dom[t]:null},getData:function(t){return t in this._data?this._data[t]:this._data[this._active]},getDataLength:function(){return this._data.length},getIndex:function(){return\"number\"==typeof this._active&&this._active},getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:function(t){return\"undefined\"==typeof t?this._options:this._options[t]},setOptions:function(e,i){return\"object\"==typeof e?t.extend(this._options,e):this._options[e]=i,this},play:function(t){return this._playing=!0,this._playtime=t||this._playtime,this._playCheck(),this.trigger(i.PLAY),this},pause:function(){return this._playing=!1,this.trigger(i.PAUSE),this},playToggle:function(t){return this._playing?this.pause():this.play(t)},isPlaying:function(){return this._playing},isFullscreen:function(){return this._fullscreen.active},_playCheck:function(){var t=this,e=0,n=20,a=H.timestamp(),o=\"play\"+this._id;if(this._playing){this.clearTimer(o);var r=function(){return e=H.timestamp()-a,e>=t._playtime&&t._playing?(t.clearTimer(o),void t.next()):void(t._playing&&(t.trigger({type:i.PROGRESS,percent:g.ceil(e/t._playtime*100),seconds:g.floor(e/1e3),milliseconds:e}),t.addTimer(o,r,n)))};t.addTimer(o,r,n)}},setPlaytime:function(t){return this._playtime=t,this},setIndex:function(t){return this._active=t,this},setCounter:function(t){if(\"number\"==typeof t?t++:\"undefined\"==typeof t&&(t=this.getIndex()+1),this.get(\"current\").innerHTML=t,y){var e=this.$(\"counter\"),i=e.css(\"opacity\");1===parseInt(i,10)?H.removeAlpha(e[0]):this.$(\"counter\").css(\"opacity\",i)}return this},setInfo:function(e){var i=this,n=this.getData(e);return t.each([\"title\",\"description\"],function(t,e){var a=i.$(\"info-\"+e);n[e]?a[n[e].length?\"show\":\"hide\"]().html(n[e]):a.empty().hide()}),this},hasInfo:function(t){var e,i=\"title description\".split(\" \");for(e=0;i[e];e++)if(this.getData(t)[i[e]])return!0;return!1},jQuery:function(e){var i=this,n=[];t.each(e.split(\",\"),function(e,a){a=t.trim(a),i.get(a)&&n.push(a)});var a=t(i.get(n.shift()));return t.each(n,function(t,e){a=a.add(i.get(e))}),a},$:function(t){return this.jQuery.apply(this,H.array(arguments))}},t.each(x,function(t,e){var n=/_/.test(e)?e.replace(/_/g,\"\"):e;i[e.toUpperCase()]=\"galleria.\"+n}),t.extend(i,{IE9:9===y,IE8:8===y,IE7:7===y,IE6:6===y,IE:y,WEBKIT:/webkit/.test(d),CHROME:/chrome/.test(d),SAFARI:/safari/.test(d)&&!/chrome/.test(d),QUIRK:y&&a.compatMode&&\"BackCompat\"===a.compatMode,MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!e.opera,IPHONE:/iphone/.test(d),IPAD:/ipad/.test(d),ANDROID:/android/.test(d),TOUCH:\"ontouchstart\"in a}),i.addTheme=function(n){n.name||i.raise(\"No theme name specified\"),\"object\"!=typeof n.defaults?n.defaults={}:n.defaults=T(n.defaults);var a,o=!1;return\"string\"==typeof n.css?(t(\"link\").each(function(t,e){if(a=new RegExp(n.css),a.test(e.href))return o=!0,F(n),!1}),o||t(function(){var r=0,s=function(){t(\"script\").each(function(t,i){a=new RegExp(\"galleria\\\\.\"+n.name.toLowerCase()+\"\\\\.\"),a.test(i.src)&&(o=i.src.replace(/[^\\/]*$/,\"\")+n.css,e.setTimeout(function(){H.loadCSS(o,\"galleria-theme-\"+n.name,function(){F(n)})},1))}),o||(r++>5?i.raise(\"No theme CSS loaded\"):e.setTimeout(s,500))};s()})):F(n),n},i.loadTheme=function(n,a){if(!t(\"script\").filter(function(){return t(this).attr(\"src\")==n}).length){var o,r=!1;return t(e).load(function(){r||(o=e.setTimeout(function(){r||i.raise(\"Galleria had problems loading theme at \"+n+\". Please check theme path or load manually.\",!0)},2e4))}),H.loadScript(n,function(){r=!0,e.clearTimeout(o)}),i}},i.get=function(t){return D[t]?D[t]:\"number\"!=typeof t?D:void i.raise(\"Gallery index \"+t+\" not found\")},i.configure=function(e,n){var a={};return\"string\"==typeof e&&n?(a[e]=n,e=a):t.extend(a,e),i.configure.options=a,t.each(i.get(),function(t,e){e.setOptions(a)}),i},i.configure.options={},i.on=function(e,n){if(e){n=n||m;var a=e+n.toString().replace(/\\s/g,\"\")+H.timestamp();return t.each(i.get(),function(t,i){i._binds.push(a),i.bind(e,n)}),i.on.binds.push({type:e,callback:n,hash:a}),i}},i.on.binds=[],i.run=function(e,n){return t.isFunction(n)&&(n={extend:n}),t(e||\"#galleria\").galleria(n),i},i.addTransition=function(t,e){return M.effects[t]=e,i},i.utils=H,i.log=function(){var i=H.array(arguments);if(!(\"console\"in e&&\"log\"in e.console))return e.alert(i.join(\"<br>\"));try{return e.console.log.apply(e.console,i)}catch(n){t.each(i,function(){e.console.log(this)})}},i.ready=function(e){return\"function\"!=typeof e?i:(t.each(E,function(t,i){e.call(i,i._options)}),i.ready.callbacks.push(e),i)},i.ready.callbacks=[],i.raise=function(e,i){var n=i?\"Fatal error\":\"Error\",a={color:\"#fff\",position:\"absolute\",top:0,left:0,zIndex:1e5},o=function(e){var o='<div style=\"padding:4px;margin:0 0 2px;background:#'+(i?\"811\":\"222\")+';\">'+(i?\"<strong>\"+n+\": </strong>\":\"\")+e+\"</div>\";t.each(D,function(){var t=this.$(\"errors\"),e=this.$(\"target\");t.length||(e.css(\"position\",\"relative\"),t=this.addElement(\"errors\").appendChild(\"target\",\"errors\").$(\"errors\").css(a)),t.append(o)}),D.length||t(\"<div>\").css(t.extend(a,{position:\"fixed\"})).append(o).appendTo(_().body)};if(l){if(o(e),i)throw new Error(n+\": \"+e)}else if(i){if(L)return;L=!0,i=!1,o(\"Gallery could not load.\")}},i.version=c,i.getLoadedThemes=function(){return t.map(z,function(t){return t.name})},i.requires=function(t,e){return e=e||\"You need to upgrade Galleria to version \"+t+\" to use one or more components.\",i.version<t&&i.raise(e,!0),i},i.Picture=function(e){this.id=e||null,this.image=null,this.container=H.create(\"galleria-image\"),t(this.container).css({overflow:\"hidden\",position:\"relative\"}),this.original={width:0,height:0},this.ready=!1,this.isIframe=!1},i.Picture.prototype={cache:{},show:function(){H.show(this.image)},hide:function(){H.moveOut(this.image)},clear:function(){this.image=null},isCached:function(t){return!!this.cache[t]},preload:function(e){t(new Image).load(function(t,e){return function(){e[t]=t}}(e,this.cache)).attr(\"src\",e)},load:function(n,a,o){if(\"function\"==typeof a&&(o=a,a=null),this.isIframe){var r=\"if\"+(new Date).getTime(),s=this.image=t(\"<iframe>\",{src:n,frameborder:0,id:r,allowfullscreen:!0,css:{visibility:\"hidden\"\n}})[0];return a&&t(s).css(a),t(this.container).find(\"iframe,img\").remove(),this.container.appendChild(this.image),t(\"#\"+r).load(function(i,n){return function(){e.setTimeout(function(){t(i.image).css(\"visibility\",\"visible\"),\"function\"==typeof n&&n.call(i,i)},10)}}(this,o)),this.container}this.image=new Image,i.IE8&&t(this.image).css(\"filter\",\"inherit\"),i.IE||i.CHROME||i.SAFARI||t(this.image).css(\"image-rendering\",\"optimizequality\");var c=!1,l=!1,h=t(this.container),d=t(this.image),p=function(){c?u?t(this).attr(\"src\",u):i.raise(\"Image not found: \"+n):(c=!0,e.setTimeout(function(t,e){return function(){t.attr(\"src\",e+(e.indexOf(\"?\")>-1?\"&\":\"?\")+H.timestamp())}}(t(this),n),50))},f=function(n,o,r){return function(){var s=function(){t(this).off(\"load\"),n.original=a||{height:this.height,width:this.width},i.HAS3D&&(this.style.MozTransform=this.style.webkitTransform=\"translate3d(0,0,0)\"),h.append(this),n.cache[r]=r,\"function\"==typeof o&&e.setTimeout(function(){o.call(n,n)},1)};this.width&&this.height?s.call(this):!function(e){H.wait({until:function(){return e.width&&e.height},success:function(){s.call(e)},error:function(){l?i.raise(\"Could not extract width/height from image: \"+e.src+\". Traced measures: width:\"+e.width+\"px, height: \"+e.height+\"px.\"):(t(new Image).load(f).attr(\"src\",e.src),l=!0)},timeout:100})}(this)}}(this,o,n);return h.find(\"iframe,img\").remove(),d.css(\"display\",\"block\"),H.hide(this.image),t.each(\"minWidth minHeight maxWidth maxHeight\".split(\" \"),function(t,e){d.css(e,/min/.test(e)?\"0\":\"none\")}),d.load(f).on(\"error\",p).attr(\"src\",n),this.container},scale:function(e){var a=this;if(e=t.extend({width:0,height:0,min:n,max:n,margin:0,complete:m,position:\"center\",crop:!1,canvas:!1,iframelimit:n},e),this.isIframe){var o,r,s=e.width,c=e.height;if(e.iframelimit){var l=g.min(e.iframelimit/s,e.iframelimit/c);l<1?(o=s*l,r=c*l,t(this.image).css({top:c/2-r/2,left:s/2-o/2,position:\"absolute\"})):t(this.image).css({top:0,left:0})}t(this.image).width(o||s).height(r||c).removeAttr(\"width\").removeAttr(\"height\"),t(this.container).width(s).height(c),e.complete.call(a,a);try{this.image.contentWindow&&t(this.image.contentWindow).trigger(\"resize\")}catch(t){}return this.container}if(!this.image)return this.container;var h,u,d,p=t(a.container);return H.wait({until:function(){return h=e.width||p.width()||H.parseValue(p.css(\"width\")),u=e.height||p.height()||H.parseValue(p.css(\"height\")),h&&u},success:function(){var i=(h-2*e.margin)/a.original.width,n=(u-2*e.margin)/a.original.height,o=g.min(i,n),r=g.max(i,n),s={true:r,width:i,height:n,false:o,landscape:a.original.width>a.original.height?r:o,portrait:a.original.width<a.original.height?r:o},c=s[e.crop.toString()],l=\"\";e.max&&(c=g.min(e.max,c)),e.min&&(c=g.max(e.min,c)),t.each([\"width\",\"height\"],function(e,i){t(a.image)[i](a[i]=a.image[i]=g.round(a.original[i]*c))}),t(a.container).width(h).height(u),e.canvas&&$&&($.elem.width=a.width,$.elem.height=a.height,l=a.image.src+\":\"+a.width+\"x\"+a.height,a.image.src=$.cache[l]||function(t){$.context.drawImage(a.image,0,0,a.original.width*c,a.original.height*c);try{return d=$.elem.toDataURL(),$.length+=d.length,$.cache[t]=d,d}catch(t){return a.image.src}}(l));var p={},f={},m=function(e,i,n){var o=0;if(/\\%/.test(e)){var r=parseInt(e,10)/100,s=a.image[i]||t(a.image)[i]();o=g.ceil(s*-1*r+n*r)}else o=H.parseValue(e);return o},v={top:{top:0},left:{left:0},right:{left:\"100%\"},bottom:{top:\"100%\"}};t.each(e.position.toLowerCase().split(\" \"),function(t,e){\"center\"===e&&(e=\"50%\"),p[t?\"top\":\"left\"]=e}),t.each(p,function(e,i){v.hasOwnProperty(i)&&t.extend(f,v[i])}),p=p.top?t.extend(p,f):f,p=t.extend({top:\"50%\",left:\"50%\"},p),t(a.image).css({position:\"absolute\",top:m(p.top,\"height\",u),left:m(p.left,\"width\",h)}),a.show(),a.ready=!0,e.complete.call(a,a)},error:function(){i.raise(\"Could not scale image: \"+a.image.src)},timeout:1e3}),this}},t.extend(t.easing,{galleria:function(t,e,i,n,a){return(e/=a/2)<1?n/2*e*e*e+i:n/2*((e-=2)*e*e+2)+i},galleriaIn:function(t,e,i,n,a){return n*(e/=a)*e+i},galleriaOut:function(t,e,i,n,a){return-n*(e/=a)*(e-2)+i}}),i.Finger=function(){var n=(g.abs,i.HAS3D=function(){var e,i,n=a.createElement(\"p\"),o=[\"webkit\",\"O\",\"ms\",\"Moz\",\"\"],r=0,s=\"transform\";for(_().html.insertBefore(n,null);o[r];r++)i=o[r]?o[r]+\"Transform\":s,void 0!==n.style[i]&&(n.style[i]=\"translate3d(1px,1px,1px)\",e=t(n).css(o[r]?\"-\"+o[r].toLowerCase()+\"-\"+s:s));return _().html.removeChild(n),void 0!==e&&e.length>0&&\"none\"!==e}()),r=function(){var t=\"RequestAnimationFrame\";return e.requestAnimationFrame||e[\"webkit\"+t]||e[\"moz\"+t]||e[\"o\"+t]||e[\"ms\"+t]||function(t){e.setTimeout(t,1e3/60)}}(),s=function(i,a){if(this.config={start:0,duration:500,onchange:function(){},oncomplete:function(){},easing:function(t,e,i,n,a){return-n*((e=e/a-1)*e*e*e-1)+i}},this.easeout=function(t,e,i,n,a){return n*((e=e/a-1)*e*e*e*e+1)+i},i.children.length){var o=this;t.extend(this.config,a),this.elem=i,this.child=i.children[0],this.to=this.pos=0,this.touching=!1,this.start={},this.index=this.config.start,this.anim=0,this.easing=this.config.easing,n||(this.child.style.position=\"absolute\",this.elem.style.position=\"relative\"),t.each([\"ontouchstart\",\"ontouchmove\",\"ontouchend\",\"setup\"],function(t,e){o[e]=function(t){return function(){t.apply(o,arguments)}}(o[e])}),this.setX=function(){var t=o.child.style;return n?void(t.MozTransform=t.webkitTransform=t.transform=\"translate3d(\"+o.pos+\"px,0,0)\"):void(t.left=o.pos+\"px\")},t(i).on(\"touchstart\",this.ontouchstart),t(e).on(\"resize\",this.setup),t(e).on(\"orientationchange\",this.setup),this.setup(),function t(){r(t),o.loop.call(o)}()}};return s.prototype={constructor:s,setup:function(){this.width=t(this.elem).width(),this.length=g.ceil(t(this.child).width()/this.width),0!==this.index&&(this.index=g.max(0,g.min(this.index,this.length-1)),this.pos=this.to=-this.width*this.index)},setPosition:function(t){this.pos=t,this.to=t},ontouchstart:function(t){var e=t.originalEvent.touches;this.start={pageX:e[0].pageX,pageY:e[0].pageY,time:+new Date},this.isScrolling=null,this.touching=!0,this.deltaX=0,o.on(\"touchmove\",this.ontouchmove),o.on(\"touchend\",this.ontouchend)},ontouchmove:function(t){var e=t.originalEvent.touches;e&&e.length>1||t.scale&&1!==t.scale||(this.deltaX=e[0].pageX-this.start.pageX,null===this.isScrolling&&(this.isScrolling=!!(this.isScrolling||g.abs(this.deltaX)<g.abs(e[0].pageY-this.start.pageY))),this.isScrolling||(t.preventDefault(),this.deltaX/=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0?g.abs(this.deltaX)/this.width+1.8:1,this.to=this.deltaX-this.index*this.width),t.stopPropagation())},ontouchend:function(t){this.touching=!1;var e=+new Date-this.start.time<250&&g.abs(this.deltaX)>40||g.abs(this.deltaX)>this.width/2,i=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0;this.isScrolling||this.show(this.index+(e&&!i?this.deltaX<0?1:-1:0)),o.off(\"touchmove\",this.ontouchmove),o.off(\"touchend\",this.ontouchend)},show:function(t){t!=this.index?this.config.onchange.call(this,t):this.to=-(t*this.width)},moveTo:function(t){t!=this.index&&(this.pos=this.to=-(t*this.width),this.index=t)},loop:function(){var t=this.to-this.pos,e=1;if(this.width&&t&&(e=g.max(.5,g.min(1.5,g.abs(t/this.width)))),this.touching||g.abs(t)<=1)this.pos=this.to,t=0,this.anim&&!this.touching&&this.config.oncomplete(this.index),this.anim=0,this.easing=this.config.easing;else{this.anim||(this.anim={start:this.pos,time:+new Date,distance:t,factor:e,destination:this.to});var i=+new Date-this.anim.time,n=this.config.duration*this.anim.factor;if(i>n||this.anim.destination!=this.to)return this.anim=0,void(this.easing=this.easeout);this.pos=this.easing(null,i,this.anim.start,this.anim.distance,n)}this.setX()}},s}(),t.fn.galleria=function(e){var n=this.selector;return t(this).length?this.each(function(){t.data(this,\"galleria\")&&(t.data(this,\"galleria\").destroy(),t(this).find(\"*\").hide()),t.data(this,\"galleria\",(new i).init(this,e))}):(t(function(){t(n).length?t(n).galleria(e):i.utils.wait({until:function(){return t(n).length},success:function(){t(n).galleria(e)},error:function(){i.raise('Init failed: Galleria could not find the element \"'+n+'\".')},timeout:5e3})}),this)},\"object\"==typeof module&&module&&\"object\"==typeof module.exports?module.exports=i:(e.Galleria=i,\"function\"==typeof define&&define.amd&&define(\"galleria\",[\"jquery\"],function(){return i}))}(jQuery,this);\n//# sourceMappingURL=galleria.min.js.map</script></c._inst.length;a++)if(c._inst[a].id===n&&c._inst[a].type==i)return>","site":{"data":{}},"excerpt":"","more":"!function(t,e,i,n){var a=e.document,o=t(a),r=t(e),s=Array.prototype,c=1.44,l=!0,h=3e4,u=!1,d=navigator.userAgent.toLowerCase(),p=e.location.hash.replace(/#\\//,\"\"),f=\"file:\"==e.location.protocol?\"http:\":e.location.protocol,g=Math,m=function(){},v=function(){return!1},y=function(){var t=3,e=a.createElement(\"div\"),i=e.getElementsByTagName(\"i\");do e.innerHTML=\"<!--[if gt IE \"+ ++t+\"]><i></i><![endif]-->\";while(i[0]);return t>4?t:a.documentMode||n}(),_=function(){return{html:a.documentElement,body:a.body,head:a.getElementsByTagName(\"head\")[0],title:a.title}},b=e.parent!==e.self,w=\"data ready thumbnail loadstart loadfinish image play pause progress fullscreen_enter fullscreen_exit idle_enter idle_exit rescale lightbox_open lightbox_close lightbox_image\",x=function(){var e=[];return t.each(w.split(\" \"),function(t,i){e.push(i),/_/.test(i)&&e.push(i.replace(/_/g,\"\"))}),e}(),T=function(e){var i;return\"object\"!=typeof e?e:(t.each(e,function(n,a){/^[a-z]+_/.test(n)&&(i=\"\",t.each(n.split(\"_\"),function(t,e){i+=t>0?e.substr(0,1).toUpperCase()+e.substr(1):e}),e[i]=a,delete e[n])}),e)},k=function(e){return t.inArray(e,x)>-1?i[e.toUpperCase()]:e},C={youtube:{reg:/https?:\\/\\/(?:[a-zA_Z]{2,3}.)?(?:youtube\\.com\\/watch\\?)((?:[\\w\\d\\-\\_\\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\\-\\_]+))/i,embed:function(){return f+\"//www.youtube.com/embed/\"+this.id},get_thumb:function(t){return f+\"//img.youtube.com/vi/\"+this.id+\"/default.jpg\"},get_image:function(t){return f+\"//img.youtube.com/vi/\"+this.id+\"/hqdefault.jpg\"}},vimeo:{reg:/https?:\\/\\/(?:www\\.)?(vimeo\\.com)\\/(?:hd#)?([0-9]+)/i,embed:function(){return f+\"//player.vimeo.com/video/\"+this.id},getUrl:function(){return f+\"//vimeo.com/api/v2/video/\"+this.id+\".json?callback=?\"},get_thumb:function(t){return t[0].thumbnail_medium},get_image:function(t){return t[0].thumbnail_large}},dailymotion:{reg:/https?:\\/\\/(?:www\\.)?(dailymotion\\.com)\\/video\\/([^_]+)/,embed:function(){return f+\"//www.dailymotion.com/embed/video/\"+this.id},getUrl:function(){return\"https://api.dailymotion.com/video/\"+this.id+\"?fields=thumbnail_240_url,thumbnail_720_url&callback=?\"},get_thumb:function(t){return t.thumbnail_240_url},get_image:function(t){return t.thumbnail_720_url}},_inst:[]},I=function(i,n){for(var a=0;a<c._inst.length;a++)if(c._inst[a].id===n&&c._inst[a].type==i)return 1=\"=i.length?\"\":(i.pop(),i.join(\"/\")+\"/\")},animate:function(){var\" c._inst[a];this.type=\"i,this.id=n,this.readys=[],C._inst.push(this);var\" o=\"this;t.extend(this,C[i]),_videoThumbs=function(e){o.data=e,t.each(o.readys,function(t,e){e(o.data)}),o.readys=[]},this.hasOwnProperty(\"getUrl\")?t.getJSON(this.getUrl(),_videoThumbs):e.setTimeout(_videoThumbs,400),this.getMedia=function(t,e,i){i=i||m;var\" n=\"this,a=function(i){e(n[\"get_\"+t](i))};try{n.data?a(n.data):n.readys.push(a)}catch(t){i()}}},S=function(t){var\" e;for(var=\"\" i=\"\" in=\"\" c)if(e=\"t&&C[i].reg&&t.match(C[i].reg),e&&e.length)return{id:e[2],provider:i};return!1},A={support:function(){var\" t=\"_().html;return!b&&(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen)}(),callback:m,enter:function(t,e,i){this.instance=t,this.callback=e||m,i=i||_().html,i.requestFullscreen?i.requestFullscreen():i.msRequestFullscreen?i.msRequestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullScreen&&i.webkitRequestFullScreen()},exit:function(t){this.callback=t||m,a.exitFullscreen?a.exitFullscreen():a.msExitFullscreen?a.msExitFullscreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.webkitCancelFullScreen&&a.webkitCancelFullScreen()},instance:null,listen:function(){if(this.support){var\" s.slice.call(t,0)},create:function(t,e){e=\"e||\"div\";var\" i.classname=\"t,i},removeFromArray:function(e,i){return\" t.each(e,function(t,n){if(n=\"=i)return\" e.splice(t,1),!1}),e},getscriptpath:function(e){e=\"e||t(\"script:last\").attr(\"src\");var\" n,o,r,s,c,l,h,u=\"function(t){var\" i,n=\"transition WebkitTransition MozTransition OTransition\" .split(\"=\"\" \");if(e.opera)return!1;for(i=\"0;n[i];i++)if(\"undefined\"!=typeof\" t[n[i]])return=\"\" n[i];return!1}((a.body||a.documentelement).style),d=\"{MozTransition:\"transitionend\",OTransition:\"oTransitionEnd\",WebkitTransition:\"webkitTransitionEnd\",transition:\"transitionend\"}[u],p={_default:[.25,.1,.25,1],galleria:[.645,.045,.355,1],galleriaIn:[.55,.085,.68,.53],galleriaOut:[.25,.46,.45,.94],ease:[.25,0,.25,1],linear:[.25,.25,.75,.75],\"ease-in\":[.42,0,1,1],\"ease-out\":[0,0,.58,1],\"ease-in-out\":[.42,0,.58,1]},f=function(e,i,n){var\" a=\"{};n=n||\"transition\",t.each(\"webkit\" moz=\"\" ms=\"\" o\".split(\"=\"\" \"),function(){a[\"-\"+this+\"-\"+n]=\"i}),e.css(a)},g=function(t){f(t,\"none\",\"transition\"),i.WEBKIT&&i.TOUCH&&(f(t,\"translate3d(0,0,0)\",\"transform\"),t.data(\"revert\")&&(t.css(t.data(\"revert\")),t.data(\"revert\",null)))};return\" function(a,v,y){return=\"\" y=\"t.extend({duration:400,complete:m,stop:!1},y),a=t(a),y.duration?u?(y.stop&&(a.off(d),g(a)),n=!1,t.each(v,function(t,e){h=a.css(t),H.parseValue(h)!=H.parseValue(e)&&(n=!0),a.css(t,h)}),n?(o=[],r=y.easing\" p?p[y.easing]:p._default,s=\" \" +y.duration+\"ms=\"\" cubic-bezier(\"+r.join(\",\")+\")\",void=\"\" e.settimeout(function(e,n,a,r){return=\"\" function(){e.one(n,function(t){return=\"\" function(){g(t),y.complete.call(t[0])}}(e)),i.webkit&&i.touch&&(c=\"{},l=[0,0,0],t.each([\"left\",\"top\"],function(t,i){i\" a&&(l[t]=\"H.parseValue(a[i])-H.parseValue(e.css(i))+\"px\",c[i]=a[i],delete\" a[i])}),(l[0]||l[1])&&(e.data(\"revert\",c),o.push(\"-webkit-transform\"+r),f(e,\"translate3d(\"+l.join(\",\")+\")\",\"transform\"))),t.each(a,function(t,e){o.push(t+r)}),f(e,o.join(\",\")),e.css(a)}}(a,d,v,s),2)):void=\"\" e.settimeout(function(){y.complete.call(a[0])},y.duration)):void=\"\" a.animate(v,y):(a.css(v),void=\"\" y.complete.call(a[0]))}}(),removealpha:function(t){if(t=\"\" instanceof=\"\" jquery&&(t=\"t[0]),y<9&&t){var\" e=\"t.style,i=t.currentStyle,n=i&&i.filter||e.filter||\"\";/alpha/.test(n)&&(e.filter=n.replace(/alpha\\([^)]*\\)/i,\"\"))}},forceStyles:function(e,i){e=t(e),e.attr(\"style\")&&e.data(\"styles\",e.attr(\"style\")).removeAttr(\"style\"),e.css(i)},revertStyles:function(){t.each(H.array(arguments),function(e,i){i=t(i),i.removeAttr(\"style\"),i.attr(\"style\",\"\"),i.data(\"styles\")&&i.attr(\"style\",i.data(\"styles\")).data(\"styles\",null)})},moveOut:function(t){H.forceStyles(t,{position:\"absolute\",left:-1e4})},moveIn:function(){H.revertStyles.apply(H,H.array(arguments))},hide:function(e,i,n){n=n||m;var\" r=\"y<9&&e?function(){H.removeAlpha(e),e.style.visibility=\"hidden\",n.call(e)}:n;H.animate(e,o,{duration:i,complete:r,stop:!0})}else\" y<9&&e?(h.removealpha(e),e.style.visibility=\"hidden\" ):a.css(o)},show:function(e,i,n){n=\"n||m;var\" s=\"y<9&&e?function(){1==r.opacity&&H.removeAlpha(e),n.call(e)}:n;H.animate(e,r,{duration:i,complete:s,stop:!0})}else\" y<9&&1=\"=r.opacity&&e?(H.removeAlpha(e),e.style.visibility=\"visible\"):a.css(r)},wait:function(n){i._waiters=i._waiters||[],n=t.extend({until:v,success:m,error:function(){i.raise(\"Could\" not=\"\" complete=\"\" wait=\"\" function.\")},timeout:3e3},n);var=\"\" a,o,r,s=\"H.timestamp(),c=function(){return\" n.timeout&&o=\"\">=s+n.timeout?(n.error(),!1):void i._waiters.push(r=e.setTimeout(c,10))};i._waiters.push(r=e.setTimeout(c,10))},toggleQuality:function(t,e){7!==y&&8!==y||!t||\"IMG\"!=t.nodeName.toUpperCase()||(\"undefined\"==typeof e&&(e=\"nearest-neighbor\"===t.style.msInterpolationMode),t.style.msInterpolationMode=e?\"bicubic\":\"nearest-neighbor\")},insertStyleTag:function(e,i){if(!i||!t(\"#\"+i).length){var n=a.createElement(\"style\");if(i&&(n.id=i),_().head.appendChild(n),n.styleSheet)n.styleSheet.cssText=e;else{var o=a.createTextNode(e);n.appendChild(o)}}},loadScript:function(e,i){var n=!1,a=t(\"<script>\").attr({src:e,async:!0}).get(0);a.onload=a.onreadystatechange=function(){n||this.readyState&&\"loaded\"!==this.readyState&&\"complete\"!==this.readyState||(n=!0,a.onload=a.onreadystatechange=null,\"function\"==typeof i&&i.call(this,this))},_().head.appendChild(a)},parseValue:function(t){if(\"number\"==typeof t)return t;if(\"string\"==typeof t){var e=t.match(/\\-?\\d|\\./g);return e&&e.constructor===Array?1*e.join(\"\"):0}return 0},timestamp:function(){return(new Date).getTime()},loadCSS:function(e,o,r){var s,c;if(t(\"link[rel=stylesheet]\").each(function(){if(new RegExp(e).test(this.href))return s=this,!1}),\"function\"==typeof o&&(r=o,o=n),r=r||m,s)return r.call(s,s),s;if(c=a.styleSheets.length,t(\"#\"+o).length)t(\"#\"+o).attr(\"href\",e),c--;else{s=t(\"<link>\").attr({rel:\"stylesheet\",href:e,id:o}).get(0);var l=t('link[rel=\"stylesheet\"], style');if(l.length?l.get(0).parentNode.insertBefore(s,l[0]):_().head.appendChild(s),y&&c>=31)return void i.raise(\"You have reached the browser stylesheet limit (31)\",!0)}if(\"function\"==typeof r){var h=t(\"<s>\").attr(\"id\",\"galleria-loader\").hide().appendTo(_().body);H.wait({until:function(){return 1==h.height()},success:function(){h.remove(),r.call(s,s)},error:function(){h.remove(),i.raise(\"Theme CSS could not load after 20 sec. \"+(i.QUIRK?\"Your browser is in Quirks Mode, please add a correct doctype.\":\"Please download the latest theme at http://galleria.io/customer/.\"),!0)},timeout:5e3})}return s}}}(),O=function(e){var i=\".galleria-videoicon{width:60px;height:60px;position:absolute;top:50%;left:50%;z-index:1;margin:-30px 0 0 -30px;cursor:pointer;background:#000;background:rgba(0,0,0,.8);border-radius:3px;-webkit-transition:all 150ms}.galleria-videoicon i{width:0px;height:0px;border-style:solid;border-width:10px 0 10px 16px;display:block;border-color:transparent transparent transparent #ffffff;margin:20px 0 0 22px}.galleria-image:hover .galleria-videoicon{background:#000}\";return H.insertStyleTag(i,\"galleria-videoicon\"),t(H.create(\"galleria-videoicon\")).html(\"<i></i>\").appendTo(e).click(function(){t(this).siblings(\"img\").mouseup()})},M=function(){var e=function(e,i,n,a){var o=this.getOptions(\"easing\"),r=this.getStageWidth(),s={left:r*(e.rewind?-1:1)},c={left:0};n?(s.opacity=0,c.opacity=1):s.opacity=1,t(e.next).css(s),H.animate(e.next,c,{duration:e.speed,complete:function(t){return function(){i(),t.css({left:0})}}(t(e.next).add(e.prev)),queue:!1,easing:o}),a&&(e.rewind=!e.rewind),e.prev&&(s={left:0},c={left:r*(e.rewind?1:-1)},n&&(s.opacity=1,c.opacity=0),t(e.prev).css(s),H.animate(e.prev,c,{duration:e.speed,queue:!1,easing:o,complete:function(){t(this).css(\"opacity\",0)}}))};return{active:!1,init:function(t,e,i){M.effects.hasOwnProperty(t)&&M.effects[t].call(this,e,i)},effects:{fade:function(e,i){t(e.next).css({opacity:0,left:0}),H.animate(e.next,{opacity:1},{duration:e.speed,complete:i}),e.prev&&(t(e.prev).css(\"opacity\",1).show(),H.animate(e.prev,{opacity:0},{duration:e.speed}))},flash:function(e,i){t(e.next).css({opacity:0,left:0}),e.prev?H.animate(e.prev,{opacity:0},{duration:e.speed/2,complete:function(){H.animate(e.next,{opacity:1},{duration:e.speed,complete:i})}}):H.animate(e.next,{opacity:1},{duration:e.speed,complete:i})},pulse:function(e,i){e.prev&&t(e.prev).hide(),t(e.next).css({opacity:0,left:0}).show(),H.animate(e.next,{opacity:1},{duration:e.speed,complete:i})},slide:function(t,i){e.apply(this,H.array(arguments))},fadeslide:function(t,i){e.apply(this,H.array(arguments).concat([!0]))},doorslide:function(t,i){e.apply(this,H.array(arguments).concat([!1,!0]))}}}}();A.listen(),t.event.special[\"click:fast\"]={propagate:!0,add:function(i){var n=function(t){if(t.touches&&t.touches.length){var e=t.touches[0];return{x:e.pageX,y:e.pageY}}},a={touched:!1,touchdown:!1,coords:{x:0,y:0},evObj:{}};t(this).data({clickstate:a,timer:0}).on(\"touchstart.fast\",function(i){e.clearTimeout(t(this).data(\"timer\")),t(this).data(\"clickstate\",{touched:!0,touchdown:!0,coords:n(i.originalEvent),evObj:i})}).on(\"touchmove.fast\",function(e){var i=n(e.originalEvent),a=t(this).data(\"clickstate\"),o=Math.max(Math.abs(a.coords.x-i.x),Math.abs(a.coords.y-i.y));o>6&&t(this).data(\"clickstate\",t.extend(a,{touchdown:!1}))}).on(\"touchend.fast\",function(n){var o=t(this),r=o.data(\"clickstate\");r.touchdown&&i.handler.call(this,n),o.data(\"timer\",e.setTimeout(function(){o.data(\"clickstate\",a)},400))}).on(\"click.fast\",function(e){var n=t(this).data(\"clickstate\");return!n.touched&&(t(this).data(\"clickstate\",a),void i.handler.call(this,e))})},remove:function(){t(this).off(\"touchstart.fast touchmove.fast touchend.fast click.fast\")}},r.on(\"orientationchange\",function(){t(this).resize()}),i=function(){var s=this;this._options={},this._playing=!1,this._playtime=5e3,this._active=null,this._queue={length:0},this._data=[],this._dom={},this._thumbnails=[],this._layers=[],this._initialized=!1,this._firstrun=!1,this._stageWidth=0,this._stageHeight=0,this._target=n,this._binds=[],this._id=parseInt(1e4*g.random(),10);var c=\"container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip\",l=\"current total\";t.each(c.split(\" \"),function(t,e){s._dom[e]=H.create(\"galleria-\"+e)}),t.each(l.split(\" \"),function(t,e){s._dom[e]=H.create(\"galleria-\"+e,\"span\")});var h=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(t){var e=t.keyCode||t.which;e in h.map&&\"function\"==typeof h.map[e]&&h.map[e].call(s,t)},attach:function(t){var e,i;for(e in t)t.hasOwnProperty(e)&&(i=e.toUpperCase(),i in h.keys?h.map[h.keys[i]]=t[e]:h.map[i]=t[e]);h.bound||(h.bound=!0,o.on(\"keydown\",h.press))},detach:function(){h.bound=!1,h.map={},o.off(\"keydown\",h.press)}},u=this._controls={0:n,1:n,active:0,swap:function(){u.active=u.active?0:1},getActive:function(){return s._options.swipe?u.slides[s._active]:u[u.active]},getNext:function(){return s._options.swipe?u.slides[s.getNext(s._active)]:u[1-u.active]},slides:[],frames:[],layers:[]},p=this._carousel={next:s.$(\"thumb-nav-right\"),prev:s.$(\"thumb-nav-left\"),width:0,current:0,max:0,hooks:[],update:function(){var e=0,i=0,n=[0];t.each(s._thumbnails,function(a,o){if(o.ready){e+=o.outerWidth||t(o.container).outerWidth(!0);var r=t(o.container).width();e+=r-g.floor(r),n[a+1]=e,i=g.max(i,o.outerHeight||t(o.container).outerHeight(!0))}}),s.$(\"thumbnails\").css({width:e,height:i}),p.max=e,p.hooks=n,p.width=s.$(\"thumbnails-list\").width(),p.setClasses(),s.$(\"thumbnails-container\").toggleClass(\"galleria-carousel\",e>p.width),p.width=s.$(\"thumbnails-list\").width()},bindControls:function(){var t;p.next.on(\"click:fast\",function(e){if(e.preventDefault(),\"auto\"===s._options.carouselSteps){for(t=p.current;t<p.hooks.length;t++)if(p.hooks[t]-p.hooks[p.current]>p.width){p.set(t-2);break}}else p.set(p.current+s._options.carouselSteps)}),p.prev.on(\"click:fast\",function(e){if(e.preventDefault(),\"auto\"===s._options.carouselSteps)for(t=p.current;t>=0;t--){if(p.hooks[p.current]-p.hooks[t]>p.width){p.set(t+2);break}if(0===t){p.set(0);break}}else p.set(p.current-s._options.carouselSteps)})},set:function(t){for(t=g.max(t,0);p.hooks[t-1]+p.width>=p.max&&t>=0;)t--;p.current=t,p.animate()},getLast:function(t){return(t||p.current)-1},follow:function(t){if(0===t||t===p.hooks.length-2)return void p.set(t);for(var e=p.current;p.hooks[e]-p.hooks[p.current]<p.width&&e<=p.hooks.length;)e++;t-1<p.current?p.set(t-1):t+2>e&&p.set(t-e+p.current+2)},setClasses:function(){p.prev.toggleClass(\"disabled\",!p.current),p.next.toggleClass(\"disabled\",p.hooks[p.current]+p.width>=p.max)},animate:function(e){p.setClasses();var i=p.hooks[p.current]*-1;isNaN(i)||(s.$(\"thumbnails\").css(\"left\",function(){return t(this).css(\"left\")}),H.animate(s.get(\"thumbnails\"),{left:i},{duration:s._options.carouselSpeed,easing:s._options.easing,queue:!1}))}},f=this._tooltip={initialized:!1,open:!1,timer:\"tooltip\"+s._id,swapTimer:\"swap\"+s._id,init:function(){f.initialized=!0;var t=\".galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}\";H.insertStyleTag(t,\"galleria-tooltip\"),s.$(\"tooltip\").css({opacity:.8,visibility:\"visible\",display:\"none\"})},move:function(t){var e=s.getMousePosition(t).x,i=s.getMousePosition(t).y,n=s.$(\"tooltip\"),a=e,o=i,r=n.outerHeight(!0)+1,c=n.outerWidth(!0),l=r+15,h=s.$(\"container\").width()-c-2,u=s.$(\"container\").height()-r-2;isNaN(a)||isNaN(o)||(a+=10,o-=r+8,a=g.max(0,g.min(h,a)),o=g.max(0,g.min(u,o)),i<l&&(o=l),n.css({left:a,top:o}))},bind:function(e,n){if(!i.TOUCH){f.initialized||f.init();var a=function(){s.$(\"container\").off(\"mousemove\",f.move),s.clearTimer(f.timer),s.$(\"tooltip\").stop().animate({opacity:0},200,function(){s.$(\"tooltip\").hide(),s.addTimer(f.swapTimer,function(){f.open=!1},1e3)})},o=function(e,i){f.define(e,i),t(e).hover(function(){s.clearTimer(f.swapTimer),s.$(\"container\").off(\"mousemove\",f.move).on(\"mousemove\",f.move).trigger(\"mousemove\"),f.show(e),s.addTimer(f.timer,function(){s.$(\"tooltip\").stop().show().animate({opacity:1}),f.open=!0},f.open?0:500)},a).click(a)};\"string\"==typeof n?o(e in s._dom?s.get(e):e,n):t.each(e,function(t,e){o(s.get(t),e)})}},show:function(i){i=t(i in s._dom?s.get(i):i);var n=i.data(\"tt\"),a=function(t){e.setTimeout(function(t){return function(){f.move(t)}}(t),10),i.off(\"mouseup\",a)};n=\"function\"==typeof n?n():n,n&&(s.$(\"tooltip\").html(n.replace(/\\s/,\"&#160;\")),i.on(\"mouseup\",a))},define:function(e,i){if(\"function\"!=typeof i){var n=i;i=function(){return n}}e=t(e in s._dom?s.get(e):e).data(\"tt\",i),f.show(e)}},m=this._fullscreen={scrolled:0,crop:n,active:!1,prev:t(),beforeEnter:function(t){t()},beforeExit:function(t){t()},keymap:s._keyboard.map,parseCallback:function(e,i){return M.active?function(){\"function\"==typeof e&&e.call(s);var n=s._controls.getActive(),a=s._controls.getNext();s._scaleImage(a),s._scaleImage(n),i&&s._options.trueFullscreen&&t(n.container).add(a.container).trigger(\"transitionend\")}:e},enter:function(t){m.beforeEnter(function(){t=m.parseCallback(t,!0),s._options.trueFullscreen&&A.support?(m.active=!0,H.forceStyles(s.get(\"container\"),{width:\"100%\",height:\"100%\"}),s.rescale(),i.MAC?i.SAFARI&&/version\\/[1-5]/.test(d)?(s.$(\"stage\").css(\"opacity\",0),e.setTimeout(function(){m.scale(),s.$(\"stage\").css(\"opacity\",1)},4)):(s.$(\"container\").css(\"opacity\",0).addClass(\"fullscreen\"),e.setTimeout(function(){m.scale(),s.$(\"container\").css(\"opacity\",1)},50)):s.$(\"container\").addClass(\"fullscreen\"),r.resize(m.scale),A.enter(s,t,s.get(\"container\"))):(m.scrolled=r.scrollTop(),i.TOUCH||e.scrollTo(0,0),m._enter(t))})},_enter:function(o){m.active=!0,b&&(m.iframe=function(){var n,o=a.referrer,r=a.createElement(\"a\"),s=e.location;return r.href=o,r.protocol!=s.protocol||r.hostname!=s.hostname||r.port!=s.port?(i.raise(\"Parent fullscreen not available. Iframe protocol, domains and ports must match.\"),!1):(m.pd=e.parent.document,t(m.pd).find(\"iframe\").each(function(){var t=this.contentDocument||this.contentWindow.document;if(t===a)return n=this,!1}),n)}()),H.hide(s.getActiveImage()),b&&m.iframe&&(m.iframe.scrolled=t(e.parent).scrollTop(),e.parent.scrollTo(0,0));var c=s.getData(),l=s._options,h=!s._options.trueFullscreen||!A.support,u={height:\"100%\",overflow:\"hidden\",margin:0,padding:0};if(h&&(s.$(\"container\").addClass(\"fullscreen\"),m.prev=s.$(\"container\").prev(),m.prev.length||(m.parent=s.$(\"container\").parent()),s.$(\"container\").appendTo(\"body\"),H.forceStyles(s.get(\"container\"),{position:i.TOUCH?\"absolute\":\"fixed\",top:0,left:0,width:\"100%\",height:\"100%\",zIndex:1e4}),H.forceStyles(_().html,u),H.forceStyles(_().body,u)),b&&m.iframe&&(H.forceStyles(m.pd.documentElement,u),H.forceStyles(m.pd.body,u),H.forceStyles(m.iframe,t.extend(u,{width:\"100%\",height:\"100%\",top:0,left:0,position:\"fixed\",zIndex:1e4,border:\"none\"}))),m.keymap=t.extend({},s._keyboard.map),s.attachKeyboard({escape:s.exitFullscreen,right:s.next,left:s.prev}),m.crop=l.imageCrop,l.fullscreenCrop!=n&&(l.imageCrop=l.fullscreenCrop),c&&c.big&&c.image!==c.big){var d=new i.Picture,p=d.isCached(c.big),f=s.getIndex(),g=s._thumbnails[f];s.trigger({type:i.LOADSTART,cached:p,rewind:!1,index:f,imageTarget:s.getActiveImage(),thumbTarget:g,galleriaData:c}),d.load(c.big,function(e){s._scaleImage(e,{complete:function(e){s.trigger({type:i.LOADFINISH,cached:p,index:f,rewind:!1,imageTarget:e.image,thumbTarget:g});var n=s._controls.getActive().image;n&&t(n).width(e.image.width).height(e.image.height).attr(\"style\",t(e.image).attr(\"style\")).attr(\"src\",e.image.src)}})});var v=s.getNext(f),y=new i.Picture,w=s.getData(v);y.preload(s.isFullscreen()&&w.big?w.big:w.image)}s.rescale(function(){s.addTimer(!1,function(){h&&H.show(s.getActiveImage()),\"function\"==typeof o&&o.call(s),s.rescale()},100),s.trigger(i.FULLSCREEN_ENTER)}),h?r.resize(m.scale):H.show(s.getActiveImage())},scale:function(){s.rescale()},exit:function(t){m.beforeExit(function(){t=m.parseCallback(t),s._options.trueFullscreen&&A.support?A.exit(t):m._exit(t)})},_exit:function(t){m.active=!1;var n=!s._options.trueFullscreen||!A.support,a=s.$(\"container\").removeClass(\"fullscreen\");if(m.parent?m.parent.prepend(a):a.insertAfter(m.prev),n){H.hide(s.getActiveImage()),H.revertStyles(s.get(\"container\"),_().html,_().body),i.TOUCH||e.scrollTo(0,m.scrolled);var o=s._controls.frames[s._controls.active];o&&o.image&&(o.image.src=o.image.src)}b&&m.iframe&&(H.revertStyles(m.pd.documentElement,m.pd.body,m.iframe),m.iframe.scrolled&&e.parent.scrollTo(0,m.iframe.scrolled)),s.detachKeyboard(),s.attachKeyboard(m.keymap),s._options.imageCrop=m.crop;var c=s.getData().big,l=s._controls.getActive().image;!s.getData().iframe&&l&&c&&c==l.src&&e.setTimeout(function(t){return function(){l.src=t}}(s.getData().image),1),s.rescale(function(){s.addTimer(!1,function(){n&&H.show(s.getActiveImage()),\"function\"==typeof t&&t.call(s),r.trigger(\"resize\")},50),s.trigger(i.FULLSCREEN_EXIT)}),r.off(\"resize\",m.scale)}},v=this._idle={trunk:[],bound:!1,active:!1,add:function(e,n,a,o){if(e&&!i.TOUCH){v.bound||v.addEvent(),e=t(e),\"boolean\"==typeof a&&(o=a,a={}),a=a||{};var r,s={};for(r in n)n.hasOwnProperty(r)&&(s[r]=e.css(r));e.data(\"idle\",{from:t.extend(s,a),to:n,complete:!0,busy:!1}),o?e.css(n):v.addTimer(),v.trunk.push(e)}},remove:function(e){e=t(e),t.each(v.trunk,function(t,i){i&&i.length&&!i.not(e).length&&(e.css(e.data(\"idle\").from),v.trunk.splice(t,1))}),v.trunk.length||(v.removeEvent(),s.clearTimer(v.timer))},addEvent:function(){v.bound=!0,s.$(\"container\").on(\"mousemove click\",v.showAll),\"hover\"==s._options.idleMode&&s.$(\"container\").on(\"mouseleave\",v.hide)},removeEvent:function(){v.bound=!1,s.$(\"container\").on(\"mousemove click\",v.showAll),\"hover\"==s._options.idleMode&&s.$(\"container\").off(\"mouseleave\",v.hide)},addTimer:function(){\"hover\"!=s._options.idleMode&&s.addTimer(\"idle\",function(){v.hide()},s._options.idleTime)},hide:function(){if(s._options.idleMode&&s.getIndex()!==!1){s.trigger(i.IDLE_ENTER);var e=v.trunk.length;t.each(v.trunk,function(t,i){var n=i.data(\"idle\");n&&(i.data(\"idle\").complete=!1,H.animate(i,n.to,{duration:s._options.idleSpeed,complete:function(){t==e-1&&(v.active=!1)}}))})}},showAll:function(){s.clearTimer(\"idle\"),t.each(v.trunk,function(t,e){v.show(e)})},show:function(e){var n=e.data(\"idle\");v.active&&(n.busy||n.complete)||(n.busy=!0,s.trigger(i.IDLE_EXIT),s.clearTimer(\"idle\"),H.animate(e,n.from,{duration:s._options.idleSpeed/2,complete:function(){v.active=!0,t(e).data(\"idle\").busy=!1,t(e).data(\"idle\").complete=!0}})),v.addTimer()}},w=this._lightbox={width:0,height:0,initialized:!1,active:null,image:null,elems:{},keymap:!1,init:function(){if(!w.initialized){w.initialized=!0;var e=\"overlay box content shadow title info close prevholder prev nextholder next counter image\",n={},a=s._options,o=\"\",r=\"position:absolute;\",c=\"lightbox-\",l={overlay:\"position:fixed;display:none;opacity:\"+a.overlayOpacity+\";filter:alpha(opacity=\"+100*a.overlayOpacity+\");top:0;left:0;width:100%;height:100%;background:\"+a.overlayBackground+\";z-index:99990\",box:\"position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991\",shadow:r+\"background:#000;width:100%;height:100%;\",content:r+\"background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden\",info:r+\"bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px\",close:r+\"top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999\",image:r+\"top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;\",prevholder:r+\"width:50%;top:0;bottom:40px;cursor:pointer;\",nextholder:r+\"width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;\",prev:r+\"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif\",next:r+\"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000\",title:\"float:left\",counter:\"float:right;margin-left:8px;\"},h=function(e){return e.hover(function(){t(this).css(\"color\",\"#bbb\")},function(){t(this).css(\"color\",\"#444\")})},u={},d=\"\";d=y>7?y<9?\"background:#000;filter:alpha(opacity=0);\":\"background:rgba(0,0,0,0);\":\"z-index:99999\",l.nextholder+=d,l.prevholder+=d,t.each(l,function(t,e){o+=\".galleria-\"+c+t+\"{\"+e+\"}\"}),o+=\".galleria-\"+c+\"box.iframe .galleria-\"+c+\"prevholder,.galleria-\"+c+\"box.iframe .galleria-\"+c+\"nextholder{width:100px;height:100px;top:50%;margin-top:-70px}\",H.insertStyleTag(o,\"galleria-lightbox\"),t.each(e.split(\" \"),function(t,e){s.addElement(\"lightbox-\"+e),n[e]=w.elems[e]=s.get(\"lightbox-\"+e)}),w.image=new i.Picture,t.each({box:\"shadow content close prevholder nextholder\",info:\"title counter\",content:\"info image\",prevholder:\"prev\",nextholder:\"next\"},function(e,i){var n=[];t.each(i.split(\" \"),function(t,e){n.push(c+e)}),u[c+e]=n}),s.append(u),t(n.image).append(w.image.container),t(_().body).append(n.overlay,n.box),h(t(n.close).on(\"click:fast\",w.hide).html(\"&#215;\")),t.each([\"Prev\",\"Next\"],function(e,a){var o=t(n[a.toLowerCase()]).html(/v/.test(a)?\"&#8249;&#160;\":\"&#160;&#8250;\"),r=t(n[a.toLowerCase()+\"holder\"]);return r.on(\"click:fast\",function(){w[\"show\"+a]()}),y<8||i.TOUCH?void o.show():void r.hover(function(){o.show()},function(t){o.stop().fadeOut(200)})}),t(n.overlay).on(\"click:fast\",w.hide),i.IPAD&&(s._options.lightboxTransitionSpeed=0)}},rescale:function(e){var n=g.min(r.width()-40,w.width),a=g.min(r.height()-60,w.height),o=g.min(n/w.width,a/w.height),c=g.round(w.width*o)+40,l=g.round(w.height*o)+60,h={width:c,height:l,\"margin-top\":g.ceil(l/2)*-1,\"margin-left\":g.ceil(c/2)*-1};e?t(w.elems.box).css(h):t(w.elems.box).animate(h,{duration:s._options.lightboxTransitionSpeed,easing:s._options.easing,complete:function(){var e=w.image,n=s._options.lightboxFadeSpeed;s.trigger({type:i.LIGHTBOX_IMAGE,imageTarget:e.image}),t(e.container).show(),t(e.image).animate({opacity:1},n),H.show(w.elems.info,n)}})},hide:function(){w.image.image=null,r.off(\"resize\",w.rescale),t(w.elems.box).hide().find(\"iframe\").remove(),H.hide(w.elems.info),s.detachKeyboard(),s.attachKeyboard(w.keymap),w.keymap=!1,H.hide(w.elems.overlay,200,function(){t(this).hide().css(\"opacity\",s._options.overlayOpacity),s.trigger(i.LIGHTBOX_CLOSE)})},showNext:function(){w.show(s.getNext(w.active))},showPrev:function(){w.show(s.getPrev(w.active))},show:function(n){w.active=n=\"number\"==typeof n?n:s.getIndex()||0,w.initialized||w.init(),s.trigger(i.LIGHTBOX_OPEN),w.keymap||(w.keymap=t.extend({},s._keyboard.map),s.attachKeyboard({escape:w.hide,right:w.showNext,left:w.showPrev})),r.off(\"resize\",w.rescale);var a,o,c,l=s.getData(n),h=s.getDataLength(),u=s.getNext(n);H.hide(w.elems.info);try{for(c=s._options.preload;c>0;c--)o=new i.Picture,a=s.getData(u),o.preload(a.big?a.big:a.image),u=s.getNext(u)}catch(t){}w.image.isIframe=l.iframe&&!l.image,t(w.elems.box).toggleClass(\"iframe\",w.image.isIframe),t(w.image.container).find(\".galleria-videoicon\").remove(),w.image.load(l.big||l.image||l.iframe,function(i){if(i.isIframe){var a=t(e).width(),o=t(e).height();if(i.video&&s._options.maxVideoSize){var c=g.min(s._options.maxVideoSize/a,s._options.maxVideoSize/o);c<1&&(a*=c,o*=c)}w.width=a,w.height=o}else w.width=i.original.width,w.height=i.original.height;if(t(i.image).css({width:i.isIframe?\"100%\":\"100.1%\",height:i.isIframe?\"100%\":\"100.1%\",top:0,bottom:0,zIndex:99998,opacity:0,visibility:\"visible\"}).parent().height(\"100%\"),w.elems.title.innerHTML=l.title||\"\",w.elems.counter.innerHTML=n+1+\" / \"+h,r.resize(w.rescale),w.rescale(),l.image&&l.iframe){if(t(w.elems.box).addClass(\"iframe\"),l.video){var u=O(i.container).hide();e.setTimeout(function(){u.fadeIn(200)},200)}t(i.image).css(\"cursor\",\"pointer\").mouseup(function(e,i){return function(n){t(w.image.container).find(\".galleria-videoicon\").remove(),n.preventDefault(),i.isIframe=!0,i.load(e.iframe+(e.video?\"&autoplay=1\":\"\"),{width:\"100%\",height:y<8?t(w.image.container).height():\"100%\"})}}(l,i))}}),t(w.elems.overlay).show().css(\"visibility\",\"visible\"),t(w.elems.box).show()}},x=this._timer={trunk:{},add:function(t,i,n,a){if(t=t||(new Date).getTime(),a=a||!1,this.clear(t),a){var o=i;i=function(){o(),x.add(t,i,n)}}this.trunk[t]=e.setTimeout(i,n)},clear:function(t){var i,n=function(t){e.clearTimeout(this.trunk[t]),delete this.trunk[t]};if(t&&t in this.trunk)n.call(this,t);else if(\"undefined\"==typeof t)for(i in this.trunk)this.trunk.hasOwnProperty(i)&&n.call(this,i)}};return this},i.prototype={constructor:i,init:function(e,a){if(a=T(a),this._original={target:e,options:a,data:null},this._target=this._dom.target=e.nodeName?e:t(e).get(0),this._original.html=this._target.innerHTML,D.push(this),!this._target)return void i.raise(\"Target not found\",!0);if(this._options={autoplay:!1,carousel:!0,carouselFollow:!0,carouselSpeed:400,carouselSteps:\"auto\",clicknext:!1,dailymotion:{foreground:\"%23EEEEEE\",highlight:\"%235BCEC5\",background:\"%23222222\",logo:0,hideInfos:1},dataConfig:function(t){return{}},dataSelector:\"img\",dataSort:!1,dataSource:this._target,debug:n,dummy:n,easing:\"galleria\",extend:function(t){},fullscreenCrop:n,fullscreenDoubleTap:!0,fullscreenTransition:n,height:0,idleMode:!0,idleTime:3e3,idleSpeed:200,imageCrop:!1,imageMargin:0,imagePan:!1,imagePanSmoothness:12,imagePosition:\"50%\",imageTimeout:n,initialTransition:n,keepSource:!1,layerFollow:!0,lightbox:!1,lightboxFadeSpeed:200,lightboxTransitionSpeed:200,linkSourceImages:!0,maxScaleRatio:n,maxVideoSize:n,minScaleRatio:n,overlayOpacity:.85,overlayBackground:\"#0b0b0b\",pauseOnInteraction:!0,popupLinks:!1,preload:2,queue:!0,responsive:!0,show:0,showInfo:!0,showCounter:!0,showImagenav:!0,swipe:\"auto\",theme:null,thumbCrop:!0,thumbEventType:\"click:fast\",thumbMargin:0,thumbQuality:\"auto\",thumbDisplayOrder:!0,thumbPosition:\"50%\",thumbnails:!0,touchTransition:n,transition:\"fade\",transitionInitial:n,transitionSpeed:400,trueFullscreen:!0,useCanvas:!1,variation:\"\",videoPoster:!0,vimeo:{title:0,byline:0,portrait:0,color:\"aaaaaa\"},wait:5e3,width:\"auto\",youtube:{modestbranding:1,autohide:1,color:\"white\",hd:1,rel:0,showinfo:0}},this._options.initialTransition=this._options.initialTransition||this._options.transitionInitial,\na&&(a.debug===!1&&(l=!1),\"number\"==typeof a.imageTimeout&&(h=a.imageTimeout),\"string\"==typeof a.dummy&&(u=a.dummy),\"string\"==typeof a.theme&&(this._options.theme=a.theme)),t(this._target).children().hide(),i.QUIRK&&i.raise(\"Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML and add a correct doctype.\"),z.length)if(this._options.theme){for(var o=0;o<z.length;o++)if(this._options.theme===z[o].name){this.theme=z[o];break}}else this.theme=z[0];return\"object\"==typeof this.theme?this._init():P.push(this),this},_init:function(){var o=this,s=this._options;if(this._initialized)return i.raise(\"Init failed: Gallery instance already initialized.\"),this;if(this._initialized=!0,!this.theme)return i.raise(\"Init failed: No theme found.\",!0),this;if(t.extend(!0,s,this.theme.defaults,this._original.options,i.configure.options),s.swipe=function(t){return\"enforced\"==t||t!==!1&&\"disabled\"!=t&&!!i.TOUCH}(s.swipe),s.swipe&&(s.clicknext=!1,s.imagePan=!1),function(t){return\"getContext\"in t?void($=$||{elem:t,context:t.getContext(\"2d\"),cache:{},length:0}):void(t=null)}(a.createElement(\"canvas\")),this.bind(i.DATA,function(){e.screen&&e.screen.width&&Array.prototype.forEach&&this._data.forEach(function(t){var i=\"devicePixelRatio\"in e?e.devicePixelRatio:1,n=g.max(e.screen.width,e.screen.height);n*i<1024&&(t.big=t.image)}),this._original.data=this._data,this.get(\"total\").innerHTML=this.getDataLength();var t=this.$(\"container\");o._options.height<2&&(o._userRatio=o._ratio=o._options.height);var n={width:0,height:0},a=function(){return o.$(\"stage\").height()};H.wait({until:function(){return n=o._getWH(),t.width(n.width).height(n.height),a()&&n.width&&n.height>50},success:function(){o._width=n.width,o._height=n.height,o._ratio=o._ratio||n.height/n.width,i.WEBKIT?e.setTimeout(function(){o._run()},1):o._run()},error:function(){a()?i.raise(\"Could not extract sufficient width/height of the gallery container. Traced measures: width:\"+n.width+\"px, height: \"+n.height+\"px.\",!0):i.raise(\"Could not extract a stage height from the CSS. Traced height: \"+a()+\"px.\",!0)},timeout:\"number\"==typeof this._options.wait&&this._options.wait})}),this.append({\"info-text\":[\"info-title\",\"info-description\"],info:[\"info-text\"],\"image-nav\":[\"image-nav-right\",\"image-nav-left\"],stage:[\"images\",\"loader\",\"counter\",\"image-nav\"],\"thumbnails-list\":[\"thumbnails\"],\"thumbnails-container\":[\"thumb-nav-left\",\"thumbnails-list\",\"thumb-nav-right\"],container:[\"stage\",\"thumbnails-container\",\"info\",\"tooltip\"]}),H.hide(this.$(\"counter\").append(this.get(\"current\"),a.createTextNode(\" / \"),this.get(\"total\"))),this.setCounter(\"&#8211;\"),H.hide(o.get(\"tooltip\")),this.$(\"container\").addClass([i.TOUCH?\"touch\":\"notouch\",this._options.variation,\"galleria-theme-\"+this.theme.name].join(\" \")),this._options.swipe||t.each(new Array(2),function(e){var n=new i.Picture;t(n.container).css({position:\"absolute\",top:0,left:0}).prepend(o._layers[e]=t(H.create(\"galleria-layer\")).css({position:\"absolute\",top:0,left:0,right:0,bottom:0,zIndex:2})[0]),o.$(\"images\").append(n.container),o._controls[e]=n;var a=new i.Picture;a.isIframe=!0,t(a.container).attr(\"class\",\"galleria-frame\").css({position:\"absolute\",top:0,left:0,zIndex:4,background:\"#000\",display:\"none\"}).appendTo(n.container),o._controls.frames[e]=a}),this.$(\"images\").css({position:\"relative\",top:0,left:0,width:\"100%\",height:\"100%\"}),s.swipe&&(this.$(\"images\").css({position:\"absolute\",top:0,left:0,width:0,height:\"100%\"}),this.finger=new i.Finger(this.get(\"stage\"),{onchange:function(t){o.pause().show(t)},oncomplete:function(e){var i=g.max(0,g.min(parseInt(e,10),o.getDataLength()-1)),n=o.getData(i);t(o._thumbnails[i].container).addClass(\"active\").siblings(\".active\").removeClass(\"active\"),n&&(o.$(\"images\").find(\".galleria-frame\").css(\"opacity\",0).hide().find(\"iframe\").remove(),o._options.carousel&&o._options.carouselFollow&&o._carousel.follow(i))}}),this.bind(i.RESCALE,function(){this.finger.setup()}),this.$(\"stage\").on(\"click\",function(i){var a=o.getData();if(a){if(a.iframe){o.isPlaying()&&o.pause();var r=o._controls.frames[o._active],s=o._stageWidth,c=o._stageHeight;if(t(r.container).find(\"iframe\").length)return;return t(r.container).css({width:s,height:c,opacity:0}).show().animate({opacity:1},200),void e.setTimeout(function(){r.load(a.iframe+(a.video?\"&autoplay=1\":\"\"),{width:s,height:c},function(t){o.$(\"container\").addClass(\"videoplay\"),t.scale({width:o._stageWidth,height:o._stageHeight,iframelimit:a.video?o._options.maxVideoSize:n})})},100)}if(a.link)if(o._options.popupLinks){e.open(a.link,\"_blank\")}else e.location.href=a.link;else;}}),this.bind(i.IMAGE,function(e){o.setCounter(e.index),o.setInfo(e.index);var i=this.getNext(),n=this.getPrev(),a=[n,i];a.push(this.getNext(i),this.getPrev(n),o._controls.slides.length-1);var r=[];t.each(a,function(e,i){t.inArray(i,r)==-1&&r.push(i)}),t.each(r,function(e,i){var n=o.getData(i),a=o._controls.slides[i],r=o.isFullscreen()&&n.big?n.big:n.image||n.iframe;n.iframe&&!n.image&&(a.isIframe=!0),a.ready||o._controls.slides[i].load(r,function(e){e.isIframe||t(e.image).css(\"visibility\",\"hidden\"),o._scaleImage(e,{complete:function(e){e.isIframe||t(e.image).css({opacity:0,visibility:\"visible\"}).animate({opacity:1},200)}})})})})),this.$(\"thumbnails, thumbnails-list\").css({overflow:\"hidden\",position:\"relative\"}),this.$(\"image-nav-right, image-nav-left\").on(\"click:fast\",function(t){s.pauseOnInteraction&&o.pause();var e=/right/.test(this.className)?\"next\":\"prev\";o[e]()}).on(\"click\",function(t){t.preventDefault(),(s.clicknext||s.swipe)&&t.stopPropagation()}),t.each([\"info\",\"counter\",\"image-nav\"],function(t,e){s[\"show\"+e.substr(0,1).toUpperCase()+e.substr(1).replace(/-/,\"\")]===!1&&H.moveOut(o.get(e.toLowerCase()))}),this.load(),s.keepSource||y||(this._target.innerHTML=\"\"),this.get(\"errors\")&&this.appendChild(\"target\",\"errors\"),this.appendChild(\"target\",\"container\"),s.carousel){var c=0,l=s.show;this.bind(i.THUMBNAIL,function(){this.updateCarousel(),++c==this.getDataLength()&&\"number\"==typeof l&&l>0&&this._carousel.follow(l)})}return s.responsive&&r.on(\"resize\",function(){o.isFullscreen()||o.resize()}),s.fullscreenDoubleTap&&this.$(\"stage\").on(\"touchstart\",function(){var t,e,i,n,a,r,s=function(t){return t.originalEvent.touches?t.originalEvent.touches[0]:t};return o.$(\"stage\").on(\"touchmove\",function(){t=0}),function(c){if(!/(-left|-right)/.test(c.target.className)){if(r=H.timestamp(),e=s(c).pageX,i=s(c).pageY,c.originalEvent.touches.length<2&&r-t<300&&e-n<20&&i-a<20)return o.toggleFullscreen(),void c.preventDefault();t=r,n=e,a=i}}}()),t.each(i.on.binds,function(e,i){t.inArray(i.hash,o._binds)==-1&&o.bind(i.type,i.callback)}),this},addTimer:function(){return this._timer.add.apply(this._timer,H.array(arguments)),this},clearTimer:function(){return this._timer.clear.apply(this._timer,H.array(arguments)),this},_getWH:function(){var e,i=this.$(\"container\"),n=this.$(\"target\"),a=this,o={};return t.each([\"width\",\"height\"],function(t,r){a._options[r]&&\"number\"==typeof a._options[r]?o[r]=a._options[r]:(e=[H.parseValue(i.css(r)),H.parseValue(n.css(r)),i[r](),n[r]()],a[\"_\"+r]||e.splice(e.length,H.parseValue(i.css(\"min-\"+r)),H.parseValue(n.css(\"min-\"+r))),o[r]=g.max.apply(g,e))}),a._userRatio&&(o.height=o.width*a._userRatio),o},_createThumbnails:function(n){this.get(\"total\").innerHTML=this.getDataLength();var o,r,s,c,l=this,h=this._options,u=n?this._data.length-n.length:0,d=u,p=[],f=0,g=y<8?\"http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif\":\"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D\",m=function(){var t=l.$(\"thumbnails\").find(\".active\");return!!t.length&&t.find(\"img\").attr(\"src\")}(),v=\"string\"==typeof h.thumbnails?h.thumbnails.toLowerCase():null,_=function(t){return a.defaultView&&a.defaultView.getComputedStyle?a.defaultView.getComputedStyle(r.container,null)[t]:c.css(t)},b=function(e,n,a){return function(){t(a).append(e),l.trigger({type:i.THUMBNAIL,thumbTarget:e,index:n,galleriaData:l.getData(n)})}},w=function(e){h.pauseOnInteraction&&l.pause();var i=t(e.currentTarget).data(\"index\");l.getIndex()!==i&&l.show(i),e.preventDefault()},x=function(e,n){t(e.container).css(\"visibility\",\"visible\"),l.trigger({type:i.THUMBNAIL,thumbTarget:e.image,index:e.data.order,galleriaData:l.getData(e.data.order)}),\"function\"==typeof n&&n.call(l,e)},T=function(e,i){e.scale({width:e.data.width,height:e.data.height,crop:h.thumbCrop,margin:h.thumbMargin,canvas:h.useCanvas,position:h.thumbPosition,complete:function(e){var n,a,o=[\"left\",\"top\"],r=[\"Width\",\"Height\"];l.getData(e.index);t.each(r,function(i,r){n=r.toLowerCase(),h.thumbCrop===!0&&h.thumbCrop!==n||(a={},a[n]=e[n],t(e.container).css(a),a={},a[o[i]]=0,t(e.image).css(a)),e[\"outer\"+r]=t(e.container)[\"outer\"+r](!0)}),H.toggleQuality(e.image,h.thumbQuality===!0||\"auto\"===h.thumbQuality&&e.original.width<3*e.width),h.thumbDisplayOrder&&!e.lazy?t.each(p,function(t,e){if(t===f&&e.ready&&!e.displayed)return f++,e.displayed=!0,void x(e,i)}):x(e,i)}})};for(n||(this._thumbnails=[],this.$(\"thumbnails\").empty());this._data[u];u++)s=this._data[u],o=s.thumb||s.image,h.thumbnails!==!0&&\"lazy\"!=v||!s.thumb&&!s.image?s.iframe&&null!==v||\"empty\"===v||\"numbers\"===v?(r={container:H.create(\"galleria-image\"),image:H.create(\"img\",\"span\"),ready:!0,data:{order:u}},\"numbers\"===v&&t(r.image).text(u+1),s.iframe&&t(r.image).addClass(\"iframe\"),this.$(\"thumbnails\").append(r.container),e.setTimeout(b(r.image,u,r.container),50+20*u)):r={container:null,image:null}:(r=new i.Picture(u),r.index=u,r.displayed=!1,r.lazy=!1,r.video=!1,this.$(\"thumbnails\").append(r.container),c=t(r.container),c.css(\"visibility\",\"hidden\"),r.data={width:H.parseValue(_(\"width\")),height:H.parseValue(_(\"height\")),order:u,src:o},h.thumbCrop!==!0?c.css({width:\"auto\",height:\"auto\"}):c.css({width:r.data.width,height:r.data.height}),\"lazy\"==v?(c.addClass(\"lazy\"),r.lazy=!0,r.load(g,{height:r.data.height,width:r.data.width})):r.load(o,T),\"all\"===h.preload&&r.preload(s.image)),t(r.container).add(h.keepSource&&h.linkSourceImages?s.original:null).data(\"index\",u).on(h.thumbEventType,w).data(\"thumbload\",T),m===o&&t(r.container).addClass(\"active\"),this._thumbnails.push(r);return p=this._thumbnails.slice(d),this},lazyLoad:function(e,i){var n=e.constructor==Array?e:[e],a=this,o=0;return t.each(n,function(e,r){if(!(r>a._thumbnails.length-1)){var s=a._thumbnails[r],c=s.data,l=function(){++o==n.length&&\"function\"==typeof i&&i.call(a)},h=t(s.container).data(\"thumbload\");s.video?h.call(a,s,l):s.load(c.src,function(t){h.call(a,t,l)})}}),this},lazyLoadChunks:function(t,i){var n=this.getDataLength(),a=0,o=0,r=[],s=[],c=this;for(i=i||0;a<n;a++)s.push(a),++o!=t&&a!=n-1||(r.push(s),o=0,s=[]);var l=function(t){var n=r.shift();n&&e.setTimeout(function(){c.lazyLoad(n,function(){l(!0)})},i&&t?i:0)};return l(!1),this},_run:function(){var a=this;a._createThumbnails(),H.wait({timeout:1e4,until:function(){return i.OPERA&&a.$(\"stage\").css(\"display\",\"inline-block\"),a._stageWidth=a.$(\"stage\").width(),a._stageHeight=a.$(\"stage\").height(),a._stageWidth&&a._stageHeight>50},success:function(){if(E.push(a),a._options.swipe){var o=a.$(\"images\").width(a.getDataLength()*a._stageWidth);t.each(new Array(a.getDataLength()),function(e){var n=new i.Picture,r=a.getData(e);t(n.container).css({position:\"absolute\",top:0,left:a._stageWidth*e}).prepend(a._layers[e]=t(H.create(\"galleria-layer\")).css({position:\"absolute\",top:0,left:0,right:0,bottom:0,zIndex:2})[0]).appendTo(o),r.video&&O(n.container),a._controls.slides.push(n);var s=new i.Picture;s.isIframe=!0,t(s.container).attr(\"class\",\"galleria-frame\").css({position:\"absolute\",top:0,left:0,zIndex:4,background:\"#000\",display:\"none\"}).appendTo(n.container),a._controls.frames.push(s)}),a.finger.setup()}return H.show(a.get(\"counter\")),a._options.carousel&&a._carousel.bindControls(),a._options.autoplay&&(a.pause(),\"number\"==typeof a._options.autoplay&&(a._playtime=a._options.autoplay),a._playing=!0),a._firstrun?(a._options.autoplay&&a.trigger(i.PLAY),void(\"number\"==typeof a._options.show&&a.show(a._options.show))):(a._firstrun=!0,i.History&&i.History.change(function(t){isNaN(t)?e.history.go(-1):a.show(t,n,!0)}),a.trigger(i.READY),a.theme.init.call(a,a._options),t.each(i.ready.callbacks,function(t,e){\"function\"==typeof e&&e.call(a,a._options)}),a._options.extend.call(a,a._options),/^[0-9]{1,4}$/.test(p)&&i.History?a.show(p,n,!0):a._data[a._options.show]&&a.show(a._options.show),void(a._options.autoplay&&a.trigger(i.PLAY)))},error:function(){i.raise(\"Stage width or height is too small to show the gallery. Traced measures: width:\"+a._stageWidth+\"px, height: \"+a._stageHeight+\"px.\",!0)}})},load:function(e,n,a){var o=this,r=this._options;return this._data=[],this._thumbnails=[],this.$(\"thumbnails\").empty(),\"function\"==typeof n&&(a=n,n=null),e=e||r.dataSource,n=n||r.dataSelector,a=a||r.dataConfig,t.isPlainObject(e)&&(e=[e]),t.isArray(e)?this.validate(e)?this._data=e:i.raise(\"Load failed: JSON Array not valid.\"):(n+=\",.video,.iframe\",t(e).find(n).each(function(e,i){i=t(i);var n={},r=i.parent(),s=r.attr(\"href\"),c=r.attr(\"rel\");s&&(\"IMG\"==i[0].nodeName||i.hasClass(\"video\"))&&S(s)?n.video=s:s&&i.hasClass(\"iframe\")?n.iframe=s:n.image=n.big=s,c&&(n.big=c),t.each(\"big title description link layer image\".split(\" \"),function(t,e){i.data(e)&&(n[e]=i.data(e).toString())}),n.big||(n.big=n.image),o._data.push(t.extend({title:i.attr(\"title\")||\"\",thumb:i.attr(\"src\"),image:i.attr(\"src\"),big:i.attr(\"src\"),description:i.attr(\"alt\")||\"\",link:i.attr(\"longdesc\"),original:i.get(0)},n,a(i)))})),\"function\"==typeof r.dataSort?s.sort.call(this._data,r.dataSort):\"random\"==r.dataSort&&this._data.sort(function(){return g.round(g.random())-.5}),this.getDataLength()&&this._parseData(function(){this.trigger(i.DATA)}),this},_parseData:function(e){var i,a=this,o=!1,r=function(){var i=!0;t.each(a._data,function(t,e){if(e.loading)return i=!1,!1}),i&&!o&&(o=!0,e.call(a))};return t.each(this._data,function(e,o){if(i=a._data[e],\"thumb\"in o==!1&&(i.thumb=o.image),o.big||(i.big=o.image),\"video\"in o){var s=S(o.video);s&&(i.iframe=new I(s.provider,s.id).embed()+function(){if(\"object\"==typeof a._options[s.provider]){var e=\"?\",i=[];return t.each(a._options[s.provider],function(t,e){i.push(t+\"=\"+e)}),\"youtube\"==s.provider&&(i=[\"wmode=opaque\"].concat(i)),e+i.join(\"&\")}return\"\"}(),i.thumb&&i.image||t.each([\"thumb\",\"image\"],function(t,e){if(\"image\"==e&&!a._options.videoPoster)return void(i.image=n);var o=new I(s.provider,s.id);i[e]||(i.loading=!0,o.getMedia(e,function(t,e){return function(i){t[e]=i,\"image\"!=e||t.big||(t.big=t.image),delete t.loading,r()}}(i,e)))}))}}),r(),this},destroy:function(){return this.$(\"target\").data(\"galleria\",null),this.$(\"container\").off(\"galleria\"),this.get(\"target\").innerHTML=this._original.html,this.clearTimer(),H.removeFromArray(D,this),H.removeFromArray(E,this),i._waiters.length&&t.each(i._waiters,function(t,i){i&&e.clearTimeout(i)}),this},splice:function(){var t=this,i=H.array(arguments);return e.setTimeout(function(){s.splice.apply(t._data,i),t._parseData(function(){t._createThumbnails()})},2),t},push:function(){var t=this,i=H.array(arguments);return 1==i.length&&i[0].constructor==Array&&(i=i[0]),e.setTimeout(function(){s.push.apply(t._data,i),t._parseData(function(){t._createThumbnails(i)})},2),t},_getActive:function(){return this._controls.getActive()},validate:function(t){return!0},bind:function(t,e){return t=k(t),this.$(\"container\").on(t,this.proxy(e)),this},unbind:function(t){return t=k(t),this.$(\"container\").off(t),this},trigger:function(e){return e=\"object\"==typeof e?t.extend(e,{scope:this}):{type:k(e),scope:this},this.$(\"container\").trigger(e),this},addIdleState:function(t,e,i,n){return this._idle.add.apply(this._idle,H.array(arguments)),this},removeIdleState:function(t){return this._idle.remove.apply(this._idle,H.array(arguments)),this},enterIdleMode:function(){return this._idle.hide(),this},exitIdleMode:function(){return this._idle.showAll(),this},enterFullscreen:function(t){return this._fullscreen.enter.apply(this,H.array(arguments)),this},exitFullscreen:function(t){return this._fullscreen.exit.apply(this,H.array(arguments)),this},toggleFullscreen:function(t){return this._fullscreen[this.isFullscreen()?\"exit\":\"enter\"].apply(this,H.array(arguments)),this},bindTooltip:function(t,e){return this._tooltip.bind.apply(this._tooltip,H.array(arguments)),this},defineTooltip:function(t,e){return this._tooltip.define.apply(this._tooltip,H.array(arguments)),this},refreshTooltip:function(t){return this._tooltip.show.apply(this._tooltip,H.array(arguments)),this},openLightbox:function(){return this._lightbox.show.apply(this._lightbox,H.array(arguments)),this},closeLightbox:function(){return this._lightbox.hide.apply(this._lightbox,H.array(arguments)),this},hasVariation:function(e){return t.inArray(e,this._options.variation.split(/\\s+/))>-1},getActiveImage:function(){var t=this._getActive();return t?t.image:n},getActiveThumb:function(){return this._thumbnails[this._active].image||n},getMousePosition:function(t){return{x:t.pageX-this.$(\"container\").offset().left,y:t.pageY-this.$(\"container\").offset().top}},addPan:function(e){if(this._options.imageCrop!==!1){e=t(e||this.getActiveImage());var i=this,n=e.width()/2,a=e.height()/2,o=parseInt(e.css(\"left\"),10),r=parseInt(e.css(\"top\"),10),s=o||0,c=r||0,l=0,h=0,u=!1,d=H.timestamp(),p=0,f=0,m=function(t,i,n){if(t>0&&(f=g.round(g.max(t*-1,g.min(0,i))),p!==f))if(p=f,8===y)e.parent()[\"scroll\"+n](f*-1);else{var a={};a[n.toLowerCase()]=f,e.css(a)}},v=function(t){H.timestamp()-d<50||(u=!0,n=i.getMousePosition(t).x,a=i.getMousePosition(t).y)},_=function(t){u&&(l=e.width()-i._stageWidth,h=e.height()-i._stageHeight,o=n/i._stageWidth*l*-1,r=a/i._stageHeight*h*-1,s+=(o-s)/i._options.imagePanSmoothness,c+=(r-c)/i._options.imagePanSmoothness,m(h,c,\"Top\"),m(l,s,\"Left\"))};return 8===y&&(e.parent().scrollTop(c*-1).scrollLeft(s*-1),e.css({top:0,left:0})),this.$(\"stage\").off(\"mousemove\",v).on(\"mousemove\",v),this.addTimer(\"pan\"+i._id,_,50,!0),this}},proxy:function(t,e){return\"function\"!=typeof t?m:(e=e||this,function(){return t.apply(e,H.array(arguments))})},getThemeName:function(){return this.theme.name},removePan:function(){return this.$(\"stage\").off(\"mousemove\"),this.clearTimer(\"pan\"+this._id),this},addElement:function(e){var i=this._dom;return t.each(H.array(arguments),function(t,e){i[e]=H.create(\"galleria-\"+e)}),this},attachKeyboard:function(t){return this._keyboard.attach.apply(this._keyboard,H.array(arguments)),this},detachKeyboard:function(){return this._keyboard.detach.apply(this._keyboard,H.array(arguments)),this},appendChild:function(t,e){return this.$(t).append(this.get(e)||e),this},prependChild:function(t,e){return this.$(t).prepend(this.get(e)||e),this},remove:function(t){return this.$(H.array(arguments).join(\",\")).remove(),this},append:function(t){var e,i;for(e in t)if(t.hasOwnProperty(e))if(t[e].constructor===Array)for(i=0;t[e][i];i++)this.appendChild(e,t[e][i]);else this.appendChild(e,t[e]);return this},_scaleImage:function(e,i){if(e=e||this._controls.getActive()){var n,a=function(e){t(e.container).children(\":first\").css({top:g.max(0,H.parseValue(e.image.style.top)),left:g.max(0,H.parseValue(e.image.style.left)),width:H.parseValue(e.image.width),height:H.parseValue(e.image.height)})};return i=t.extend({width:this._stageWidth,height:this._stageHeight,crop:this._options.imageCrop,max:this._options.maxScaleRatio,min:this._options.minScaleRatio,margin:this._options.imageMargin,position:this._options.imagePosition,iframelimit:this._options.maxVideoSize},i),this._options.layerFollow&&this._options.imageCrop!==!0?\"function\"==typeof i.complete?(n=i.complete,i.complete=function(){n.call(e,e),a(e)}):i.complete=a:t(e.container).children(\":first\").css({top:0,left:0}),e.scale(i),this}},updateCarousel:function(){return this._carousel.update(),this},resize:function(e,i){\"function\"==typeof e&&(i=e,e=n),e=t.extend({width:0,height:0},e);var a=this,o=this.$(\"container\");return t.each(e,function(t,i){i||(o[t](\"auto\"),e[t]=a._getWH()[t])}),t.each(e,function(t,e){o[t](e)}),this.rescale(i)},rescale:function(e,a,o){var r=this;\"function\"==typeof e&&(o=e,e=n);var s=function(){r._stageWidth=e||r.$(\"stage\").width(),r._stageHeight=a||r.$(\"stage\").height(),r._options.swipe?(t.each(r._controls.slides,function(e,i){r._scaleImage(i),t(i.container).css(\"left\",r._stageWidth*e)}),r.$(\"images\").css(\"width\",r._stageWidth*r.getDataLength())):r._scaleImage(),r._options.carousel&&r.updateCarousel();var n=r._controls.frames[r._controls.active];n&&r._controls.frames[r._controls.active].scale({width:r._stageWidth,height:r._stageHeight,iframelimit:r._options.maxVideoSize}),r.trigger(i.RESCALE),\"function\"==typeof o&&o.call(r)};return s.call(r),this},refreshImage:function(){return this._scaleImage(),this._options.imagePan&&this.addPan(),this},_preload:function(){if(this._options.preload){var t,e,n,a=this.getNext();try{for(e=this._options.preload;e>0;e--)t=new i.Picture,n=this.getData(a),t.preload(this.isFullscreen()&&n.big?n.big:n.image),a=this.getNext(a)}catch(t){}}},show:function(n,a,o){var r=this._options.swipe;if(r||!(this._queue.length>3||n===!1||!this._options.queue&&this._queue.stalled)){if(n=g.max(0,g.min(parseInt(n,10),this.getDataLength()-1)),a=\"undefined\"!=typeof a?!!a:n<this.getIndex(),o=o||!1,!o&&i.History)return void i.History.set(n.toString());if(this.finger&&n!==this._active&&(this.finger.to=-(n*this.finger.width),this.finger.index=n),this._active=n,r){var c=this.getData(n),l=this;if(!c)return;var h=this.isFullscreen()&&c.big?c.big:c.image||c.iframe,u=this._controls.slides[n],d=u.isCached(h),p=this._thumbnails[n],f={cached:d,index:n,rewind:a,imageTarget:u.image,thumbTarget:p.image,galleriaData:c};this.trigger(t.extend(f,{type:i.LOADSTART})),l.$(\"container\").removeClass(\"videoplay\");var m=function(){l._layers[n].innerHTML=l.getData().layer||\"\",l.trigger(t.extend(f,{type:i.LOADFINISH})),l._playCheck()};l._preload(),e.setTimeout(function(){u.ready&&t(u.image).attr(\"src\")==h?(l.trigger(t.extend(f,{type:i.IMAGE})),m()):(c.iframe&&!c.image&&(u.isIframe=!0),u.load(h,function(e){f.imageTarget=e.image,l._scaleImage(e,m).trigger(t.extend(f,{type:i.IMAGE})),m()}))},100)}else s.push.call(this._queue,{index:n,rewind:a}),this._queue.stalled||this._show();return this}},_show:function(){var a=this,o=this._queue[0],r=this.getData(o.index);if(r){var c=this.isFullscreen()&&r.big?r.big:r.image||r.iframe,l=this._controls.getActive(),h=this._controls.getNext(),u=h.isCached(c),d=this._thumbnails[o.index],p=function(){t(h.image).trigger(\"mouseup\")};a.$(\"container\").toggleClass(\"iframe\",!!r.isIframe).removeClass(\"videoplay\");var f=function(o,r,c,l,h){return function(){var u;M.active=!1,H.toggleQuality(r.image,a._options.imageQuality),a._layers[a._controls.active].innerHTML=\"\",t(c.container).css({zIndex:0,opacity:0}).show(),t(c.container).find(\"iframe, .galleria-videoicon\").remove(),t(a._controls.frames[a._controls.active].container).hide(),t(r.container).css({zIndex:1,left:0,top:0}).show(),a._controls.swap(),a._options.imagePan&&a.addPan(r.image),(o.iframe&&o.image||o.link||a._options.lightbox||a._options.clicknext)&&t(r.image).css({cursor:\"pointer\"}).on(\"mouseup\",function(r){if(!(\"number\"==typeof r.which&&r.which>1)){if(o.iframe){a.isPlaying()&&a.pause();var s=a._controls.frames[a._controls.active],c=a._stageWidth,l=a._stageHeight;return t(s.container).css({width:c,height:l,opacity:0}).show().animate({opacity:1},200),void e.setTimeout(function(){s.load(o.iframe+(o.video?\"&autoplay=1\":\"\"),{width:c,height:l},function(t){a.$(\"container\").addClass(\"videoplay\"),t.scale({width:a._stageWidth,height:a._stageHeight,iframelimit:o.video?a._options.maxVideoSize:n})})},100)}return a._options.clicknext&&!i.TOUCH?(a._options.pauseOnInteraction&&a.pause(),void a.next()):o.link?void(a._options.popupLinks?u=e.open(o.link,\"_blank\"):e.location.href=o.link):void(a._options.lightbox&&a.openLightbox())}}),a._playCheck(),a.trigger({type:i.IMAGE,index:l.index,imageTarget:r.image,thumbTarget:h.image,galleriaData:o}),s.shift.call(a._queue),a._queue.stalled=!1,a._queue.length&&a._show()}}(r,h,l,o,d);this._options.carousel&&this._options.carouselFollow&&this._carousel.follow(o.index),a._preload(),H.show(h.container),h.isIframe=r.iframe&&!r.image,t(a._thumbnails[o.index].container).addClass(\"active\").siblings(\".active\").removeClass(\"active\"),a.trigger({type:i.LOADSTART,cached:u,index:o.index,rewind:o.rewind,imageTarget:h.image,thumbTarget:d.image,galleriaData:r}),a._queue.stalled=!0,h.load(c,function(e){var s=t(a._layers[1-a._controls.active]).html(r.layer||\"\").hide();a._scaleImage(e,{complete:function(e){\"image\"in l&&H.toggleQuality(l.image,!1),H.toggleQuality(e.image,!1),a.removePan(),a.setInfo(o.index),a.setCounter(o.index),r.layer&&(s.show(),(r.iframe&&r.image||r.link||a._options.lightbox||a._options.clicknext)&&s.css(\"cursor\",\"pointer\").off(\"mouseup\").mouseup(p)),r.video&&r.image&&O(e.container);var c=a._options.transition;if(t.each({initial:null===l.image,touch:i.TOUCH,fullscreen:a.isFullscreen()},function(t,e){if(e&&a._options[t+\"Transition\"]!==n)return c=a._options[t+\"Transition\"],!1}),c in M.effects==!1)f();else{var h={prev:l.container,next:e.container,rewind:o.rewind,speed:a._options.transitionSpeed||400};M.active=!0,M.init.call(a,c,h,f)}a.trigger({type:i.LOADFINISH,cached:u,index:o.index,rewind:o.rewind,imageTarget:e.image,thumbTarget:a._thumbnails[o.index].image,galleriaData:a.getData(o.index)})}})})}},getNext:function(t){return t=\"number\"==typeof t?t:this.getIndex(),t===this.getDataLength()-1?0:t+1},getPrev:function(t){return t=\"number\"==typeof t?t:this.getIndex(),0===t?this.getDataLength()-1:t-1},next:function(){return this.getDataLength()>1&&this.show(this.getNext(),!1),this},prev:function(){return this.getDataLength()>1&&this.show(this.getPrev(),!0),this},get:function(t){return t in this._dom?this._dom[t]:null},getData:function(t){return t in this._data?this._data[t]:this._data[this._active]},getDataLength:function(){return this._data.length},getIndex:function(){return\"number\"==typeof this._active&&this._active},getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:function(t){return\"undefined\"==typeof t?this._options:this._options[t]},setOptions:function(e,i){return\"object\"==typeof e?t.extend(this._options,e):this._options[e]=i,this},play:function(t){return this._playing=!0,this._playtime=t||this._playtime,this._playCheck(),this.trigger(i.PLAY),this},pause:function(){return this._playing=!1,this.trigger(i.PAUSE),this},playToggle:function(t){return this._playing?this.pause():this.play(t)},isPlaying:function(){return this._playing},isFullscreen:function(){return this._fullscreen.active},_playCheck:function(){var t=this,e=0,n=20,a=H.timestamp(),o=\"play\"+this._id;if(this._playing){this.clearTimer(o);var r=function(){return e=H.timestamp()-a,e>=t._playtime&&t._playing?(t.clearTimer(o),void t.next()):void(t._playing&&(t.trigger({type:i.PROGRESS,percent:g.ceil(e/t._playtime*100),seconds:g.floor(e/1e3),milliseconds:e}),t.addTimer(o,r,n)))};t.addTimer(o,r,n)}},setPlaytime:function(t){return this._playtime=t,this},setIndex:function(t){return this._active=t,this},setCounter:function(t){if(\"number\"==typeof t?t++:\"undefined\"==typeof t&&(t=this.getIndex()+1),this.get(\"current\").innerHTML=t,y){var e=this.$(\"counter\"),i=e.css(\"opacity\");1===parseInt(i,10)?H.removeAlpha(e[0]):this.$(\"counter\").css(\"opacity\",i)}return this},setInfo:function(e){var i=this,n=this.getData(e);return t.each([\"title\",\"description\"],function(t,e){var a=i.$(\"info-\"+e);n[e]?a[n[e].length?\"show\":\"hide\"]().html(n[e]):a.empty().hide()}),this},hasInfo:function(t){var e,i=\"title description\".split(\" \");for(e=0;i[e];e++)if(this.getData(t)[i[e]])return!0;return!1},jQuery:function(e){var i=this,n=[];t.each(e.split(\",\"),function(e,a){a=t.trim(a),i.get(a)&&n.push(a)});var a=t(i.get(n.shift()));return t.each(n,function(t,e){a=a.add(i.get(e))}),a},$:function(t){return this.jQuery.apply(this,H.array(arguments))}},t.each(x,function(t,e){var n=/_/.test(e)?e.replace(/_/g,\"\"):e;i[e.toUpperCase()]=\"galleria.\"+n}),t.extend(i,{IE9:9===y,IE8:8===y,IE7:7===y,IE6:6===y,IE:y,WEBKIT:/webkit/.test(d),CHROME:/chrome/.test(d),SAFARI:/safari/.test(d)&&!/chrome/.test(d),QUIRK:y&&a.compatMode&&\"BackCompat\"===a.compatMode,MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!e.opera,IPHONE:/iphone/.test(d),IPAD:/ipad/.test(d),ANDROID:/android/.test(d),TOUCH:\"ontouchstart\"in a}),i.addTheme=function(n){n.name||i.raise(\"No theme name specified\"),\"object\"!=typeof n.defaults?n.defaults={}:n.defaults=T(n.defaults);var a,o=!1;return\"string\"==typeof n.css?(t(\"link\").each(function(t,e){if(a=new RegExp(n.css),a.test(e.href))return o=!0,F(n),!1}),o||t(function(){var r=0,s=function(){t(\"script\").each(function(t,i){a=new RegExp(\"galleria\\\\.\"+n.name.toLowerCase()+\"\\\\.\"),a.test(i.src)&&(o=i.src.replace(/[^\\/]*$/,\"\")+n.css,e.setTimeout(function(){H.loadCSS(o,\"galleria-theme-\"+n.name,function(){F(n)})},1))}),o||(r++>5?i.raise(\"No theme CSS loaded\"):e.setTimeout(s,500))};s()})):F(n),n},i.loadTheme=function(n,a){if(!t(\"script\").filter(function(){return t(this).attr(\"src\")==n}).length){var o,r=!1;return t(e).load(function(){r||(o=e.setTimeout(function(){r||i.raise(\"Galleria had problems loading theme at \"+n+\". Please check theme path or load manually.\",!0)},2e4))}),H.loadScript(n,function(){r=!0,e.clearTimeout(o)}),i}},i.get=function(t){return D[t]?D[t]:\"number\"!=typeof t?D:void i.raise(\"Gallery index \"+t+\" not found\")},i.configure=function(e,n){var a={};return\"string\"==typeof e&&n?(a[e]=n,e=a):t.extend(a,e),i.configure.options=a,t.each(i.get(),function(t,e){e.setOptions(a)}),i},i.configure.options={},i.on=function(e,n){if(e){n=n||m;var a=e+n.toString().replace(/\\s/g,\"\")+H.timestamp();return t.each(i.get(),function(t,i){i._binds.push(a),i.bind(e,n)}),i.on.binds.push({type:e,callback:n,hash:a}),i}},i.on.binds=[],i.run=function(e,n){return t.isFunction(n)&&(n={extend:n}),t(e||\"#galleria\").galleria(n),i},i.addTransition=function(t,e){return M.effects[t]=e,i},i.utils=H,i.log=function(){var i=H.array(arguments);if(!(\"console\"in e&&\"log\"in e.console))return e.alert(i.join(\"<br>\"));try{return e.console.log.apply(e.console,i)}catch(n){t.each(i,function(){e.console.log(this)})}},i.ready=function(e){return\"function\"!=typeof e?i:(t.each(E,function(t,i){e.call(i,i._options)}),i.ready.callbacks.push(e),i)},i.ready.callbacks=[],i.raise=function(e,i){var n=i?\"Fatal error\":\"Error\",a={color:\"#fff\",position:\"absolute\",top:0,left:0,zIndex:1e5},o=function(e){var o='<div style=\"padding:4px;margin:0 0 2px;background:#'+(i?\"811\":\"222\")+';\">'+(i?\"<strong>\"+n+\": </strong>\":\"\")+e+\"</div>\";t.each(D,function(){var t=this.$(\"errors\"),e=this.$(\"target\");t.length||(e.css(\"position\",\"relative\"),t=this.addElement(\"errors\").appendChild(\"target\",\"errors\").$(\"errors\").css(a)),t.append(o)}),D.length||t(\"<div>\").css(t.extend(a,{position:\"fixed\"})).append(o).appendTo(_().body)};if(l){if(o(e),i)throw new Error(n+\": \"+e)}else if(i){if(L)return;L=!0,i=!1,o(\"Gallery could not load.\")}},i.version=c,i.getLoadedThemes=function(){return t.map(z,function(t){return t.name})},i.requires=function(t,e){return e=e||\"You need to upgrade Galleria to version \"+t+\" to use one or more components.\",i.version<t&&i.raise(e,!0),i},i.Picture=function(e){this.id=e||null,this.image=null,this.container=H.create(\"galleria-image\"),t(this.container).css({overflow:\"hidden\",position:\"relative\"}),this.original={width:0,height:0},this.ready=!1,this.isIframe=!1},i.Picture.prototype={cache:{},show:function(){H.show(this.image)},hide:function(){H.moveOut(this.image)},clear:function(){this.image=null},isCached:function(t){return!!this.cache[t]},preload:function(e){t(new Image).load(function(t,e){return function(){e[t]=t}}(e,this.cache)).attr(\"src\",e)},load:function(n,a,o){if(\"function\"==typeof a&&(o=a,a=null),this.isIframe){var r=\"if\"+(new Date).getTime(),s=this.image=t(\"<iframe>\",{src:n,frameborder:0,id:r,allowfullscreen:!0,css:{visibility:\"hidden\"\n}})[0];return a&&t(s).css(a),t(this.container).find(\"iframe,img\").remove(),this.container.appendChild(this.image),t(\"#\"+r).load(function(i,n){return function(){e.setTimeout(function(){t(i.image).css(\"visibility\",\"visible\"),\"function\"==typeof n&&n.call(i,i)},10)}}(this,o)),this.container}this.image=new Image,i.IE8&&t(this.image).css(\"filter\",\"inherit\"),i.IE||i.CHROME||i.SAFARI||t(this.image).css(\"image-rendering\",\"optimizequality\");var c=!1,l=!1,h=t(this.container),d=t(this.image),p=function(){c?u?t(this).attr(\"src\",u):i.raise(\"Image not found: \"+n):(c=!0,e.setTimeout(function(t,e){return function(){t.attr(\"src\",e+(e.indexOf(\"?\")>-1?\"&\":\"?\")+H.timestamp())}}(t(this),n),50))},f=function(n,o,r){return function(){var s=function(){t(this).off(\"load\"),n.original=a||{height:this.height,width:this.width},i.HAS3D&&(this.style.MozTransform=this.style.webkitTransform=\"translate3d(0,0,0)\"),h.append(this),n.cache[r]=r,\"function\"==typeof o&&e.setTimeout(function(){o.call(n,n)},1)};this.width&&this.height?s.call(this):!function(e){H.wait({until:function(){return e.width&&e.height},success:function(){s.call(e)},error:function(){l?i.raise(\"Could not extract width/height from image: \"+e.src+\". Traced measures: width:\"+e.width+\"px, height: \"+e.height+\"px.\"):(t(new Image).load(f).attr(\"src\",e.src),l=!0)},timeout:100})}(this)}}(this,o,n);return h.find(\"iframe,img\").remove(),d.css(\"display\",\"block\"),H.hide(this.image),t.each(\"minWidth minHeight maxWidth maxHeight\".split(\" \"),function(t,e){d.css(e,/min/.test(e)?\"0\":\"none\")}),d.load(f).on(\"error\",p).attr(\"src\",n),this.container},scale:function(e){var a=this;if(e=t.extend({width:0,height:0,min:n,max:n,margin:0,complete:m,position:\"center\",crop:!1,canvas:!1,iframelimit:n},e),this.isIframe){var o,r,s=e.width,c=e.height;if(e.iframelimit){var l=g.min(e.iframelimit/s,e.iframelimit/c);l<1?(o=s*l,r=c*l,t(this.image).css({top:c/2-r/2,left:s/2-o/2,position:\"absolute\"})):t(this.image).css({top:0,left:0})}t(this.image).width(o||s).height(r||c).removeAttr(\"width\").removeAttr(\"height\"),t(this.container).width(s).height(c),e.complete.call(a,a);try{this.image.contentWindow&&t(this.image.contentWindow).trigger(\"resize\")}catch(t){}return this.container}if(!this.image)return this.container;var h,u,d,p=t(a.container);return H.wait({until:function(){return h=e.width||p.width()||H.parseValue(p.css(\"width\")),u=e.height||p.height()||H.parseValue(p.css(\"height\")),h&&u},success:function(){var i=(h-2*e.margin)/a.original.width,n=(u-2*e.margin)/a.original.height,o=g.min(i,n),r=g.max(i,n),s={true:r,width:i,height:n,false:o,landscape:a.original.width>a.original.height?r:o,portrait:a.original.width<a.original.height?r:o},c=s[e.crop.toString()],l=\"\";e.max&&(c=g.min(e.max,c)),e.min&&(c=g.max(e.min,c)),t.each([\"width\",\"height\"],function(e,i){t(a.image)[i](a[i]=a.image[i]=g.round(a.original[i]*c))}),t(a.container).width(h).height(u),e.canvas&&$&&($.elem.width=a.width,$.elem.height=a.height,l=a.image.src+\":\"+a.width+\"x\"+a.height,a.image.src=$.cache[l]||function(t){$.context.drawImage(a.image,0,0,a.original.width*c,a.original.height*c);try{return d=$.elem.toDataURL(),$.length+=d.length,$.cache[t]=d,d}catch(t){return a.image.src}}(l));var p={},f={},m=function(e,i,n){var o=0;if(/\\%/.test(e)){var r=parseInt(e,10)/100,s=a.image[i]||t(a.image)[i]();o=g.ceil(s*-1*r+n*r)}else o=H.parseValue(e);return o},v={top:{top:0},left:{left:0},right:{left:\"100%\"},bottom:{top:\"100%\"}};t.each(e.position.toLowerCase().split(\" \"),function(t,e){\"center\"===e&&(e=\"50%\"),p[t?\"top\":\"left\"]=e}),t.each(p,function(e,i){v.hasOwnProperty(i)&&t.extend(f,v[i])}),p=p.top?t.extend(p,f):f,p=t.extend({top:\"50%\",left:\"50%\"},p),t(a.image).css({position:\"absolute\",top:m(p.top,\"height\",u),left:m(p.left,\"width\",h)}),a.show(),a.ready=!0,e.complete.call(a,a)},error:function(){i.raise(\"Could not scale image: \"+a.image.src)},timeout:1e3}),this}},t.extend(t.easing,{galleria:function(t,e,i,n,a){return(e/=a/2)<1?n/2*e*e*e+i:n/2*((e-=2)*e*e+2)+i},galleriaIn:function(t,e,i,n,a){return n*(e/=a)*e+i},galleriaOut:function(t,e,i,n,a){return-n*(e/=a)*(e-2)+i}}),i.Finger=function(){var n=(g.abs,i.HAS3D=function(){var e,i,n=a.createElement(\"p\"),o=[\"webkit\",\"O\",\"ms\",\"Moz\",\"\"],r=0,s=\"transform\";for(_().html.insertBefore(n,null);o[r];r++)i=o[r]?o[r]+\"Transform\":s,void 0!==n.style[i]&&(n.style[i]=\"translate3d(1px,1px,1px)\",e=t(n).css(o[r]?\"-\"+o[r].toLowerCase()+\"-\"+s:s));return _().html.removeChild(n),void 0!==e&&e.length>0&&\"none\"!==e}()),r=function(){var t=\"RequestAnimationFrame\";return e.requestAnimationFrame||e[\"webkit\"+t]||e[\"moz\"+t]||e[\"o\"+t]||e[\"ms\"+t]||function(t){e.setTimeout(t,1e3/60)}}(),s=function(i,a){if(this.config={start:0,duration:500,onchange:function(){},oncomplete:function(){},easing:function(t,e,i,n,a){return-n*((e=e/a-1)*e*e*e-1)+i}},this.easeout=function(t,e,i,n,a){return n*((e=e/a-1)*e*e*e*e+1)+i},i.children.length){var o=this;t.extend(this.config,a),this.elem=i,this.child=i.children[0],this.to=this.pos=0,this.touching=!1,this.start={},this.index=this.config.start,this.anim=0,this.easing=this.config.easing,n||(this.child.style.position=\"absolute\",this.elem.style.position=\"relative\"),t.each([\"ontouchstart\",\"ontouchmove\",\"ontouchend\",\"setup\"],function(t,e){o[e]=function(t){return function(){t.apply(o,arguments)}}(o[e])}),this.setX=function(){var t=o.child.style;return n?void(t.MozTransform=t.webkitTransform=t.transform=\"translate3d(\"+o.pos+\"px,0,0)\"):void(t.left=o.pos+\"px\")},t(i).on(\"touchstart\",this.ontouchstart),t(e).on(\"resize\",this.setup),t(e).on(\"orientationchange\",this.setup),this.setup(),function t(){r(t),o.loop.call(o)}()}};return s.prototype={constructor:s,setup:function(){this.width=t(this.elem).width(),this.length=g.ceil(t(this.child).width()/this.width),0!==this.index&&(this.index=g.max(0,g.min(this.index,this.length-1)),this.pos=this.to=-this.width*this.index)},setPosition:function(t){this.pos=t,this.to=t},ontouchstart:function(t){var e=t.originalEvent.touches;this.start={pageX:e[0].pageX,pageY:e[0].pageY,time:+new Date},this.isScrolling=null,this.touching=!0,this.deltaX=0,o.on(\"touchmove\",this.ontouchmove),o.on(\"touchend\",this.ontouchend)},ontouchmove:function(t){var e=t.originalEvent.touches;e&&e.length>1||t.scale&&1!==t.scale||(this.deltaX=e[0].pageX-this.start.pageX,null===this.isScrolling&&(this.isScrolling=!!(this.isScrolling||g.abs(this.deltaX)<g.abs(e[0].pageY-this.start.pageY))),this.isScrolling||(t.preventDefault(),this.deltaX/=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0?g.abs(this.deltaX)/this.width+1.8:1,this.to=this.deltaX-this.index*this.width),t.stopPropagation())},ontouchend:function(t){this.touching=!1;var e=+new Date-this.start.time<250&&g.abs(this.deltaX)>40||g.abs(this.deltaX)>this.width/2,i=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0;this.isScrolling||this.show(this.index+(e&&!i?this.deltaX<0?1:-1:0)),o.off(\"touchmove\",this.ontouchmove),o.off(\"touchend\",this.ontouchend)},show:function(t){t!=this.index?this.config.onchange.call(this,t):this.to=-(t*this.width)},moveTo:function(t){t!=this.index&&(this.pos=this.to=-(t*this.width),this.index=t)},loop:function(){var t=this.to-this.pos,e=1;if(this.width&&t&&(e=g.max(.5,g.min(1.5,g.abs(t/this.width)))),this.touching||g.abs(t)<=1)this.pos=this.to,t=0,this.anim&&!this.touching&&this.config.oncomplete(this.index),this.anim=0,this.easing=this.config.easing;else{this.anim||(this.anim={start:this.pos,time:+new Date,distance:t,factor:e,destination:this.to});var i=+new Date-this.anim.time,n=this.config.duration*this.anim.factor;if(i>n||this.anim.destination!=this.to)return this.anim=0,void(this.easing=this.easeout);this.pos=this.easing(null,i,this.anim.start,this.anim.distance,n)}this.setX()}},s}(),t.fn.galleria=function(e){var n=this.selector;return t(this).length?this.each(function(){t.data(this,\"galleria\")&&(t.data(this,\"galleria\").destroy(),t(this).find(\"*\").hide()),t.data(this,\"galleria\",(new i).init(this,e))}):(t(function(){t(n).length?t(n).galleria(e):i.utils.wait({until:function(){return t(n).length},success:function(){t(n).galleria(e)},error:function(){i.raise('Init failed: Galleria could not find the element \"'+n+'\".')},timeout:5e3})}),this)},\"object\"==typeof module&&module&&\"object\"==typeof module.exports?module.exports=i:(e.Galleria=i,\"function\"==typeof define&&define.amd&&define(\"galleria\",[\"jquery\"],function(){return i}))}(jQuery,this);\n//# sourceMappingURL=galleria.min.js.map</script></c._inst.length;a++)if(c._inst[a].id===n&&c._inst[a].type==i)return>"},{"_content":"{\n \"name\": \"App\",\n \"icons\": [\n  {\n   \"src\": \"\\/android-icon-36x36.png\",\n   \"sizes\": \"36x36\",\n   \"type\": \"image\\/png\",\n   \"density\": \"0.75\"\n  },\n  {\n   \"src\": \"\\/android-icon-48x48.png\",\n   \"sizes\": \"48x48\",\n   \"type\": \"image\\/png\",\n   \"density\": \"1.0\"\n  },\n  {\n   \"src\": \"\\/android-icon-72x72.png\",\n   \"sizes\": \"72x72\",\n   \"type\": \"image\\/png\",\n   \"density\": \"1.5\"\n  },\n  {\n   \"src\": \"\\/android-icon-96x96.png\",\n   \"sizes\": \"96x96\",\n   \"type\": \"image\\/png\",\n   \"density\": \"2.0\"\n  },\n  {\n   \"src\": \"\\/android-icon-144x144.png\",\n   \"sizes\": \"144x144\",\n   \"type\": \"image\\/png\",\n   \"density\": \"3.0\"\n  },\n  {\n   \"src\": \"\\/android-icon-192x192.png\",\n   \"sizes\": \"192x192\",\n   \"type\": \"image\\/png\",\n   \"density\": \"4.0\"\n  }\n ]\n}","source":"images/favicon/manifest.json","raw":"{\n \"name\": \"App\",\n \"icons\": [\n  {\n   \"src\": \"\\/android-icon-36x36.png\",\n   \"sizes\": \"36x36\",\n   \"type\": \"image\\/png\",\n   \"density\": \"0.75\"\n  },\n  {\n   \"src\": \"\\/android-icon-48x48.png\",\n   \"sizes\": \"48x48\",\n   \"type\": \"image\\/png\",\n   \"density\": \"1.0\"\n  },\n  {\n   \"src\": \"\\/android-icon-72x72.png\",\n   \"sizes\": \"72x72\",\n   \"type\": \"image\\/png\",\n   \"density\": \"1.5\"\n  },\n  {\n   \"src\": \"\\/android-icon-96x96.png\",\n   \"sizes\": \"96x96\",\n   \"type\": \"image\\/png\",\n   \"density\": \"2.0\"\n  },\n  {\n   \"src\": \"\\/android-icon-144x144.png\",\n   \"sizes\": \"144x144\",\n   \"type\": \"image\\/png\",\n   \"density\": \"3.0\"\n  },\n  {\n   \"src\": \"\\/android-icon-192x192.png\",\n   \"sizes\": \"192x192\",\n   \"type\": \"image\\/png\",\n   \"density\": \"4.0\"\n  }\n ]\n}","date":"2017-06-24T13:46:42.000Z","updated":"2016-02-05T00:38:41.000Z","path":"images/favicon/manifest.json","layout":"false","title":"","comments":1,"_id":"cj5o1vdom000artwy73d5sma3","content":"{\"name\":\"App\",\"icons\":[{\"src\":\"/android-icon-36x36.png\",\"sizes\":\"36x36\",\"type\":\"image/png\",\"density\":\"0.75\"},{\"src\":\"/android-icon-48x48.png\",\"sizes\":\"48x48\",\"type\":\"image/png\",\"density\":\"1.0\"},{\"src\":\"/android-icon-72x72.png\",\"sizes\":\"72x72\",\"type\":\"image/png\",\"density\":\"1.5\"},{\"src\":\"/android-icon-96x96.png\",\"sizes\":\"96x96\",\"type\":\"image/png\",\"density\":\"2.0\"},{\"src\":\"/android-icon-144x144.png\",\"sizes\":\"144x144\",\"type\":\"image/png\",\"density\":\"3.0\"},{\"src\":\"/android-icon-192x192.png\",\"sizes\":\"192x192\",\"type\":\"image/png\",\"density\":\"4.0\"}]}","site":{"data":{}},"excerpt":"","more":"{\"name\":\"App\",\"icons\":[{\"src\":\"/android-icon-36x36.png\",\"sizes\":\"36x36\",\"type\":\"image/png\",\"density\":\"0.75\"},{\"src\":\"/android-icon-48x48.png\",\"sizes\":\"48x48\",\"type\":\"image/png\",\"density\":\"1.0\"},{\"src\":\"/android-icon-72x72.png\",\"sizes\":\"72x72\",\"type\":\"image/png\",\"density\":\"1.5\"},{\"src\":\"/android-icon-96x96.png\",\"sizes\":\"96x96\",\"type\":\"image/png\",\"density\":\"2.0\"},{\"src\":\"/android-icon-144x144.png\",\"sizes\":\"144x144\",\"type\":\"image/png\",\"density\":\"3.0\"},{\"src\":\"/android-icon-192x192.png\",\"sizes\":\"192x192\",\"type\":\"image/png\",\"density\":\"4.0\"}]}"},{"_content":"/**\n * Galleria v 1.4.5 2016-09-04\n * http://galleria.io\n *\n * Licensed under the MIT license\n * https://raw.github.com/worseisbetter/galleria/master/LICENSE\n *\n */\n\n(function($, window, Galleria, undef) {\n\n    /*global jQuery, navigator, Image, module, define */\n\n    // some references\n    var doc = window.document,\n        $doc = $(doc),\n        $win = $(window),\n\n        // native prototypes\n        protoArray = Array.prototype,\n\n        // internal constants\n        VERSION = 1.45,\n        DEBUG = true,\n        TIMEOUT = 30000,\n        DUMMY = false,\n        NAV = navigator.userAgent.toLowerCase(),\n        HASH = window.location.hash.replace(/#\\//, ''),\n        PROT = window.location.protocol == \"file:\" ? \"http:\" : window.location.protocol,\n        M = Math,\n        F = function() {},\n        FALSE = function() {\n            return false; },\n        IE = (function() {\n\n            var v = 3,\n                div = doc.createElement('div'),\n                all = div.getElementsByTagName('i');\n\n            do {\n                div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->';\n            } while (all[0]);\n\n            return v > 4 ? v : doc.documentMode || undef;\n\n        }()),\n        DOM = function() {\n            return {\n                html: doc.documentElement,\n                body: doc.body,\n                head: doc.getElementsByTagName('head')[0],\n                title: doc.title\n            };\n        },\n        IFRAME = window.parent !== window.self,\n\n        // list of Galleria events\n        _eventlist = 'data ready thumbnail loadstart loadfinish image play pause progress ' +\n        'fullscreen_enter fullscreen_exit idle_enter idle_exit rescale ' +\n        'lightbox_open lightbox_close lightbox_image',\n\n        _events = (function() {\n\n            var evs = [];\n\n            $.each(_eventlist.split(' '), function(i, ev) {\n                evs.push(ev);\n\n                // legacy events\n                if (/_/.test(ev)) {\n                    evs.push(ev.replace(/_/g, ''));\n                }\n            });\n\n            return evs;\n\n        }()),\n\n        // legacy options\n        // allows the old my_setting syntax and converts it to camel case\n\n        _legacyOptions = function(options) {\n\n            var n;\n\n            if (typeof options !== 'object') {\n\n                // return whatever it was...\n                return options;\n            }\n\n            $.each(options, function(key, value) {\n                if (/^[a-z]+_/.test(key)) {\n                    n = '';\n                    $.each(key.split('_'), function(i, k) {\n                        n += i > 0 ? k.substr(0, 1).toUpperCase() + k.substr(1) : k;\n                    });\n                    options[n] = value;\n                    delete options[key];\n                }\n            });\n\n            return options;\n        },\n\n        _patchEvent = function(type) {\n\n            // allow 'image' instead of Galleria.IMAGE\n            if ($.inArray(type, _events) > -1) {\n                return Galleria[type.toUpperCase()];\n            }\n\n            return type;\n        },\n\n        // video providers\n        _video = {\n            youtube: {\n                reg: /https?:\\/\\/(?:[a-zA_Z]{2,3}.)?(?:youtube\\.com\\/watch\\?)((?:[\\w\\d\\-\\_\\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\\-\\_]+))/i,\n                embed: function() {\n                    return PROT + '//www.youtube.com/embed/' + this.id;\n                },\n                get_thumb: function(data) {\n                    return PROT + '//img.youtube.com/vi/' + this.id + '/default.jpg';\n                },\n                get_image: function(data) {\n                    return PROT + '//img.youtube.com/vi/' + this.id + '/hqdefault.jpg';\n                }\n            },\n            vimeo: {\n                reg: /https?:\\/\\/(?:www\\.)?(vimeo\\.com)\\/(?:hd#)?([0-9]+)/i,\n                embed: function() {\n                    return PROT + '//player.vimeo.com/video/' + this.id;\n                },\n                getUrl: function() {\n                    return PROT + '//vimeo.com/api/v2/video/' + this.id + '.json?callback=?';\n                },\n                get_thumb: function(data) {\n                    return data[0].thumbnail_medium;\n                },\n                get_image: function(data) {\n                    return data[0].thumbnail_large;\n                }\n            },\n            dailymotion: {\n                reg: /https?:\\/\\/(?:www\\.)?(dailymotion\\.com)\\/video\\/([^_]+)/,\n                embed: function() {\n                    return PROT + '//www.dailymotion.com/embed/video/' + this.id;\n                },\n                getUrl: function() {\n                    return 'https://api.dailymotion.com/video/' + this.id + '?fields=thumbnail_240_url,thumbnail_720_url&callback=?';\n                },\n                get_thumb: function(data) {\n                    return data.thumbnail_240_url;\n                },\n                get_image: function(data) {\n                    return data.thumbnail_720_url;\n                }\n            },\n            _inst: []\n        },\n        Video = function(type, id) {\n\n            for (var i = 0; i < _video._inst.length; i++) {\n                if (_video._inst[i].id === id && _video._inst[i].type == type) {\n                    return _video._inst[i];\n                }\n            }\n\n            this.type = type;\n            this.id = id;\n            this.readys = [];\n\n            _video._inst.push(this);\n\n            var self = this;\n\n            $.extend(this, _video[type]);\n\n            _videoThumbs = function(data) {\n                self.data = data;\n                $.each(self.readys, function(i, fn) {\n                    fn(self.data);\n                });\n                self.readys = [];\n            };\n\n            if (this.hasOwnProperty('getUrl')) {\n                $.getJSON(this.getUrl(), _videoThumbs);\n            } else {\n                window.setTimeout(_videoThumbs, 400);\n            }\n\n            this.getMedia = function(type, callback, fail) {\n                fail = fail || F;\n                var self = this;\n                var success = function(data) {\n                    callback(self['get_' + type](data));\n                };\n                try {\n                    if (self.data) {\n                        success(self.data);\n                    } else {\n                        self.readys.push(success);\n                    }\n                } catch (e) {\n                    fail();\n                }\n            };\n        },\n\n        // utility for testing the video URL and getting the video ID\n        _videoTest = function(url) {\n            var match;\n            for (var v in _video) {\n                match = url && _video[v].reg && url.match(_video[v].reg);\n                if (match && match.length) {\n                    return {\n                        id: match[2],\n                        provider: v\n                    };\n                }\n            }\n            return false;\n        },\n\n        // native fullscreen handler\n        _nativeFullscreen = {\n\n            support: (function() {\n                var html = DOM().html;\n                return !IFRAME && (html.requestFullscreen || html.msRequestFullscreen || html.mozRequestFullScreen || html.webkitRequestFullScreen);\n            }()),\n\n            callback: F,\n\n            enter: function(instance, callback, elem) {\n\n                this.instance = instance;\n\n                this.callback = callback || F;\n\n                elem = elem || DOM().html;\n                if (elem.requestFullscreen) {\n                    elem.requestFullscreen();\n                } else if (elem.msRequestFullscreen) {\n                    elem.msRequestFullscreen();\n                } else if (elem.mozRequestFullScreen) {\n                    elem.mozRequestFullScreen();\n                } else if (elem.webkitRequestFullScreen) {\n                    elem.webkitRequestFullScreen();\n                }\n            },\n\n            exit: function(callback) {\n\n                this.callback = callback || F;\n\n                if (doc.exitFullscreen) {\n                    doc.exitFullscreen();\n                } else if (doc.msExitFullscreen) {\n                    doc.msExitFullscreen();\n                } else if (doc.mozCancelFullScreen) {\n                    doc.mozCancelFullScreen();\n                } else if (doc.webkitCancelFullScreen) {\n                    doc.webkitCancelFullScreen();\n                }\n            },\n\n            instance: null,\n\n            listen: function() {\n\n                if (!this.support) {\n                    return;\n                }\n\n                var handler = function() {\n\n                    if (!_nativeFullscreen.instance) {\n                        return;\n                    }\n                    var fs = _nativeFullscreen.instance._fullscreen;\n\n                    if (doc.fullscreen || doc.mozFullScreen || doc.webkitIsFullScreen || (doc.msFullscreenElement && doc.msFullscreenElement !== null)) {\n                        fs._enter(_nativeFullscreen.callback);\n                    } else {\n                        fs._exit(_nativeFullscreen.callback);\n                    }\n                };\n                doc.addEventListener('fullscreenchange', handler, false);\n                doc.addEventListener('MSFullscreenChange', handler, false);\n                doc.addEventListener('mozfullscreenchange', handler, false);\n                doc.addEventListener('webkitfullscreenchange', handler, false);\n            }\n        },\n\n        // the internal gallery holder\n        _galleries = [],\n\n        // the internal instance holder\n        _instances = [],\n\n        // flag for errors\n        _hasError = false,\n\n        // canvas holder\n        _canvas = false,\n\n        // instance pool, holds the galleries until themeLoad is triggered\n        _pool = [],\n\n        // Run galleries from theme trigger\n        _loadedThemes = [],\n        _themeLoad = function(theme) {\n\n            _loadedThemes.push(theme);\n\n            // run the instances we have in the pool\n            // and apply the last theme if not specified\n            $.each(_pool, function(i, instance) {\n                if (instance._options.theme == theme.name || (!instance._initialized && !instance._options.theme)) {\n                    instance.theme = theme;\n                    instance._init.call(instance);\n                }\n            });\n        },\n\n        // the Utils singleton\n        Utils = (function() {\n\n            return {\n\n                // legacy support for clearTimer\n                clearTimer: function(id) {\n                    $.each(Galleria.get(), function() {\n                        this.clearTimer(id);\n                    });\n                },\n\n                // legacy support for addTimer\n                addTimer: function(id) {\n                    $.each(Galleria.get(), function() {\n                        this.addTimer(id);\n                    });\n                },\n\n                array: function(obj) {\n                    return protoArray.slice.call(obj, 0);\n                },\n\n                create: function(className, nodeName) {\n                    nodeName = nodeName || 'div';\n                    var elem = doc.createElement(nodeName);\n                    elem.className = className;\n                    return elem;\n                },\n\n                removeFromArray: function(arr, elem) {\n                    $.each(arr, function(i, el) {\n                        if (el == elem) {\n                            arr.splice(i, 1);\n                            return false;\n                        }\n                    });\n                    return arr;\n                },\n\n                getScriptPath: function(src) {\n\n                    // the currently executing script is always the last\n                    src = src || $('script:last').attr('src');\n                    var slices = src.split('/');\n\n                    if (slices.length == 1) {\n                        return '';\n                    }\n\n                    slices.pop();\n\n                    return slices.join('/') + '/';\n                },\n\n                // CSS3 transitions, added in 1.2.4\n                animate: (function() {\n\n                    // detect transition\n                    var transition = (function(style) {\n                        var props = 'transition WebkitTransition MozTransition OTransition'.split(' '),\n                            i;\n\n                        // disable css3 animations in opera until stable\n                        if (window.opera) {\n                            return false;\n                        }\n\n                        for (i = 0; props[i]; i++) {\n                            if (typeof style[props[i]] !== 'undefined') {\n                                return props[i];\n                            }\n                        }\n                        return false;\n                    }((doc.body || doc.documentElement).style));\n\n                    // map transitionend event\n                    var endEvent = {\n                        MozTransition: 'transitionend',\n                        OTransition: 'oTransitionEnd',\n                        WebkitTransition: 'webkitTransitionEnd',\n                        transition: 'transitionend'\n                    }[transition];\n\n                    // map bezier easing conversions\n                    var easings = {\n                        _default: [0.25, 0.1, 0.25, 1],\n                        galleria: [0.645, 0.045, 0.355, 1],\n                        galleriaIn: [0.55, 0.085, 0.68, 0.53],\n                        galleriaOut: [0.25, 0.46, 0.45, 0.94],\n                        ease: [0.25, 0, 0.25, 1],\n                        linear: [0.25, 0.25, 0.75, 0.75],\n                        'ease-in': [0.42, 0, 1, 1],\n                        'ease-out': [0, 0, 0.58, 1],\n                        'ease-in-out': [0.42, 0, 0.58, 1]\n                    };\n\n                    // function for setting transition css for all browsers\n                    var setStyle = function(elem, value, suffix) {\n                        var css = {};\n                        suffix = suffix || 'transition';\n                        $.each('webkit moz ms o'.split(' '), function() {\n                            css['-' + this + '-' + suffix] = value;\n                        });\n                        elem.css(css);\n                    };\n\n                    // clear styles\n                    var clearStyle = function(elem) {\n                        setStyle(elem, 'none', 'transition');\n                        if (Galleria.WEBKIT && Galleria.TOUCH) {\n                            setStyle(elem, 'translate3d(0,0,0)', 'transform');\n                            if (elem.data('revert')) {\n                                elem.css(elem.data('revert'));\n                                elem.data('revert', null);\n                            }\n                        }\n                    };\n\n                    // various variables\n                    var change, strings, easing, syntax, revert, form, css;\n\n                    // the actual animation method\n                    return function(elem, to, options) {\n\n                        // extend defaults\n                        options = $.extend({\n                            duration: 400,\n                            complete: F,\n                            stop: false\n                        }, options);\n\n                        // cache jQuery instance\n                        elem = $(elem);\n\n                        if (!options.duration) {\n                            elem.css(to);\n                            options.complete.call(elem[0]);\n                            return;\n                        }\n\n                        // fallback to jQuery's animate if transition is not supported\n                        if (!transition) {\n                            elem.animate(to, options);\n                            return;\n                        }\n\n                        // stop\n                        if (options.stop) {\n                            // clear the animation\n                            elem.off(endEvent);\n                            clearStyle(elem);\n                        }\n\n                        // see if there is a change\n                        change = false;\n                        $.each(to, function(key, val) {\n                            css = elem.css(key);\n                            if (Utils.parseValue(css) != Utils.parseValue(val)) {\n                                change = true;\n                            }\n                            // also add computed styles for FF\n                            elem.css(key, css);\n                        });\n                        if (!change) {\n                            window.setTimeout(function() {\n                                options.complete.call(elem[0]);\n                            }, options.duration);\n                            return;\n                        }\n\n                        // the css strings to be applied\n                        strings = [];\n\n                        // the easing bezier\n                        easing = options.easing in easings ? easings[options.easing] : easings._default;\n\n                        // the syntax\n                        syntax = ' ' + options.duration + 'ms' + ' cubic-bezier(' + easing.join(',') + ')';\n\n                        // add a tiny timeout so that the browsers catches any css changes before animating\n                        window.setTimeout((function(elem, endEvent, to, syntax) {\n                            return function() {\n\n                                // attach the end event\n                                elem.one(endEvent, (function(elem) {\n                                    return function() {\n\n                                        // clear the animation\n                                        clearStyle(elem);\n\n                                        // run the complete method\n                                        options.complete.call(elem[0]);\n                                    };\n                                }(elem)));\n\n                                // do the webkit translate3d for better performance on iOS\n                                if (Galleria.WEBKIT && Galleria.TOUCH) {\n\n                                    revert = {};\n                                    form = [0, 0, 0];\n\n                                    $.each(['left', 'top'], function(i, m) {\n                                        if (m in to) {\n                                            form[i] = (Utils.parseValue(to[m]) - Utils.parseValue(elem.css(m))) + 'px';\n                                            revert[m] = to[m];\n                                            delete to[m];\n                                        }\n                                    });\n\n                                    if (form[0] || form[1]) {\n\n                                        elem.data('revert', revert);\n\n                                        strings.push('-webkit-transform' + syntax);\n\n                                        // 3d animate\n                                        setStyle(elem, 'translate3d(' + form.join(',') + ')', 'transform');\n                                    }\n                                }\n\n                                // push the animation props\n                                $.each(to, function(p, val) {\n                                    strings.push(p + syntax);\n                                });\n\n                                // set the animation styles\n                                setStyle(elem, strings.join(','));\n\n                                // animate\n                                elem.css(to);\n\n                            };\n                        }(elem, endEvent, to, syntax)), 2);\n                    };\n                }()),\n\n                removeAlpha: function(elem) {\n                    if (elem instanceof jQuery) {\n                        elem = elem[0];\n                    }\n                    if (IE < 9 && elem) {\n\n                        var style = elem.style,\n                            currentStyle = elem.currentStyle,\n                            filter = currentStyle && currentStyle.filter || style.filter || \"\";\n\n                        if (/alpha/.test(filter)) {\n                            style.filter = filter.replace(/alpha\\([^)]*\\)/i, '');\n                        }\n                    }\n                },\n\n                forceStyles: function(elem, styles) {\n                    elem = $(elem);\n                    if (elem.attr('style')) {\n                        elem.data('styles', elem.attr('style')).removeAttr('style');\n                    }\n                    elem.css(styles);\n                },\n\n                revertStyles: function() {\n                    $.each(Utils.array(arguments), function(i, elem) {\n\n                        elem = $(elem);\n                        elem.removeAttr('style');\n\n                        elem.attr('style', ''); // \"fixes\" webkit bug\n\n                        if (elem.data('styles')) {\n                            elem.attr('style', elem.data('styles')).data('styles', null);\n                        }\n                    });\n                },\n\n                moveOut: function(elem) {\n                    Utils.forceStyles(elem, {\n                        position: 'absolute',\n                        left: -10000\n                    });\n                },\n\n                moveIn: function() {\n                    Utils.revertStyles.apply(Utils, Utils.array(arguments));\n                },\n\n                hide: function(elem, speed, callback) {\n\n                    callback = callback || F;\n\n                    var $elem = $(elem);\n                    elem = $elem[0];\n\n                    // save the value if not exist\n                    if (!$elem.data('opacity')) {\n                        $elem.data('opacity', $elem.css('opacity'));\n                    }\n\n                    // always hide\n                    var style = { opacity: 0 };\n\n                    if (speed) {\n\n                        var complete = IE < 9 && elem ? function() {\n                            Utils.removeAlpha(elem);\n                            elem.style.visibility = 'hidden';\n                            callback.call(elem);\n                        } : callback;\n\n                        Utils.animate(elem, style, {\n                            duration: speed,\n                            complete: complete,\n                            stop: true\n                        });\n                    } else {\n                        if (IE < 9 && elem) {\n                            Utils.removeAlpha(elem);\n                            elem.style.visibility = 'hidden';\n                        } else {\n                            $elem.css(style);\n                        }\n                    }\n                },\n\n                show: function(elem, speed, callback) {\n\n                    callback = callback || F;\n\n                    var $elem = $(elem);\n                    elem = $elem[0];\n\n                    // bring back saved opacity\n                    var saved = parseFloat($elem.data('opacity')) || 1,\n                        style = { opacity: saved };\n\n                    // animate or toggle\n                    if (speed) {\n\n                        if (IE < 9) {\n                            $elem.css('opacity', 0);\n                            elem.style.visibility = 'visible';\n                        }\n\n                        var complete = IE < 9 && elem ? function() {\n                            if (style.opacity == 1) {\n                                Utils.removeAlpha(elem);\n                            }\n                            callback.call(elem);\n                        } : callback;\n\n                        Utils.animate(elem, style, {\n                            duration: speed,\n                            complete: complete,\n                            stop: true\n                        });\n                    } else {\n                        if (IE < 9 && style.opacity == 1 && elem) {\n                            Utils.removeAlpha(elem);\n                            elem.style.visibility = 'visible';\n                        } else {\n                            $elem.css(style);\n                        }\n                    }\n                },\n\n                wait: function(options) {\n\n                    Galleria._waiters = Galleria._waiters || [];\n\n                    options = $.extend({\n                        until: FALSE,\n                        success: F,\n                        error: function() { Galleria.raise('Could not complete wait function.'); },\n                        timeout: 3000\n                    }, options);\n\n                    var start = Utils.timestamp(),\n                        elapsed,\n                        now,\n                        tid,\n                        fn = function() {\n                            now = Utils.timestamp();\n                            elapsed = now - start;\n                            Utils.removeFromArray(Galleria._waiters, tid);\n                            if (options.until(elapsed)) {\n                                options.success();\n                                return false;\n                            }\n                            if (typeof options.timeout == 'number' && now >= start + options.timeout) {\n                                options.error();\n                                return false;\n                            }\n                            Galleria._waiters.push(tid = window.setTimeout(fn, 10));\n                        };\n                    Galleria._waiters.push(tid = window.setTimeout(fn, 10));\n                },\n\n                toggleQuality: function(img, force) {\n\n                    if ((IE !== 7 && IE !== 8) || !img || img.nodeName.toUpperCase() != 'IMG') {\n                        return;\n                    }\n\n                    if (typeof force === 'undefined') {\n                        force = img.style.msInterpolationMode === 'nearest-neighbor';\n                    }\n\n                    img.style.msInterpolationMode = force ? 'bicubic' : 'nearest-neighbor';\n                },\n\n                insertStyleTag: function(styles, id) {\n\n                    if (id && $('#' + id).length) {\n                        return;\n                    }\n\n                    var style = doc.createElement('style');\n                    if (id) {\n                        style.id = id;\n                    }\n\n                    DOM().head.appendChild(style);\n\n                    if (style.styleSheet) { // IE\n                        style.styleSheet.cssText = styles;\n                    } else {\n                        var cssText = doc.createTextNode(styles);\n                        style.appendChild(cssText);\n                    }\n                },\n\n                // a loadscript method that works for local scripts\n                loadScript: function(url, callback) {\n\n                    var done = false,\n                        script = $('<scr' + 'ipt>').attr({\n                            src: url,\n                            async: true\n                        }).get(0);\n\n                    // Attach handlers for all browsers\n                    script.onload = script.onreadystatechange = function() {\n                        if (!done && (!this.readyState ||\n                                this.readyState === 'loaded' || this.readyState === 'complete')) {\n\n                            done = true;\n\n                            // Handle memory leak in IE\n                            script.onload = script.onreadystatechange = null;\n\n                            if (typeof callback === 'function') {\n                                callback.call(this, this);\n                            }\n                        }\n                    };\n\n                    DOM().head.appendChild(script);\n                },\n\n                // parse anything into a number\n                parseValue: function(val) {\n                    if (typeof val === 'number') {\n                        return val;\n                    } else if (typeof val === 'string') {\n                        var arr = val.match(/\\-?\\d|\\./g);\n                        return arr && arr.constructor === Array ? arr.join('') * 1 : 0;\n                    } else {\n                        return 0;\n                    }\n                },\n\n                // timestamp abstraction\n                timestamp: function() {\n                    return new Date().getTime();\n                },\n\n                loadCSS: function(href, id, callback) {\n\n                    var link,\n                        length;\n\n                    // look for manual css\n                    $('link[rel=stylesheet]').each(function() {\n                        if (new RegExp(href).test(this.href)) {\n                            link = this;\n                            return false;\n                        }\n                    });\n\n                    if (typeof id === 'function') {\n                        callback = id;\n                        id = undef;\n                    }\n\n                    callback = callback || F; // dirty\n\n                    // if already present, return\n                    if (link) {\n                        callback.call(link, link);\n                        return link;\n                    }\n\n                    // save the length of stylesheets to check against\n                    length = doc.styleSheets.length;\n\n                    // check for existing id\n                    if ($('#' + id).length) {\n\n                        $('#' + id).attr('href', href);\n                        length--;\n\n                    } else {\n                        link = $('<link>').attr({\n                            rel: 'stylesheet',\n                            href: href,\n                            id: id\n                        }).get(0);\n\n                        var styles = $('link[rel=\"stylesheet\"], style');\n                        if (styles.length) {\n                            styles.get(0).parentNode.insertBefore(link, styles[0]);\n                        } else {\n                            DOM().head.appendChild(link);\n                        }\n\n                        if (IE && length >= 31) {\n                            Galleria.raise('You have reached the browser stylesheet limit (31)', true);\n                            return;\n                        }\n                    }\n\n                    if (typeof callback === 'function') {\n\n                        // First check for dummy element (new in 1.2.8)\n                        var $loader = $('<s>').attr('id', 'galleria-loader').hide().appendTo(DOM().body);\n\n                        Utils.wait({\n                            until: function() {\n                                return $loader.height() == 1;\n                            },\n                            success: function() {\n                                $loader.remove();\n                                callback.call(link, link);\n                            },\n                            error: function() {\n                                $loader.remove();\n\n                                // If failed, tell the dev to download the latest theme\n                                Galleria.raise('Theme CSS could not load after 20 sec. ' + (Galleria.QUIRK ?\n                                    'Your browser is in Quirks Mode, please add a correct doctype.' :\n                                    'Please download the latest theme at http://galleria.io/customer/.'), true);\n                            },\n                            timeout: 5000\n                        });\n                    }\n                    return link;\n                }\n            };\n        }()),\n\n        // play icon\n        _playIcon = function(container) {\n\n            var css = '.galleria-videoicon{width:60px;height:60px;position:absolute;top:50%;left:50%;z-index:1;' +\n                'margin:-30px 0 0 -30px;cursor:pointer;background:#000;background:rgba(0,0,0,.8);border-radius:3px;-webkit-transition:all 150ms}' +\n                '.galleria-videoicon i{width:0px;height:0px;border-style:solid;border-width:10px 0 10px 16px;display:block;' +\n                'border-color:transparent transparent transparent #ffffff;margin:20px 0 0 22px}.galleria-image:hover .galleria-videoicon{background:#000}';\n\n            Utils.insertStyleTag(css, 'galleria-videoicon');\n\n            return $(Utils.create('galleria-videoicon')).html('<i></i>').appendTo(container)\n                .click(function() { $(this).siblings('img').mouseup(); });\n        },\n\n        // the transitions holder\n        _transitions = (function() {\n\n            var _slide = function(params, complete, fade, door) {\n\n                var easing = this.getOptions('easing'),\n                    distance = this.getStageWidth(),\n                    from = { left: distance * (params.rewind ? -1 : 1) },\n                    to = { left: 0 };\n\n                if (fade) {\n                    from.opacity = 0;\n                    to.opacity = 1;\n                } else {\n                    from.opacity = 1;\n                }\n\n                $(params.next).css(from);\n\n                Utils.animate(params.next, to, {\n                    duration: params.speed,\n                    complete: (function(elems) {\n                        return function() {\n                            complete();\n                            elems.css({\n                                left: 0\n                            });\n                        };\n                    }($(params.next).add(params.prev))),\n                    queue: false,\n                    easing: easing\n                });\n\n                if (door) {\n                    params.rewind = !params.rewind;\n                }\n\n                if (params.prev) {\n\n                    from = { left: 0 };\n                    to = { left: distance * (params.rewind ? 1 : -1) };\n\n                    if (fade) {\n                        from.opacity = 1;\n                        to.opacity = 0;\n                    }\n\n                    $(params.prev).css(from);\n                    Utils.animate(params.prev, to, {\n                        duration: params.speed,\n                        queue: false,\n                        easing: easing,\n                        complete: function() {\n                            $(this).css('opacity', 0);\n                        }\n                    });\n                }\n            };\n\n            return {\n\n                active: false,\n\n                init: function(effect, params, complete) {\n                    if (_transitions.effects.hasOwnProperty(effect)) {\n                        _transitions.effects[effect].call(this, params, complete);\n                    }\n                },\n\n                effects: {\n\n                    fade: function(params, complete) {\n                        $(params.next).css({\n                            opacity: 0,\n                            left: 0\n                        });\n                        Utils.animate(params.next, {\n                            opacity: 1\n                        }, {\n                            duration: params.speed,\n                            complete: complete\n                        });\n                        if (params.prev) {\n                            $(params.prev).css('opacity', 1).show();\n                            Utils.animate(params.prev, {\n                                opacity: 0\n                            }, {\n                                duration: params.speed\n                            });\n                        }\n                    },\n\n                    flash: function(params, complete) {\n                        $(params.next).css({\n                            opacity: 0,\n                            left: 0\n                        });\n                        if (params.prev) {\n                            Utils.animate(params.prev, {\n                                opacity: 0\n                            }, {\n                                duration: params.speed / 2,\n                                complete: function() {\n                                    Utils.animate(params.next, {\n                                        opacity: 1\n                                    }, {\n                                        duration: params.speed,\n                                        complete: complete\n                                    });\n                                }\n                            });\n                        } else {\n                            Utils.animate(params.next, {\n                                opacity: 1\n                            }, {\n                                duration: params.speed,\n                                complete: complete\n                            });\n                        }\n                    },\n\n                    pulse: function(params, complete) {\n                        if (params.prev) {\n                            $(params.prev).hide();\n                        }\n                        $(params.next).css({\n                            opacity: 0,\n                            left: 0\n                        }).show();\n                        Utils.animate(params.next, {\n                            opacity: 1\n                        }, {\n                            duration: params.speed,\n                            complete: complete\n                        });\n                    },\n\n                    slide: function(params, complete) {\n                        _slide.apply(this, Utils.array(arguments));\n                    },\n\n                    fadeslide: function(params, complete) {\n                        _slide.apply(this, Utils.array(arguments).concat([true]));\n                    },\n\n                    doorslide: function(params, complete) {\n                        _slide.apply(this, Utils.array(arguments).concat([false, true]));\n                    }\n                }\n            };\n        }());\n\n    // listen to fullscreen\n    _nativeFullscreen.listen();\n\n    // create special click:fast event for fast touch interaction\n    $.event.special['click:fast'] = {\n        propagate: true,\n        add: function(handleObj) {\n\n            var getCoords = function(e) {\n                if (e.touches && e.touches.length) {\n                    var touch = e.touches[0];\n                    return {\n                        x: touch.pageX,\n                        y: touch.pageY\n                    };\n                }\n            };\n\n            var def = {\n                touched: false,\n                touchdown: false,\n                coords: { x: 0, y: 0 },\n                evObj: {}\n            };\n\n            $(this).data({\n                clickstate: def,\n                timer: 0\n            }).on('touchstart.fast', function(e) {\n                window.clearTimeout($(this).data('timer'));\n                $(this).data('clickstate', {\n                    touched: true,\n                    touchdown: true,\n                    coords: getCoords(e.originalEvent),\n                    evObj: e\n                });\n            }).on('touchmove.fast', function(e) {\n                var coords = getCoords(e.originalEvent),\n                    state = $(this).data('clickstate'),\n                    distance = Math.max(\n                        Math.abs(state.coords.x - coords.x),\n                        Math.abs(state.coords.y - coords.y)\n                    );\n                if (distance > 6) {\n                    $(this).data('clickstate', $.extend(state, {\n                        touchdown: false\n                    }));\n                }\n            }).on('touchend.fast', function(e) {\n                var $this = $(this),\n                    state = $this.data('clickstate');\n                if (state.touchdown) {\n                    handleObj.handler.call(this, e);\n                }\n                $this.data('timer', window.setTimeout(function() {\n                    $this.data('clickstate', def);\n                }, 400));\n            }).on('click.fast', function(e) {\n                var state = $(this).data('clickstate');\n                if (state.touched) {\n                    return false;\n                }\n                $(this).data('clickstate', def);\n                handleObj.handler.call(this, e);\n            });\n        },\n        remove: function() {\n            $(this).off('touchstart.fast touchmove.fast touchend.fast click.fast');\n        }\n    };\n\n    // trigger resize on orientationchange (IOS7)\n    $win.on('orientationchange', function() {\n        $(this).resize();\n    });\n\n    /**\n        The main Galleria class\n\n        @class\n        @constructor\n\n        @example var gallery = new Galleria();\n\n        @author http://wib.io\n\n        @requires jQuery\n\n    */\n\n    Galleria = function() {\n\n        var self = this;\n\n        // internal options\n        this._options = {};\n\n        // flag for controlling play/pause\n        this._playing = false;\n\n        // internal interval for slideshow\n        this._playtime = 5000;\n\n        // internal variable for the currently active image\n        this._active = null;\n\n        // the internal queue, arrayified\n        this._queue = { length: 0 };\n\n        // the internal data array\n        this._data = [];\n\n        // the internal dom collection\n        this._dom = {};\n\n        // the internal thumbnails array\n        this._thumbnails = [];\n\n        // the internal layers array\n        this._layers = [];\n\n        // internal init flag\n        this._initialized = false;\n\n        // internal firstrun flag\n        this._firstrun = false;\n\n        // global stagewidth/height\n        this._stageWidth = 0;\n        this._stageHeight = 0;\n\n        // target holder\n        this._target = undef;\n\n        // bind hashes\n        this._binds = [];\n\n        // instance id\n        this._id = parseInt(M.random() * 10000, 10);\n\n        // add some elements\n        var divs = 'container stage images image-nav image-nav-left image-nav-right ' +\n            'info info-text info-title info-description ' +\n            'thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right ' +\n            'loader counter tooltip',\n            spans = 'current total';\n\n        $.each(divs.split(' '), function(i, elemId) {\n            self._dom[elemId] = Utils.create('galleria-' + elemId);\n        });\n\n        $.each(spans.split(' '), function(i, elemId) {\n            self._dom[elemId] = Utils.create('galleria-' + elemId, 'span');\n        });\n\n        // the internal keyboard object\n        // keeps reference of the keybinds and provides helper methods for binding keys\n        var keyboard = this._keyboard = {\n\n            keys: {\n                'UP': 38,\n                'DOWN': 40,\n                'LEFT': 37,\n                'RIGHT': 39,\n                'RETURN': 13,\n                'ESCAPE': 27,\n                'BACKSPACE': 8,\n                'SPACE': 32\n            },\n\n            map: {},\n\n            bound: false,\n\n            press: function(e) {\n                var key = e.keyCode || e.which;\n                if (key in keyboard.map && typeof keyboard.map[key] === 'function') {\n                    keyboard.map[key].call(self, e);\n                }\n            },\n\n            attach: function(map) {\n\n                var key, up;\n\n                for (key in map) {\n                    if (map.hasOwnProperty(key)) {\n                        up = key.toUpperCase();\n                        if (up in keyboard.keys) {\n                            keyboard.map[keyboard.keys[up]] = map[key];\n                        } else {\n                            keyboard.map[up] = map[key];\n                        }\n                    }\n                }\n                if (!keyboard.bound) {\n                    keyboard.bound = true;\n                    $doc.on('keydown', keyboard.press);\n                }\n            },\n\n            detach: function() {\n                keyboard.bound = false;\n                keyboard.map = {};\n                $doc.off('keydown', keyboard.press);\n            }\n        };\n\n        // internal controls for keeping track of active / inactive images\n        var controls = this._controls = {\n\n            0: undef,\n\n            1: undef,\n\n            active: 0,\n\n            swap: function() {\n                controls.active = controls.active ? 0 : 1;\n            },\n\n            getActive: function() {\n                return self._options.swipe ? controls.slides[self._active] : controls[controls.active];\n            },\n\n            getNext: function() {\n                return self._options.swipe ? controls.slides[self.getNext(self._active)] : controls[1 - controls.active];\n            },\n\n            slides: [],\n\n            frames: [],\n\n            layers: []\n        };\n\n        // internal carousel object\n        var carousel = this._carousel = {\n\n            // shortcuts\n            next: self.$('thumb-nav-right'),\n            prev: self.$('thumb-nav-left'),\n\n            // cache the width\n            width: 0,\n\n            // track the current position\n            current: 0,\n\n            // cache max value\n            max: 0,\n\n            // save all hooks for each width in an array\n            hooks: [],\n\n            // update the carousel\n            // you can run this method anytime, f.ex on window.resize\n            update: function() {\n                var w = 0,\n                    h = 0,\n                    hooks = [0];\n\n                $.each(self._thumbnails, function(i, thumb) {\n                    if (thumb.ready) {\n                        w += thumb.outerWidth || $(thumb.container).outerWidth(true);\n                        // Due to a bug in jquery, outerwidth() returns the floor of the actual outerwidth,\n                        // if the browser is zoom to a value other than 100%. height() returns the floating point value.\n                        var containerWidth = $(thumb.container).width();\n                        w += containerWidth - M.floor(containerWidth);\n\n                        hooks[i + 1] = w;\n                        h = M.max(h, thumb.outerHeight || $(thumb.container).outerHeight(true));\n                    }\n                });\n\n                self.$('thumbnails').css({\n                    width: w,\n                    height: h\n                });\n\n                carousel.max = w;\n                carousel.hooks = hooks;\n                carousel.width = self.$('thumbnails-list').width();\n                carousel.setClasses();\n\n                self.$('thumbnails-container').toggleClass('galleria-carousel', w > carousel.width);\n\n                // one extra calculation\n                carousel.width = self.$('thumbnails-list').width();\n\n                // todo: fix so the carousel moves to the left\n            },\n\n            bindControls: function() {\n\n                var i;\n\n                carousel.next.on('click:fast', function(e) {\n                    e.preventDefault();\n\n                    if (self._options.carouselSteps === 'auto') {\n\n                        for (i = carousel.current; i < carousel.hooks.length; i++) {\n                            if (carousel.hooks[i] - carousel.hooks[carousel.current] > carousel.width) {\n                                carousel.set(i - 2);\n                                break;\n                            }\n                        }\n\n                    } else {\n                        carousel.set(carousel.current + self._options.carouselSteps);\n                    }\n                });\n\n                carousel.prev.on('click:fast', function(e) {\n                    e.preventDefault();\n\n                    if (self._options.carouselSteps === 'auto') {\n\n                        for (i = carousel.current; i >= 0; i--) {\n                            if (carousel.hooks[carousel.current] - carousel.hooks[i] > carousel.width) {\n                                carousel.set(i + 2);\n                                break;\n                            } else if (i === 0) {\n                                carousel.set(0);\n                                break;\n                            }\n                        }\n                    } else {\n                        carousel.set(carousel.current - self._options.carouselSteps);\n                    }\n                });\n            },\n\n            // calculate and set positions\n            set: function(i) {\n                i = M.max(i, 0);\n                while (carousel.hooks[i - 1] + carousel.width >= carousel.max && i >= 0) {\n                    i--;\n                }\n                carousel.current = i;\n                carousel.animate();\n            },\n\n            // get the last position\n            getLast: function(i) {\n                return (i || carousel.current) - 1;\n            },\n\n            // follow the active image\n            follow: function(i) {\n\n                //don't follow if position fits\n                if (i === 0 || i === carousel.hooks.length - 2) {\n                    carousel.set(i);\n                    return;\n                }\n\n                // calculate last position\n                var last = carousel.current;\n                while (carousel.hooks[last] - carousel.hooks[carousel.current] <\n                    carousel.width && last <= carousel.hooks.length) {\n                    last++;\n                }\n\n                // set position\n                if (i - 1 < carousel.current) {\n                    carousel.set(i - 1);\n                } else if (i + 2 > last) {\n                    carousel.set(i - last + carousel.current + 2);\n                }\n            },\n\n            // helper for setting disabled classes\n            setClasses: function() {\n                carousel.prev.toggleClass('disabled', !carousel.current);\n                carousel.next.toggleClass('disabled', carousel.hooks[carousel.current] + carousel.width >= carousel.max);\n            },\n\n            // the animation method\n            animate: function(to) {\n                carousel.setClasses();\n                var num = carousel.hooks[carousel.current] * -1;\n\n                if (isNaN(num)) {\n                    return;\n                }\n\n                // FF 24 bug\n                self.$('thumbnails').css('left', function() {\n                    return $(this).css('left');\n                });\n\n                Utils.animate(self.get('thumbnails'), {\n                    left: num\n                }, {\n                    duration: self._options.carouselSpeed,\n                    easing: self._options.easing,\n                    queue: false\n                });\n            }\n        };\n\n        // tooltip control\n        // added in 1.2\n        var tooltip = this._tooltip = {\n\n            initialized: false,\n\n            open: false,\n\n            timer: 'tooltip' + self._id,\n\n            swapTimer: 'swap' + self._id,\n\n            init: function() {\n\n                tooltip.initialized = true;\n\n                var css = '.galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;' +\n                    'opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}';\n\n                Utils.insertStyleTag(css, 'galleria-tooltip');\n\n                self.$('tooltip').css({\n                    opacity: 0.8,\n                    visibility: 'visible',\n                    display: 'none'\n                });\n\n            },\n\n            // move handler\n            move: function(e) {\n                var mouseX = self.getMousePosition(e).x,\n                    mouseY = self.getMousePosition(e).y,\n                    $elem = self.$('tooltip'),\n                    x = mouseX,\n                    y = mouseY,\n                    height = $elem.outerHeight(true) + 1,\n                    width = $elem.outerWidth(true),\n                    limitY = height + 15;\n\n                var maxX = self.$('container').width() - width - 2,\n                    maxY = self.$('container').height() - height - 2;\n\n                if (!isNaN(x) && !isNaN(y)) {\n\n                    x += 10;\n                    y -= (height + 8);\n\n                    x = M.max(0, M.min(maxX, x));\n                    y = M.max(0, M.min(maxY, y));\n\n                    if (mouseY < limitY) {\n                        y = limitY;\n                    }\n\n                    $elem.css({ left: x, top: y });\n                }\n            },\n\n            // bind elements to the tooltip\n            // you can bind multiple elementIDs using { elemID : function } or { elemID : string }\n            // you can also bind single DOM elements using bind(elem, string)\n            bind: function(elem, value) {\n\n                // todo: revise if alternative tooltip is needed for mobile devices\n                if (Galleria.TOUCH) {\n                    return;\n                }\n\n                if (!tooltip.initialized) {\n                    tooltip.init();\n                }\n\n                var mouseout = function() {\n                    self.$('container').off('mousemove', tooltip.move);\n                    self.clearTimer(tooltip.timer);\n\n                    self.$('tooltip').stop().animate({\n                        opacity: 0\n                    }, 200, function() {\n\n                        self.$('tooltip').hide();\n\n                        self.addTimer(tooltip.swapTimer, function() {\n                            tooltip.open = false;\n                        }, 1000);\n                    });\n                };\n\n                var hover = function(elem, value) {\n\n                    tooltip.define(elem, value);\n\n                    $(elem).hover(function() {\n\n                        self.clearTimer(tooltip.swapTimer);\n                        self.$('container').off('mousemove', tooltip.move).on('mousemove', tooltip.move).trigger('mousemove');\n                        tooltip.show(elem);\n\n                        self.addTimer(tooltip.timer, function() {\n                            self.$('tooltip').stop().show().animate({\n                                opacity: 1\n                            });\n                            tooltip.open = true;\n\n                        }, tooltip.open ? 0 : 500);\n\n                    }, mouseout).click(mouseout);\n                };\n\n                if (typeof value === 'string') {\n                    hover((elem in self._dom ? self.get(elem) : elem), value);\n                } else {\n                    // asume elemID here\n                    $.each(elem, function(elemID, val) {\n                        hover(self.get(elemID), val);\n                    });\n                }\n            },\n\n            show: function(elem) {\n\n                elem = $(elem in self._dom ? self.get(elem) : elem);\n\n                var text = elem.data('tt'),\n                    mouseup = function(e) {\n\n                        // attach a tiny settimeout to make sure the new tooltip is filled\n                        window.setTimeout((function(ev) {\n                            return function() {\n                                tooltip.move(ev);\n                            };\n                        }(e)), 10);\n\n                        elem.off('mouseup', mouseup);\n\n                    };\n\n                text = typeof text === 'function' ? text() : text;\n\n                if (!text) {\n                    return;\n                }\n\n                self.$('tooltip').html(text.replace(/\\s/, '&#160;'));\n\n                // trigger mousemove on mouseup in case of click\n                elem.on('mouseup', mouseup);\n            },\n\n            define: function(elem, value) {\n\n                // we store functions, not strings\n                if (typeof value !== 'function') {\n                    var s = value;\n                    value = function() {\n                        return s;\n                    };\n                }\n\n                elem = $(elem in self._dom ? self.get(elem) : elem).data('tt', value);\n\n                tooltip.show(elem);\n\n            }\n        };\n\n        // internal fullscreen control\n        var fullscreen = this._fullscreen = {\n\n            scrolled: 0,\n\n            crop: undef,\n\n            active: false,\n\n            prev: $(),\n\n            beforeEnter: function(fn) { fn(); },\n            beforeExit: function(fn) { fn(); },\n\n            keymap: self._keyboard.map,\n\n            parseCallback: function(callback, enter) {\n\n                return _transitions.active ? function() {\n                    if (typeof callback == 'function') {\n                        callback.call(self);\n                    }\n                    var active = self._controls.getActive(),\n                        next = self._controls.getNext();\n\n                    self._scaleImage(next);\n                    self._scaleImage(active);\n\n                    if (enter && self._options.trueFullscreen) {\n                        // Firefox bug, revise later\n                        $(active.container).add(next.container).trigger('transitionend');\n                    }\n\n                } : callback;\n\n            },\n\n            enter: function(callback) {\n\n                fullscreen.beforeEnter(function() {\n\n                    callback = fullscreen.parseCallback(callback, true);\n\n                    if (self._options.trueFullscreen && _nativeFullscreen.support) {\n\n                        // do some stuff prior animation for wmoother transitions\n\n                        fullscreen.active = true;\n\n                        Utils.forceStyles(self.get('container'), {\n                            width: '100%',\n                            height: '100%'\n                        });\n\n                        self.rescale();\n\n                        if (Galleria.MAC) {\n                            if (!(Galleria.SAFARI && /version\\/[1-5]/.test(NAV))) {\n                                self.$('container').css('opacity', 0).addClass('fullscreen');\n                                window.setTimeout(function() {\n                                    fullscreen.scale();\n                                    self.$('container').css('opacity', 1);\n                                }, 50);\n                            } else {\n                                self.$('stage').css('opacity', 0);\n                                window.setTimeout(function() {\n                                    fullscreen.scale();\n                                    self.$('stage').css('opacity', 1);\n                                }, 4);\n                            }\n                        } else {\n                            self.$('container').addClass('fullscreen');\n                        }\n\n                        $win.resize(fullscreen.scale);\n\n                        _nativeFullscreen.enter(self, callback, self.get('container'));\n\n                    } else {\n\n                        fullscreen.scrolled = $win.scrollTop();\n                        if (!Galleria.TOUCH) {\n                            window.scrollTo(0, 0);\n                        }\n\n                        fullscreen._enter(callback);\n                    }\n                });\n\n            },\n\n            _enter: function(callback) {\n\n                fullscreen.active = true;\n\n                if (IFRAME) {\n\n                    fullscreen.iframe = (function() {\n\n                        var elem,\n                            refer = doc.referrer,\n                            test = doc.createElement('a'),\n                            loc = window.location;\n\n                        test.href = refer;\n\n                        if (test.protocol != loc.protocol ||\n                            test.hostname != loc.hostname ||\n                            test.port != loc.port) {\n                            Galleria.raise('Parent fullscreen not available. Iframe protocol, domains and ports must match.');\n                            return false;\n                        }\n\n                        fullscreen.pd = window.parent.document;\n\n                        $(fullscreen.pd).find('iframe').each(function() {\n                            var idoc = this.contentDocument || this.contentWindow.document;\n                            if (idoc === doc) {\n                                elem = this;\n                                return false;\n                            }\n                        });\n\n                        return elem;\n                    }());\n\n                }\n\n                // hide the image until rescale is complete\n                Utils.hide(self.getActiveImage());\n\n                if (IFRAME && fullscreen.iframe) {\n                    fullscreen.iframe.scrolled = $(window.parent).scrollTop();\n                    window.parent.scrollTo(0, 0);\n                }\n\n                var data = self.getData(),\n                    options = self._options,\n                    inBrowser = !self._options.trueFullscreen || !_nativeFullscreen.support,\n                    htmlbody = {\n                        height: '100%',\n                        overflow: 'hidden',\n                        margin: 0,\n                        padding: 0\n                    };\n\n                if (inBrowser) {\n\n                    self.$('container').addClass('fullscreen');\n                    fullscreen.prev = self.$('container').prev();\n\n                    if (!fullscreen.prev.length) {\n                        fullscreen.parent = self.$('container').parent();\n                    }\n\n                    // move\n                    self.$('container').appendTo('body');\n\n                    // begin styleforce\n\n                    Utils.forceStyles(self.get('container'), {\n                        position: Galleria.TOUCH ? 'absolute' : 'fixed',\n                        top: 0,\n                        left: 0,\n                        width: '100%',\n                        height: '100%',\n                        zIndex: 10000\n                    });\n                    Utils.forceStyles(DOM().html, htmlbody);\n                    Utils.forceStyles(DOM().body, htmlbody);\n                }\n\n                if (IFRAME && fullscreen.iframe) {\n                    Utils.forceStyles(fullscreen.pd.documentElement, htmlbody);\n                    Utils.forceStyles(fullscreen.pd.body, htmlbody);\n                    Utils.forceStyles(fullscreen.iframe, $.extend(htmlbody, {\n                        width: '100%',\n                        height: '100%',\n                        top: 0,\n                        left: 0,\n                        position: 'fixed',\n                        zIndex: 10000,\n                        border: 'none'\n                    }));\n                }\n\n                // temporarily attach some keys\n                // save the old ones first in a cloned object\n                fullscreen.keymap = $.extend({}, self._keyboard.map);\n\n                self.attachKeyboard({\n                    escape: self.exitFullscreen,\n                    right: self.next,\n                    left: self.prev\n                });\n\n                // temporarily save the crop\n                fullscreen.crop = options.imageCrop;\n\n                // set fullscreen options\n                if (options.fullscreenCrop != undef) {\n                    options.imageCrop = options.fullscreenCrop;\n                }\n\n                // swap to big image if it's different from the display image\n                if (data && data.big && data.image !== data.big) {\n                    var big = new Galleria.Picture(),\n                        cached = big.isCached(data.big),\n                        index = self.getIndex(),\n                        thumb = self._thumbnails[index];\n\n                    self.trigger({\n                        type: Galleria.LOADSTART,\n                        cached: cached,\n                        rewind: false,\n                        index: index,\n                        imageTarget: self.getActiveImage(),\n                        thumbTarget: thumb,\n                        galleriaData: data\n                    });\n\n                    big.load(data.big, function(big) {\n                        self._scaleImage(big, {\n                            complete: function(big) {\n                                self.trigger({\n                                    type: Galleria.LOADFINISH,\n                                    cached: cached,\n                                    index: index,\n                                    rewind: false,\n                                    imageTarget: big.image,\n                                    thumbTarget: thumb\n                                });\n                                var image = self._controls.getActive().image;\n                                if (image) {\n                                    $(image).width(big.image.width).height(big.image.height)\n                                        .attr('style', $(big.image).attr('style'))\n                                        .attr('src', big.image.src);\n                                }\n                            }\n                        });\n                    });\n\n                    var n = self.getNext(index),\n                        p = new Galleria.Picture(),\n                        ndata = self.getData(n);\n                    p.preload(self.isFullscreen() && ndata.big ? ndata.big : ndata.image);\n                }\n\n                // init the first rescale and attach callbacks\n\n                self.rescale(function() {\n\n                    self.addTimer(false, function() {\n                        // show the image after 50 ms\n                        if (inBrowser) {\n                            Utils.show(self.getActiveImage());\n                        }\n\n                        if (typeof callback === 'function') {\n                            callback.call(self);\n                        }\n                        self.rescale();\n\n                    }, 100);\n\n                    self.trigger(Galleria.FULLSCREEN_ENTER);\n                });\n\n                if (!inBrowser) {\n                    Utils.show(self.getActiveImage());\n                } else {\n                    $win.resize(fullscreen.scale);\n                }\n\n            },\n\n            scale: function() {\n                self.rescale();\n            },\n\n            exit: function(callback) {\n\n                fullscreen.beforeExit(function() {\n\n                    callback = fullscreen.parseCallback(callback);\n\n                    if (self._options.trueFullscreen && _nativeFullscreen.support) {\n                        _nativeFullscreen.exit(callback);\n                    } else {\n                        fullscreen._exit(callback);\n                    }\n                });\n            },\n\n            _exit: function(callback) {\n\n                fullscreen.active = false;\n\n                var inBrowser = !self._options.trueFullscreen || !_nativeFullscreen.support,\n                    $container = self.$('container').removeClass('fullscreen');\n\n                // move back\n                if (fullscreen.parent) {\n                    fullscreen.parent.prepend($container);\n                } else {\n                    $container.insertAfter(fullscreen.prev);\n                }\n\n                if (inBrowser) {\n                    Utils.hide(self.getActiveImage());\n\n                    // revert all styles\n                    Utils.revertStyles(self.get('container'), DOM().html, DOM().body);\n\n                    // scroll back\n                    if (!Galleria.TOUCH) {\n                        window.scrollTo(0, fullscreen.scrolled);\n                    }\n\n                    // reload iframe src manually\n                    var frame = self._controls.frames[self._controls.active];\n                    if (frame && frame.image) {\n                        frame.image.src = frame.image.src;\n                    }\n                }\n\n                if (IFRAME && fullscreen.iframe) {\n                    Utils.revertStyles(fullscreen.pd.documentElement, fullscreen.pd.body, fullscreen.iframe);\n                    if (fullscreen.iframe.scrolled) {\n                        window.parent.scrollTo(0, fullscreen.iframe.scrolled);\n                    }\n                }\n\n                // detach all keyboard events and apply the old keymap\n                self.detachKeyboard();\n                self.attachKeyboard(fullscreen.keymap);\n\n                // bring back cached options\n                self._options.imageCrop = fullscreen.crop;\n\n                // return to original image\n                var big = self.getData().big,\n                    image = self._controls.getActive().image;\n\n                if (!self.getData().iframe && image && big && big == image.src) {\n\n                    window.setTimeout(function(src) {\n                        return function() {\n                            image.src = src;\n                        };\n                    }(self.getData().image), 1);\n\n                }\n\n                self.rescale(function() {\n                    self.addTimer(false, function() {\n\n                        // show the image after 50 ms\n                        if (inBrowser) {\n                            Utils.show(self.getActiveImage());\n                        }\n\n                        if (typeof callback === 'function') {\n                            callback.call(self);\n                        }\n\n                        $win.trigger('resize');\n\n                    }, 50);\n                    self.trigger(Galleria.FULLSCREEN_EXIT);\n                });\n\n                $win.off('resize', fullscreen.scale);\n            }\n        };\n\n        // the internal idle object for controlling idle states\n        var idle = this._idle = {\n\n            trunk: [],\n\n            bound: false,\n\n            active: false,\n\n            add: function(elem, to, from, hide) {\n                if (!elem || Galleria.TOUCH) {\n                    return;\n                }\n                if (!idle.bound) {\n                    idle.addEvent();\n                }\n                elem = $(elem);\n\n                if (typeof from == 'boolean') {\n                    hide = from;\n                    from = {};\n                }\n\n                from = from || {};\n\n                var extract = {},\n                    style;\n\n                for (style in to) {\n                    if (to.hasOwnProperty(style)) {\n                        extract[style] = elem.css(style);\n                    }\n                }\n\n                elem.data('idle', {\n                    from: $.extend(extract, from),\n                    to: to,\n                    complete: true,\n                    busy: false\n                });\n\n                if (!hide) {\n                    idle.addTimer();\n                } else {\n                    elem.css(to);\n                }\n                idle.trunk.push(elem);\n            },\n\n            remove: function(elem) {\n\n                elem = $(elem);\n\n                $.each(idle.trunk, function(i, el) {\n                    if (el && el.length && !el.not(elem).length) {\n                        elem.css(elem.data('idle').from);\n                        idle.trunk.splice(i, 1);\n                    }\n                });\n\n                if (!idle.trunk.length) {\n                    idle.removeEvent();\n                    self.clearTimer(idle.timer);\n                }\n            },\n\n            addEvent: function() {\n                idle.bound = true;\n                self.$('container').on('mousemove click', idle.showAll);\n                if (self._options.idleMode == 'hover') {\n                    self.$('container').on('mouseleave', idle.hide);\n                }\n            },\n\n            removeEvent: function() {\n                idle.bound = false;\n                self.$('container').on('mousemove click', idle.showAll);\n                if (self._options.idleMode == 'hover') {\n                    self.$('container').off('mouseleave', idle.hide);\n                }\n            },\n\n            addTimer: function() {\n                if (self._options.idleMode == 'hover') {\n                    return;\n                }\n                self.addTimer('idle', function() {\n                    idle.hide();\n                }, self._options.idleTime);\n            },\n\n            hide: function() {\n\n                if (!self._options.idleMode || self.getIndex() === false) {\n                    return;\n                }\n\n                self.trigger(Galleria.IDLE_ENTER);\n\n                var len = idle.trunk.length;\n\n                $.each(idle.trunk, function(i, elem) {\n\n                    var data = elem.data('idle');\n\n                    if (!data) {\n                        return;\n                    }\n\n                    elem.data('idle').complete = false;\n\n                    Utils.animate(elem, data.to, {\n                        duration: self._options.idleSpeed,\n                        complete: function() {\n                            if (i == len - 1) {\n                                idle.active = false;\n                            }\n                        }\n                    });\n                });\n            },\n\n            showAll: function() {\n\n                self.clearTimer('idle');\n\n                $.each(idle.trunk, function(i, elem) {\n                    idle.show(elem);\n                });\n            },\n\n            show: function(elem) {\n\n                var data = elem.data('idle');\n\n                if (!idle.active || (!data.busy && !data.complete)) {\n\n                    data.busy = true;\n\n                    self.trigger(Galleria.IDLE_EXIT);\n\n                    self.clearTimer('idle');\n\n                    Utils.animate(elem, data.from, {\n                        duration: self._options.idleSpeed / 2,\n                        complete: function() {\n                            idle.active = true;\n                            $(elem).data('idle').busy = false;\n                            $(elem).data('idle').complete = true;\n                        }\n                    });\n\n                }\n                idle.addTimer();\n            }\n        };\n\n        // internal lightbox object\n        // creates a predesigned lightbox for simple popups of images in galleria\n        var lightbox = this._lightbox = {\n\n            width: 0,\n\n            height: 0,\n\n            initialized: false,\n\n            active: null,\n\n            image: null,\n\n            elems: {},\n\n            keymap: false,\n\n            init: function() {\n\n                if (lightbox.initialized) {\n                    return;\n                }\n                lightbox.initialized = true;\n\n                // create some elements to work with\n                var elems = 'overlay box content shadow title info close prevholder prev nextholder next counter image',\n                    el = {},\n                    op = self._options,\n                    css = '',\n                    abs = 'position:absolute;',\n                    prefix = 'lightbox-',\n                    cssMap = {\n                        overlay: 'position:fixed;display:none;opacity:' + op.overlayOpacity + ';filter:alpha(opacity=' + (op.overlayOpacity * 100) +\n                            ');top:0;left:0;width:100%;height:100%;background:' + op.overlayBackground + ';z-index:99990',\n                        box: 'position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991',\n                        shadow: abs + 'background:#000;width:100%;height:100%;',\n                        content: abs + 'background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden',\n                        info: abs + 'bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px',\n                        close: abs + 'top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999',\n                        image: abs + 'top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;',\n                        prevholder: abs + 'width:50%;top:0;bottom:40px;cursor:pointer;',\n                        nextholder: abs + 'width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;',\n                        prev: abs + 'top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif',\n                        next: abs + 'top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000',\n                        title: 'float:left',\n                        counter: 'float:right;margin-left:8px;'\n                    },\n                    hover = function(elem) {\n                        return elem.hover(\n                            function() { $(this).css('color', '#bbb'); },\n                            function() { $(this).css('color', '#444'); }\n                        );\n                    },\n                    appends = {};\n\n                // fix for navigation hovers transparent background event \"feature\"\n                var exs = '';\n                if (IE > 7) {\n                    exs = IE < 9 ? 'background:#000;filter:alpha(opacity=0);' : 'background:rgba(0,0,0,0);';\n                } else {\n                    exs = 'z-index:99999';\n                }\n\n                cssMap.nextholder += exs;\n                cssMap.prevholder += exs;\n\n                // create and insert CSS\n                $.each(cssMap, function(key, value) {\n                    css += '.galleria-' + prefix + key + '{' + value + '}';\n                });\n\n                css += '.galleria-' + prefix + 'box.iframe .galleria-' + prefix + 'prevholder,' +\n                    '.galleria-' + prefix + 'box.iframe .galleria-' + prefix + 'nextholder{' +\n                    'width:100px;height:100px;top:50%;margin-top:-70px}';\n\n                Utils.insertStyleTag(css, 'galleria-lightbox');\n\n                // create the elements\n                $.each(elems.split(' '), function(i, elemId) {\n                    self.addElement('lightbox-' + elemId);\n                    el[elemId] = lightbox.elems[elemId] = self.get('lightbox-' + elemId);\n                });\n\n                // initiate the image\n                lightbox.image = new Galleria.Picture();\n\n                // append the elements\n                $.each({\n                    box: 'shadow content close prevholder nextholder',\n                    info: 'title counter',\n                    content: 'info image',\n                    prevholder: 'prev',\n                    nextholder: 'next'\n                }, function(key, val) {\n                    var arr = [];\n                    $.each(val.split(' '), function(i, prop) {\n                        arr.push(prefix + prop);\n                    });\n                    appends[prefix + key] = arr;\n                });\n\n                self.append(appends);\n\n                $(el.image).append(lightbox.image.container);\n\n                $(DOM().body).append(el.overlay, el.box);\n\n                // add the prev/next nav and bind some controls\n\n                hover($(el.close).on('click:fast', lightbox.hide).html('&#215;'));\n\n                $.each(['Prev', 'Next'], function(i, dir) {\n\n                    var $d = $(el[dir.toLowerCase()]).html(/v/.test(dir) ? '&#8249;&#160;' : '&#160;&#8250;'),\n                        $e = $(el[dir.toLowerCase() + 'holder']);\n\n                    $e.on('click:fast', function() {\n                        lightbox['show' + dir]();\n                    });\n\n                    // IE7 and touch devices will simply show the nav\n                    if (IE < 8 || Galleria.TOUCH) {\n                        $d.show();\n                        return;\n                    }\n\n                    $e.hover(function() {\n                        $d.show();\n                    }, function(e) {\n                        $d.stop().fadeOut(200);\n                    });\n\n                });\n                $(el.overlay).on('click:fast', lightbox.hide);\n\n                // the lightbox animation is slow on ipad\n                if (Galleria.IPAD) {\n                    self._options.lightboxTransitionSpeed = 0;\n                }\n\n            },\n\n            rescale: function(event) {\n\n                // calculate\n                var width = M.min($win.width() - 40, lightbox.width),\n                    height = M.min($win.height() - 60, lightbox.height),\n                    ratio = M.min(width / lightbox.width, height / lightbox.height),\n                    destWidth = M.round(lightbox.width * ratio) + 40,\n                    destHeight = M.round(lightbox.height * ratio) + 60,\n                    to = {\n                        width: destWidth,\n                        height: destHeight,\n                        'margin-top': M.ceil(destHeight / 2) * -1,\n                        'margin-left': M.ceil(destWidth / 2) * -1\n                    };\n\n                // if rescale event, don't animate\n                if (event) {\n                    $(lightbox.elems.box).css(to);\n                } else {\n                    $(lightbox.elems.box).animate(to, {\n                        duration: self._options.lightboxTransitionSpeed,\n                        easing: self._options.easing,\n                        complete: function() {\n                            var image = lightbox.image,\n                                speed = self._options.lightboxFadeSpeed;\n\n                            self.trigger({\n                                type: Galleria.LIGHTBOX_IMAGE,\n                                imageTarget: image.image\n                            });\n\n                            $(image.container).show();\n\n                            $(image.image).animate({ opacity: 1 }, speed);\n                            Utils.show(lightbox.elems.info, speed);\n                        }\n                    });\n                }\n            },\n\n            hide: function() {\n\n                // remove the image\n                lightbox.image.image = null;\n\n                $win.off('resize', lightbox.rescale);\n\n                $(lightbox.elems.box).hide().find('iframe').remove();\n\n                Utils.hide(lightbox.elems.info);\n\n                self.detachKeyboard();\n                self.attachKeyboard(lightbox.keymap);\n\n                lightbox.keymap = false;\n\n                Utils.hide(lightbox.elems.overlay, 200, function() {\n                    $(this).hide().css('opacity', self._options.overlayOpacity);\n                    self.trigger(Galleria.LIGHTBOX_CLOSE);\n                });\n            },\n\n            showNext: function() {\n                lightbox.show(self.getNext(lightbox.active));\n            },\n\n            showPrev: function() {\n                lightbox.show(self.getPrev(lightbox.active));\n            },\n\n            show: function(index) {\n\n                lightbox.active = index = typeof index === 'number' ? index : self.getIndex() || 0;\n\n                if (!lightbox.initialized) {\n                    lightbox.init();\n                }\n\n                // trigger the event\n                self.trigger(Galleria.LIGHTBOX_OPEN);\n\n                // temporarily attach some keys\n                // save the old ones first in a cloned object\n                if (!lightbox.keymap) {\n\n                    lightbox.keymap = $.extend({}, self._keyboard.map);\n\n                    self.attachKeyboard({\n                        escape: lightbox.hide,\n                        right: lightbox.showNext,\n                        left: lightbox.showPrev\n                    });\n                }\n\n                $win.off('resize', lightbox.rescale);\n\n                var data = self.getData(index),\n                    total = self.getDataLength(),\n                    n = self.getNext(index),\n                    ndata, p, i;\n\n                Utils.hide(lightbox.elems.info);\n\n                try {\n                    for (i = self._options.preload; i > 0; i--) {\n                        p = new Galleria.Picture();\n                        ndata = self.getData(n);\n                        p.preload(ndata.big ? ndata.big : ndata.image);\n                        n = self.getNext(n);\n                    }\n                } catch (e) {}\n\n                lightbox.image.isIframe = (data.iframe && !data.image);\n\n                $(lightbox.elems.box).toggleClass('iframe', lightbox.image.isIframe);\n\n                $(lightbox.image.container).find('.galleria-videoicon').remove();\n\n                lightbox.image.load(data.big || data.image || data.iframe, function(image) {\n\n                    if (image.isIframe) {\n\n                        var cw = $(window).width(),\n                            ch = $(window).height();\n\n                        if (image.video && self._options.maxVideoSize) {\n                            var r = M.min(self._options.maxVideoSize / cw, self._options.maxVideoSize / ch);\n                            if (r < 1) {\n                                cw *= r;\n                                ch *= r;\n                            }\n                        }\n                        lightbox.width = cw;\n                        lightbox.height = ch;\n\n                    } else {\n                        lightbox.width = image.original.width;\n                        lightbox.height = image.original.height;\n                    }\n\n                    $(image.image).css({\n                        width: image.isIframe ? '100%' : '100.1%',\n                        height: image.isIframe ? '100%' : '100.1%',\n                        top: 0,\n                        bottom: 0,\n                        zIndex: 99998,\n                        opacity: 0,\n                        visibility: 'visible'\n                    }).parent().height('100%');\n\n                    lightbox.elems.title.innerHTML = data.title || '';\n                    lightbox.elems.counter.innerHTML = (index + 1) + ' / ' + total;\n                    $win.resize(lightbox.rescale);\n                    lightbox.rescale();\n\n                    if (data.image && data.iframe) {\n\n                        $(lightbox.elems.box).addClass('iframe');\n\n                        if (data.video) {\n                            var $icon = _playIcon(image.container).hide();\n                            window.setTimeout(function() {\n                                $icon.fadeIn(200);\n                            }, 200);\n                        }\n\n                        $(image.image).css('cursor', 'pointer').mouseup((function(data, image) {\n                            return function(e) {\n                                $(lightbox.image.container).find('.galleria-videoicon').remove();\n                                e.preventDefault();\n                                image.isIframe = true;\n                                image.load(data.iframe + (data.video ? '&autoplay=1' : ''), {\n                                    width: '100%',\n                                    height: IE < 8 ? $(lightbox.image.container).height() : '100%'\n                                });\n                            };\n                        }(data, image)));\n                    }\n                });\n\n                $(lightbox.elems.overlay).show().css('visibility', 'visible');\n                $(lightbox.elems.box).show();\n            }\n        };\n\n        // the internal timeouts object\n        // provides helper methods for controlling timeouts\n\n        var _timer = this._timer = {\n\n            trunk: {},\n\n            add: function(id, fn, delay, loop) {\n                id = id || new Date().getTime();\n                loop = loop || false;\n                this.clear(id);\n                if (loop) {\n                    var old = fn;\n                    fn = function() {\n                        old();\n                        _timer.add(id, fn, delay);\n                    };\n                }\n                this.trunk[id] = window.setTimeout(fn, delay);\n            },\n\n            clear: function(id) {\n\n                var del = function(i) {\n                        window.clearTimeout(this.trunk[i]);\n                        delete this.trunk[i];\n                    },\n                    i;\n\n                if (!!id && id in this.trunk) {\n                    del.call(this, id);\n\n                } else if (typeof id === 'undefined') {\n                    for (i in this.trunk) {\n                        if (this.trunk.hasOwnProperty(i)) {\n                            del.call(this, i);\n                        }\n                    }\n                }\n            }\n        };\n\n        return this;\n    };\n\n    // end Galleria constructor\n\n    Galleria.prototype = {\n\n        // bring back the constructor reference\n\n        constructor: Galleria,\n\n        /**\n            Use this function to initialize the gallery and start loading.\n            Should only be called once per instance.\n\n            @param {HTMLElement} target The target element\n            @param {Object} options The gallery options\n\n            @returns Instance\n        */\n\n        init: function(target, options) {\n\n            options = _legacyOptions(options);\n\n            // save the original ingredients\n            this._original = {\n                target: target,\n                options: options,\n                data: null\n            };\n\n            // save the target here\n            this._target = this._dom.target = target.nodeName ? target : $(target).get(0);\n\n            // save the original content for destruction\n            this._original.html = this._target.innerHTML;\n\n            // push the instance\n            _instances.push(this);\n\n            // raise error if no target is detected\n            if (!this._target) {\n                Galleria.raise('Target not found', true);\n                return;\n            }\n\n            // apply options\n            this._options = {\n                autoplay: false,\n                carousel: true,\n                carouselFollow: true, // legacy, deprecate at 1.3\n                carouselSpeed: 400,\n                carouselSteps: 'auto',\n                clicknext: false,\n                dailymotion: {\n                    foreground: '%23EEEEEE',\n                    highlight: '%235BCEC5',\n                    background: '%23222222',\n                    logo: 0,\n                    hideInfos: 1\n                },\n                dataConfig: function(elem) {\n                    return {}; },\n                dataSelector: 'img',\n                dataSort: false,\n                dataSource: this._target,\n                debug: undef,\n                dummy: undef, // 1.2.5\n                easing: 'galleria',\n                extend: function(options) {},\n                fullscreenCrop: undef, // 1.2.5\n                fullscreenDoubleTap: true, // 1.2.4 toggles fullscreen on double-tap for touch devices\n                fullscreenTransition: undef, // 1.2.6\n                height: 0,\n                idleMode: true, // 1.2.4 toggles idleMode\n                idleTime: 3000,\n                idleSpeed: 200,\n                imageCrop: false,\n                imageMargin: 0,\n                imagePan: false,\n                imagePanSmoothness: 12,\n                imagePosition: '50%',\n                imageTimeout: undef, // 1.2.5\n                initialTransition: undef, // 1.2.4, replaces transitionInitial\n                keepSource: false,\n                layerFollow: true, // 1.2.5\n                lightbox: false, // 1.2.3\n                lightboxFadeSpeed: 200,\n                lightboxTransitionSpeed: 200,\n                linkSourceImages: true,\n                maxScaleRatio: undef,\n                maxVideoSize: undef, // 1.2.9\n                minScaleRatio: undef, // deprecated in 1.2.9\n                overlayOpacity: 0.85,\n                overlayBackground: '#0b0b0b',\n                pauseOnInteraction: true,\n                popupLinks: false,\n                preload: 2,\n                queue: true,\n                responsive: true,\n                show: 0,\n                showInfo: true,\n                showCounter: true,\n                showImagenav: true,\n                swipe: 'auto', // 1.2.4 -> revised in 1.3 -> changed type in 1.3.5\n                theme: null,\n                thumbCrop: true,\n                thumbEventType: 'click:fast',\n                thumbMargin: 0,\n                thumbQuality: 'auto',\n                thumbDisplayOrder: true, // 1.2.8\n                thumbPosition: '50%', // 1.3\n                thumbnails: true,\n                touchTransition: undef, // 1.2.6\n                transition: 'fade',\n                transitionInitial: undef, // legacy, deprecate in 1.3. Use initialTransition instead.\n                transitionSpeed: 400,\n                trueFullscreen: true, // 1.2.7\n                useCanvas: false, // 1.2.4\n                variation: '', // 1.3.2\n                videoPoster: true, // 1.3\n                vimeo: {\n                    title: 0,\n                    byline: 0,\n                    portrait: 0,\n                    color: 'aaaaaa'\n                },\n                wait: 5000, // 1.2.7\n                width: 'auto',\n                youtube: {\n                    modestbranding: 1,\n                    autohide: 1,\n                    color: 'white',\n                    hd: 1,\n                    rel: 0,\n                    showinfo: 0\n                }\n            };\n\n            // legacy support for transitionInitial\n            this._options.initialTransition = this._options.initialTransition || this._options.transitionInitial;\n\n            if (options) {\n\n                // turn off debug\n                if (options.debug === false) {\n                    DEBUG = false;\n                }\n\n                // set timeout\n                if (typeof options.imageTimeout === 'number') {\n                    TIMEOUT = options.imageTimeout;\n                }\n\n                // set dummy\n                if (typeof options.dummy === 'string') {\n                    DUMMY = options.dummy;\n                }\n\n                // set theme\n                if (typeof options.theme == 'string') {\n                    this._options.theme = options.theme;\n                }\n            }\n\n            // hide all content\n            $(this._target).children().hide();\n\n            // Warn for quirks mode\n            if (Galleria.QUIRK) {\n                Galleria.raise('Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML and add a correct doctype.');\n            }\n\n            // now we just have to wait for the theme...\n            // first check if it has already loaded\n            if (_loadedThemes.length) {\n                if (this._options.theme) {\n                    for (var i = 0; i < _loadedThemes.length; i++) {\n                        if (this._options.theme === _loadedThemes[i].name) {\n                            this.theme = _loadedThemes[i];\n                            break;\n                        }\n                    }\n                } else {\n                    // if no theme sepcified, apply the first loaded theme\n                    this.theme = _loadedThemes[0];\n                }\n            }\n\n            if (typeof this.theme == 'object') {\n                this._init();\n            } else {\n                // if no theme is loaded yet, push the instance into a pool and run it when the theme is ready\n                _pool.push(this);\n            }\n\n            return this;\n        },\n\n        // this method should only be called once per instance\n        // for manipulation of data, use the .load method\n\n        _init: function() {\n\n            var self = this,\n                options = this._options;\n\n            if (this._initialized) {\n                Galleria.raise('Init failed: Gallery instance already initialized.');\n                return this;\n            }\n\n            this._initialized = true;\n\n            if (!this.theme) {\n                Galleria.raise('Init failed: No theme found.', true);\n                return this;\n            }\n\n            // merge the theme & caller options\n            $.extend(true, options, this.theme.defaults, this._original.options, Galleria.configure.options);\n\n            // internally we use boolean for swipe\n            options.swipe = (function(s) {\n\n                if (s == 'enforced') {\n                    return true; }\n\n                // legacy patch\n                if (s === false || s == 'disabled') {\n                    return false; }\n\n                return !!Galleria.TOUCH;\n\n            }(options.swipe));\n\n            // disable options that arent compatible with swipe\n            if (options.swipe) {\n                options.clicknext = false;\n                options.imagePan = false;\n            }\n\n            // check for canvas support\n            (function(can) {\n                if (!('getContext' in can)) {\n                    can = null;\n                    return;\n                }\n                _canvas = _canvas || {\n                    elem: can,\n                    context: can.getContext('2d'),\n                    cache: {},\n                    length: 0\n                };\n            }(doc.createElement('canvas')));\n\n            // bind the gallery to run when data is ready\n            this.bind(Galleria.DATA, function() {\n\n                // remove big if total pixels are less than 1024 (most phones)\n                if (window.screen && window.screen.width && Array.prototype.forEach) {\n\n                    this._data.forEach(function(data) {\n\n                        var density = 'devicePixelRatio' in window ? window.devicePixelRatio : 1,\n                            m = M.max(window.screen.width, window.screen.height);\n\n                        if (m * density < 1024) {\n                            data.big = data.image;\n                        }\n                    });\n                }\n\n                // save the new data\n                this._original.data = this._data;\n\n                // lets show the counter here\n                this.get('total').innerHTML = this.getDataLength();\n\n                // cache the container\n                var $container = this.$('container');\n\n                // set ratio if height is < 2\n                if (self._options.height < 2) {\n                    self._userRatio = self._ratio = self._options.height;\n                }\n\n                // the gallery is ready, let's just wait for the css\n                var num = { width: 0, height: 0 };\n                var testHeight = function() {\n                    return self.$('stage').height();\n                };\n\n                // check container and thumbnail height\n                Utils.wait({\n                    until: function() {\n\n                        // keep trying to get the value\n                        num = self._getWH();\n                        $container.width(num.width).height(num.height);\n                        return testHeight() && num.width && num.height > 50;\n\n                    },\n                    success: function() {\n\n                        self._width = num.width;\n                        self._height = num.height;\n                        self._ratio = self._ratio || num.height / num.width;\n\n                        // for some strange reason, webkit needs a single setTimeout to play ball\n                        if (Galleria.WEBKIT) {\n                            window.setTimeout(function() {\n                                self._run();\n                            }, 1);\n                        } else {\n                            self._run();\n                        }\n                    },\n                    error: function() {\n\n                        // Height was probably not set, raise hard errors\n\n                        if (testHeight()) {\n                            Galleria.raise('Could not extract sufficient width/height of the gallery container. Traced measures: width:' + num.width + 'px, height: ' + num.height + 'px.', true);\n                        } else {\n                            Galleria.raise('Could not extract a stage height from the CSS. Traced height: ' + testHeight() + 'px.', true);\n                        }\n                    },\n                    timeout: typeof this._options.wait == 'number' ? this._options.wait : false\n                });\n            });\n\n            // build the gallery frame\n            this.append({\n                'info-text': ['info-title', 'info-description'],\n                'info': ['info-text'],\n                'image-nav': ['image-nav-right', 'image-nav-left'],\n                'stage': ['images', 'loader', 'counter', 'image-nav'],\n                'thumbnails-list': ['thumbnails'],\n                'thumbnails-container': ['thumb-nav-left', 'thumbnails-list', 'thumb-nav-right'],\n                'container': ['stage', 'thumbnails-container', 'info', 'tooltip']\n            });\n\n            Utils.hide(this.$('counter').append(\n                this.get('current'),\n                doc.createTextNode(' / '),\n                this.get('total')\n            ));\n\n            this.setCounter('&#8211;');\n\n            Utils.hide(self.get('tooltip'));\n\n            // add a notouch class on the container to prevent unwanted :hovers on touch devices\n            this.$('container').addClass([\n                (Galleria.TOUCH ? 'touch' : 'notouch'),\n                this._options.variation,\n                'galleria-theme-' + this.theme.name\n            ].join(' '));\n\n            // add images to the controls\n            if (!this._options.swipe) {\n                $.each(new Array(2), function(i) {\n\n                    // create a new Picture instance\n                    var image = new Galleria.Picture();\n\n                    // apply some styles, create & prepend overlay\n                    $(image.container).css({\n                        position: 'absolute',\n                        top: 0,\n                        left: 0\n                    }).prepend(self._layers[i] = $(Utils.create('galleria-layer')).css({\n                        position: 'absolute',\n                        top: 0,\n                        left: 0,\n                        right: 0,\n                        bottom: 0,\n                        zIndex: 2\n                    })[0]);\n\n                    // append the image\n                    self.$('images').append(image.container);\n\n                    // reload the controls\n                    self._controls[i] = image;\n\n                    // build a frame\n                    var frame = new Galleria.Picture();\n                    frame.isIframe = true;\n\n                    $(frame.container).attr('class', 'galleria-frame').css({\n                        position: 'absolute',\n                        top: 0,\n                        left: 0,\n                        zIndex: 4,\n                        background: '#000',\n                        display: 'none'\n                    }).appendTo(image.container);\n\n                    self._controls.frames[i] = frame;\n\n                });\n            }\n\n            // some forced generic styling\n            this.$('images').css({\n                position: 'relative',\n                top: 0,\n                left: 0,\n                width: '100%',\n                height: '100%'\n            });\n\n            if (options.swipe) {\n                this.$('images').css({\n                    position: 'absolute',\n                    top: 0,\n                    left: 0,\n                    width: 0,\n                    height: '100%'\n                });\n                this.finger = new Galleria.Finger(this.get('stage'), {\n                    onchange: function(page) {\n                        self.pause().show(page);\n                    },\n                    oncomplete: function(page) {\n\n                        var index = M.max(0, M.min(parseInt(page, 10), self.getDataLength() - 1)),\n                            data = self.getData(index);\n\n                        $(self._thumbnails[index].container)\n                            .addClass('active')\n                            .siblings('.active')\n                            .removeClass('active');\n\n                        if (!data) {\n                            return;\n                        }\n\n                        // remove video iframes\n                        self.$('images').find('.galleria-frame').css('opacity', 0).hide().find('iframe').remove();\n\n                        if (self._options.carousel && self._options.carouselFollow) {\n                            self._carousel.follow(index);\n                        }\n                    }\n                });\n                this.bind(Galleria.RESCALE, function() {\n                    this.finger.setup();\n                });\n                this.$('stage').on('click', function(e) {\n                    var data = self.getData();\n                    if (!data) {\n                        return;\n                    }\n                    if (data.iframe) {\n\n                        if (self.isPlaying()) {\n                            self.pause();\n                        }\n                        var frame = self._controls.frames[self._active],\n                            w = self._stageWidth,\n                            h = self._stageHeight;\n\n                        if ($(frame.container).find('iframe').length) {\n                            return;\n                        }\n\n                        $(frame.container).css({\n                            width: w,\n                            height: h,\n                            opacity: 0\n                        }).show().animate({\n                            opacity: 1\n                        }, 200);\n\n                        window.setTimeout(function() {\n                            frame.load(data.iframe + (data.video ? '&autoplay=1' : ''), {\n                                width: w,\n                                height: h\n                            }, function(frame) {\n                                self.$('container').addClass('videoplay');\n                                frame.scale({\n                                    width: self._stageWidth,\n                                    height: self._stageHeight,\n                                    iframelimit: data.video ? self._options.maxVideoSize : undef\n                                });\n                            });\n                        }, 100);\n\n                        return;\n                    }\n\n                    if (data.link) {\n                        if (self._options.popupLinks) {\n                            var win = window.open(data.link, '_blank');\n                        } else {\n                            window.location.href = data.link;\n                        }\n                        return;\n                    }\n                });\n                this.bind(Galleria.IMAGE, function(e) {\n\n                    self.setCounter(e.index);\n                    self.setInfo(e.index);\n\n                    var next = this.getNext(),\n                        prev = this.getPrev();\n\n                    var preloads = [prev, next];\n                    preloads.push(this.getNext(next), this.getPrev(prev), self._controls.slides.length - 1);\n\n                    var filtered = [];\n\n                    $.each(preloads, function(i, val) {\n                        if ($.inArray(val, filtered) == -1) {\n                            filtered.push(val);\n                        }\n                    });\n\n                    $.each(filtered, function(i, loadme) {\n                        var d = self.getData(loadme),\n                            img = self._controls.slides[loadme],\n                            src = self.isFullscreen() && d.big ? d.big : (d.image || d.iframe);\n\n                        if (d.iframe && !d.image) {\n                            img.isIframe = true;\n                        }\n\n                        if (!img.ready) {\n                            self._controls.slides[loadme].load(src, function(img) {\n                                if (!img.isIframe) {\n                                    $(img.image).css('visibility', 'hidden');\n                                }\n                                self._scaleImage(img, {\n                                    complete: function(img) {\n                                        if (!img.isIframe) {\n                                            $(img.image).css({\n                                                opacity: 0,\n                                                visibility: 'visible'\n                                            }).animate({\n                                                opacity: 1\n                                            }, 200);\n                                        }\n                                    }\n                                });\n                            });\n                        }\n                    });\n                });\n            }\n\n            this.$('thumbnails, thumbnails-list').css({\n                overflow: 'hidden',\n                position: 'relative'\n            });\n\n            // bind image navigation arrows\n            this.$('image-nav-right, image-nav-left').on('click:fast', function(e) {\n\n                // pause if options is set\n                if (options.pauseOnInteraction) {\n                    self.pause();\n                }\n\n                // navigate\n                var fn = /right/.test(this.className) ? 'next' : 'prev';\n                self[fn]();\n\n            }).on('click', function(e) {\n\n                e.preventDefault();\n\n                // tune the clicknext option\n                if (options.clicknext || options.swipe) {\n                    e.stopPropagation();\n                }\n            });\n\n            // hide controls if chosen to\n            $.each(['info', 'counter', 'image-nav'], function(i, el) {\n                if (options['show' + el.substr(0, 1).toUpperCase() + el.substr(1).replace(/-/, '')] === false) {\n                    Utils.moveOut(self.get(el.toLowerCase()));\n                }\n            });\n\n            // load up target content\n            this.load();\n\n            // now it's usually safe to remove the content\n            // IE will never stop loading if we remove it, so let's keep it hidden for IE (it's usually fast enough anyway)\n            if (!options.keepSource && !IE) {\n                this._target.innerHTML = '';\n            }\n\n            // re-append the errors, if they happened before clearing\n            if (this.get('errors')) {\n                this.appendChild('target', 'errors');\n            }\n\n            // append the gallery frame\n            this.appendChild('target', 'container');\n\n            // parse the carousel on each thumb load\n            if (options.carousel) {\n                var count = 0,\n                    show = options.show;\n                this.bind(Galleria.THUMBNAIL, function() {\n                    this.updateCarousel();\n                    if (++count == this.getDataLength() && typeof show == 'number' && show > 0) {\n                        this._carousel.follow(show);\n                    }\n                });\n            }\n\n            // bind window resize for responsiveness\n            if (options.responsive) {\n                $win.on('resize', function() {\n                    if (!self.isFullscreen()) {\n                        self.resize();\n                    }\n                });\n            }\n\n            // double-tap/click fullscreen toggle\n\n            if (options.fullscreenDoubleTap) {\n\n                this.$('stage').on('touchstart', (function() {\n                    var last, cx, cy, lx, ly, now,\n                        getData = function(e) {\n                            return e.originalEvent.touches ? e.originalEvent.touches[0] : e;\n                        };\n                    self.$('stage').on('touchmove', function() {\n                        last = 0;\n                    });\n                    return function(e) {\n                        if (/(-left|-right)/.test(e.target.className)) {\n                            return;\n                        }\n                        now = Utils.timestamp();\n                        cx = getData(e).pageX;\n                        cy = getData(e).pageY;\n                        if (e.originalEvent.touches.length < 2 && (now - last < 300) && (cx - lx < 20) && (cy - ly < 20)) {\n                            self.toggleFullscreen();\n                            e.preventDefault();\n                            return;\n                        }\n                        last = now;\n                        lx = cx;\n                        ly = cy;\n                    };\n                }()));\n            }\n\n            // bind the ons\n            $.each(Galleria.on.binds, function(i, bind) {\n                // check if already bound\n                if ($.inArray(bind.hash, self._binds) == -1) {\n                    self.bind(bind.type, bind.callback);\n                }\n            });\n\n            return this;\n        },\n\n        addTimer: function() {\n            this._timer.add.apply(this._timer, Utils.array(arguments));\n            return this;\n        },\n\n        clearTimer: function() {\n            this._timer.clear.apply(this._timer, Utils.array(arguments));\n            return this;\n        },\n\n        // parse width & height from CSS or options\n\n        _getWH: function() {\n\n            var $container = this.$('container'),\n                $target = this.$('target'),\n                self = this,\n                num = {},\n                arr;\n\n            $.each(['width', 'height'], function(i, m) {\n\n                // first check if options is set\n                if (self._options[m] && typeof self._options[m] === 'number') {\n                    num[m] = self._options[m];\n                } else {\n\n                    arr = [\n                        Utils.parseValue($container.css(m)), // the container css height\n                        Utils.parseValue($target.css(m)), // the target css height\n                        $container[m](), // the container jQuery method\n                        $target[m]() // the target jQuery method\n                    ];\n\n                    // if first time, include the min-width & min-height\n                    if (!self['_' + m]) {\n                        arr.splice(arr.length,\n                            Utils.parseValue($container.css('min-' + m)),\n                            Utils.parseValue($target.css('min-' + m))\n                        );\n                    }\n\n                    // else extract the measures from different sources and grab the highest value\n                    num[m] = M.max.apply(M, arr);\n                }\n            });\n\n            // allow setting a height ratio instead of exact value\n            // useful when doing responsive galleries\n\n            if (self._userRatio) {\n                num.height = num.width * self._userRatio;\n            }\n\n            return num;\n        },\n\n        // Creates the thumbnails and carousel\n        // can be used at any time, f.ex when the data object is manipulated\n        // push is an optional argument with pushed images\n\n        _createThumbnails: function(push) {\n\n            this.get('total').innerHTML = this.getDataLength();\n\n            var src,\n                thumb,\n                data,\n\n                $container,\n\n                self = this,\n                o = this._options,\n\n                i = push ? this._data.length - push.length : 0,\n                chunk = i,\n\n                thumbchunk = [],\n                loadindex = 0,\n\n                gif = IE < 8 ? 'http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif' :\n                'data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D',\n\n                // get previously active thumbnail, if exists\n                active = (function() {\n                    var a = self.$('thumbnails').find('.active');\n                    if (!a.length) {\n                        return false;\n                    }\n                    return a.find('img').attr('src');\n                }()),\n\n                // cache the thumbnail option\n                optval = typeof o.thumbnails === 'string' ? o.thumbnails.toLowerCase() : null,\n\n                // move some data into the instance\n                // for some reason, jQuery cant handle css(property) when zooming in FF, breaking the gallery\n                // so we resort to getComputedStyle for browsers who support it\n                getStyle = function(prop) {\n                    return doc.defaultView && doc.defaultView.getComputedStyle ?\n                        doc.defaultView.getComputedStyle(thumb.container, null)[prop] :\n                        $container.css(prop);\n                },\n\n                fake = function(image, index, container) {\n                    return function() {\n                        $(container).append(image);\n                        self.trigger({\n                            type: Galleria.THUMBNAIL,\n                            thumbTarget: image,\n                            index: index,\n                            galleriaData: self.getData(index)\n                        });\n                    };\n                },\n\n                onThumbEvent = function(e) {\n\n                    // pause if option is set\n                    if (o.pauseOnInteraction) {\n                        self.pause();\n                    }\n\n                    // extract the index from the data\n                    var index = $(e.currentTarget).data('index');\n                    if (self.getIndex() !== index) {\n                        self.show(index);\n                    }\n\n                    e.preventDefault();\n                },\n\n                thumbComplete = function(thumb, callback) {\n\n                    $(thumb.container).css('visibility', 'visible');\n                    self.trigger({\n                        type: Galleria.THUMBNAIL,\n                        thumbTarget: thumb.image,\n                        index: thumb.data.order,\n                        galleriaData: self.getData(thumb.data.order)\n                    });\n\n                    if (typeof callback == 'function') {\n                        callback.call(self, thumb);\n                    }\n                },\n\n                onThumbLoad = function(thumb, callback) {\n\n                    // scale when ready\n                    thumb.scale({\n                        width: thumb.data.width,\n                        height: thumb.data.height,\n                        crop: o.thumbCrop,\n                        margin: o.thumbMargin,\n                        canvas: o.useCanvas,\n                        position: o.thumbPosition,\n                        complete: function(thumb) {\n\n                            // shrink thumbnails to fit\n                            var top = ['left', 'top'],\n                                arr = ['Width', 'Height'],\n                                m,\n                                css,\n                                data = self.getData(thumb.index);\n\n                            // calculate shrinked positions\n                            $.each(arr, function(i, measure) {\n                                m = measure.toLowerCase();\n                                if ((o.thumbCrop !== true || o.thumbCrop === m)) {\n                                    css = {};\n                                    css[m] = thumb[m];\n                                    $(thumb.container).css(css);\n                                    css = {};\n                                    css[top[i]] = 0;\n                                    $(thumb.image).css(css);\n                                }\n\n                                // cache outer measures\n                                thumb['outer' + measure] = $(thumb.container)['outer' + measure](true);\n                            });\n\n                            // set high quality if downscale is moderate\n                            Utils.toggleQuality(thumb.image,\n                                o.thumbQuality === true ||\n                                (o.thumbQuality === 'auto' && thumb.original.width < thumb.width * 3)\n                            );\n\n                            if (o.thumbDisplayOrder && !thumb.lazy) {\n\n                                $.each(thumbchunk, function(i, th) {\n                                    if (i === loadindex && th.ready && !th.displayed) {\n\n                                        loadindex++;\n                                        th.displayed = true;\n\n                                        thumbComplete(th, callback);\n\n                                        return;\n                                    }\n                                });\n                            } else {\n                                thumbComplete(thumb, callback);\n                            }\n                        }\n                    });\n                };\n\n            if (!push) {\n                this._thumbnails = [];\n                this.$('thumbnails').empty();\n            }\n\n            // loop through data and create thumbnails\n            for (; this._data[i]; i++) {\n\n                data = this._data[i];\n\n                // get source from thumb or image\n                src = data.thumb || data.image;\n\n                if ((o.thumbnails === true || optval == 'lazy') && (data.thumb || data.image)) {\n\n                    // add a new Picture instance\n                    thumb = new Galleria.Picture(i);\n\n                    // save the index\n                    thumb.index = i;\n\n                    // flag displayed\n                    thumb.displayed = false;\n\n                    // flag lazy\n                    thumb.lazy = false;\n\n                    // flag video\n                    thumb.video = false;\n\n                    // append the thumbnail\n                    this.$('thumbnails').append(thumb.container);\n\n                    // cache the container\n                    $container = $(thumb.container);\n\n                    // hide it\n                    $container.css('visibility', 'hidden');\n\n                    thumb.data = {\n                        width: Utils.parseValue(getStyle('width')),\n                        height: Utils.parseValue(getStyle('height')),\n                        order: i,\n                        src: src\n                    };\n\n                    // grab & reset size for smoother thumbnail loads\n                    if (o.thumbCrop !== true) {\n                        $container.css({ width: 'auto', height: 'auto' });\n                    } else {\n                        $container.css({ width: thumb.data.width, height: thumb.data.height });\n                    }\n\n                    // load the thumbnail\n                    if (optval == 'lazy') {\n\n                        $container.addClass('lazy');\n\n                        thumb.lazy = true;\n\n                        thumb.load(gif, {\n                            height: thumb.data.height,\n                            width: thumb.data.width\n                        });\n\n                    } else {\n                        thumb.load(src, onThumbLoad);\n                    }\n\n                    // preload all images here\n                    if (o.preload === 'all') {\n                        thumb.preload(data.image);\n                    }\n\n                    // create empty spans if thumbnails is set to 'empty'\n                } else if ((data.iframe && optval !== null) || optval === 'empty' || optval === 'numbers') {\n                    thumb = {\n                        container: Utils.create('galleria-image'),\n                        image: Utils.create('img', 'span'),\n                        ready: true,\n                        data: {\n                            order: i\n                        }\n                    };\n\n                    // create numbered thumbnails\n                    if (optval === 'numbers') {\n                        $(thumb.image).text(i + 1);\n                    }\n\n                    if (data.iframe) {\n                        $(thumb.image).addClass('iframe');\n                    }\n\n                    this.$('thumbnails').append(thumb.container);\n\n                    // we need to \"fake\" a loading delay before we append and trigger\n                    // 50+ should be enough\n\n                    window.setTimeout((fake)(thumb.image, i, thumb.container), 50 + (i * 20));\n\n                    // create null object to silent errors\n                } else {\n                    thumb = {\n                        container: null,\n                        image: null\n                    };\n                }\n\n                // add events for thumbnails\n                // you can control the event type using thumb_event_type\n                // we'll add the same event to the source if it's kept\n\n                $(thumb.container).add(o.keepSource && o.linkSourceImages ? data.original : null)\n                    .data('index', i).on(o.thumbEventType, onThumbEvent)\n                    .data('thumbload', onThumbLoad);\n\n                if (active === src) {\n                    $(thumb.container).addClass('active');\n                }\n\n                this._thumbnails.push(thumb);\n            }\n\n            thumbchunk = this._thumbnails.slice(chunk);\n\n            return this;\n        },\n\n        /**\n            Lazy-loads thumbnails.\n            You can call this method to load lazy thumbnails at run time\n\n            @param {Array|Number} index Index or array of indexes of thumbnails to be loaded\n            @param {Function} complete Callback that is called when all lazy thumbnails have been loaded\n\n            @returns Instance\n        */\n\n        lazyLoad: function(index, complete) {\n\n            var arr = index.constructor == Array ? index : [index],\n                self = this,\n                loaded = 0;\n\n            $.each(arr, function(i, ind) {\n\n                if (ind > self._thumbnails.length - 1) {\n                    return;\n                }\n\n                var thumb = self._thumbnails[ind],\n                    data = thumb.data,\n                    callback = function() {\n                        if (++loaded == arr.length && typeof complete == 'function') {\n                            complete.call(self);\n                        }\n                    },\n                    thumbload = $(thumb.container).data('thumbload');\n                if (thumb.video) {\n                    thumbload.call(self, thumb, callback);\n                } else {\n                    thumb.load(data.src, function(thumb) {\n                        thumbload.call(self, thumb, callback);\n                    });\n                }\n            });\n\n            return this;\n\n        },\n\n        /**\n            Lazy-loads thumbnails in chunks.\n            This method automatcally chops up the loading process of many thumbnails into chunks\n\n            @param {Number} size Size of each chunk to be loaded\n            @param {Number} [delay] Delay between each loads\n\n            @returns Instance\n        */\n\n        lazyLoadChunks: function(size, delay) {\n\n            var len = this.getDataLength(),\n                i = 0,\n                n = 0,\n                arr = [],\n                temp = [],\n                self = this;\n\n            delay = delay || 0;\n\n            for (; i < len; i++) {\n                temp.push(i);\n                if (++n == size || i == len - 1) {\n                    arr.push(temp);\n                    n = 0;\n                    temp = [];\n                }\n            }\n\n            var init = function(wait) {\n                var a = arr.shift();\n                if (a) {\n                    window.setTimeout(function() {\n                        self.lazyLoad(a, function() {\n                            init(true);\n                        });\n                    }, (delay && wait) ? delay : 0);\n                }\n            };\n\n            init(false);\n\n            return this;\n\n        },\n\n        // the internal _run method should be called after loading data into galleria\n        // makes sure the gallery has proper measurements before postrun & ready\n        _run: function() {\n\n            var self = this;\n\n            self._createThumbnails();\n\n            // make sure we have a stageHeight && stageWidth\n\n            Utils.wait({\n\n                timeout: 10000,\n\n                until: function() {\n\n                    // Opera crap\n                    if (Galleria.OPERA) {\n                        self.$('stage').css('display', 'inline-block');\n                    }\n\n                    self._stageWidth = self.$('stage').width();\n                    self._stageHeight = self.$('stage').height();\n\n                    return (self._stageWidth &&\n                        self._stageHeight > 50); // what is an acceptable height?\n                },\n\n                success: function() {\n\n                    // save the instance\n                    _galleries.push(self);\n\n                    // postrun some stuff after the gallery is ready\n\n                    // create the touch slider\n                    if (self._options.swipe) {\n\n                        var $images = self.$('images').width(self.getDataLength() * self._stageWidth);\n                        $.each(new Array(self.getDataLength()), function(i) {\n\n                            var image = new Galleria.Picture(),\n                                data = self.getData(i);\n\n                            $(image.container).css({\n                                position: 'absolute',\n                                top: 0,\n                                left: self._stageWidth * i\n                            }).prepend(self._layers[i] = $(Utils.create('galleria-layer')).css({\n                                position: 'absolute',\n                                top: 0,\n                                left: 0,\n                                right: 0,\n                                bottom: 0,\n                                zIndex: 2\n                            })[0]).appendTo($images);\n\n                            if (data.video) {\n                                _playIcon(image.container);\n                            }\n\n                            self._controls.slides.push(image);\n\n                            var frame = new Galleria.Picture();\n                            frame.isIframe = true;\n\n                            $(frame.container).attr('class', 'galleria-frame').css({\n                                position: 'absolute',\n                                top: 0,\n                                left: 0,\n                                zIndex: 4,\n                                background: '#000',\n                                display: 'none'\n                            }).appendTo(image.container);\n\n                            self._controls.frames.push(frame);\n                        });\n\n                        self.finger.setup();\n                    }\n\n                    // show counter\n                    Utils.show(self.get('counter'));\n\n                    // bind carousel nav\n                    if (self._options.carousel) {\n                        self._carousel.bindControls();\n                    }\n\n                    // start autoplay\n                    if (self._options.autoplay) {\n\n                        self.pause();\n\n                        if (typeof self._options.autoplay === 'number') {\n                            self._playtime = self._options.autoplay;\n                        }\n\n                        self._playing = true;\n                    }\n                    // if second load, just do the show and return\n                    if (self._firstrun) {\n\n                        if (self._options.autoplay) {\n                            self.trigger(Galleria.PLAY);\n                        }\n\n                        if (typeof self._options.show === 'number') {\n                            self.show(self._options.show);\n                        }\n                        return;\n                    }\n\n                    self._firstrun = true;\n\n                    // initialize the History plugin\n                    if (Galleria.History) {\n\n                        // bind the show method\n                        Galleria.History.change(function(value) {\n\n                            // if ID is NaN, the user pressed back from the first image\n                            // return to previous address\n                            if (isNaN(value)) {\n                                window.history.go(-1);\n\n                                // else show the image\n                            } else {\n                                self.show(value, undef, true);\n                            }\n                        });\n                    }\n\n                    self.trigger(Galleria.READY);\n\n                    // call the theme init method\n                    self.theme.init.call(self, self._options);\n\n                    // Trigger Galleria.ready\n                    $.each(Galleria.ready.callbacks, function(i, fn) {\n                        if (typeof fn == 'function') {\n                            fn.call(self, self._options);\n                        }\n                    });\n\n                    // call the extend option\n                    self._options.extend.call(self, self._options);\n\n                    // show the initial image\n                    // first test for permalinks in history\n                    if (/^[0-9]{1,4}$/.test(HASH) && Galleria.History) {\n                        self.show(HASH, undef, true);\n\n                    } else if (self._data[self._options.show]) {\n                        self.show(self._options.show);\n                    }\n\n                    // play trigger\n                    if (self._options.autoplay) {\n                        self.trigger(Galleria.PLAY);\n                    }\n                },\n\n                error: function() {\n                    Galleria.raise('Stage width or height is too small to show the gallery. Traced measures: width:' + self._stageWidth + 'px, height: ' + self._stageHeight + 'px.', true);\n                }\n\n            });\n        },\n\n        /**\n            Loads data into the gallery.\n            You can call this method on an existing gallery to reload the gallery with new data.\n\n            @param {Array|string} [source] Optional JSON array of data or selector of where to find data in the document.\n            Defaults to the Galleria target or dataSource option.\n\n            @param {string} [selector] Optional element selector of what elements to parse.\n            Defaults to 'img'.\n\n            @param {Function} [config] Optional function to modify the data extraction proceedure from the selector.\n            See the dataConfig option for more information.\n\n            @returns Instance\n        */\n\n        load: function(source, selector, config) {\n\n            var self = this,\n                o = this._options;\n\n            // empty the data array\n            this._data = [];\n\n            // empty the thumbnails\n            this._thumbnails = [];\n            this.$('thumbnails').empty();\n\n            // shorten the arguments\n            if (typeof selector === 'function') {\n                config = selector;\n                selector = null;\n            }\n\n            // use the source set by target\n            source = source || o.dataSource;\n\n            // use selector set by option\n            selector = selector || o.dataSelector;\n\n            // use the dataConfig set by option\n            config = config || o.dataConfig;\n\n            // if source is a true object, make it into an array\n            if ($.isPlainObject(source)) {\n                source = [source];\n            }\n\n            // check if the data is an array already\n            if ($.isArray(source)) {\n                if (this.validate(source)) {\n                    this._data = source;\n                } else {\n                    Galleria.raise('Load failed: JSON Array not valid.');\n                }\n            } else {\n\n                // add .video and .iframe to the selector (1.2.7)\n                selector += ',.video,.iframe';\n\n                // loop through images and set data\n                $(source).find(selector).each(function(i, elem) {\n\n                    elem = $(elem);\n                    var data = {},\n                        parent = elem.parent(),\n                        href = parent.attr('href'),\n                        rel = parent.attr('rel');\n\n                    if (href && (elem[0].nodeName == 'IMG' || elem.hasClass('video')) && _videoTest(href)) {\n                        data.video = href;\n                    } else if (href && elem.hasClass('iframe')) {\n                        data.iframe = href;\n                    } else {\n                        data.image = data.big = href;\n                    }\n\n                    if (rel) {\n                        data.big = rel;\n                    }\n\n                    // alternative extraction from HTML5 data attribute, added in 1.2.7\n                    $.each('big title description link layer image'.split(' '), function(i, val) {\n                        if (elem.data(val)) {\n                            data[val] = elem.data(val).toString();\n                        }\n                    });\n\n                    if (!data.big) {\n                        data.big = data.image;\n                    }\n\n                    // mix default extractions with the hrefs and config\n                    // and push it into the data array\n                    self._data.push($.extend({\n\n                        title: elem.attr('title') || '',\n                        thumb: elem.attr('src'),\n                        image: elem.attr('src'),\n                        big: elem.attr('src'),\n                        description: elem.attr('alt') || '',\n                        link: elem.attr('longdesc'),\n                        original: elem.get(0) // saved as a reference\n\n                    }, data, config(elem)));\n\n                });\n            }\n\n            if (typeof o.dataSort == 'function') {\n                protoArray.sort.call(this._data, o.dataSort);\n            } else if (o.dataSort == 'random') {\n                this._data.sort(function() {\n                    return M.round(M.random()) - 0.5;\n                });\n            }\n\n            // trigger the DATA event and return\n            if (this.getDataLength()) {\n                this._parseData(function() {\n                    this.trigger(Galleria.DATA);\n                });\n            }\n            return this;\n\n        },\n\n        // make sure the data works properly\n        _parseData: function(callback) {\n\n            var self = this,\n                current,\n                ready = false,\n                onload = function() {\n                    var complete = true;\n                    $.each(self._data, function(i, data) {\n                        if (data.loading) {\n                            complete = false;\n                            return false;\n                        }\n                    });\n                    if (complete && !ready) {\n                        ready = true;\n                        callback.call(self);\n                    }\n                };\n\n            $.each(this._data, function(i, data) {\n\n                current = self._data[i];\n\n                // copy image as thumb if no thumb exists\n                if ('thumb' in data === false) {\n                    current.thumb = data.image;\n                }\n                // copy image as big image if no biggie exists\n                if (!data.big) {\n                    current.big = data.image;\n                }\n                // parse video\n                if ('video' in data) {\n                    var result = _videoTest(data.video);\n\n                    if (result) {\n                        current.iframe = new Video(result.provider, result.id).embed() + (function() {\n\n                            // add options\n                            if (typeof self._options[result.provider] == 'object') {\n                                var str = '?',\n                                    arr = [];\n                                $.each(self._options[result.provider], function(key, val) {\n                                    arr.push(key + '=' + val);\n                                });\n\n                                // small youtube specifics, perhaps move to _video later\n                                if (result.provider == 'youtube') {\n                                    arr = ['wmode=opaque'].concat(arr);\n                                }\n                                return str + arr.join('&');\n                            }\n                            return '';\n                        }());\n\n                        // pre-fetch video providers media\n\n                        if (!current.thumb || !current.image) {\n                            $.each(['thumb', 'image'], function(i, type) {\n                                if (type == 'image' && !self._options.videoPoster) {\n                                    current.image = undef;\n                                    return;\n                                }\n                                var video = new Video(result.provider, result.id);\n                                if (!current[type]) {\n                                    current.loading = true;\n                                    video.getMedia(type, (function(current, type) {\n                                        return function(src) {\n                                            current[type] = src;\n                                            if (type == 'image' && !current.big) {\n                                                current.big = current.image;\n                                            }\n                                            delete current.loading;\n                                            onload();\n                                        };\n                                    }(current, type)));\n                                }\n                            });\n                        }\n                    }\n                }\n            });\n\n            onload();\n\n            return this;\n        },\n\n        /**\n            Destroy the Galleria instance and recover the original content\n\n            @example this.destroy();\n\n            @returns Instance\n        */\n\n        destroy: function() {\n            this.$('target').data('galleria', null);\n            this.$('container').off('galleria');\n            this.get('target').innerHTML = this._original.html;\n            this.clearTimer();\n            Utils.removeFromArray(_instances, this);\n            Utils.removeFromArray(_galleries, this);\n            if (Galleria._waiters.length) {\n                $.each(Galleria._waiters, function(i, w) {\n                    if (w) window.clearTimeout(w);\n                });\n            }\n            return this;\n        },\n\n        /**\n            Adds and/or removes images from the gallery\n            Works just like Array.splice\n            https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice\n\n            @example this.splice( 2, 4 ); // removes 4 images after the second image\n\n            @returns Instance\n        */\n\n        splice: function() {\n            var self = this,\n                args = Utils.array(arguments);\n            window.setTimeout(function() {\n                protoArray.splice.apply(self._data, args);\n                self._parseData(function() {\n                    self._createThumbnails();\n                });\n            }, 2);\n            return self;\n        },\n\n        /**\n            Append images to the gallery\n            Works just like Array.push\n            https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push\n\n            @example this.push({ image: 'image1.jpg' }); // appends the image to the gallery\n\n            @returns Instance\n        */\n\n        push: function() {\n            var self = this,\n                args = Utils.array(arguments);\n\n            if (args.length == 1 && args[0].constructor == Array) {\n                args = args[0];\n            }\n\n            window.setTimeout(function() {\n                protoArray.push.apply(self._data, args);\n                self._parseData(function() {\n                    self._createThumbnails(args);\n                });\n            }, 2);\n            return self;\n        },\n\n        _getActive: function() {\n            return this._controls.getActive();\n        },\n\n        validate: function(data) {\n            // todo: validate a custom data array\n            return true;\n        },\n\n        /**\n            Bind any event to Galleria\n\n            @param {string} type The Event type to listen for\n            @param {Function} fn The function to execute when the event is triggered\n\n            @example this.bind( 'image', function() { Galleria.log('image shown') });\n\n            @returns Instance\n        */\n\n        bind: function(type, fn) {\n\n            // allow 'image' instead of Galleria.IMAGE\n            type = _patchEvent(type);\n\n            this.$('container').on(type, this.proxy(fn));\n            return this;\n        },\n\n        /**\n            Unbind any event to Galleria\n\n            @param {string} type The Event type to forget\n\n            @returns Instance\n        */\n\n        unbind: function(type) {\n\n            type = _patchEvent(type);\n\n            this.$('container').off(type);\n            return this;\n        },\n\n        /**\n            Manually trigger a Galleria event\n\n            @param {string} type The Event to trigger\n\n            @returns Instance\n        */\n\n        trigger: function(type) {\n\n            type = typeof type === 'object' ?\n                $.extend(type, { scope: this }) : { type: _patchEvent(type), scope: this };\n\n            this.$('container').trigger(type);\n\n            return this;\n        },\n\n        /**\n            Assign an \"idle state\" to any element.\n            The idle state will be applied after a certain amount of idle time\n            Useful to hide f.ex navigation when the gallery is inactive\n\n            @param {HTMLElement|string} elem The Dom node or selector to apply the idle state to\n            @param {Object} styles the CSS styles to apply when in idle mode\n            @param {Object} [from] the CSS styles to apply when in normal\n            @param {Boolean} [hide] set to true if you want to hide it first\n\n            @example addIdleState( this.get('image-nav'), { opacity: 0 });\n            @example addIdleState( '.galleria-image-nav', { top: -200 }, true);\n\n            @returns Instance\n        */\n\n        addIdleState: function(elem, styles, from, hide) {\n            this._idle.add.apply(this._idle, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Removes any idle state previously set using addIdleState()\n\n            @param {HTMLElement|string} elem The Dom node or selector to remove the idle state from.\n\n            @returns Instance\n        */\n\n        removeIdleState: function(elem) {\n            this._idle.remove.apply(this._idle, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Force Galleria to enter idle mode.\n\n            @returns Instance\n        */\n\n        enterIdleMode: function() {\n            this._idle.hide();\n            return this;\n        },\n\n        /**\n            Force Galleria to exit idle mode.\n\n            @returns Instance\n        */\n\n        exitIdleMode: function() {\n            this._idle.showAll();\n            return this;\n        },\n\n        /**\n            Enter FullScreen mode\n\n            @param {Function} callback the function to be executed when the fullscreen mode is fully applied.\n\n            @returns Instance\n        */\n\n        enterFullscreen: function(callback) {\n            this._fullscreen.enter.apply(this, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Exits FullScreen mode\n\n            @param {Function} callback the function to be executed when the fullscreen mode is fully applied.\n\n            @returns Instance\n        */\n\n        exitFullscreen: function(callback) {\n            this._fullscreen.exit.apply(this, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Toggle FullScreen mode\n\n            @param {Function} callback the function to be executed when the fullscreen mode is fully applied or removed.\n\n            @returns Instance\n        */\n\n        toggleFullscreen: function(callback) {\n            this._fullscreen[this.isFullscreen() ? 'exit' : 'enter'].apply(this, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Adds a tooltip to any element.\n            You can also call this method with an object as argument with elemID:value pairs to apply tooltips to (see examples)\n\n            @param {HTMLElement} elem The DOM Node to attach the event to\n            @param {string|Function} value The tooltip message. Can also be a function that returns a string.\n\n            @example this.bindTooltip( this.get('thumbnails'), 'My thumbnails');\n            @example this.bindTooltip( this.get('thumbnails'), function() { return 'My thumbs' });\n            @example this.bindTooltip( { image_nav: 'Navigation' });\n\n            @returns Instance\n        */\n\n        bindTooltip: function(elem, value) {\n            this._tooltip.bind.apply(this._tooltip, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Note: this method is deprecated. Use refreshTooltip() instead.\n\n            Redefine a tooltip.\n            Use this if you want to re-apply a tooltip value to an already bound tooltip element.\n\n            @param {HTMLElement} elem The DOM Node to attach the event to\n            @param {string|Function} value The tooltip message. Can also be a function that returns a string.\n\n            @returns Instance\n        */\n\n        defineTooltip: function(elem, value) {\n            this._tooltip.define.apply(this._tooltip, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Refresh a tooltip value.\n            Use this if you want to change the tooltip value at runtime, f.ex if you have a play/pause toggle.\n\n            @param {HTMLElement} elem The DOM Node that has a tooltip that should be refreshed\n\n            @returns Instance\n        */\n\n        refreshTooltip: function(elem) {\n            this._tooltip.show.apply(this._tooltip, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Open a pre-designed lightbox with the currently active image.\n            You can control some visuals using gallery options.\n\n            @returns Instance\n        */\n\n        openLightbox: function() {\n            this._lightbox.show.apply(this._lightbox, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Close the lightbox.\n\n            @returns Instance\n        */\n\n        closeLightbox: function() {\n            this._lightbox.hide.apply(this._lightbox, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Check if a variation exists\n\n            @returns {Boolean} If the variation has been applied\n        */\n\n        hasVariation: function(variation) {\n            return $.inArray(variation, this._options.variation.split(/\\s+/)) > -1;\n        },\n\n        /**\n            Get the currently active image element.\n\n            @returns {HTMLElement} The image element\n        */\n\n        getActiveImage: function() {\n            var active = this._getActive();\n            return active ? active.image : undef;\n        },\n\n        /**\n            Get the currently active thumbnail element.\n\n            @returns {HTMLElement} The thumbnail element\n        */\n\n        getActiveThumb: function() {\n            return this._thumbnails[this._active].image || undef;\n        },\n\n        /**\n        Get the mouse position relative to the gallery container\n\n        @param e The mouse event\n\n        @example\n\nvar gallery = this;\n$(document).mousemove(function(e) {\n    console.log( gallery.getMousePosition(e).x );\n});\n\n        @returns {Object} Object with x & y of the relative mouse postion\n    */\n\n        getMousePosition: function(e) {\n            return {\n                x: e.pageX - this.$('container').offset().left,\n                y: e.pageY - this.$('container').offset().top\n            };\n        },\n\n        /**\n            Adds a panning effect to the image\n\n            @param [img] The optional image element. If not specified it takes the currently active image\n\n            @returns Instance\n        */\n\n        addPan: function(img) {\n\n            if (this._options.imageCrop === false) {\n                return;\n            }\n\n            img = $(img || this.getActiveImage());\n\n            // define some variables and methods\n            var self = this,\n                x = img.width() / 2,\n                y = img.height() / 2,\n                destX = parseInt(img.css('left'), 10),\n                destY = parseInt(img.css('top'), 10),\n                curX = destX || 0,\n                curY = destY || 0,\n                distX = 0,\n                distY = 0,\n                active = false,\n                ts = Utils.timestamp(),\n                cache = 0,\n                move = 0,\n\n                // positions the image\n                position = function(dist, cur, pos) {\n                    if (dist > 0) {\n                        move = M.round(M.max(dist * -1, M.min(0, cur)));\n                        if (cache !== move) {\n\n                            cache = move;\n\n                            if (IE === 8) { // scroll is faster for IE\n                                img.parent()['scroll' + pos](move * -1);\n                            } else {\n                                var css = {};\n                                css[pos.toLowerCase()] = move;\n                                img.css(css);\n                            }\n                        }\n                    }\n                },\n\n                // calculates mouse position after 50ms\n                calculate = function(e) {\n                    if (Utils.timestamp() - ts < 50) {\n                        return;\n                    }\n                    active = true;\n                    x = self.getMousePosition(e).x;\n                    y = self.getMousePosition(e).y;\n                },\n\n                // the main loop to check\n                loop = function(e) {\n\n                    if (!active) {\n                        return;\n                    }\n\n                    distX = img.width() - self._stageWidth;\n                    distY = img.height() - self._stageHeight;\n                    destX = x / self._stageWidth * distX * -1;\n                    destY = y / self._stageHeight * distY * -1;\n                    curX += (destX - curX) / self._options.imagePanSmoothness;\n                    curY += (destY - curY) / self._options.imagePanSmoothness;\n\n                    position(distY, curY, 'Top');\n                    position(distX, curX, 'Left');\n\n                };\n\n            // we need to use scroll in IE8 to speed things up\n            if (IE === 8) {\n\n                img.parent().scrollTop(curY * -1).scrollLeft(curX * -1);\n                img.css({\n                    top: 0,\n                    left: 0\n                });\n\n            }\n\n            // unbind and bind event\n            this.$('stage').off('mousemove', calculate).on('mousemove', calculate);\n\n            // loop the loop\n            this.addTimer('pan' + self._id, loop, 50, true);\n\n            return this;\n        },\n\n        /**\n            Brings the scope into any callback\n\n            @param fn The callback to bring the scope into\n            @param [scope] Optional scope to bring\n\n            @example $('#fullscreen').click( this.proxy(function() { this.enterFullscreen(); }) )\n\n            @returns {Function} Return the callback with the gallery scope\n        */\n\n        proxy: function(fn, scope) {\n            if (typeof fn !== 'function') {\n                return F;\n            }\n            scope = scope || this;\n            return function() {\n                return fn.apply(scope, Utils.array(arguments));\n            };\n        },\n\n        /**\n            Tells you the theme name of the gallery\n\n            @returns {String} theme name\n        */\n\n        getThemeName: function() {\n            return this.theme.name;\n        },\n\n        /**\n            Removes the panning effect set by addPan()\n\n            @returns Instance\n        */\n\n        removePan: function() {\n\n            // todo: doublecheck IE8\n\n            this.$('stage').off('mousemove');\n\n            this.clearTimer('pan' + this._id);\n\n            return this;\n        },\n\n        /**\n            Adds an element to the Galleria DOM array.\n            When you add an element here, you can access it using element ID in many API calls\n\n            @param {string} id The element ID you wish to use. You can add many elements by adding more arguments.\n\n            @example addElement('mybutton');\n            @example addElement('mybutton','mylink');\n\n            @returns Instance\n        */\n\n        addElement: function(id) {\n\n            var dom = this._dom;\n\n            $.each(Utils.array(arguments), function(i, blueprint) {\n                dom[blueprint] = Utils.create('galleria-' + blueprint);\n            });\n\n            return this;\n        },\n\n        /**\n        Attach keyboard events to Galleria\n\n        @param {Object} map The map object of events.\n        Possible keys are 'UP', 'DOWN', 'LEFT', 'RIGHT', 'RETURN', 'ESCAPE', 'BACKSPACE', and 'SPACE'.\n\n        @example\n\nthis.attachKeyboard({\n    right: this.next,\n    left: this.prev,\n    up: function() {\n        console.log( 'up key pressed' )\n    }\n});\n\n        @returns Instance\n    */\n\n        attachKeyboard: function(map) {\n            this._keyboard.attach.apply(this._keyboard, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Detach all keyboard events to Galleria\n\n            @returns Instance\n        */\n\n        detachKeyboard: function() {\n            this._keyboard.detach.apply(this._keyboard, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Fast helper for appending galleria elements that you added using addElement()\n\n            @param {string} parentID The parent element ID where the element will be appended\n            @param {string} childID the element ID that should be appended\n\n            @example this.addElement('myElement');\n            this.appendChild( 'info', 'myElement' );\n\n            @returns Instance\n        */\n\n        appendChild: function(parentID, childID) {\n            this.$(parentID).append(this.get(childID) || childID);\n            return this;\n        },\n\n        /**\n        Fast helper for prepending galleria elements that you added using addElement()\n\n        @param {string} parentID The parent element ID where the element will be prepended\n        @param {string} childID the element ID that should be prepended\n\n        @example\n\nthis.addElement('myElement');\nthis.prependChild( 'info', 'myElement' );\n\n        @returns Instance\n    */\n\n        prependChild: function(parentID, childID) {\n            this.$(parentID).prepend(this.get(childID) || childID);\n            return this;\n        },\n\n        /**\n            Remove an element by blueprint\n\n            @param {string} elemID The element to be removed.\n            You can remove multiple elements by adding arguments.\n\n            @returns Instance\n        */\n\n        remove: function(elemID) {\n            this.$(Utils.array(arguments).join(',')).remove();\n            return this;\n        },\n\n        // a fast helper for building dom structures\n        // leave this out of the API for now\n\n        append: function(data) {\n            var i, j;\n            for (i in data) {\n                if (data.hasOwnProperty(i)) {\n                    if (data[i].constructor === Array) {\n                        for (j = 0; data[i][j]; j++) {\n                            this.appendChild(i, data[i][j]);\n                        }\n                    } else {\n                        this.appendChild(i, data[i]);\n                    }\n                }\n            }\n            return this;\n        },\n\n        // an internal helper for scaling according to options\n        _scaleImage: function(image, options) {\n\n            image = image || this._controls.getActive();\n\n            // janpub (JH) fix:\n            // image might be unselected yet\n            // e.g. when external logics rescales the gallery on window resize events\n            if (!image) {\n                return;\n            }\n\n            var complete,\n\n                scaleLayer = function(img) {\n                    $(img.container).children(':first').css({\n                        top: M.max(0, Utils.parseValue(img.image.style.top)),\n                        left: M.max(0, Utils.parseValue(img.image.style.left)),\n                        width: Utils.parseValue(img.image.width),\n                        height: Utils.parseValue(img.image.height)\n                    });\n                };\n\n            options = $.extend({\n                width: this._stageWidth,\n                height: this._stageHeight,\n                crop: this._options.imageCrop,\n                max: this._options.maxScaleRatio,\n                min: this._options.minScaleRatio,\n                margin: this._options.imageMargin,\n                position: this._options.imagePosition,\n                iframelimit: this._options.maxVideoSize\n            }, options);\n\n            if (this._options.layerFollow && this._options.imageCrop !== true) {\n\n                if (typeof options.complete == 'function') {\n                    complete = options.complete;\n                    options.complete = function() {\n                        complete.call(image, image);\n                        scaleLayer(image);\n                    };\n                } else {\n                    options.complete = scaleLayer;\n                }\n\n            } else {\n                $(image.container).children(':first').css({ top: 0, left: 0 });\n            }\n\n            image.scale(options);\n            return this;\n        },\n\n        /**\n            Updates the carousel,\n            useful if you resize the gallery and want to re-check if the carousel nav is needed.\n\n            @returns Instance\n        */\n\n        updateCarousel: function() {\n            this._carousel.update();\n            return this;\n        },\n\n        /**\n            Resize the entire gallery container\n\n            @param {Object} [measures] Optional object with width/height specified\n            @param {Function} [complete] The callback to be called when the scaling is complete\n\n            @returns Instance\n        */\n\n        resize: function(measures, complete) {\n\n            if (typeof measures == 'function') {\n                complete = measures;\n                measures = undef;\n            }\n\n            measures = $.extend({ width: 0, height: 0 }, measures);\n\n            var self = this,\n                $container = this.$('container');\n\n            $.each(measures, function(m, val) {\n                if (!val) {\n                    $container[m]('auto');\n                    measures[m] = self._getWH()[m];\n                }\n            });\n\n            $.each(measures, function(m, val) {\n                $container[m](val);\n            });\n\n            return this.rescale(complete);\n\n        },\n\n        /**\n            Rescales the gallery\n\n            @param {number} width The target width\n            @param {number} height The target height\n            @param {Function} complete The callback to be called when the scaling is complete\n\n            @returns Instance\n        */\n\n        rescale: function(width, height, complete) {\n\n            var self = this;\n\n            // allow rescale(fn)\n            if (typeof width === 'function') {\n                complete = width;\n                width = undef;\n            }\n\n            var scale = function() {\n\n                // set stagewidth\n                self._stageWidth = width || self.$('stage').width();\n                self._stageHeight = height || self.$('stage').height();\n\n                if (self._options.swipe) {\n                    $.each(self._controls.slides, function(i, img) {\n                        self._scaleImage(img);\n                        $(img.container).css('left', self._stageWidth * i);\n                    });\n                    self.$('images').css('width', self._stageWidth * self.getDataLength());\n                } else {\n                    // scale the active image\n                    self._scaleImage();\n                }\n\n                if (self._options.carousel) {\n                    self.updateCarousel();\n                }\n\n                var frame = self._controls.frames[self._controls.active];\n\n                if (frame) {\n                    self._controls.frames[self._controls.active].scale({\n                        width: self._stageWidth,\n                        height: self._stageHeight,\n                        iframelimit: self._options.maxVideoSize\n                    });\n                }\n\n                self.trigger(Galleria.RESCALE);\n\n                if (typeof complete === 'function') {\n                    complete.call(self);\n                }\n            };\n\n            scale.call(self);\n\n            return this;\n        },\n\n        /**\n            Refreshes the gallery.\n            Useful if you change image options at runtime and want to apply the changes to the active image.\n\n            @returns Instance\n        */\n\n        refreshImage: function() {\n            this._scaleImage();\n            if (this._options.imagePan) {\n                this.addPan();\n            }\n            return this;\n        },\n\n        _preload: function() {\n            if (this._options.preload) {\n                var p, i,\n                    n = this.getNext(),\n                    ndata;\n                try {\n                    for (i = this._options.preload; i > 0; i--) {\n                        p = new Galleria.Picture();\n                        ndata = this.getData(n);\n                        p.preload(this.isFullscreen() && ndata.big ? ndata.big : ndata.image);\n                        n = this.getNext(n);\n                    }\n                } catch (e) {}\n            }\n        },\n\n        /**\n            Shows an image by index\n\n            @param {number|boolean} index The index to show\n            @param {Boolean} rewind A boolean that should be true if you want the transition to go back\n\n            @returns Instance\n        */\n\n        show: function(index, rewind, _history) {\n\n            var swipe = this._options.swipe;\n\n            // do nothing queue is long || index is false || queue is false and transition is in progress\n            if (!swipe &&\n                (this._queue.length > 3 || index === false || (!this._options.queue && this._queue.stalled))) {\n                return;\n            }\n\n            index = M.max(0, M.min(parseInt(index, 10), this.getDataLength() - 1));\n\n            rewind = typeof rewind !== 'undefined' ? !!rewind : index < this.getIndex();\n\n            _history = _history || false;\n\n            // do the history thing and return\n            if (!_history && Galleria.History) {\n                Galleria.History.set(index.toString());\n                return;\n            }\n\n            if (this.finger && index !== this._active) {\n                this.finger.to = -(index * this.finger.width);\n                this.finger.index = index;\n            }\n            this._active = index;\n\n            // we do things a bit simpler in swipe:\n            if (swipe) {\n\n                var data = this.getData(index),\n                    self = this;\n                if (!data) {\n                    return;\n                }\n\n                var src = this.isFullscreen() && data.big ? data.big : (data.image || data.iframe),\n                    image = this._controls.slides[index],\n                    cached = image.isCached(src),\n                    thumb = this._thumbnails[index];\n\n                var evObj = {\n                    cached: cached,\n                    index: index,\n                    rewind: rewind,\n                    imageTarget: image.image,\n                    thumbTarget: thumb.image,\n                    galleriaData: data\n                };\n\n                this.trigger($.extend(evObj, {\n                    type: Galleria.LOADSTART\n                }));\n\n                self.$('container').removeClass('videoplay');\n\n                var complete = function() {\n\n                    self._layers[index].innerHTML = self.getData().layer || '';\n\n                    self.trigger($.extend(evObj, {\n                        type: Galleria.LOADFINISH\n                    }));\n                    self._playCheck();\n                };\n\n                self._preload();\n\n                window.setTimeout(function() {\n\n                    // load if not ready\n                    if (!image.ready || $(image.image).attr('src') != src) {\n                        if (data.iframe && !data.image) {\n                            image.isIframe = true;\n                        }\n                        image.load(src, function(image) {\n                            evObj.imageTarget = image.image;\n                            self._scaleImage(image, complete).trigger($.extend(evObj, {\n                                type: Galleria.IMAGE\n                            }));\n                            complete();\n                        });\n                    } else {\n                        self.trigger($.extend(evObj, {\n                            type: Galleria.IMAGE\n                        }));\n                        complete();\n                    }\n                }, 100);\n\n            } else {\n                protoArray.push.call(this._queue, {\n                    index: index,\n                    rewind: rewind\n                });\n                if (!this._queue.stalled) {\n                    this._show();\n                }\n            }\n\n            return this;\n        },\n\n        // the internal _show method does the actual showing\n        _show: function() {\n\n            // shortcuts\n            var self = this,\n                queue = this._queue[0],\n                data = this.getData(queue.index);\n\n            if (!data) {\n                return;\n            }\n\n            var src = this.isFullscreen() && data.big ? data.big : (data.image || data.iframe),\n                active = this._controls.getActive(),\n                next = this._controls.getNext(),\n                cached = next.isCached(src),\n                thumb = this._thumbnails[queue.index],\n                mousetrigger = function() {\n                    $(next.image).trigger('mouseup');\n                };\n\n            self.$('container').toggleClass('iframe', !!data.isIframe).removeClass('videoplay');\n\n            // to be fired when loading & transition is complete:\n            var complete = (function(data, next, active, queue, thumb) {\n\n                return function() {\n\n                    var win;\n\n                    _transitions.active = false;\n\n                    // optimize quality\n                    Utils.toggleQuality(next.image, self._options.imageQuality);\n\n                    // remove old layer\n                    self._layers[self._controls.active].innerHTML = '';\n\n                    // swap\n                    $(active.container).css({\n                        zIndex: 0,\n                        opacity: 0\n                    }).show();\n\n                    $(active.container).find('iframe, .galleria-videoicon').remove();\n                    $(self._controls.frames[self._controls.active].container).hide();\n\n                    $(next.container).css({\n                        zIndex: 1,\n                        left: 0,\n                        top: 0\n                    }).show();\n\n                    self._controls.swap();\n\n                    // add pan according to option\n                    if (self._options.imagePan) {\n                        self.addPan(next.image);\n                    }\n\n                    // make the image clickable\n                    // order of precedence: iframe, link, lightbox, clicknext\n                    if ((data.iframe && data.image) || data.link || self._options.lightbox || self._options.clicknext) {\n\n                        $(next.image).css({\n                            cursor: 'pointer'\n                        }).on('mouseup', function(e) {\n\n                            // non-left click\n                            if (typeof e.which == 'number' && e.which > 1) {\n                                return;\n                            }\n\n                            // iframe / video\n                            if (data.iframe) {\n\n                                if (self.isPlaying()) {\n                                    self.pause();\n                                }\n                                var frame = self._controls.frames[self._controls.active],\n                                    w = self._stageWidth,\n                                    h = self._stageHeight;\n\n                                $(frame.container).css({\n                                    width: w,\n                                    height: h,\n                                    opacity: 0\n                                }).show().animate({\n                                    opacity: 1\n                                }, 200);\n\n                                window.setTimeout(function() {\n                                    frame.load(data.iframe + (data.video ? '&autoplay=1' : ''), {\n                                        width: w,\n                                        height: h\n                                    }, function(frame) {\n                                        self.$('container').addClass('videoplay');\n                                        frame.scale({\n                                            width: self._stageWidth,\n                                            height: self._stageHeight,\n                                            iframelimit: data.video ? self._options.maxVideoSize : undef\n                                        });\n                                    });\n                                }, 100);\n\n                                return;\n                            }\n\n                            // clicknext\n                            if (self._options.clicknext && !Galleria.TOUCH) {\n                                if (self._options.pauseOnInteraction) {\n                                    self.pause();\n                                }\n                                self.next();\n                                return;\n                            }\n\n                            // popup link\n                            if (data.link) {\n                                if (self._options.popupLinks) {\n                                    win = window.open(data.link, '_blank');\n                                } else {\n                                    window.location.href = data.link;\n                                }\n                                return;\n                            }\n\n                            if (self._options.lightbox) {\n                                self.openLightbox();\n                            }\n\n                        });\n                    }\n\n                    // check if we are playing\n                    self._playCheck();\n\n                    // trigger IMAGE event\n                    self.trigger({\n                        type: Galleria.IMAGE,\n                        index: queue.index,\n                        imageTarget: next.image,\n                        thumbTarget: thumb.image,\n                        galleriaData: data\n                    });\n\n                    // remove the queued image\n                    protoArray.shift.call(self._queue);\n\n                    // remove stalled\n                    self._queue.stalled = false;\n\n                    // if we still have images in the queue, show it\n                    if (self._queue.length) {\n                        self._show();\n                    }\n\n                };\n            }(data, next, active, queue, thumb));\n\n            // let the carousel follow\n            if (this._options.carousel && this._options.carouselFollow) {\n                this._carousel.follow(queue.index);\n            }\n\n            // preload images\n            self._preload();\n\n            // show the next image, just in case\n            Utils.show(next.container);\n\n            next.isIframe = data.iframe && !data.image;\n\n            // add active classes\n            $(self._thumbnails[queue.index].container)\n                .addClass('active')\n                .siblings('.active')\n                .removeClass('active');\n\n            // trigger the LOADSTART event\n            self.trigger({\n                type: Galleria.LOADSTART,\n                cached: cached,\n                index: queue.index,\n                rewind: queue.rewind,\n                imageTarget: next.image,\n                thumbTarget: thumb.image,\n                galleriaData: data\n            });\n\n            // stall the queue\n            self._queue.stalled = true;\n\n            // begin loading the next image\n            next.load(src, function(next) {\n\n                // add layer HTML\n                var layer = $(self._layers[1 - self._controls.active]).html(data.layer || '').hide();\n\n                self._scaleImage(next, {\n\n                    complete: function(next) {\n\n                        // toggle low quality for IE\n                        if ('image' in active) {\n                            Utils.toggleQuality(active.image, false);\n                        }\n                        Utils.toggleQuality(next.image, false);\n\n                        // remove the image panning, if applied\n                        // TODO: rethink if this is necessary\n                        self.removePan();\n\n                        // set the captions and counter\n                        self.setInfo(queue.index);\n                        self.setCounter(queue.index);\n\n                        // show the layer now\n                        if (data.layer) {\n                            layer.show();\n                            // inherit click events set on image\n                            if ((data.iframe && data.image) || data.link || self._options.lightbox || self._options.clicknext) {\n                                layer.css('cursor', 'pointer').off('mouseup').mouseup(mousetrigger);\n                            }\n                        }\n\n                        // add play icon\n                        if (data.video && data.image) {\n                            _playIcon(next.container);\n                        }\n\n                        var transition = self._options.transition;\n\n                        // can JavaScript loop through objects in order? yes.\n                        $.each({\n                            initial: active.image === null,\n                            touch: Galleria.TOUCH,\n                            fullscreen: self.isFullscreen()\n                        }, function(type, arg) {\n                            if (arg && self._options[type + 'Transition'] !== undef) {\n                                transition = self._options[type + 'Transition'];\n                                return false;\n                            }\n                        });\n\n                        // validate the transition\n                        if (transition in _transitions.effects === false) {\n                            complete();\n                        } else {\n                            var params = {\n                                prev: active.container,\n                                next: next.container,\n                                rewind: queue.rewind,\n                                speed: self._options.transitionSpeed || 400\n                            };\n\n                            _transitions.active = true;\n\n                            // call the transition function and send some stuff\n                            _transitions.init.call(self, transition, params, complete);\n\n                        }\n\n                        // trigger the LOADFINISH event\n                        self.trigger({\n                            type: Galleria.LOADFINISH,\n                            cached: cached,\n                            index: queue.index,\n                            rewind: queue.rewind,\n                            imageTarget: next.image,\n                            thumbTarget: self._thumbnails[queue.index].image,\n                            galleriaData: self.getData(queue.index)\n                        });\n                    }\n                });\n            });\n        },\n\n        /**\n            Gets the next index\n\n            @param {number} [base] Optional starting point\n\n            @returns {number} the next index, or the first if you are at the first (looping)\n        */\n\n        getNext: function(base) {\n            base = typeof base === 'number' ? base : this.getIndex();\n            return base === this.getDataLength() - 1 ? 0 : base + 1;\n        },\n\n        /**\n            Gets the previous index\n\n            @param {number} [base] Optional starting point\n\n            @returns {number} the previous index, or the last if you are at the first (looping)\n        */\n\n        getPrev: function(base) {\n            base = typeof base === 'number' ? base : this.getIndex();\n            return base === 0 ? this.getDataLength() - 1 : base - 1;\n        },\n\n        /**\n            Shows the next image in line\n\n            @returns Instance\n        */\n\n        next: function() {\n            if (this.getDataLength() > 1) {\n                this.show(this.getNext(), false);\n            }\n            return this;\n        },\n\n        /**\n            Shows the previous image in line\n\n            @returns Instance\n        */\n\n        prev: function() {\n            if (this.getDataLength() > 1) {\n                this.show(this.getPrev(), true);\n            }\n            return this;\n        },\n\n        /**\n            Retrieve a DOM element by element ID\n\n            @param {string} elemId The delement ID to fetch\n\n            @returns {HTMLElement} The elements DOM node or null if not found.\n        */\n\n        get: function(elemId) {\n            return elemId in this._dom ? this._dom[elemId] : null;\n        },\n\n        /**\n            Retrieve a data object\n\n            @param {number} index The data index to retrieve.\n            If no index specified it will take the currently active image\n\n            @returns {Object} The data object\n        */\n\n        getData: function(index) {\n            return index in this._data ?\n                this._data[index] : this._data[this._active];\n        },\n\n        /**\n            Retrieve the number of data items\n\n            @returns {number} The data length\n        */\n        getDataLength: function() {\n            return this._data.length;\n        },\n\n        /**\n            Retrieve the currently active index\n\n            @returns {number|boolean} The active index or false if none found\n        */\n\n        getIndex: function() {\n            return typeof this._active === 'number' ? this._active : false;\n        },\n\n        /**\n            Retrieve the stage height\n\n            @returns {number} The stage height\n        */\n\n        getStageHeight: function() {\n            return this._stageHeight;\n        },\n\n        /**\n            Retrieve the stage width\n\n            @returns {number} The stage width\n        */\n\n        getStageWidth: function() {\n            return this._stageWidth;\n        },\n\n        /**\n            Retrieve the option\n\n            @param {string} key The option key to retrieve. If no key specified it will return all options in an object.\n\n            @returns option or options\n        */\n\n        getOptions: function(key) {\n            return typeof key === 'undefined' ? this._options : this._options[key];\n        },\n\n        /**\n            Set options to the instance.\n            You can set options using a key & value argument or a single object argument (see examples)\n\n            @param {string} key The option key\n            @param {string} value the the options value\n\n            @example setOptions( 'autoplay', true )\n            @example setOptions({ autoplay: true });\n\n            @returns Instance\n        */\n\n        setOptions: function(key, value) {\n            if (typeof key === 'object') {\n                $.extend(this._options, key);\n            } else {\n                this._options[key] = value;\n            }\n            return this;\n        },\n\n        /**\n            Starts playing the slideshow\n\n            @param {number} delay Sets the slideshow interval in milliseconds.\n            If you set it once, you can just call play() and get the same interval the next time.\n\n            @returns Instance\n        */\n\n        play: function(delay) {\n\n            this._playing = true;\n\n            this._playtime = delay || this._playtime;\n\n            this._playCheck();\n\n            this.trigger(Galleria.PLAY);\n\n            return this;\n        },\n\n        /**\n            Stops the slideshow if currently playing\n\n            @returns Instance\n        */\n\n        pause: function() {\n\n            this._playing = false;\n\n            this.trigger(Galleria.PAUSE);\n\n            return this;\n        },\n\n        /**\n            Toggle between play and pause events.\n\n            @param {number} delay Sets the slideshow interval in milliseconds.\n\n            @returns Instance\n        */\n\n        playToggle: function(delay) {\n            return (this._playing) ? this.pause() : this.play(delay);\n        },\n\n        /**\n            Checks if the gallery is currently playing\n\n            @returns {Boolean}\n        */\n\n        isPlaying: function() {\n            return this._playing;\n        },\n\n        /**\n            Checks if the gallery is currently in fullscreen mode\n\n            @returns {Boolean}\n        */\n\n        isFullscreen: function() {\n            return this._fullscreen.active;\n        },\n\n        _playCheck: function() {\n            var self = this,\n                played = 0,\n                interval = 20,\n                now = Utils.timestamp(),\n                timer_id = 'play' + this._id;\n\n            if (this._playing) {\n\n                this.clearTimer(timer_id);\n\n                var fn = function() {\n\n                    played = Utils.timestamp() - now;\n                    if (played >= self._playtime && self._playing) {\n                        self.clearTimer(timer_id);\n                        self.next();\n                        return;\n                    }\n                    if (self._playing) {\n\n                        // trigger the PROGRESS event\n                        self.trigger({\n                            type: Galleria.PROGRESS,\n                            percent: M.ceil(played / self._playtime * 100),\n                            seconds: M.floor(played / 1000),\n                            milliseconds: played\n                        });\n\n                        self.addTimer(timer_id, fn, interval);\n                    }\n                };\n                self.addTimer(timer_id, fn, interval);\n            }\n        },\n\n        /**\n            Modify the slideshow delay\n\n            @param {number} delay the number of milliseconds between slides,\n\n            @returns Instance\n        */\n\n        setPlaytime: function(delay) {\n            this._playtime = delay;\n            return this;\n        },\n\n        setIndex: function(val) {\n            this._active = val;\n            return this;\n        },\n\n        /**\n            Manually modify the counter\n\n            @param {number} [index] Optional data index to fectch,\n            if no index found it assumes the currently active index\n\n            @returns Instance\n        */\n\n        setCounter: function(index) {\n\n            if (typeof index === 'number') {\n                index++;\n            } else if (typeof index === 'undefined') {\n                index = this.getIndex() + 1;\n            }\n\n            this.get('current').innerHTML = index;\n\n            if (IE) { // weird IE bug\n\n                var count = this.$('counter'),\n                    opacity = count.css('opacity');\n\n                if (parseInt(opacity, 10) === 1) {\n                    Utils.removeAlpha(count[0]);\n                } else {\n                    this.$('counter').css('opacity', opacity);\n                }\n\n            }\n\n            return this;\n        },\n\n        /**\n            Manually set captions\n\n            @param {number} [index] Optional data index to fectch and apply as caption,\n            if no index found it assumes the currently active index\n\n            @returns Instance\n        */\n\n        setInfo: function(index) {\n\n            var self = this,\n                data = this.getData(index);\n\n            $.each(['title', 'description'], function(i, type) {\n\n                var elem = self.$('info-' + type);\n\n                if (!!data[type]) {\n                    elem[data[type].length ? 'show' : 'hide']().html(data[type]);\n                } else {\n                    elem.empty().hide();\n                }\n            });\n\n            return this;\n        },\n\n        /**\n            Checks if the data contains any captions\n\n            @param {number} [index] Optional data index to fectch,\n            if no index found it assumes the currently active index.\n\n            @returns {boolean}\n        */\n\n        hasInfo: function(index) {\n\n            var check = 'title description'.split(' '),\n                i;\n\n            for (i = 0; check[i]; i++) {\n                if (!!this.getData(index)[check[i]]) {\n                    return true;\n                }\n            }\n            return false;\n\n        },\n\n        jQuery: function(str) {\n\n            var self = this,\n                ret = [];\n\n            $.each(str.split(','), function(i, elemId) {\n                elemId = $.trim(elemId);\n\n                if (self.get(elemId)) {\n                    ret.push(elemId);\n                }\n            });\n\n            var jQ = $(self.get(ret.shift()));\n\n            $.each(ret, function(i, elemId) {\n                jQ = jQ.add(self.get(elemId));\n            });\n\n            return jQ;\n\n        },\n\n        /**\n            Converts element IDs into a jQuery collection\n            You can call for multiple IDs separated with commas.\n\n            @param {string} str One or more element IDs (comma-separated)\n\n            @returns jQuery\n\n            @example this.$('info,container').hide();\n        */\n\n        $: function(str) {\n            return this.jQuery.apply(this, Utils.array(arguments));\n        }\n\n    };\n\n    // End of Galleria prototype\n\n    // Add events as static variables\n    $.each(_events, function(i, ev) {\n\n        // legacy events\n        var type = /_/.test(ev) ? ev.replace(/_/g, '') : ev;\n\n        Galleria[ev.toUpperCase()] = 'galleria.' + type;\n\n    });\n\n    $.extend(Galleria, {\n\n        // Browser helpers\n        IE9: IE === 9,\n        IE8: IE === 8,\n        IE7: IE === 7,\n        IE6: IE === 6,\n        IE: IE,\n        WEBKIT: /webkit/.test(NAV),\n        CHROME: /chrome/.test(NAV),\n        SAFARI: /safari/.test(NAV) && !(/chrome/.test(NAV)),\n        QUIRK: (IE && doc.compatMode && doc.compatMode === \"BackCompat\"),\n        MAC: /mac/.test(navigator.platform.toLowerCase()),\n        OPERA: !!window.opera,\n        IPHONE: /iphone/.test(NAV),\n        IPAD: /ipad/.test(NAV),\n        ANDROID: /android/.test(NAV),\n        TOUCH: ('ontouchstart' in doc)\n\n    });\n\n    // Galleria static methods\n\n    /**\n        Adds a theme that you can use for your Gallery\n\n        @param {Object} theme Object that should contain all your theme settings.\n        <ul>\n            <li>name - name of the theme</li>\n            <li>author - name of the author</li>\n            <li>css - css file name (not path)</li>\n            <li>defaults - default options to apply, including theme-specific options</li>\n            <li>init - the init function</li>\n        </ul>\n\n        @returns {Object} theme\n    */\n\n    Galleria.addTheme = function(theme) {\n\n        // make sure we have a name\n        if (!theme.name) {\n            Galleria.raise('No theme name specified');\n        }\n\n        if (typeof theme.defaults !== 'object') {\n            theme.defaults = {};\n        } else {\n            theme.defaults = _legacyOptions(theme.defaults);\n        }\n\n        var css = false,\n            reg;\n\n        if (typeof theme.css === 'string') {\n\n            // look for manually added CSS\n            $('link').each(function(i, link) {\n                reg = new RegExp(theme.css);\n                if (reg.test(link.href)) {\n\n                    // we found the css\n                    css = true;\n\n                    // the themeload trigger\n                    _themeLoad(theme);\n\n                    return false;\n                }\n            });\n\n            // else look for the absolute path and load the CSS dynamic\n            if (!css) {\n\n\n                $(function() {\n                    // Try to determine the css-path from the theme script.\n                    // In IE8/9, the script-dom-element seems to be not present\n                    // at once, if galleria itself is inserted into the dom\n                    // dynamically. We therefore try multiple times before raising\n                    // an error.\n                    var retryCount = 0;\n                    var tryLoadCss = function() {\n                        $('script').each(function(i, script) {\n                            // look for the theme script\n                            reg = new RegExp('galleria\\\\.' + theme.name.toLowerCase() + '\\\\.');\n                            if (reg.test(script.src)) {\n\n                                // we have a match\n                                css = script.src.replace(/[^\\/]*$/, '') + theme.css;\n\n                                window.setTimeout(function() {\n                                    Utils.loadCSS(css, 'galleria-theme-' + theme.name, function() {\n\n                                        // run galleries with this theme\n                                        _themeLoad(theme);\n\n                                    });\n                                }, 1);\n                            }\n                        });\n                        if (!css) {\n                            if (retryCount++ > 5) {\n                                Galleria.raise('No theme CSS loaded');\n                            } else {\n                                window.setTimeout(tryLoadCss, 500);\n                            }\n                        }\n                    };\n                    tryLoadCss();\n                });\n            }\n\n        } else {\n\n            // pass\n            _themeLoad(theme);\n        }\n        return theme;\n    };\n\n    /**\n        loadTheme loads a theme js file and attaches a load event to Galleria\n\n        @param {string} src The relative path to the theme source file\n\n        @param {Object} [options] Optional options you want to apply\n\n        @returns Galleria\n    */\n\n    Galleria.loadTheme = function(src, options) {\n\n        // Don't load if theme is already loaded\n        if ($('script').filter(function() {\n                return $(this).attr('src') == src; }).length) {\n            return;\n        }\n\n        var loaded = false,\n            err;\n\n        // start listening for the timeout onload\n        $(window).load(function() {\n            if (!loaded) {\n                // give it another 20 seconds\n                err = window.setTimeout(function() {\n                    if (!loaded) {\n                        Galleria.raise(\"Galleria had problems loading theme at \" + src + \". Please check theme path or load manually.\", true);\n                    }\n                }, 20000);\n            }\n        });\n\n        // load the theme\n        Utils.loadScript(src, function() {\n            loaded = true;\n            window.clearTimeout(err);\n        });\n\n        return Galleria;\n    };\n\n    /**\n        Retrieves a Galleria instance.\n\n        @param {number} [index] Optional index to retrieve.\n        If no index is supplied, the method will return all instances in an array.\n\n        @returns Instance or Array of instances\n    */\n\n    Galleria.get = function(index) {\n        if (!!_instances[index]) {\n            return _instances[index];\n        } else if (typeof index !== 'number') {\n            return _instances;\n        } else {\n            Galleria.raise('Gallery index ' + index + ' not found');\n        }\n    };\n\n    /**\n\n        Configure Galleria options via a static function.\n        The options will be applied to all instances\n\n        @param {string|object} key The options to apply or a key\n\n        @param [value] If key is a string, this is the value\n\n        @returns Galleria\n\n    */\n\n    Galleria.configure = function(key, value) {\n\n        var opts = {};\n\n        if (typeof key == 'string' && value) {\n            opts[key] = value;\n            key = opts;\n        } else {\n            $.extend(opts, key);\n        }\n\n        Galleria.configure.options = opts;\n\n        $.each(Galleria.get(), function(i, instance) {\n            instance.setOptions(opts);\n        });\n\n        return Galleria;\n    };\n\n    Galleria.configure.options = {};\n\n    /**\n\n        Bind a Galleria event to the gallery\n\n        @param {string} type A string representing the galleria event\n\n        @param {function} callback The function that should run when the event is triggered\n\n        @returns Galleria\n\n    */\n\n    Galleria.on = function(type, callback) {\n        if (!type) {\n            return;\n        }\n\n        callback = callback || F;\n\n        // hash the bind\n        var hash = type + callback.toString().replace(/\\s/g, '') + Utils.timestamp();\n\n        // for existing instances\n        $.each(Galleria.get(), function(i, instance) {\n            instance._binds.push(hash);\n            instance.bind(type, callback);\n        });\n\n        // for future instances\n        Galleria.on.binds.push({\n            type: type,\n            callback: callback,\n            hash: hash\n        });\n\n        return Galleria;\n    };\n\n    Galleria.on.binds = [];\n\n    /**\n\n        Run Galleria\n        Alias for $(selector).galleria(options)\n\n        @param {string} selector A selector of element(s) to intialize galleria to\n\n        @param {object} options The options to apply\n\n        @returns Galleria\n\n    */\n\n    Galleria.run = function(selector, options) {\n        if ($.isFunction(options)) {\n            options = { extend: options };\n        }\n        $(selector || '#galleria').galleria(options);\n        return Galleria;\n    };\n\n    /**\n        Creates a transition to be used in your gallery\n\n        @param {string} name The name of the transition that you will use as an option\n\n        @param {Function} fn The function to be executed in the transition.\n        The function contains two arguments, params and complete.\n        Use the params Object to integrate the transition, and then call complete when you are done.\n\n        @returns Galleria\n\n    */\n\n    Galleria.addTransition = function(name, fn) {\n        _transitions.effects[name] = fn;\n        return Galleria;\n    };\n\n    /**\n        The Galleria utilites\n    */\n\n    Galleria.utils = Utils;\n\n    /**\n        A helper metod for cross-browser logging.\n        It uses the console log if available otherwise it falls back to alert\n\n        @example Galleria.log(\"hello\", document.body, [1,2,3]);\n    */\n\n    Galleria.log = function() {\n        var args = Utils.array(arguments);\n        if ('console' in window && 'log' in window.console) {\n            try {\n                return window.console.log.apply(window.console, args);\n            } catch (e) {\n                $.each(args, function() {\n                    window.console.log(this);\n                });\n            }\n        } else {\n            return window.alert(args.join('<br>'));\n        }\n    };\n\n    /**\n        A ready method for adding callbacks when a gallery is ready\n        Each method is call before the extend option for every instance\n\n        @param {function} callback The function to call\n\n        @returns Galleria\n    */\n\n    Galleria.ready = function(fn) {\n        if (typeof fn != 'function') {\n            return Galleria;\n        }\n        $.each(_galleries, function(i, gallery) {\n            fn.call(gallery, gallery._options);\n        });\n        Galleria.ready.callbacks.push(fn);\n        return Galleria;\n    };\n\n    Galleria.ready.callbacks = [];\n\n    /**\n        Method for raising errors\n\n        @param {string} msg The message to throw\n\n        @param {boolean} [fatal] Set this to true to override debug settings and display a fatal error\n    */\n\n    Galleria.raise = function(msg, fatal) {\n\n        var type = fatal ? 'Fatal error' : 'Error',\n\n            css = {\n                color: '#fff',\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                zIndex: 100000\n            },\n\n            echo = function(msg) {\n\n                var html = '<div style=\"padding:4px;margin:0 0 2px;background:#' +\n                    (fatal ? '811' : '222') + ';\">' +\n                    (fatal ? '<strong>' + type + ': </strong>' : '') +\n                    msg + '</div>';\n\n                $.each(_instances, function() {\n\n                    var cont = this.$('errors'),\n                        target = this.$('target');\n\n                    if (!cont.length) {\n\n                        target.css('position', 'relative');\n\n                        cont = this.addElement('errors').appendChild('target', 'errors').$('errors').css(css);\n                    }\n                    cont.append(html);\n\n                });\n\n                if (!_instances.length) {\n                    $('<div>').css($.extend(css, { position: 'fixed' })).append(html).appendTo(DOM().body);\n                }\n            };\n\n        // if debug is on, display errors and throw exception if fatal\n        if (DEBUG) {\n            echo(msg);\n            if (fatal) {\n                throw new Error(type + ': ' + msg);\n            }\n\n            // else just echo a silent generic error if fatal\n        } else if (fatal) {\n            if (_hasError) {\n                return;\n            }\n            _hasError = true;\n            fatal = false;\n            echo('Gallery could not load.');\n        }\n    };\n\n    // Add the version\n    Galleria.version = VERSION;\n\n    Galleria.getLoadedThemes = function() {\n        return $.map(_loadedThemes, function(theme) {\n            return theme.name;\n        });\n    };\n\n    /**\n        A method for checking what version of Galleria the user has installed and throws a readable error if the user needs to upgrade.\n        Useful when building plugins that requires a certain version to function.\n\n        @param {number} version The minimum version required\n\n        @param {string} [msg] Optional message to display. If not specified, Galleria will throw a generic error.\n\n        @returns Galleria\n    */\n\n    Galleria.requires = function(version, msg) {\n        msg = msg || 'You need to upgrade Galleria to version ' + version + ' to use one or more components.';\n        if (Galleria.version < version) {\n            Galleria.raise(msg, true);\n        }\n        return Galleria;\n    };\n\n    /**\n        Adds preload, cache, scale and crop functionality\n\n        @constructor\n\n        @requires jQuery\n\n        @param {number} [id] Optional id to keep track of instances\n    */\n\n    Galleria.Picture = function(id) {\n\n        // save the id\n        this.id = id || null;\n\n        // the image should be null until loaded\n        this.image = null;\n\n        // Create a new container\n        this.container = Utils.create('galleria-image');\n\n        // add container styles\n        $(this.container).css({\n            overflow: 'hidden',\n            position: 'relative' // for IE Standards mode\n        });\n\n        // saves the original measurements\n        this.original = {\n            width: 0,\n            height: 0\n        };\n\n        // flag when the image is ready\n        this.ready = false;\n\n        // flag for iframe Picture\n        this.isIframe = false;\n\n    };\n\n    Galleria.Picture.prototype = {\n\n        // the inherited cache object\n        cache: {},\n\n        // show the image on stage\n        show: function() {\n            Utils.show(this.image);\n        },\n\n        // hide the image\n        hide: function() {\n            Utils.moveOut(this.image);\n        },\n\n        clear: function() {\n            this.image = null;\n        },\n\n        /**\n            Checks if an image is in cache\n\n            @param {string} src The image source path, ex '/path/to/img.jpg'\n\n            @returns {boolean}\n        */\n\n        isCached: function(src) {\n            return !!this.cache[src];\n        },\n\n        /**\n            Preloads an image into the cache\n\n            @param {string} src The image source path, ex '/path/to/img.jpg'\n\n            @returns Galleria.Picture\n        */\n\n        preload: function(src) {\n            $(new Image()).load((function(src, cache) {\n                return function() {\n                    cache[src] = src;\n                };\n            }(src, this.cache))).attr('src', src);\n        },\n\n        /**\n            Loads an image and call the callback when ready.\n            Will also add the image to cache.\n\n            @param {string} src The image source path, ex '/path/to/img.jpg'\n            @param {Object} [size] The forced size of the image, defined as an object { width: xx, height:xx }\n            @param {Function} callback The function to be executed when the image is loaded & scaled\n\n            @returns The image container (jQuery object)\n        */\n\n        load: function(src, size, callback) {\n\n            if (typeof size == 'function') {\n                callback = size;\n                size = null;\n            }\n\n            if (this.isIframe) {\n                var id = 'if' + new Date().getTime();\n\n                var iframe = this.image = $('<iframe>', {\n                    src: src,\n                    frameborder: 0,\n                    id: id,\n                    allowfullscreen: true,\n                    css: { visibility: 'hidden' }\n                })[0];\n\n                if (size) {\n                    $(iframe).css(size);\n                }\n\n                $(this.container).find('iframe,img').remove();\n\n                this.container.appendChild(this.image);\n\n                $('#' + id).load((function(self, callback) {\n                    return function() {\n                        window.setTimeout(function() {\n                            $(self.image).css('visibility', 'visible');\n                            if (typeof callback == 'function') {\n                                callback.call(self, self);\n                            }\n                        }, 10);\n                    };\n                }(this, callback)));\n\n                return this.container;\n            }\n\n            this.image = new Image();\n\n            // IE8 opacity inherit bug\n            if (Galleria.IE8) {\n                $(this.image).css('filter', 'inherit');\n            }\n\n            // FF shaking images bug:\n            // http://support.galleria.io/discussions/problems/12245-shaking-photos\n            if (!Galleria.IE && !Galleria.CHROME && !Galleria.SAFARI) {\n                $(this.image).css('image-rendering', 'optimizequality');\n            }\n\n            var reload = false,\n                resort = false,\n\n                // some jquery cache\n                $container = $(this.container),\n                $image = $(this.image),\n\n                onerror = function() {\n                    if (!reload) {\n                        reload = true;\n                        // reload the image with a timestamp\n                        window.setTimeout((function(image, src) {\n                            return function() {\n                                image.attr('src', src + (src.indexOf('?') > -1 ? '&' : '?') + Utils.timestamp());\n                            };\n                        }($(this), src)), 50);\n                    } else {\n                        // apply the dummy image if it exists\n                        if (DUMMY) {\n                            $(this).attr('src', DUMMY);\n                        } else {\n                            Galleria.raise('Image not found: ' + src);\n                        }\n                    }\n                },\n\n                // the onload method\n                onload = (function(self, callback, src) {\n\n                    return function() {\n\n                        var complete = function() {\n\n                            $(this).off('load');\n\n                            // save the original size\n                            self.original = size || {\n                                height: this.height,\n                                width: this.width\n                            };\n\n                            // translate3d if needed\n                            if (Galleria.HAS3D) {\n                                this.style.MozTransform = this.style.webkitTransform = 'translate3d(0,0,0)';\n                            }\n\n                            $container.append(this);\n\n                            self.cache[src] = src; // will override old cache\n\n                            if (typeof callback == 'function') {\n                                window.setTimeout(function() {\n                                    callback.call(self, self);\n                                }, 1);\n                            }\n                        };\n\n                        // Delay the callback to \"fix\" the Adblock Bug\n                        // http://code.google.com/p/adblockforchrome/issues/detail?id=3701\n                        if ((!this.width || !this.height)) {\n                            (function(img) {\n                                Utils.wait({\n                                    until: function() {\n                                        return img.width && img.height;\n                                    },\n                                    success: function() {\n                                        complete.call(img);\n                                    },\n                                    error: function() {\n                                        if (!resort) {\n                                            $(new Image()).load(onload).attr('src', img.src);\n                                            resort = true;\n                                        } else {\n                                            Galleria.raise('Could not extract width/height from image: ' + img.src +\n                                                '. Traced measures: width:' + img.width + 'px, height: ' + img.height + 'px.');\n                                        }\n                                    },\n                                    timeout: 100\n                                });\n                            }(this));\n                        } else {\n                            complete.call(this);\n                        }\n                    };\n                }(this, callback, src));\n\n            // remove any previous images\n            $container.find('iframe,img').remove();\n\n            // append the image\n            $image.css('display', 'block');\n\n            // hide it for now\n            Utils.hide(this.image);\n\n            // remove any max/min scaling\n            $.each('minWidth minHeight maxWidth maxHeight'.split(' '), function(i, prop) {\n                $image.css(prop, (/min/.test(prop) ? '0' : 'none'));\n            });\n\n            // begin load and insert in cache when done\n            $image.load(onload).on('error', onerror).attr('src', src);\n\n            // return the container\n            return this.container;\n        },\n\n        /**\n            Scales and crops the image\n\n            @param {Object} options The method takes an object with a number of options:\n\n            <ul>\n                <li>width - width of the container</li>\n                <li>height - height of the container</li>\n                <li>min - minimum scale ratio</li>\n                <li>max - maximum scale ratio</li>\n                <li>margin - distance in pixels from the image border to the container</li>\n                <li>complete - a callback that fires when scaling is complete</li>\n                <li>position - positions the image, works like the css background-image property.</li>\n                <li>crop - defines how to crop. Can be true, false, 'width' or 'height'</li>\n                <li>canvas - set to true to try a canvas-based rescale</li>\n            </ul>\n\n            @returns The image container object (jQuery)\n        */\n\n        scale: function(options) {\n\n            var self = this;\n\n            // extend some defaults\n            options = $.extend({\n                width: 0,\n                height: 0,\n                min: undef,\n                max: undef,\n                margin: 0,\n                complete: F,\n                position: 'center',\n                crop: false,\n                canvas: false,\n                iframelimit: undef\n            }, options);\n\n            if (this.isIframe) {\n\n                var cw = options.width,\n                    ch = options.height,\n                    nw, nh;\n                if (options.iframelimit) {\n                    var r = M.min(options.iframelimit / cw, options.iframelimit / ch);\n                    if (r < 1) {\n                        nw = cw * r;\n                        nh = ch * r;\n\n                        $(this.image).css({\n                            top: ch / 2 - nh / 2,\n                            left: cw / 2 - nw / 2,\n                            position: 'absolute'\n                        });\n                    } else {\n                        $(this.image).css({\n                            top: 0,\n                            left: 0\n                        });\n                    }\n                }\n                $(this.image).width(nw || cw).height(nh || ch).removeAttr('width').removeAttr('height');\n                $(this.container).width(cw).height(ch);\n                options.complete.call(self, self);\n                try {\n                    if (this.image.contentWindow) {\n                        $(this.image.contentWindow).trigger('resize');\n                    }\n                } catch (e) {}\n                return this.container;\n\n            }\n\n            // return the element if no image found\n            if (!this.image) {\n                return this.container;\n            }\n\n            // store locale variables\n            var width,\n                height,\n                $container = $(self.container),\n                data;\n\n            // wait for the width/height\n            Utils.wait({\n                until: function() {\n                    width = options.width ||\n                        $container.width() ||\n                        Utils.parseValue($container.css('width'));\n\n                    height = options.height ||\n                        $container.height() ||\n                        Utils.parseValue($container.css('height'));\n\n                    return width && height;\n                },\n                success: function() {\n\n                    // calculate some cropping\n                    var newWidth = (width - options.margin * 2) / self.original.width,\n                        newHeight = (height - options.margin * 2) / self.original.height,\n                        min = M.min(newWidth, newHeight),\n                        max = M.max(newWidth, newHeight),\n                        cropMap = {\n                            'true': max,\n                            'width': newWidth,\n                            'height': newHeight,\n                            'false': min,\n                            'landscape': self.original.width > self.original.height ? max : min,\n                            'portrait': self.original.width < self.original.height ? max : min\n                        },\n                        ratio = cropMap[options.crop.toString()],\n                        canvasKey = '';\n\n                    // allow maxScaleRatio\n                    if (options.max) {\n                        ratio = M.min(options.max, ratio);\n                    }\n\n                    // allow minScaleRatio\n                    if (options.min) {\n                        ratio = M.max(options.min, ratio);\n                    }\n\n                    $.each(['width', 'height'], function(i, m) {\n                        $(self.image)[m](self[m] = self.image[m] = M.round(self.original[m] * ratio));\n                    });\n\n                    $(self.container).width(width).height(height);\n\n                    if (options.canvas && _canvas) {\n\n                        _canvas.elem.width = self.width;\n                        _canvas.elem.height = self.height;\n\n                        canvasKey = self.image.src + ':' + self.width + 'x' + self.height;\n\n                        self.image.src = _canvas.cache[canvasKey] || (function(key) {\n\n                            _canvas.context.drawImage(self.image, 0, 0, self.original.width * ratio, self.original.height * ratio);\n\n                            try {\n\n                                data = _canvas.elem.toDataURL();\n                                _canvas.length += data.length;\n                                _canvas.cache[key] = data;\n                                return data;\n\n                            } catch (e) {\n                                return self.image.src;\n                            }\n\n                        }(canvasKey));\n\n                    }\n\n                    // calculate image_position\n                    var pos = {},\n                        mix = {},\n                        getPosition = function(value, measure, margin) {\n                            var result = 0;\n                            if (/\\%/.test(value)) {\n                                var flt = parseInt(value, 10) / 100,\n                                    m = self.image[measure] || $(self.image)[measure]();\n\n                                result = M.ceil(m * -1 * flt + margin * flt);\n                            } else {\n                                result = Utils.parseValue(value);\n                            }\n                            return result;\n                        },\n                        positionMap = {\n                            'top': { top: 0 },\n                            'left': { left: 0 },\n                            'right': { left: '100%' },\n                            'bottom': { top: '100%' }\n                        };\n\n                    $.each(options.position.toLowerCase().split(' '), function(i, value) {\n                        if (value === 'center') {\n                            value = '50%';\n                        }\n                        pos[i ? 'top' : 'left'] = value;\n                    });\n\n                    $.each(pos, function(i, value) {\n                        if (positionMap.hasOwnProperty(value)) {\n                            $.extend(mix, positionMap[value]);\n                        }\n                    });\n\n                    pos = pos.top ? $.extend(pos, mix) : mix;\n\n                    pos = $.extend({\n                        top: '50%',\n                        left: '50%'\n                    }, pos);\n\n                    // apply position\n                    $(self.image).css({\n                        position: 'absolute',\n                        top: getPosition(pos.top, 'height', height),\n                        left: getPosition(pos.left, 'width', width)\n                    });\n\n                    // show the image\n                    self.show();\n\n                    // flag ready and call the callback\n                    self.ready = true;\n                    options.complete.call(self, self);\n\n                },\n                error: function() {\n                    Galleria.raise('Could not scale image: ' + self.image.src);\n                },\n                timeout: 1000\n            });\n            return this;\n        }\n    };\n\n    // our own easings\n    $.extend($.easing, {\n\n        galleria: function(_, t, b, c, d) {\n            if ((t /= d / 2) < 1) {\n                return c / 2 * t * t * t + b;\n            }\n            return c / 2 * ((t -= 2) * t * t + 2) + b;\n        },\n\n        galleriaIn: function(_, t, b, c, d) {\n            return c * (t /= d) * t + b;\n        },\n\n        galleriaOut: function(_, t, b, c, d) {\n            return -c * (t /= d) * (t - 2) + b;\n        }\n\n    });\n\n\n    // Forked version of Ainos Finger.js for native-style touch\n\n    Galleria.Finger = (function() {\n\n        var abs = M.abs;\n\n        // test for translate3d support\n        var has3d = Galleria.HAS3D = (function() {\n\n            var el = doc.createElement('p'),\n                has3d,\n                t = ['webkit', 'O', 'ms', 'Moz', ''],\n                s,\n                i = 0,\n                a = 'transform';\n\n            DOM().html.insertBefore(el, null);\n\n            for (; t[i]; i++) {\n                s = t[i] ? t[i] + 'Transform' : a;\n                if (el.style[s] !== undefined) {\n                    el.style[s] = \"translate3d(1px,1px,1px)\";\n                    has3d = $(el).css(t[i] ? '-' + t[i].toLowerCase() + '-' + a : a);\n                }\n            }\n\n            DOM().html.removeChild(el);\n            return (has3d !== undefined && has3d.length > 0 && has3d !== \"none\");\n        }());\n\n        // request animation shim\n        var requestFrame = (function() {\n            var r = 'RequestAnimationFrame';\n            return window.requestAnimationFrame ||\n                window['webkit' + r] ||\n                window['moz' + r] ||\n                window['o' + r] ||\n                window['ms' + r] ||\n                function(callback) {\n                    window.setTimeout(callback, 1000 / 60);\n                };\n        }());\n\n        var Finger = function(elem, options) {\n\n            // default options\n            this.config = {\n                start: 0,\n                duration: 500,\n                onchange: function() {},\n                oncomplete: function() {},\n                easing: function(x, t, b, c, d) {\n                    return -c * ((t = t / d - 1) * t * t * t - 1) + b; // easeOutQuart\n                }\n            };\n\n            this.easeout = function(x, t, b, c, d) {\n                return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n            };\n\n            if (!elem.children.length) {\n                return;\n            }\n\n            var self = this;\n\n            // extend options\n            $.extend(this.config, options);\n\n            this.elem = elem;\n            this.child = elem.children[0];\n            this.to = this.pos = 0;\n            this.touching = false;\n            this.start = {};\n            this.index = this.config.start;\n            this.anim = 0;\n            this.easing = this.config.easing;\n\n            if (!has3d) {\n                this.child.style.position = 'absolute';\n                this.elem.style.position = 'relative';\n            }\n\n            // Bind event handlers to context\n            $.each(['ontouchstart', 'ontouchmove', 'ontouchend', 'setup'], function(i, fn) {\n                self[fn] = (function(caller) {\n                    return function() {\n                        caller.apply(self, arguments);\n                    };\n                }(self[fn]));\n            });\n\n            // the physical animator\n            this.setX = function() {\n\n                var style = self.child.style;\n\n                if (!has3d) {\n                    // this is actually faster than CSS3 translate\n                    style.left = self.pos + 'px';\n                    return;\n                }\n                style.MozTransform = style.webkitTransform = style.transform = 'translate3d(' + self.pos + 'px,0,0)';\n                return;\n            };\n\n            // bind events\n            $(elem).on('touchstart', this.ontouchstart);\n            $(window).on('resize', this.setup);\n            $(window).on('orientationchange', this.setup);\n\n            // set up width\n            this.setup();\n\n            // start the animations\n            (function animloop() {\n                requestFrame(animloop);\n                self.loop.call(self);\n            }());\n\n        };\n\n        Finger.prototype = {\n\n            constructor: Finger,\n\n            setup: function() {\n                this.width = $(this.elem).width();\n                this.length = M.ceil($(this.child).width() / this.width);\n                if (this.index !== 0) {\n                    this.index = M.max(0, M.min(this.index, this.length - 1));\n                    this.pos = this.to = -this.width * this.index;\n                }\n            },\n\n            setPosition: function(pos) {\n                this.pos = pos;\n                this.to = pos;\n            },\n\n            ontouchstart: function(e) {\n\n                var touch = e.originalEvent.touches;\n\n                this.start = {\n                    pageX: touch[0].pageX,\n                    pageY: touch[0].pageY,\n                    time: +new Date()\n                };\n\n                this.isScrolling = null;\n                this.touching = true;\n                this.deltaX = 0;\n\n                $doc.on('touchmove', this.ontouchmove);\n                $doc.on('touchend', this.ontouchend);\n            },\n\n            ontouchmove: function(e) {\n\n                var touch = e.originalEvent.touches;\n\n                // ensure swiping with one touch and not pinching\n                if (touch && touch.length > 1 || e.scale && e.scale !== 1) {\n                    return;\n                }\n\n                this.deltaX = touch[0].pageX - this.start.pageX;\n\n                // determine if scrolling test has run - one time test\n                if (this.isScrolling === null) {\n                    this.isScrolling = !!(\n                        this.isScrolling ||\n                        M.abs(this.deltaX) < M.abs(touch[0].pageY - this.start.pageY)\n                    );\n                }\n\n                // if user is not trying to scroll vertically\n                if (!this.isScrolling) {\n\n                    // prevent native scrolling\n                    e.preventDefault();\n\n                    // increase resistance if first or last slide\n                    this.deltaX /= ((!this.index && this.deltaX > 0 || this.index == this.length - 1 && this.deltaX < 0) ?\n                        (M.abs(this.deltaX) / this.width + 1.8) : 1);\n                    this.to = this.deltaX - this.index * this.width;\n                }\n                e.stopPropagation();\n            },\n\n            ontouchend: function(e) {\n\n                this.touching = false;\n\n                // determine if slide attempt triggers next/prev slide\n                var isValidSlide = +new Date() - this.start.time < 250 &&\n                    M.abs(this.deltaX) > 40 ||\n                    M.abs(this.deltaX) > this.width / 2,\n\n                    isPastBounds = !this.index && this.deltaX > 0 ||\n                    this.index == this.length - 1 && this.deltaX < 0;\n\n                // if not scrolling vertically\n                if (!this.isScrolling) {\n                    this.show(this.index + (isValidSlide && !isPastBounds ? (this.deltaX < 0 ? 1 : -1) : 0));\n                }\n\n                $doc.off('touchmove', this.ontouchmove);\n                $doc.off('touchend', this.ontouchend);\n            },\n\n            show: function(index) {\n                if (index != this.index) {\n                    this.config.onchange.call(this, index);\n                } else {\n                    this.to = -(index * this.width);\n                }\n            },\n\n            moveTo: function(index) {\n                if (index != this.index) {\n                    this.pos = this.to = -(index * this.width);\n                    this.index = index;\n                }\n            },\n\n            loop: function() {\n\n                var distance = this.to - this.pos,\n                    factor = 1;\n\n                if (this.width && distance) {\n                    factor = M.max(0.5, M.min(1.5, M.abs(distance / this.width)));\n                }\n\n                // if distance is short or the user is touching, do a 1-1 animation\n                if (this.touching || M.abs(distance) <= 1) {\n                    this.pos = this.to;\n                    distance = 0;\n                    if (this.anim && !this.touching) {\n                        this.config.oncomplete(this.index);\n                    }\n                    this.anim = 0;\n                    this.easing = this.config.easing;\n                } else {\n                    if (!this.anim) {\n                        // save animation parameters\n                        this.anim = { start: this.pos, time: +new Date(), distance: distance, factor: factor, destination: this.to };\n                    }\n                    // check if to has changed or time has run out\n                    var elapsed = +new Date() - this.anim.time;\n                    var duration = this.config.duration * this.anim.factor;\n\n                    if (elapsed > duration || this.anim.destination != this.to) {\n                        this.anim = 0;\n                        this.easing = this.easeout;\n                        return;\n                    }\n                    // apply easing\n                    this.pos = this.easing(\n                        null,\n                        elapsed,\n                        this.anim.start,\n                        this.anim.distance,\n                        duration\n                    );\n                }\n                this.setX();\n            }\n        };\n\n        return Finger;\n\n    }());\n\n    // the plugin initializer\n    $.fn.galleria = function(options) {\n\n        var selector = this.selector;\n\n        // try domReady if element not found\n        if (!$(this).length) {\n\n            $(function() {\n                if ($(selector).length) {\n\n                    // if found on domReady, go ahead\n                    $(selector).galleria(options);\n\n                } else {\n\n                    // if not, try fetching the element for 5 secs, then raise a warning.\n                    Galleria.utils.wait({\n                        until: function() {\n                            return $(selector).length;\n                        },\n                        success: function() {\n                            $(selector).galleria(options);\n                        },\n                        error: function() {\n                            Galleria.raise('Init failed: Galleria could not find the element \"' + selector + '\".');\n                        },\n                        timeout: 5000\n                    });\n\n                }\n            });\n            return this;\n        }\n\n        return this.each(function() {\n\n            // destroy previous instance and prepare for new load\n            if ($.data(this, 'galleria')) {\n                $.data(this, 'galleria').destroy();\n                $(this).find('*').hide();\n            }\n\n            // load the new gallery\n            $.data(this, 'galleria', new Galleria().init(this, options));\n        });\n\n    };\n\n    // export as AMD or CommonJS\n    if (typeof module === \"object\" && module && typeof module.exports === \"object\") {\n        module.exports = Galleria;\n    } else {\n        window.Galleria = Galleria;\n        if (typeof define === \"function\" && define.amd) {\n            define(\"galleria\", ['jquery'], function() {\n                return Galleria; });\n        }\n    }\n\n    // phew\n\n}(jQuery, this));\n","source":"galleria/galleria-1.4.5.js","raw":"/**\n * Galleria v 1.4.5 2016-09-04\n * http://galleria.io\n *\n * Licensed under the MIT license\n * https://raw.github.com/worseisbetter/galleria/master/LICENSE\n *\n */\n\n(function($, window, Galleria, undef) {\n\n    /*global jQuery, navigator, Image, module, define */\n\n    // some references\n    var doc = window.document,\n        $doc = $(doc),\n        $win = $(window),\n\n        // native prototypes\n        protoArray = Array.prototype,\n\n        // internal constants\n        VERSION = 1.45,\n        DEBUG = true,\n        TIMEOUT = 30000,\n        DUMMY = false,\n        NAV = navigator.userAgent.toLowerCase(),\n        HASH = window.location.hash.replace(/#\\//, ''),\n        PROT = window.location.protocol == \"file:\" ? \"http:\" : window.location.protocol,\n        M = Math,\n        F = function() {},\n        FALSE = function() {\n            return false; },\n        IE = (function() {\n\n            var v = 3,\n                div = doc.createElement('div'),\n                all = div.getElementsByTagName('i');\n\n            do {\n                div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->';\n            } while (all[0]);\n\n            return v > 4 ? v : doc.documentMode || undef;\n\n        }()),\n        DOM = function() {\n            return {\n                html: doc.documentElement,\n                body: doc.body,\n                head: doc.getElementsByTagName('head')[0],\n                title: doc.title\n            };\n        },\n        IFRAME = window.parent !== window.self,\n\n        // list of Galleria events\n        _eventlist = 'data ready thumbnail loadstart loadfinish image play pause progress ' +\n        'fullscreen_enter fullscreen_exit idle_enter idle_exit rescale ' +\n        'lightbox_open lightbox_close lightbox_image',\n\n        _events = (function() {\n\n            var evs = [];\n\n            $.each(_eventlist.split(' '), function(i, ev) {\n                evs.push(ev);\n\n                // legacy events\n                if (/_/.test(ev)) {\n                    evs.push(ev.replace(/_/g, ''));\n                }\n            });\n\n            return evs;\n\n        }()),\n\n        // legacy options\n        // allows the old my_setting syntax and converts it to camel case\n\n        _legacyOptions = function(options) {\n\n            var n;\n\n            if (typeof options !== 'object') {\n\n                // return whatever it was...\n                return options;\n            }\n\n            $.each(options, function(key, value) {\n                if (/^[a-z]+_/.test(key)) {\n                    n = '';\n                    $.each(key.split('_'), function(i, k) {\n                        n += i > 0 ? k.substr(0, 1).toUpperCase() + k.substr(1) : k;\n                    });\n                    options[n] = value;\n                    delete options[key];\n                }\n            });\n\n            return options;\n        },\n\n        _patchEvent = function(type) {\n\n            // allow 'image' instead of Galleria.IMAGE\n            if ($.inArray(type, _events) > -1) {\n                return Galleria[type.toUpperCase()];\n            }\n\n            return type;\n        },\n\n        // video providers\n        _video = {\n            youtube: {\n                reg: /https?:\\/\\/(?:[a-zA_Z]{2,3}.)?(?:youtube\\.com\\/watch\\?)((?:[\\w\\d\\-\\_\\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\\-\\_]+))/i,\n                embed: function() {\n                    return PROT + '//www.youtube.com/embed/' + this.id;\n                },\n                get_thumb: function(data) {\n                    return PROT + '//img.youtube.com/vi/' + this.id + '/default.jpg';\n                },\n                get_image: function(data) {\n                    return PROT + '//img.youtube.com/vi/' + this.id + '/hqdefault.jpg';\n                }\n            },\n            vimeo: {\n                reg: /https?:\\/\\/(?:www\\.)?(vimeo\\.com)\\/(?:hd#)?([0-9]+)/i,\n                embed: function() {\n                    return PROT + '//player.vimeo.com/video/' + this.id;\n                },\n                getUrl: function() {\n                    return PROT + '//vimeo.com/api/v2/video/' + this.id + '.json?callback=?';\n                },\n                get_thumb: function(data) {\n                    return data[0].thumbnail_medium;\n                },\n                get_image: function(data) {\n                    return data[0].thumbnail_large;\n                }\n            },\n            dailymotion: {\n                reg: /https?:\\/\\/(?:www\\.)?(dailymotion\\.com)\\/video\\/([^_]+)/,\n                embed: function() {\n                    return PROT + '//www.dailymotion.com/embed/video/' + this.id;\n                },\n                getUrl: function() {\n                    return 'https://api.dailymotion.com/video/' + this.id + '?fields=thumbnail_240_url,thumbnail_720_url&callback=?';\n                },\n                get_thumb: function(data) {\n                    return data.thumbnail_240_url;\n                },\n                get_image: function(data) {\n                    return data.thumbnail_720_url;\n                }\n            },\n            _inst: []\n        },\n        Video = function(type, id) {\n\n            for (var i = 0; i < _video._inst.length; i++) {\n                if (_video._inst[i].id === id && _video._inst[i].type == type) {\n                    return _video._inst[i];\n                }\n            }\n\n            this.type = type;\n            this.id = id;\n            this.readys = [];\n\n            _video._inst.push(this);\n\n            var self = this;\n\n            $.extend(this, _video[type]);\n\n            _videoThumbs = function(data) {\n                self.data = data;\n                $.each(self.readys, function(i, fn) {\n                    fn(self.data);\n                });\n                self.readys = [];\n            };\n\n            if (this.hasOwnProperty('getUrl')) {\n                $.getJSON(this.getUrl(), _videoThumbs);\n            } else {\n                window.setTimeout(_videoThumbs, 400);\n            }\n\n            this.getMedia = function(type, callback, fail) {\n                fail = fail || F;\n                var self = this;\n                var success = function(data) {\n                    callback(self['get_' + type](data));\n                };\n                try {\n                    if (self.data) {\n                        success(self.data);\n                    } else {\n                        self.readys.push(success);\n                    }\n                } catch (e) {\n                    fail();\n                }\n            };\n        },\n\n        // utility for testing the video URL and getting the video ID\n        _videoTest = function(url) {\n            var match;\n            for (var v in _video) {\n                match = url && _video[v].reg && url.match(_video[v].reg);\n                if (match && match.length) {\n                    return {\n                        id: match[2],\n                        provider: v\n                    };\n                }\n            }\n            return false;\n        },\n\n        // native fullscreen handler\n        _nativeFullscreen = {\n\n            support: (function() {\n                var html = DOM().html;\n                return !IFRAME && (html.requestFullscreen || html.msRequestFullscreen || html.mozRequestFullScreen || html.webkitRequestFullScreen);\n            }()),\n\n            callback: F,\n\n            enter: function(instance, callback, elem) {\n\n                this.instance = instance;\n\n                this.callback = callback || F;\n\n                elem = elem || DOM().html;\n                if (elem.requestFullscreen) {\n                    elem.requestFullscreen();\n                } else if (elem.msRequestFullscreen) {\n                    elem.msRequestFullscreen();\n                } else if (elem.mozRequestFullScreen) {\n                    elem.mozRequestFullScreen();\n                } else if (elem.webkitRequestFullScreen) {\n                    elem.webkitRequestFullScreen();\n                }\n            },\n\n            exit: function(callback) {\n\n                this.callback = callback || F;\n\n                if (doc.exitFullscreen) {\n                    doc.exitFullscreen();\n                } else if (doc.msExitFullscreen) {\n                    doc.msExitFullscreen();\n                } else if (doc.mozCancelFullScreen) {\n                    doc.mozCancelFullScreen();\n                } else if (doc.webkitCancelFullScreen) {\n                    doc.webkitCancelFullScreen();\n                }\n            },\n\n            instance: null,\n\n            listen: function() {\n\n                if (!this.support) {\n                    return;\n                }\n\n                var handler = function() {\n\n                    if (!_nativeFullscreen.instance) {\n                        return;\n                    }\n                    var fs = _nativeFullscreen.instance._fullscreen;\n\n                    if (doc.fullscreen || doc.mozFullScreen || doc.webkitIsFullScreen || (doc.msFullscreenElement && doc.msFullscreenElement !== null)) {\n                        fs._enter(_nativeFullscreen.callback);\n                    } else {\n                        fs._exit(_nativeFullscreen.callback);\n                    }\n                };\n                doc.addEventListener('fullscreenchange', handler, false);\n                doc.addEventListener('MSFullscreenChange', handler, false);\n                doc.addEventListener('mozfullscreenchange', handler, false);\n                doc.addEventListener('webkitfullscreenchange', handler, false);\n            }\n        },\n\n        // the internal gallery holder\n        _galleries = [],\n\n        // the internal instance holder\n        _instances = [],\n\n        // flag for errors\n        _hasError = false,\n\n        // canvas holder\n        _canvas = false,\n\n        // instance pool, holds the galleries until themeLoad is triggered\n        _pool = [],\n\n        // Run galleries from theme trigger\n        _loadedThemes = [],\n        _themeLoad = function(theme) {\n\n            _loadedThemes.push(theme);\n\n            // run the instances we have in the pool\n            // and apply the last theme if not specified\n            $.each(_pool, function(i, instance) {\n                if (instance._options.theme == theme.name || (!instance._initialized && !instance._options.theme)) {\n                    instance.theme = theme;\n                    instance._init.call(instance);\n                }\n            });\n        },\n\n        // the Utils singleton\n        Utils = (function() {\n\n            return {\n\n                // legacy support for clearTimer\n                clearTimer: function(id) {\n                    $.each(Galleria.get(), function() {\n                        this.clearTimer(id);\n                    });\n                },\n\n                // legacy support for addTimer\n                addTimer: function(id) {\n                    $.each(Galleria.get(), function() {\n                        this.addTimer(id);\n                    });\n                },\n\n                array: function(obj) {\n                    return protoArray.slice.call(obj, 0);\n                },\n\n                create: function(className, nodeName) {\n                    nodeName = nodeName || 'div';\n                    var elem = doc.createElement(nodeName);\n                    elem.className = className;\n                    return elem;\n                },\n\n                removeFromArray: function(arr, elem) {\n                    $.each(arr, function(i, el) {\n                        if (el == elem) {\n                            arr.splice(i, 1);\n                            return false;\n                        }\n                    });\n                    return arr;\n                },\n\n                getScriptPath: function(src) {\n\n                    // the currently executing script is always the last\n                    src = src || $('script:last').attr('src');\n                    var slices = src.split('/');\n\n                    if (slices.length == 1) {\n                        return '';\n                    }\n\n                    slices.pop();\n\n                    return slices.join('/') + '/';\n                },\n\n                // CSS3 transitions, added in 1.2.4\n                animate: (function() {\n\n                    // detect transition\n                    var transition = (function(style) {\n                        var props = 'transition WebkitTransition MozTransition OTransition'.split(' '),\n                            i;\n\n                        // disable css3 animations in opera until stable\n                        if (window.opera) {\n                            return false;\n                        }\n\n                        for (i = 0; props[i]; i++) {\n                            if (typeof style[props[i]] !== 'undefined') {\n                                return props[i];\n                            }\n                        }\n                        return false;\n                    }((doc.body || doc.documentElement).style));\n\n                    // map transitionend event\n                    var endEvent = {\n                        MozTransition: 'transitionend',\n                        OTransition: 'oTransitionEnd',\n                        WebkitTransition: 'webkitTransitionEnd',\n                        transition: 'transitionend'\n                    }[transition];\n\n                    // map bezier easing conversions\n                    var easings = {\n                        _default: [0.25, 0.1, 0.25, 1],\n                        galleria: [0.645, 0.045, 0.355, 1],\n                        galleriaIn: [0.55, 0.085, 0.68, 0.53],\n                        galleriaOut: [0.25, 0.46, 0.45, 0.94],\n                        ease: [0.25, 0, 0.25, 1],\n                        linear: [0.25, 0.25, 0.75, 0.75],\n                        'ease-in': [0.42, 0, 1, 1],\n                        'ease-out': [0, 0, 0.58, 1],\n                        'ease-in-out': [0.42, 0, 0.58, 1]\n                    };\n\n                    // function for setting transition css for all browsers\n                    var setStyle = function(elem, value, suffix) {\n                        var css = {};\n                        suffix = suffix || 'transition';\n                        $.each('webkit moz ms o'.split(' '), function() {\n                            css['-' + this + '-' + suffix] = value;\n                        });\n                        elem.css(css);\n                    };\n\n                    // clear styles\n                    var clearStyle = function(elem) {\n                        setStyle(elem, 'none', 'transition');\n                        if (Galleria.WEBKIT && Galleria.TOUCH) {\n                            setStyle(elem, 'translate3d(0,0,0)', 'transform');\n                            if (elem.data('revert')) {\n                                elem.css(elem.data('revert'));\n                                elem.data('revert', null);\n                            }\n                        }\n                    };\n\n                    // various variables\n                    var change, strings, easing, syntax, revert, form, css;\n\n                    // the actual animation method\n                    return function(elem, to, options) {\n\n                        // extend defaults\n                        options = $.extend({\n                            duration: 400,\n                            complete: F,\n                            stop: false\n                        }, options);\n\n                        // cache jQuery instance\n                        elem = $(elem);\n\n                        if (!options.duration) {\n                            elem.css(to);\n                            options.complete.call(elem[0]);\n                            return;\n                        }\n\n                        // fallback to jQuery's animate if transition is not supported\n                        if (!transition) {\n                            elem.animate(to, options);\n                            return;\n                        }\n\n                        // stop\n                        if (options.stop) {\n                            // clear the animation\n                            elem.off(endEvent);\n                            clearStyle(elem);\n                        }\n\n                        // see if there is a change\n                        change = false;\n                        $.each(to, function(key, val) {\n                            css = elem.css(key);\n                            if (Utils.parseValue(css) != Utils.parseValue(val)) {\n                                change = true;\n                            }\n                            // also add computed styles for FF\n                            elem.css(key, css);\n                        });\n                        if (!change) {\n                            window.setTimeout(function() {\n                                options.complete.call(elem[0]);\n                            }, options.duration);\n                            return;\n                        }\n\n                        // the css strings to be applied\n                        strings = [];\n\n                        // the easing bezier\n                        easing = options.easing in easings ? easings[options.easing] : easings._default;\n\n                        // the syntax\n                        syntax = ' ' + options.duration + 'ms' + ' cubic-bezier(' + easing.join(',') + ')';\n\n                        // add a tiny timeout so that the browsers catches any css changes before animating\n                        window.setTimeout((function(elem, endEvent, to, syntax) {\n                            return function() {\n\n                                // attach the end event\n                                elem.one(endEvent, (function(elem) {\n                                    return function() {\n\n                                        // clear the animation\n                                        clearStyle(elem);\n\n                                        // run the complete method\n                                        options.complete.call(elem[0]);\n                                    };\n                                }(elem)));\n\n                                // do the webkit translate3d for better performance on iOS\n                                if (Galleria.WEBKIT && Galleria.TOUCH) {\n\n                                    revert = {};\n                                    form = [0, 0, 0];\n\n                                    $.each(['left', 'top'], function(i, m) {\n                                        if (m in to) {\n                                            form[i] = (Utils.parseValue(to[m]) - Utils.parseValue(elem.css(m))) + 'px';\n                                            revert[m] = to[m];\n                                            delete to[m];\n                                        }\n                                    });\n\n                                    if (form[0] || form[1]) {\n\n                                        elem.data('revert', revert);\n\n                                        strings.push('-webkit-transform' + syntax);\n\n                                        // 3d animate\n                                        setStyle(elem, 'translate3d(' + form.join(',') + ')', 'transform');\n                                    }\n                                }\n\n                                // push the animation props\n                                $.each(to, function(p, val) {\n                                    strings.push(p + syntax);\n                                });\n\n                                // set the animation styles\n                                setStyle(elem, strings.join(','));\n\n                                // animate\n                                elem.css(to);\n\n                            };\n                        }(elem, endEvent, to, syntax)), 2);\n                    };\n                }()),\n\n                removeAlpha: function(elem) {\n                    if (elem instanceof jQuery) {\n                        elem = elem[0];\n                    }\n                    if (IE < 9 && elem) {\n\n                        var style = elem.style,\n                            currentStyle = elem.currentStyle,\n                            filter = currentStyle && currentStyle.filter || style.filter || \"\";\n\n                        if (/alpha/.test(filter)) {\n                            style.filter = filter.replace(/alpha\\([^)]*\\)/i, '');\n                        }\n                    }\n                },\n\n                forceStyles: function(elem, styles) {\n                    elem = $(elem);\n                    if (elem.attr('style')) {\n                        elem.data('styles', elem.attr('style')).removeAttr('style');\n                    }\n                    elem.css(styles);\n                },\n\n                revertStyles: function() {\n                    $.each(Utils.array(arguments), function(i, elem) {\n\n                        elem = $(elem);\n                        elem.removeAttr('style');\n\n                        elem.attr('style', ''); // \"fixes\" webkit bug\n\n                        if (elem.data('styles')) {\n                            elem.attr('style', elem.data('styles')).data('styles', null);\n                        }\n                    });\n                },\n\n                moveOut: function(elem) {\n                    Utils.forceStyles(elem, {\n                        position: 'absolute',\n                        left: -10000\n                    });\n                },\n\n                moveIn: function() {\n                    Utils.revertStyles.apply(Utils, Utils.array(arguments));\n                },\n\n                hide: function(elem, speed, callback) {\n\n                    callback = callback || F;\n\n                    var $elem = $(elem);\n                    elem = $elem[0];\n\n                    // save the value if not exist\n                    if (!$elem.data('opacity')) {\n                        $elem.data('opacity', $elem.css('opacity'));\n                    }\n\n                    // always hide\n                    var style = { opacity: 0 };\n\n                    if (speed) {\n\n                        var complete = IE < 9 && elem ? function() {\n                            Utils.removeAlpha(elem);\n                            elem.style.visibility = 'hidden';\n                            callback.call(elem);\n                        } : callback;\n\n                        Utils.animate(elem, style, {\n                            duration: speed,\n                            complete: complete,\n                            stop: true\n                        });\n                    } else {\n                        if (IE < 9 && elem) {\n                            Utils.removeAlpha(elem);\n                            elem.style.visibility = 'hidden';\n                        } else {\n                            $elem.css(style);\n                        }\n                    }\n                },\n\n                show: function(elem, speed, callback) {\n\n                    callback = callback || F;\n\n                    var $elem = $(elem);\n                    elem = $elem[0];\n\n                    // bring back saved opacity\n                    var saved = parseFloat($elem.data('opacity')) || 1,\n                        style = { opacity: saved };\n\n                    // animate or toggle\n                    if (speed) {\n\n                        if (IE < 9) {\n                            $elem.css('opacity', 0);\n                            elem.style.visibility = 'visible';\n                        }\n\n                        var complete = IE < 9 && elem ? function() {\n                            if (style.opacity == 1) {\n                                Utils.removeAlpha(elem);\n                            }\n                            callback.call(elem);\n                        } : callback;\n\n                        Utils.animate(elem, style, {\n                            duration: speed,\n                            complete: complete,\n                            stop: true\n                        });\n                    } else {\n                        if (IE < 9 && style.opacity == 1 && elem) {\n                            Utils.removeAlpha(elem);\n                            elem.style.visibility = 'visible';\n                        } else {\n                            $elem.css(style);\n                        }\n                    }\n                },\n\n                wait: function(options) {\n\n                    Galleria._waiters = Galleria._waiters || [];\n\n                    options = $.extend({\n                        until: FALSE,\n                        success: F,\n                        error: function() { Galleria.raise('Could not complete wait function.'); },\n                        timeout: 3000\n                    }, options);\n\n                    var start = Utils.timestamp(),\n                        elapsed,\n                        now,\n                        tid,\n                        fn = function() {\n                            now = Utils.timestamp();\n                            elapsed = now - start;\n                            Utils.removeFromArray(Galleria._waiters, tid);\n                            if (options.until(elapsed)) {\n                                options.success();\n                                return false;\n                            }\n                            if (typeof options.timeout == 'number' && now >= start + options.timeout) {\n                                options.error();\n                                return false;\n                            }\n                            Galleria._waiters.push(tid = window.setTimeout(fn, 10));\n                        };\n                    Galleria._waiters.push(tid = window.setTimeout(fn, 10));\n                },\n\n                toggleQuality: function(img, force) {\n\n                    if ((IE !== 7 && IE !== 8) || !img || img.nodeName.toUpperCase() != 'IMG') {\n                        return;\n                    }\n\n                    if (typeof force === 'undefined') {\n                        force = img.style.msInterpolationMode === 'nearest-neighbor';\n                    }\n\n                    img.style.msInterpolationMode = force ? 'bicubic' : 'nearest-neighbor';\n                },\n\n                insertStyleTag: function(styles, id) {\n\n                    if (id && $('#' + id).length) {\n                        return;\n                    }\n\n                    var style = doc.createElement('style');\n                    if (id) {\n                        style.id = id;\n                    }\n\n                    DOM().head.appendChild(style);\n\n                    if (style.styleSheet) { // IE\n                        style.styleSheet.cssText = styles;\n                    } else {\n                        var cssText = doc.createTextNode(styles);\n                        style.appendChild(cssText);\n                    }\n                },\n\n                // a loadscript method that works for local scripts\n                loadScript: function(url, callback) {\n\n                    var done = false,\n                        script = $('<scr' + 'ipt>').attr({\n                            src: url,\n                            async: true\n                        }).get(0);\n\n                    // Attach handlers for all browsers\n                    script.onload = script.onreadystatechange = function() {\n                        if (!done && (!this.readyState ||\n                                this.readyState === 'loaded' || this.readyState === 'complete')) {\n\n                            done = true;\n\n                            // Handle memory leak in IE\n                            script.onload = script.onreadystatechange = null;\n\n                            if (typeof callback === 'function') {\n                                callback.call(this, this);\n                            }\n                        }\n                    };\n\n                    DOM().head.appendChild(script);\n                },\n\n                // parse anything into a number\n                parseValue: function(val) {\n                    if (typeof val === 'number') {\n                        return val;\n                    } else if (typeof val === 'string') {\n                        var arr = val.match(/\\-?\\d|\\./g);\n                        return arr && arr.constructor === Array ? arr.join('') * 1 : 0;\n                    } else {\n                        return 0;\n                    }\n                },\n\n                // timestamp abstraction\n                timestamp: function() {\n                    return new Date().getTime();\n                },\n\n                loadCSS: function(href, id, callback) {\n\n                    var link,\n                        length;\n\n                    // look for manual css\n                    $('link[rel=stylesheet]').each(function() {\n                        if (new RegExp(href).test(this.href)) {\n                            link = this;\n                            return false;\n                        }\n                    });\n\n                    if (typeof id === 'function') {\n                        callback = id;\n                        id = undef;\n                    }\n\n                    callback = callback || F; // dirty\n\n                    // if already present, return\n                    if (link) {\n                        callback.call(link, link);\n                        return link;\n                    }\n\n                    // save the length of stylesheets to check against\n                    length = doc.styleSheets.length;\n\n                    // check for existing id\n                    if ($('#' + id).length) {\n\n                        $('#' + id).attr('href', href);\n                        length--;\n\n                    } else {\n                        link = $('<link>').attr({\n                            rel: 'stylesheet',\n                            href: href,\n                            id: id\n                        }).get(0);\n\n                        var styles = $('link[rel=\"stylesheet\"], style');\n                        if (styles.length) {\n                            styles.get(0).parentNode.insertBefore(link, styles[0]);\n                        } else {\n                            DOM().head.appendChild(link);\n                        }\n\n                        if (IE && length >= 31) {\n                            Galleria.raise('You have reached the browser stylesheet limit (31)', true);\n                            return;\n                        }\n                    }\n\n                    if (typeof callback === 'function') {\n\n                        // First check for dummy element (new in 1.2.8)\n                        var $loader = $('<s>').attr('id', 'galleria-loader').hide().appendTo(DOM().body);\n\n                        Utils.wait({\n                            until: function() {\n                                return $loader.height() == 1;\n                            },\n                            success: function() {\n                                $loader.remove();\n                                callback.call(link, link);\n                            },\n                            error: function() {\n                                $loader.remove();\n\n                                // If failed, tell the dev to download the latest theme\n                                Galleria.raise('Theme CSS could not load after 20 sec. ' + (Galleria.QUIRK ?\n                                    'Your browser is in Quirks Mode, please add a correct doctype.' :\n                                    'Please download the latest theme at http://galleria.io/customer/.'), true);\n                            },\n                            timeout: 5000\n                        });\n                    }\n                    return link;\n                }\n            };\n        }()),\n\n        // play icon\n        _playIcon = function(container) {\n\n            var css = '.galleria-videoicon{width:60px;height:60px;position:absolute;top:50%;left:50%;z-index:1;' +\n                'margin:-30px 0 0 -30px;cursor:pointer;background:#000;background:rgba(0,0,0,.8);border-radius:3px;-webkit-transition:all 150ms}' +\n                '.galleria-videoicon i{width:0px;height:0px;border-style:solid;border-width:10px 0 10px 16px;display:block;' +\n                'border-color:transparent transparent transparent #ffffff;margin:20px 0 0 22px}.galleria-image:hover .galleria-videoicon{background:#000}';\n\n            Utils.insertStyleTag(css, 'galleria-videoicon');\n\n            return $(Utils.create('galleria-videoicon')).html('<i></i>').appendTo(container)\n                .click(function() { $(this).siblings('img').mouseup(); });\n        },\n\n        // the transitions holder\n        _transitions = (function() {\n\n            var _slide = function(params, complete, fade, door) {\n\n                var easing = this.getOptions('easing'),\n                    distance = this.getStageWidth(),\n                    from = { left: distance * (params.rewind ? -1 : 1) },\n                    to = { left: 0 };\n\n                if (fade) {\n                    from.opacity = 0;\n                    to.opacity = 1;\n                } else {\n                    from.opacity = 1;\n                }\n\n                $(params.next).css(from);\n\n                Utils.animate(params.next, to, {\n                    duration: params.speed,\n                    complete: (function(elems) {\n                        return function() {\n                            complete();\n                            elems.css({\n                                left: 0\n                            });\n                        };\n                    }($(params.next).add(params.prev))),\n                    queue: false,\n                    easing: easing\n                });\n\n                if (door) {\n                    params.rewind = !params.rewind;\n                }\n\n                if (params.prev) {\n\n                    from = { left: 0 };\n                    to = { left: distance * (params.rewind ? 1 : -1) };\n\n                    if (fade) {\n                        from.opacity = 1;\n                        to.opacity = 0;\n                    }\n\n                    $(params.prev).css(from);\n                    Utils.animate(params.prev, to, {\n                        duration: params.speed,\n                        queue: false,\n                        easing: easing,\n                        complete: function() {\n                            $(this).css('opacity', 0);\n                        }\n                    });\n                }\n            };\n\n            return {\n\n                active: false,\n\n                init: function(effect, params, complete) {\n                    if (_transitions.effects.hasOwnProperty(effect)) {\n                        _transitions.effects[effect].call(this, params, complete);\n                    }\n                },\n\n                effects: {\n\n                    fade: function(params, complete) {\n                        $(params.next).css({\n                            opacity: 0,\n                            left: 0\n                        });\n                        Utils.animate(params.next, {\n                            opacity: 1\n                        }, {\n                            duration: params.speed,\n                            complete: complete\n                        });\n                        if (params.prev) {\n                            $(params.prev).css('opacity', 1).show();\n                            Utils.animate(params.prev, {\n                                opacity: 0\n                            }, {\n                                duration: params.speed\n                            });\n                        }\n                    },\n\n                    flash: function(params, complete) {\n                        $(params.next).css({\n                            opacity: 0,\n                            left: 0\n                        });\n                        if (params.prev) {\n                            Utils.animate(params.prev, {\n                                opacity: 0\n                            }, {\n                                duration: params.speed / 2,\n                                complete: function() {\n                                    Utils.animate(params.next, {\n                                        opacity: 1\n                                    }, {\n                                        duration: params.speed,\n                                        complete: complete\n                                    });\n                                }\n                            });\n                        } else {\n                            Utils.animate(params.next, {\n                                opacity: 1\n                            }, {\n                                duration: params.speed,\n                                complete: complete\n                            });\n                        }\n                    },\n\n                    pulse: function(params, complete) {\n                        if (params.prev) {\n                            $(params.prev).hide();\n                        }\n                        $(params.next).css({\n                            opacity: 0,\n                            left: 0\n                        }).show();\n                        Utils.animate(params.next, {\n                            opacity: 1\n                        }, {\n                            duration: params.speed,\n                            complete: complete\n                        });\n                    },\n\n                    slide: function(params, complete) {\n                        _slide.apply(this, Utils.array(arguments));\n                    },\n\n                    fadeslide: function(params, complete) {\n                        _slide.apply(this, Utils.array(arguments).concat([true]));\n                    },\n\n                    doorslide: function(params, complete) {\n                        _slide.apply(this, Utils.array(arguments).concat([false, true]));\n                    }\n                }\n            };\n        }());\n\n    // listen to fullscreen\n    _nativeFullscreen.listen();\n\n    // create special click:fast event for fast touch interaction\n    $.event.special['click:fast'] = {\n        propagate: true,\n        add: function(handleObj) {\n\n            var getCoords = function(e) {\n                if (e.touches && e.touches.length) {\n                    var touch = e.touches[0];\n                    return {\n                        x: touch.pageX,\n                        y: touch.pageY\n                    };\n                }\n            };\n\n            var def = {\n                touched: false,\n                touchdown: false,\n                coords: { x: 0, y: 0 },\n                evObj: {}\n            };\n\n            $(this).data({\n                clickstate: def,\n                timer: 0\n            }).on('touchstart.fast', function(e) {\n                window.clearTimeout($(this).data('timer'));\n                $(this).data('clickstate', {\n                    touched: true,\n                    touchdown: true,\n                    coords: getCoords(e.originalEvent),\n                    evObj: e\n                });\n            }).on('touchmove.fast', function(e) {\n                var coords = getCoords(e.originalEvent),\n                    state = $(this).data('clickstate'),\n                    distance = Math.max(\n                        Math.abs(state.coords.x - coords.x),\n                        Math.abs(state.coords.y - coords.y)\n                    );\n                if (distance > 6) {\n                    $(this).data('clickstate', $.extend(state, {\n                        touchdown: false\n                    }));\n                }\n            }).on('touchend.fast', function(e) {\n                var $this = $(this),\n                    state = $this.data('clickstate');\n                if (state.touchdown) {\n                    handleObj.handler.call(this, e);\n                }\n                $this.data('timer', window.setTimeout(function() {\n                    $this.data('clickstate', def);\n                }, 400));\n            }).on('click.fast', function(e) {\n                var state = $(this).data('clickstate');\n                if (state.touched) {\n                    return false;\n                }\n                $(this).data('clickstate', def);\n                handleObj.handler.call(this, e);\n            });\n        },\n        remove: function() {\n            $(this).off('touchstart.fast touchmove.fast touchend.fast click.fast');\n        }\n    };\n\n    // trigger resize on orientationchange (IOS7)\n    $win.on('orientationchange', function() {\n        $(this).resize();\n    });\n\n    /**\n        The main Galleria class\n\n        @class\n        @constructor\n\n        @example var gallery = new Galleria();\n\n        @author http://wib.io\n\n        @requires jQuery\n\n    */\n\n    Galleria = function() {\n\n        var self = this;\n\n        // internal options\n        this._options = {};\n\n        // flag for controlling play/pause\n        this._playing = false;\n\n        // internal interval for slideshow\n        this._playtime = 5000;\n\n        // internal variable for the currently active image\n        this._active = null;\n\n        // the internal queue, arrayified\n        this._queue = { length: 0 };\n\n        // the internal data array\n        this._data = [];\n\n        // the internal dom collection\n        this._dom = {};\n\n        // the internal thumbnails array\n        this._thumbnails = [];\n\n        // the internal layers array\n        this._layers = [];\n\n        // internal init flag\n        this._initialized = false;\n\n        // internal firstrun flag\n        this._firstrun = false;\n\n        // global stagewidth/height\n        this._stageWidth = 0;\n        this._stageHeight = 0;\n\n        // target holder\n        this._target = undef;\n\n        // bind hashes\n        this._binds = [];\n\n        // instance id\n        this._id = parseInt(M.random() * 10000, 10);\n\n        // add some elements\n        var divs = 'container stage images image-nav image-nav-left image-nav-right ' +\n            'info info-text info-title info-description ' +\n            'thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right ' +\n            'loader counter tooltip',\n            spans = 'current total';\n\n        $.each(divs.split(' '), function(i, elemId) {\n            self._dom[elemId] = Utils.create('galleria-' + elemId);\n        });\n\n        $.each(spans.split(' '), function(i, elemId) {\n            self._dom[elemId] = Utils.create('galleria-' + elemId, 'span');\n        });\n\n        // the internal keyboard object\n        // keeps reference of the keybinds and provides helper methods for binding keys\n        var keyboard = this._keyboard = {\n\n            keys: {\n                'UP': 38,\n                'DOWN': 40,\n                'LEFT': 37,\n                'RIGHT': 39,\n                'RETURN': 13,\n                'ESCAPE': 27,\n                'BACKSPACE': 8,\n                'SPACE': 32\n            },\n\n            map: {},\n\n            bound: false,\n\n            press: function(e) {\n                var key = e.keyCode || e.which;\n                if (key in keyboard.map && typeof keyboard.map[key] === 'function') {\n                    keyboard.map[key].call(self, e);\n                }\n            },\n\n            attach: function(map) {\n\n                var key, up;\n\n                for (key in map) {\n                    if (map.hasOwnProperty(key)) {\n                        up = key.toUpperCase();\n                        if (up in keyboard.keys) {\n                            keyboard.map[keyboard.keys[up]] = map[key];\n                        } else {\n                            keyboard.map[up] = map[key];\n                        }\n                    }\n                }\n                if (!keyboard.bound) {\n                    keyboard.bound = true;\n                    $doc.on('keydown', keyboard.press);\n                }\n            },\n\n            detach: function() {\n                keyboard.bound = false;\n                keyboard.map = {};\n                $doc.off('keydown', keyboard.press);\n            }\n        };\n\n        // internal controls for keeping track of active / inactive images\n        var controls = this._controls = {\n\n            0: undef,\n\n            1: undef,\n\n            active: 0,\n\n            swap: function() {\n                controls.active = controls.active ? 0 : 1;\n            },\n\n            getActive: function() {\n                return self._options.swipe ? controls.slides[self._active] : controls[controls.active];\n            },\n\n            getNext: function() {\n                return self._options.swipe ? controls.slides[self.getNext(self._active)] : controls[1 - controls.active];\n            },\n\n            slides: [],\n\n            frames: [],\n\n            layers: []\n        };\n\n        // internal carousel object\n        var carousel = this._carousel = {\n\n            // shortcuts\n            next: self.$('thumb-nav-right'),\n            prev: self.$('thumb-nav-left'),\n\n            // cache the width\n            width: 0,\n\n            // track the current position\n            current: 0,\n\n            // cache max value\n            max: 0,\n\n            // save all hooks for each width in an array\n            hooks: [],\n\n            // update the carousel\n            // you can run this method anytime, f.ex on window.resize\n            update: function() {\n                var w = 0,\n                    h = 0,\n                    hooks = [0];\n\n                $.each(self._thumbnails, function(i, thumb) {\n                    if (thumb.ready) {\n                        w += thumb.outerWidth || $(thumb.container).outerWidth(true);\n                        // Due to a bug in jquery, outerwidth() returns the floor of the actual outerwidth,\n                        // if the browser is zoom to a value other than 100%. height() returns the floating point value.\n                        var containerWidth = $(thumb.container).width();\n                        w += containerWidth - M.floor(containerWidth);\n\n                        hooks[i + 1] = w;\n                        h = M.max(h, thumb.outerHeight || $(thumb.container).outerHeight(true));\n                    }\n                });\n\n                self.$('thumbnails').css({\n                    width: w,\n                    height: h\n                });\n\n                carousel.max = w;\n                carousel.hooks = hooks;\n                carousel.width = self.$('thumbnails-list').width();\n                carousel.setClasses();\n\n                self.$('thumbnails-container').toggleClass('galleria-carousel', w > carousel.width);\n\n                // one extra calculation\n                carousel.width = self.$('thumbnails-list').width();\n\n                // todo: fix so the carousel moves to the left\n            },\n\n            bindControls: function() {\n\n                var i;\n\n                carousel.next.on('click:fast', function(e) {\n                    e.preventDefault();\n\n                    if (self._options.carouselSteps === 'auto') {\n\n                        for (i = carousel.current; i < carousel.hooks.length; i++) {\n                            if (carousel.hooks[i] - carousel.hooks[carousel.current] > carousel.width) {\n                                carousel.set(i - 2);\n                                break;\n                            }\n                        }\n\n                    } else {\n                        carousel.set(carousel.current + self._options.carouselSteps);\n                    }\n                });\n\n                carousel.prev.on('click:fast', function(e) {\n                    e.preventDefault();\n\n                    if (self._options.carouselSteps === 'auto') {\n\n                        for (i = carousel.current; i >= 0; i--) {\n                            if (carousel.hooks[carousel.current] - carousel.hooks[i] > carousel.width) {\n                                carousel.set(i + 2);\n                                break;\n                            } else if (i === 0) {\n                                carousel.set(0);\n                                break;\n                            }\n                        }\n                    } else {\n                        carousel.set(carousel.current - self._options.carouselSteps);\n                    }\n                });\n            },\n\n            // calculate and set positions\n            set: function(i) {\n                i = M.max(i, 0);\n                while (carousel.hooks[i - 1] + carousel.width >= carousel.max && i >= 0) {\n                    i--;\n                }\n                carousel.current = i;\n                carousel.animate();\n            },\n\n            // get the last position\n            getLast: function(i) {\n                return (i || carousel.current) - 1;\n            },\n\n            // follow the active image\n            follow: function(i) {\n\n                //don't follow if position fits\n                if (i === 0 || i === carousel.hooks.length - 2) {\n                    carousel.set(i);\n                    return;\n                }\n\n                // calculate last position\n                var last = carousel.current;\n                while (carousel.hooks[last] - carousel.hooks[carousel.current] <\n                    carousel.width && last <= carousel.hooks.length) {\n                    last++;\n                }\n\n                // set position\n                if (i - 1 < carousel.current) {\n                    carousel.set(i - 1);\n                } else if (i + 2 > last) {\n                    carousel.set(i - last + carousel.current + 2);\n                }\n            },\n\n            // helper for setting disabled classes\n            setClasses: function() {\n                carousel.prev.toggleClass('disabled', !carousel.current);\n                carousel.next.toggleClass('disabled', carousel.hooks[carousel.current] + carousel.width >= carousel.max);\n            },\n\n            // the animation method\n            animate: function(to) {\n                carousel.setClasses();\n                var num = carousel.hooks[carousel.current] * -1;\n\n                if (isNaN(num)) {\n                    return;\n                }\n\n                // FF 24 bug\n                self.$('thumbnails').css('left', function() {\n                    return $(this).css('left');\n                });\n\n                Utils.animate(self.get('thumbnails'), {\n                    left: num\n                }, {\n                    duration: self._options.carouselSpeed,\n                    easing: self._options.easing,\n                    queue: false\n                });\n            }\n        };\n\n        // tooltip control\n        // added in 1.2\n        var tooltip = this._tooltip = {\n\n            initialized: false,\n\n            open: false,\n\n            timer: 'tooltip' + self._id,\n\n            swapTimer: 'swap' + self._id,\n\n            init: function() {\n\n                tooltip.initialized = true;\n\n                var css = '.galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;' +\n                    'opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}';\n\n                Utils.insertStyleTag(css, 'galleria-tooltip');\n\n                self.$('tooltip').css({\n                    opacity: 0.8,\n                    visibility: 'visible',\n                    display: 'none'\n                });\n\n            },\n\n            // move handler\n            move: function(e) {\n                var mouseX = self.getMousePosition(e).x,\n                    mouseY = self.getMousePosition(e).y,\n                    $elem = self.$('tooltip'),\n                    x = mouseX,\n                    y = mouseY,\n                    height = $elem.outerHeight(true) + 1,\n                    width = $elem.outerWidth(true),\n                    limitY = height + 15;\n\n                var maxX = self.$('container').width() - width - 2,\n                    maxY = self.$('container').height() - height - 2;\n\n                if (!isNaN(x) && !isNaN(y)) {\n\n                    x += 10;\n                    y -= (height + 8);\n\n                    x = M.max(0, M.min(maxX, x));\n                    y = M.max(0, M.min(maxY, y));\n\n                    if (mouseY < limitY) {\n                        y = limitY;\n                    }\n\n                    $elem.css({ left: x, top: y });\n                }\n            },\n\n            // bind elements to the tooltip\n            // you can bind multiple elementIDs using { elemID : function } or { elemID : string }\n            // you can also bind single DOM elements using bind(elem, string)\n            bind: function(elem, value) {\n\n                // todo: revise if alternative tooltip is needed for mobile devices\n                if (Galleria.TOUCH) {\n                    return;\n                }\n\n                if (!tooltip.initialized) {\n                    tooltip.init();\n                }\n\n                var mouseout = function() {\n                    self.$('container').off('mousemove', tooltip.move);\n                    self.clearTimer(tooltip.timer);\n\n                    self.$('tooltip').stop().animate({\n                        opacity: 0\n                    }, 200, function() {\n\n                        self.$('tooltip').hide();\n\n                        self.addTimer(tooltip.swapTimer, function() {\n                            tooltip.open = false;\n                        }, 1000);\n                    });\n                };\n\n                var hover = function(elem, value) {\n\n                    tooltip.define(elem, value);\n\n                    $(elem).hover(function() {\n\n                        self.clearTimer(tooltip.swapTimer);\n                        self.$('container').off('mousemove', tooltip.move).on('mousemove', tooltip.move).trigger('mousemove');\n                        tooltip.show(elem);\n\n                        self.addTimer(tooltip.timer, function() {\n                            self.$('tooltip').stop().show().animate({\n                                opacity: 1\n                            });\n                            tooltip.open = true;\n\n                        }, tooltip.open ? 0 : 500);\n\n                    }, mouseout).click(mouseout);\n                };\n\n                if (typeof value === 'string') {\n                    hover((elem in self._dom ? self.get(elem) : elem), value);\n                } else {\n                    // asume elemID here\n                    $.each(elem, function(elemID, val) {\n                        hover(self.get(elemID), val);\n                    });\n                }\n            },\n\n            show: function(elem) {\n\n                elem = $(elem in self._dom ? self.get(elem) : elem);\n\n                var text = elem.data('tt'),\n                    mouseup = function(e) {\n\n                        // attach a tiny settimeout to make sure the new tooltip is filled\n                        window.setTimeout((function(ev) {\n                            return function() {\n                                tooltip.move(ev);\n                            };\n                        }(e)), 10);\n\n                        elem.off('mouseup', mouseup);\n\n                    };\n\n                text = typeof text === 'function' ? text() : text;\n\n                if (!text) {\n                    return;\n                }\n\n                self.$('tooltip').html(text.replace(/\\s/, '&#160;'));\n\n                // trigger mousemove on mouseup in case of click\n                elem.on('mouseup', mouseup);\n            },\n\n            define: function(elem, value) {\n\n                // we store functions, not strings\n                if (typeof value !== 'function') {\n                    var s = value;\n                    value = function() {\n                        return s;\n                    };\n                }\n\n                elem = $(elem in self._dom ? self.get(elem) : elem).data('tt', value);\n\n                tooltip.show(elem);\n\n            }\n        };\n\n        // internal fullscreen control\n        var fullscreen = this._fullscreen = {\n\n            scrolled: 0,\n\n            crop: undef,\n\n            active: false,\n\n            prev: $(),\n\n            beforeEnter: function(fn) { fn(); },\n            beforeExit: function(fn) { fn(); },\n\n            keymap: self._keyboard.map,\n\n            parseCallback: function(callback, enter) {\n\n                return _transitions.active ? function() {\n                    if (typeof callback == 'function') {\n                        callback.call(self);\n                    }\n                    var active = self._controls.getActive(),\n                        next = self._controls.getNext();\n\n                    self._scaleImage(next);\n                    self._scaleImage(active);\n\n                    if (enter && self._options.trueFullscreen) {\n                        // Firefox bug, revise later\n                        $(active.container).add(next.container).trigger('transitionend');\n                    }\n\n                } : callback;\n\n            },\n\n            enter: function(callback) {\n\n                fullscreen.beforeEnter(function() {\n\n                    callback = fullscreen.parseCallback(callback, true);\n\n                    if (self._options.trueFullscreen && _nativeFullscreen.support) {\n\n                        // do some stuff prior animation for wmoother transitions\n\n                        fullscreen.active = true;\n\n                        Utils.forceStyles(self.get('container'), {\n                            width: '100%',\n                            height: '100%'\n                        });\n\n                        self.rescale();\n\n                        if (Galleria.MAC) {\n                            if (!(Galleria.SAFARI && /version\\/[1-5]/.test(NAV))) {\n                                self.$('container').css('opacity', 0).addClass('fullscreen');\n                                window.setTimeout(function() {\n                                    fullscreen.scale();\n                                    self.$('container').css('opacity', 1);\n                                }, 50);\n                            } else {\n                                self.$('stage').css('opacity', 0);\n                                window.setTimeout(function() {\n                                    fullscreen.scale();\n                                    self.$('stage').css('opacity', 1);\n                                }, 4);\n                            }\n                        } else {\n                            self.$('container').addClass('fullscreen');\n                        }\n\n                        $win.resize(fullscreen.scale);\n\n                        _nativeFullscreen.enter(self, callback, self.get('container'));\n\n                    } else {\n\n                        fullscreen.scrolled = $win.scrollTop();\n                        if (!Galleria.TOUCH) {\n                            window.scrollTo(0, 0);\n                        }\n\n                        fullscreen._enter(callback);\n                    }\n                });\n\n            },\n\n            _enter: function(callback) {\n\n                fullscreen.active = true;\n\n                if (IFRAME) {\n\n                    fullscreen.iframe = (function() {\n\n                        var elem,\n                            refer = doc.referrer,\n                            test = doc.createElement('a'),\n                            loc = window.location;\n\n                        test.href = refer;\n\n                        if (test.protocol != loc.protocol ||\n                            test.hostname != loc.hostname ||\n                            test.port != loc.port) {\n                            Galleria.raise('Parent fullscreen not available. Iframe protocol, domains and ports must match.');\n                            return false;\n                        }\n\n                        fullscreen.pd = window.parent.document;\n\n                        $(fullscreen.pd).find('iframe').each(function() {\n                            var idoc = this.contentDocument || this.contentWindow.document;\n                            if (idoc === doc) {\n                                elem = this;\n                                return false;\n                            }\n                        });\n\n                        return elem;\n                    }());\n\n                }\n\n                // hide the image until rescale is complete\n                Utils.hide(self.getActiveImage());\n\n                if (IFRAME && fullscreen.iframe) {\n                    fullscreen.iframe.scrolled = $(window.parent).scrollTop();\n                    window.parent.scrollTo(0, 0);\n                }\n\n                var data = self.getData(),\n                    options = self._options,\n                    inBrowser = !self._options.trueFullscreen || !_nativeFullscreen.support,\n                    htmlbody = {\n                        height: '100%',\n                        overflow: 'hidden',\n                        margin: 0,\n                        padding: 0\n                    };\n\n                if (inBrowser) {\n\n                    self.$('container').addClass('fullscreen');\n                    fullscreen.prev = self.$('container').prev();\n\n                    if (!fullscreen.prev.length) {\n                        fullscreen.parent = self.$('container').parent();\n                    }\n\n                    // move\n                    self.$('container').appendTo('body');\n\n                    // begin styleforce\n\n                    Utils.forceStyles(self.get('container'), {\n                        position: Galleria.TOUCH ? 'absolute' : 'fixed',\n                        top: 0,\n                        left: 0,\n                        width: '100%',\n                        height: '100%',\n                        zIndex: 10000\n                    });\n                    Utils.forceStyles(DOM().html, htmlbody);\n                    Utils.forceStyles(DOM().body, htmlbody);\n                }\n\n                if (IFRAME && fullscreen.iframe) {\n                    Utils.forceStyles(fullscreen.pd.documentElement, htmlbody);\n                    Utils.forceStyles(fullscreen.pd.body, htmlbody);\n                    Utils.forceStyles(fullscreen.iframe, $.extend(htmlbody, {\n                        width: '100%',\n                        height: '100%',\n                        top: 0,\n                        left: 0,\n                        position: 'fixed',\n                        zIndex: 10000,\n                        border: 'none'\n                    }));\n                }\n\n                // temporarily attach some keys\n                // save the old ones first in a cloned object\n                fullscreen.keymap = $.extend({}, self._keyboard.map);\n\n                self.attachKeyboard({\n                    escape: self.exitFullscreen,\n                    right: self.next,\n                    left: self.prev\n                });\n\n                // temporarily save the crop\n                fullscreen.crop = options.imageCrop;\n\n                // set fullscreen options\n                if (options.fullscreenCrop != undef) {\n                    options.imageCrop = options.fullscreenCrop;\n                }\n\n                // swap to big image if it's different from the display image\n                if (data && data.big && data.image !== data.big) {\n                    var big = new Galleria.Picture(),\n                        cached = big.isCached(data.big),\n                        index = self.getIndex(),\n                        thumb = self._thumbnails[index];\n\n                    self.trigger({\n                        type: Galleria.LOADSTART,\n                        cached: cached,\n                        rewind: false,\n                        index: index,\n                        imageTarget: self.getActiveImage(),\n                        thumbTarget: thumb,\n                        galleriaData: data\n                    });\n\n                    big.load(data.big, function(big) {\n                        self._scaleImage(big, {\n                            complete: function(big) {\n                                self.trigger({\n                                    type: Galleria.LOADFINISH,\n                                    cached: cached,\n                                    index: index,\n                                    rewind: false,\n                                    imageTarget: big.image,\n                                    thumbTarget: thumb\n                                });\n                                var image = self._controls.getActive().image;\n                                if (image) {\n                                    $(image).width(big.image.width).height(big.image.height)\n                                        .attr('style', $(big.image).attr('style'))\n                                        .attr('src', big.image.src);\n                                }\n                            }\n                        });\n                    });\n\n                    var n = self.getNext(index),\n                        p = new Galleria.Picture(),\n                        ndata = self.getData(n);\n                    p.preload(self.isFullscreen() && ndata.big ? ndata.big : ndata.image);\n                }\n\n                // init the first rescale and attach callbacks\n\n                self.rescale(function() {\n\n                    self.addTimer(false, function() {\n                        // show the image after 50 ms\n                        if (inBrowser) {\n                            Utils.show(self.getActiveImage());\n                        }\n\n                        if (typeof callback === 'function') {\n                            callback.call(self);\n                        }\n                        self.rescale();\n\n                    }, 100);\n\n                    self.trigger(Galleria.FULLSCREEN_ENTER);\n                });\n\n                if (!inBrowser) {\n                    Utils.show(self.getActiveImage());\n                } else {\n                    $win.resize(fullscreen.scale);\n                }\n\n            },\n\n            scale: function() {\n                self.rescale();\n            },\n\n            exit: function(callback) {\n\n                fullscreen.beforeExit(function() {\n\n                    callback = fullscreen.parseCallback(callback);\n\n                    if (self._options.trueFullscreen && _nativeFullscreen.support) {\n                        _nativeFullscreen.exit(callback);\n                    } else {\n                        fullscreen._exit(callback);\n                    }\n                });\n            },\n\n            _exit: function(callback) {\n\n                fullscreen.active = false;\n\n                var inBrowser = !self._options.trueFullscreen || !_nativeFullscreen.support,\n                    $container = self.$('container').removeClass('fullscreen');\n\n                // move back\n                if (fullscreen.parent) {\n                    fullscreen.parent.prepend($container);\n                } else {\n                    $container.insertAfter(fullscreen.prev);\n                }\n\n                if (inBrowser) {\n                    Utils.hide(self.getActiveImage());\n\n                    // revert all styles\n                    Utils.revertStyles(self.get('container'), DOM().html, DOM().body);\n\n                    // scroll back\n                    if (!Galleria.TOUCH) {\n                        window.scrollTo(0, fullscreen.scrolled);\n                    }\n\n                    // reload iframe src manually\n                    var frame = self._controls.frames[self._controls.active];\n                    if (frame && frame.image) {\n                        frame.image.src = frame.image.src;\n                    }\n                }\n\n                if (IFRAME && fullscreen.iframe) {\n                    Utils.revertStyles(fullscreen.pd.documentElement, fullscreen.pd.body, fullscreen.iframe);\n                    if (fullscreen.iframe.scrolled) {\n                        window.parent.scrollTo(0, fullscreen.iframe.scrolled);\n                    }\n                }\n\n                // detach all keyboard events and apply the old keymap\n                self.detachKeyboard();\n                self.attachKeyboard(fullscreen.keymap);\n\n                // bring back cached options\n                self._options.imageCrop = fullscreen.crop;\n\n                // return to original image\n                var big = self.getData().big,\n                    image = self._controls.getActive().image;\n\n                if (!self.getData().iframe && image && big && big == image.src) {\n\n                    window.setTimeout(function(src) {\n                        return function() {\n                            image.src = src;\n                        };\n                    }(self.getData().image), 1);\n\n                }\n\n                self.rescale(function() {\n                    self.addTimer(false, function() {\n\n                        // show the image after 50 ms\n                        if (inBrowser) {\n                            Utils.show(self.getActiveImage());\n                        }\n\n                        if (typeof callback === 'function') {\n                            callback.call(self);\n                        }\n\n                        $win.trigger('resize');\n\n                    }, 50);\n                    self.trigger(Galleria.FULLSCREEN_EXIT);\n                });\n\n                $win.off('resize', fullscreen.scale);\n            }\n        };\n\n        // the internal idle object for controlling idle states\n        var idle = this._idle = {\n\n            trunk: [],\n\n            bound: false,\n\n            active: false,\n\n            add: function(elem, to, from, hide) {\n                if (!elem || Galleria.TOUCH) {\n                    return;\n                }\n                if (!idle.bound) {\n                    idle.addEvent();\n                }\n                elem = $(elem);\n\n                if (typeof from == 'boolean') {\n                    hide = from;\n                    from = {};\n                }\n\n                from = from || {};\n\n                var extract = {},\n                    style;\n\n                for (style in to) {\n                    if (to.hasOwnProperty(style)) {\n                        extract[style] = elem.css(style);\n                    }\n                }\n\n                elem.data('idle', {\n                    from: $.extend(extract, from),\n                    to: to,\n                    complete: true,\n                    busy: false\n                });\n\n                if (!hide) {\n                    idle.addTimer();\n                } else {\n                    elem.css(to);\n                }\n                idle.trunk.push(elem);\n            },\n\n            remove: function(elem) {\n\n                elem = $(elem);\n\n                $.each(idle.trunk, function(i, el) {\n                    if (el && el.length && !el.not(elem).length) {\n                        elem.css(elem.data('idle').from);\n                        idle.trunk.splice(i, 1);\n                    }\n                });\n\n                if (!idle.trunk.length) {\n                    idle.removeEvent();\n                    self.clearTimer(idle.timer);\n                }\n            },\n\n            addEvent: function() {\n                idle.bound = true;\n                self.$('container').on('mousemove click', idle.showAll);\n                if (self._options.idleMode == 'hover') {\n                    self.$('container').on('mouseleave', idle.hide);\n                }\n            },\n\n            removeEvent: function() {\n                idle.bound = false;\n                self.$('container').on('mousemove click', idle.showAll);\n                if (self._options.idleMode == 'hover') {\n                    self.$('container').off('mouseleave', idle.hide);\n                }\n            },\n\n            addTimer: function() {\n                if (self._options.idleMode == 'hover') {\n                    return;\n                }\n                self.addTimer('idle', function() {\n                    idle.hide();\n                }, self._options.idleTime);\n            },\n\n            hide: function() {\n\n                if (!self._options.idleMode || self.getIndex() === false) {\n                    return;\n                }\n\n                self.trigger(Galleria.IDLE_ENTER);\n\n                var len = idle.trunk.length;\n\n                $.each(idle.trunk, function(i, elem) {\n\n                    var data = elem.data('idle');\n\n                    if (!data) {\n                        return;\n                    }\n\n                    elem.data('idle').complete = false;\n\n                    Utils.animate(elem, data.to, {\n                        duration: self._options.idleSpeed,\n                        complete: function() {\n                            if (i == len - 1) {\n                                idle.active = false;\n                            }\n                        }\n                    });\n                });\n            },\n\n            showAll: function() {\n\n                self.clearTimer('idle');\n\n                $.each(idle.trunk, function(i, elem) {\n                    idle.show(elem);\n                });\n            },\n\n            show: function(elem) {\n\n                var data = elem.data('idle');\n\n                if (!idle.active || (!data.busy && !data.complete)) {\n\n                    data.busy = true;\n\n                    self.trigger(Galleria.IDLE_EXIT);\n\n                    self.clearTimer('idle');\n\n                    Utils.animate(elem, data.from, {\n                        duration: self._options.idleSpeed / 2,\n                        complete: function() {\n                            idle.active = true;\n                            $(elem).data('idle').busy = false;\n                            $(elem).data('idle').complete = true;\n                        }\n                    });\n\n                }\n                idle.addTimer();\n            }\n        };\n\n        // internal lightbox object\n        // creates a predesigned lightbox for simple popups of images in galleria\n        var lightbox = this._lightbox = {\n\n            width: 0,\n\n            height: 0,\n\n            initialized: false,\n\n            active: null,\n\n            image: null,\n\n            elems: {},\n\n            keymap: false,\n\n            init: function() {\n\n                if (lightbox.initialized) {\n                    return;\n                }\n                lightbox.initialized = true;\n\n                // create some elements to work with\n                var elems = 'overlay box content shadow title info close prevholder prev nextholder next counter image',\n                    el = {},\n                    op = self._options,\n                    css = '',\n                    abs = 'position:absolute;',\n                    prefix = 'lightbox-',\n                    cssMap = {\n                        overlay: 'position:fixed;display:none;opacity:' + op.overlayOpacity + ';filter:alpha(opacity=' + (op.overlayOpacity * 100) +\n                            ');top:0;left:0;width:100%;height:100%;background:' + op.overlayBackground + ';z-index:99990',\n                        box: 'position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991',\n                        shadow: abs + 'background:#000;width:100%;height:100%;',\n                        content: abs + 'background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden',\n                        info: abs + 'bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px',\n                        close: abs + 'top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999',\n                        image: abs + 'top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;',\n                        prevholder: abs + 'width:50%;top:0;bottom:40px;cursor:pointer;',\n                        nextholder: abs + 'width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;',\n                        prev: abs + 'top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif',\n                        next: abs + 'top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000',\n                        title: 'float:left',\n                        counter: 'float:right;margin-left:8px;'\n                    },\n                    hover = function(elem) {\n                        return elem.hover(\n                            function() { $(this).css('color', '#bbb'); },\n                            function() { $(this).css('color', '#444'); }\n                        );\n                    },\n                    appends = {};\n\n                // fix for navigation hovers transparent background event \"feature\"\n                var exs = '';\n                if (IE > 7) {\n                    exs = IE < 9 ? 'background:#000;filter:alpha(opacity=0);' : 'background:rgba(0,0,0,0);';\n                } else {\n                    exs = 'z-index:99999';\n                }\n\n                cssMap.nextholder += exs;\n                cssMap.prevholder += exs;\n\n                // create and insert CSS\n                $.each(cssMap, function(key, value) {\n                    css += '.galleria-' + prefix + key + '{' + value + '}';\n                });\n\n                css += '.galleria-' + prefix + 'box.iframe .galleria-' + prefix + 'prevholder,' +\n                    '.galleria-' + prefix + 'box.iframe .galleria-' + prefix + 'nextholder{' +\n                    'width:100px;height:100px;top:50%;margin-top:-70px}';\n\n                Utils.insertStyleTag(css, 'galleria-lightbox');\n\n                // create the elements\n                $.each(elems.split(' '), function(i, elemId) {\n                    self.addElement('lightbox-' + elemId);\n                    el[elemId] = lightbox.elems[elemId] = self.get('lightbox-' + elemId);\n                });\n\n                // initiate the image\n                lightbox.image = new Galleria.Picture();\n\n                // append the elements\n                $.each({\n                    box: 'shadow content close prevholder nextholder',\n                    info: 'title counter',\n                    content: 'info image',\n                    prevholder: 'prev',\n                    nextholder: 'next'\n                }, function(key, val) {\n                    var arr = [];\n                    $.each(val.split(' '), function(i, prop) {\n                        arr.push(prefix + prop);\n                    });\n                    appends[prefix + key] = arr;\n                });\n\n                self.append(appends);\n\n                $(el.image).append(lightbox.image.container);\n\n                $(DOM().body).append(el.overlay, el.box);\n\n                // add the prev/next nav and bind some controls\n\n                hover($(el.close).on('click:fast', lightbox.hide).html('&#215;'));\n\n                $.each(['Prev', 'Next'], function(i, dir) {\n\n                    var $d = $(el[dir.toLowerCase()]).html(/v/.test(dir) ? '&#8249;&#160;' : '&#160;&#8250;'),\n                        $e = $(el[dir.toLowerCase() + 'holder']);\n\n                    $e.on('click:fast', function() {\n                        lightbox['show' + dir]();\n                    });\n\n                    // IE7 and touch devices will simply show the nav\n                    if (IE < 8 || Galleria.TOUCH) {\n                        $d.show();\n                        return;\n                    }\n\n                    $e.hover(function() {\n                        $d.show();\n                    }, function(e) {\n                        $d.stop().fadeOut(200);\n                    });\n\n                });\n                $(el.overlay).on('click:fast', lightbox.hide);\n\n                // the lightbox animation is slow on ipad\n                if (Galleria.IPAD) {\n                    self._options.lightboxTransitionSpeed = 0;\n                }\n\n            },\n\n            rescale: function(event) {\n\n                // calculate\n                var width = M.min($win.width() - 40, lightbox.width),\n                    height = M.min($win.height() - 60, lightbox.height),\n                    ratio = M.min(width / lightbox.width, height / lightbox.height),\n                    destWidth = M.round(lightbox.width * ratio) + 40,\n                    destHeight = M.round(lightbox.height * ratio) + 60,\n                    to = {\n                        width: destWidth,\n                        height: destHeight,\n                        'margin-top': M.ceil(destHeight / 2) * -1,\n                        'margin-left': M.ceil(destWidth / 2) * -1\n                    };\n\n                // if rescale event, don't animate\n                if (event) {\n                    $(lightbox.elems.box).css(to);\n                } else {\n                    $(lightbox.elems.box).animate(to, {\n                        duration: self._options.lightboxTransitionSpeed,\n                        easing: self._options.easing,\n                        complete: function() {\n                            var image = lightbox.image,\n                                speed = self._options.lightboxFadeSpeed;\n\n                            self.trigger({\n                                type: Galleria.LIGHTBOX_IMAGE,\n                                imageTarget: image.image\n                            });\n\n                            $(image.container).show();\n\n                            $(image.image).animate({ opacity: 1 }, speed);\n                            Utils.show(lightbox.elems.info, speed);\n                        }\n                    });\n                }\n            },\n\n            hide: function() {\n\n                // remove the image\n                lightbox.image.image = null;\n\n                $win.off('resize', lightbox.rescale);\n\n                $(lightbox.elems.box).hide().find('iframe').remove();\n\n                Utils.hide(lightbox.elems.info);\n\n                self.detachKeyboard();\n                self.attachKeyboard(lightbox.keymap);\n\n                lightbox.keymap = false;\n\n                Utils.hide(lightbox.elems.overlay, 200, function() {\n                    $(this).hide().css('opacity', self._options.overlayOpacity);\n                    self.trigger(Galleria.LIGHTBOX_CLOSE);\n                });\n            },\n\n            showNext: function() {\n                lightbox.show(self.getNext(lightbox.active));\n            },\n\n            showPrev: function() {\n                lightbox.show(self.getPrev(lightbox.active));\n            },\n\n            show: function(index) {\n\n                lightbox.active = index = typeof index === 'number' ? index : self.getIndex() || 0;\n\n                if (!lightbox.initialized) {\n                    lightbox.init();\n                }\n\n                // trigger the event\n                self.trigger(Galleria.LIGHTBOX_OPEN);\n\n                // temporarily attach some keys\n                // save the old ones first in a cloned object\n                if (!lightbox.keymap) {\n\n                    lightbox.keymap = $.extend({}, self._keyboard.map);\n\n                    self.attachKeyboard({\n                        escape: lightbox.hide,\n                        right: lightbox.showNext,\n                        left: lightbox.showPrev\n                    });\n                }\n\n                $win.off('resize', lightbox.rescale);\n\n                var data = self.getData(index),\n                    total = self.getDataLength(),\n                    n = self.getNext(index),\n                    ndata, p, i;\n\n                Utils.hide(lightbox.elems.info);\n\n                try {\n                    for (i = self._options.preload; i > 0; i--) {\n                        p = new Galleria.Picture();\n                        ndata = self.getData(n);\n                        p.preload(ndata.big ? ndata.big : ndata.image);\n                        n = self.getNext(n);\n                    }\n                } catch (e) {}\n\n                lightbox.image.isIframe = (data.iframe && !data.image);\n\n                $(lightbox.elems.box).toggleClass('iframe', lightbox.image.isIframe);\n\n                $(lightbox.image.container).find('.galleria-videoicon').remove();\n\n                lightbox.image.load(data.big || data.image || data.iframe, function(image) {\n\n                    if (image.isIframe) {\n\n                        var cw = $(window).width(),\n                            ch = $(window).height();\n\n                        if (image.video && self._options.maxVideoSize) {\n                            var r = M.min(self._options.maxVideoSize / cw, self._options.maxVideoSize / ch);\n                            if (r < 1) {\n                                cw *= r;\n                                ch *= r;\n                            }\n                        }\n                        lightbox.width = cw;\n                        lightbox.height = ch;\n\n                    } else {\n                        lightbox.width = image.original.width;\n                        lightbox.height = image.original.height;\n                    }\n\n                    $(image.image).css({\n                        width: image.isIframe ? '100%' : '100.1%',\n                        height: image.isIframe ? '100%' : '100.1%',\n                        top: 0,\n                        bottom: 0,\n                        zIndex: 99998,\n                        opacity: 0,\n                        visibility: 'visible'\n                    }).parent().height('100%');\n\n                    lightbox.elems.title.innerHTML = data.title || '';\n                    lightbox.elems.counter.innerHTML = (index + 1) + ' / ' + total;\n                    $win.resize(lightbox.rescale);\n                    lightbox.rescale();\n\n                    if (data.image && data.iframe) {\n\n                        $(lightbox.elems.box).addClass('iframe');\n\n                        if (data.video) {\n                            var $icon = _playIcon(image.container).hide();\n                            window.setTimeout(function() {\n                                $icon.fadeIn(200);\n                            }, 200);\n                        }\n\n                        $(image.image).css('cursor', 'pointer').mouseup((function(data, image) {\n                            return function(e) {\n                                $(lightbox.image.container).find('.galleria-videoicon').remove();\n                                e.preventDefault();\n                                image.isIframe = true;\n                                image.load(data.iframe + (data.video ? '&autoplay=1' : ''), {\n                                    width: '100%',\n                                    height: IE < 8 ? $(lightbox.image.container).height() : '100%'\n                                });\n                            };\n                        }(data, image)));\n                    }\n                });\n\n                $(lightbox.elems.overlay).show().css('visibility', 'visible');\n                $(lightbox.elems.box).show();\n            }\n        };\n\n        // the internal timeouts object\n        // provides helper methods for controlling timeouts\n\n        var _timer = this._timer = {\n\n            trunk: {},\n\n            add: function(id, fn, delay, loop) {\n                id = id || new Date().getTime();\n                loop = loop || false;\n                this.clear(id);\n                if (loop) {\n                    var old = fn;\n                    fn = function() {\n                        old();\n                        _timer.add(id, fn, delay);\n                    };\n                }\n                this.trunk[id] = window.setTimeout(fn, delay);\n            },\n\n            clear: function(id) {\n\n                var del = function(i) {\n                        window.clearTimeout(this.trunk[i]);\n                        delete this.trunk[i];\n                    },\n                    i;\n\n                if (!!id && id in this.trunk) {\n                    del.call(this, id);\n\n                } else if (typeof id === 'undefined') {\n                    for (i in this.trunk) {\n                        if (this.trunk.hasOwnProperty(i)) {\n                            del.call(this, i);\n                        }\n                    }\n                }\n            }\n        };\n\n        return this;\n    };\n\n    // end Galleria constructor\n\n    Galleria.prototype = {\n\n        // bring back the constructor reference\n\n        constructor: Galleria,\n\n        /**\n            Use this function to initialize the gallery and start loading.\n            Should only be called once per instance.\n\n            @param {HTMLElement} target The target element\n            @param {Object} options The gallery options\n\n            @returns Instance\n        */\n\n        init: function(target, options) {\n\n            options = _legacyOptions(options);\n\n            // save the original ingredients\n            this._original = {\n                target: target,\n                options: options,\n                data: null\n            };\n\n            // save the target here\n            this._target = this._dom.target = target.nodeName ? target : $(target).get(0);\n\n            // save the original content for destruction\n            this._original.html = this._target.innerHTML;\n\n            // push the instance\n            _instances.push(this);\n\n            // raise error if no target is detected\n            if (!this._target) {\n                Galleria.raise('Target not found', true);\n                return;\n            }\n\n            // apply options\n            this._options = {\n                autoplay: false,\n                carousel: true,\n                carouselFollow: true, // legacy, deprecate at 1.3\n                carouselSpeed: 400,\n                carouselSteps: 'auto',\n                clicknext: false,\n                dailymotion: {\n                    foreground: '%23EEEEEE',\n                    highlight: '%235BCEC5',\n                    background: '%23222222',\n                    logo: 0,\n                    hideInfos: 1\n                },\n                dataConfig: function(elem) {\n                    return {}; },\n                dataSelector: 'img',\n                dataSort: false,\n                dataSource: this._target,\n                debug: undef,\n                dummy: undef, // 1.2.5\n                easing: 'galleria',\n                extend: function(options) {},\n                fullscreenCrop: undef, // 1.2.5\n                fullscreenDoubleTap: true, // 1.2.4 toggles fullscreen on double-tap for touch devices\n                fullscreenTransition: undef, // 1.2.6\n                height: 0,\n                idleMode: true, // 1.2.4 toggles idleMode\n                idleTime: 3000,\n                idleSpeed: 200,\n                imageCrop: false,\n                imageMargin: 0,\n                imagePan: false,\n                imagePanSmoothness: 12,\n                imagePosition: '50%',\n                imageTimeout: undef, // 1.2.5\n                initialTransition: undef, // 1.2.4, replaces transitionInitial\n                keepSource: false,\n                layerFollow: true, // 1.2.5\n                lightbox: false, // 1.2.3\n                lightboxFadeSpeed: 200,\n                lightboxTransitionSpeed: 200,\n                linkSourceImages: true,\n                maxScaleRatio: undef,\n                maxVideoSize: undef, // 1.2.9\n                minScaleRatio: undef, // deprecated in 1.2.9\n                overlayOpacity: 0.85,\n                overlayBackground: '#0b0b0b',\n                pauseOnInteraction: true,\n                popupLinks: false,\n                preload: 2,\n                queue: true,\n                responsive: true,\n                show: 0,\n                showInfo: true,\n                showCounter: true,\n                showImagenav: true,\n                swipe: 'auto', // 1.2.4 -> revised in 1.3 -> changed type in 1.3.5\n                theme: null,\n                thumbCrop: true,\n                thumbEventType: 'click:fast',\n                thumbMargin: 0,\n                thumbQuality: 'auto',\n                thumbDisplayOrder: true, // 1.2.8\n                thumbPosition: '50%', // 1.3\n                thumbnails: true,\n                touchTransition: undef, // 1.2.6\n                transition: 'fade',\n                transitionInitial: undef, // legacy, deprecate in 1.3. Use initialTransition instead.\n                transitionSpeed: 400,\n                trueFullscreen: true, // 1.2.7\n                useCanvas: false, // 1.2.4\n                variation: '', // 1.3.2\n                videoPoster: true, // 1.3\n                vimeo: {\n                    title: 0,\n                    byline: 0,\n                    portrait: 0,\n                    color: 'aaaaaa'\n                },\n                wait: 5000, // 1.2.7\n                width: 'auto',\n                youtube: {\n                    modestbranding: 1,\n                    autohide: 1,\n                    color: 'white',\n                    hd: 1,\n                    rel: 0,\n                    showinfo: 0\n                }\n            };\n\n            // legacy support for transitionInitial\n            this._options.initialTransition = this._options.initialTransition || this._options.transitionInitial;\n\n            if (options) {\n\n                // turn off debug\n                if (options.debug === false) {\n                    DEBUG = false;\n                }\n\n                // set timeout\n                if (typeof options.imageTimeout === 'number') {\n                    TIMEOUT = options.imageTimeout;\n                }\n\n                // set dummy\n                if (typeof options.dummy === 'string') {\n                    DUMMY = options.dummy;\n                }\n\n                // set theme\n                if (typeof options.theme == 'string') {\n                    this._options.theme = options.theme;\n                }\n            }\n\n            // hide all content\n            $(this._target).children().hide();\n\n            // Warn for quirks mode\n            if (Galleria.QUIRK) {\n                Galleria.raise('Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML and add a correct doctype.');\n            }\n\n            // now we just have to wait for the theme...\n            // first check if it has already loaded\n            if (_loadedThemes.length) {\n                if (this._options.theme) {\n                    for (var i = 0; i < _loadedThemes.length; i++) {\n                        if (this._options.theme === _loadedThemes[i].name) {\n                            this.theme = _loadedThemes[i];\n                            break;\n                        }\n                    }\n                } else {\n                    // if no theme sepcified, apply the first loaded theme\n                    this.theme = _loadedThemes[0];\n                }\n            }\n\n            if (typeof this.theme == 'object') {\n                this._init();\n            } else {\n                // if no theme is loaded yet, push the instance into a pool and run it when the theme is ready\n                _pool.push(this);\n            }\n\n            return this;\n        },\n\n        // this method should only be called once per instance\n        // for manipulation of data, use the .load method\n\n        _init: function() {\n\n            var self = this,\n                options = this._options;\n\n            if (this._initialized) {\n                Galleria.raise('Init failed: Gallery instance already initialized.');\n                return this;\n            }\n\n            this._initialized = true;\n\n            if (!this.theme) {\n                Galleria.raise('Init failed: No theme found.', true);\n                return this;\n            }\n\n            // merge the theme & caller options\n            $.extend(true, options, this.theme.defaults, this._original.options, Galleria.configure.options);\n\n            // internally we use boolean for swipe\n            options.swipe = (function(s) {\n\n                if (s == 'enforced') {\n                    return true; }\n\n                // legacy patch\n                if (s === false || s == 'disabled') {\n                    return false; }\n\n                return !!Galleria.TOUCH;\n\n            }(options.swipe));\n\n            // disable options that arent compatible with swipe\n            if (options.swipe) {\n                options.clicknext = false;\n                options.imagePan = false;\n            }\n\n            // check for canvas support\n            (function(can) {\n                if (!('getContext' in can)) {\n                    can = null;\n                    return;\n                }\n                _canvas = _canvas || {\n                    elem: can,\n                    context: can.getContext('2d'),\n                    cache: {},\n                    length: 0\n                };\n            }(doc.createElement('canvas')));\n\n            // bind the gallery to run when data is ready\n            this.bind(Galleria.DATA, function() {\n\n                // remove big if total pixels are less than 1024 (most phones)\n                if (window.screen && window.screen.width && Array.prototype.forEach) {\n\n                    this._data.forEach(function(data) {\n\n                        var density = 'devicePixelRatio' in window ? window.devicePixelRatio : 1,\n                            m = M.max(window.screen.width, window.screen.height);\n\n                        if (m * density < 1024) {\n                            data.big = data.image;\n                        }\n                    });\n                }\n\n                // save the new data\n                this._original.data = this._data;\n\n                // lets show the counter here\n                this.get('total').innerHTML = this.getDataLength();\n\n                // cache the container\n                var $container = this.$('container');\n\n                // set ratio if height is < 2\n                if (self._options.height < 2) {\n                    self._userRatio = self._ratio = self._options.height;\n                }\n\n                // the gallery is ready, let's just wait for the css\n                var num = { width: 0, height: 0 };\n                var testHeight = function() {\n                    return self.$('stage').height();\n                };\n\n                // check container and thumbnail height\n                Utils.wait({\n                    until: function() {\n\n                        // keep trying to get the value\n                        num = self._getWH();\n                        $container.width(num.width).height(num.height);\n                        return testHeight() && num.width && num.height > 50;\n\n                    },\n                    success: function() {\n\n                        self._width = num.width;\n                        self._height = num.height;\n                        self._ratio = self._ratio || num.height / num.width;\n\n                        // for some strange reason, webkit needs a single setTimeout to play ball\n                        if (Galleria.WEBKIT) {\n                            window.setTimeout(function() {\n                                self._run();\n                            }, 1);\n                        } else {\n                            self._run();\n                        }\n                    },\n                    error: function() {\n\n                        // Height was probably not set, raise hard errors\n\n                        if (testHeight()) {\n                            Galleria.raise('Could not extract sufficient width/height of the gallery container. Traced measures: width:' + num.width + 'px, height: ' + num.height + 'px.', true);\n                        } else {\n                            Galleria.raise('Could not extract a stage height from the CSS. Traced height: ' + testHeight() + 'px.', true);\n                        }\n                    },\n                    timeout: typeof this._options.wait == 'number' ? this._options.wait : false\n                });\n            });\n\n            // build the gallery frame\n            this.append({\n                'info-text': ['info-title', 'info-description'],\n                'info': ['info-text'],\n                'image-nav': ['image-nav-right', 'image-nav-left'],\n                'stage': ['images', 'loader', 'counter', 'image-nav'],\n                'thumbnails-list': ['thumbnails'],\n                'thumbnails-container': ['thumb-nav-left', 'thumbnails-list', 'thumb-nav-right'],\n                'container': ['stage', 'thumbnails-container', 'info', 'tooltip']\n            });\n\n            Utils.hide(this.$('counter').append(\n                this.get('current'),\n                doc.createTextNode(' / '),\n                this.get('total')\n            ));\n\n            this.setCounter('&#8211;');\n\n            Utils.hide(self.get('tooltip'));\n\n            // add a notouch class on the container to prevent unwanted :hovers on touch devices\n            this.$('container').addClass([\n                (Galleria.TOUCH ? 'touch' : 'notouch'),\n                this._options.variation,\n                'galleria-theme-' + this.theme.name\n            ].join(' '));\n\n            // add images to the controls\n            if (!this._options.swipe) {\n                $.each(new Array(2), function(i) {\n\n                    // create a new Picture instance\n                    var image = new Galleria.Picture();\n\n                    // apply some styles, create & prepend overlay\n                    $(image.container).css({\n                        position: 'absolute',\n                        top: 0,\n                        left: 0\n                    }).prepend(self._layers[i] = $(Utils.create('galleria-layer')).css({\n                        position: 'absolute',\n                        top: 0,\n                        left: 0,\n                        right: 0,\n                        bottom: 0,\n                        zIndex: 2\n                    })[0]);\n\n                    // append the image\n                    self.$('images').append(image.container);\n\n                    // reload the controls\n                    self._controls[i] = image;\n\n                    // build a frame\n                    var frame = new Galleria.Picture();\n                    frame.isIframe = true;\n\n                    $(frame.container).attr('class', 'galleria-frame').css({\n                        position: 'absolute',\n                        top: 0,\n                        left: 0,\n                        zIndex: 4,\n                        background: '#000',\n                        display: 'none'\n                    }).appendTo(image.container);\n\n                    self._controls.frames[i] = frame;\n\n                });\n            }\n\n            // some forced generic styling\n            this.$('images').css({\n                position: 'relative',\n                top: 0,\n                left: 0,\n                width: '100%',\n                height: '100%'\n            });\n\n            if (options.swipe) {\n                this.$('images').css({\n                    position: 'absolute',\n                    top: 0,\n                    left: 0,\n                    width: 0,\n                    height: '100%'\n                });\n                this.finger = new Galleria.Finger(this.get('stage'), {\n                    onchange: function(page) {\n                        self.pause().show(page);\n                    },\n                    oncomplete: function(page) {\n\n                        var index = M.max(0, M.min(parseInt(page, 10), self.getDataLength() - 1)),\n                            data = self.getData(index);\n\n                        $(self._thumbnails[index].container)\n                            .addClass('active')\n                            .siblings('.active')\n                            .removeClass('active');\n\n                        if (!data) {\n                            return;\n                        }\n\n                        // remove video iframes\n                        self.$('images').find('.galleria-frame').css('opacity', 0).hide().find('iframe').remove();\n\n                        if (self._options.carousel && self._options.carouselFollow) {\n                            self._carousel.follow(index);\n                        }\n                    }\n                });\n                this.bind(Galleria.RESCALE, function() {\n                    this.finger.setup();\n                });\n                this.$('stage').on('click', function(e) {\n                    var data = self.getData();\n                    if (!data) {\n                        return;\n                    }\n                    if (data.iframe) {\n\n                        if (self.isPlaying()) {\n                            self.pause();\n                        }\n                        var frame = self._controls.frames[self._active],\n                            w = self._stageWidth,\n                            h = self._stageHeight;\n\n                        if ($(frame.container).find('iframe').length) {\n                            return;\n                        }\n\n                        $(frame.container).css({\n                            width: w,\n                            height: h,\n                            opacity: 0\n                        }).show().animate({\n                            opacity: 1\n                        }, 200);\n\n                        window.setTimeout(function() {\n                            frame.load(data.iframe + (data.video ? '&autoplay=1' : ''), {\n                                width: w,\n                                height: h\n                            }, function(frame) {\n                                self.$('container').addClass('videoplay');\n                                frame.scale({\n                                    width: self._stageWidth,\n                                    height: self._stageHeight,\n                                    iframelimit: data.video ? self._options.maxVideoSize : undef\n                                });\n                            });\n                        }, 100);\n\n                        return;\n                    }\n\n                    if (data.link) {\n                        if (self._options.popupLinks) {\n                            var win = window.open(data.link, '_blank');\n                        } else {\n                            window.location.href = data.link;\n                        }\n                        return;\n                    }\n                });\n                this.bind(Galleria.IMAGE, function(e) {\n\n                    self.setCounter(e.index);\n                    self.setInfo(e.index);\n\n                    var next = this.getNext(),\n                        prev = this.getPrev();\n\n                    var preloads = [prev, next];\n                    preloads.push(this.getNext(next), this.getPrev(prev), self._controls.slides.length - 1);\n\n                    var filtered = [];\n\n                    $.each(preloads, function(i, val) {\n                        if ($.inArray(val, filtered) == -1) {\n                            filtered.push(val);\n                        }\n                    });\n\n                    $.each(filtered, function(i, loadme) {\n                        var d = self.getData(loadme),\n                            img = self._controls.slides[loadme],\n                            src = self.isFullscreen() && d.big ? d.big : (d.image || d.iframe);\n\n                        if (d.iframe && !d.image) {\n                            img.isIframe = true;\n                        }\n\n                        if (!img.ready) {\n                            self._controls.slides[loadme].load(src, function(img) {\n                                if (!img.isIframe) {\n                                    $(img.image).css('visibility', 'hidden');\n                                }\n                                self._scaleImage(img, {\n                                    complete: function(img) {\n                                        if (!img.isIframe) {\n                                            $(img.image).css({\n                                                opacity: 0,\n                                                visibility: 'visible'\n                                            }).animate({\n                                                opacity: 1\n                                            }, 200);\n                                        }\n                                    }\n                                });\n                            });\n                        }\n                    });\n                });\n            }\n\n            this.$('thumbnails, thumbnails-list').css({\n                overflow: 'hidden',\n                position: 'relative'\n            });\n\n            // bind image navigation arrows\n            this.$('image-nav-right, image-nav-left').on('click:fast', function(e) {\n\n                // pause if options is set\n                if (options.pauseOnInteraction) {\n                    self.pause();\n                }\n\n                // navigate\n                var fn = /right/.test(this.className) ? 'next' : 'prev';\n                self[fn]();\n\n            }).on('click', function(e) {\n\n                e.preventDefault();\n\n                // tune the clicknext option\n                if (options.clicknext || options.swipe) {\n                    e.stopPropagation();\n                }\n            });\n\n            // hide controls if chosen to\n            $.each(['info', 'counter', 'image-nav'], function(i, el) {\n                if (options['show' + el.substr(0, 1).toUpperCase() + el.substr(1).replace(/-/, '')] === false) {\n                    Utils.moveOut(self.get(el.toLowerCase()));\n                }\n            });\n\n            // load up target content\n            this.load();\n\n            // now it's usually safe to remove the content\n            // IE will never stop loading if we remove it, so let's keep it hidden for IE (it's usually fast enough anyway)\n            if (!options.keepSource && !IE) {\n                this._target.innerHTML = '';\n            }\n\n            // re-append the errors, if they happened before clearing\n            if (this.get('errors')) {\n                this.appendChild('target', 'errors');\n            }\n\n            // append the gallery frame\n            this.appendChild('target', 'container');\n\n            // parse the carousel on each thumb load\n            if (options.carousel) {\n                var count = 0,\n                    show = options.show;\n                this.bind(Galleria.THUMBNAIL, function() {\n                    this.updateCarousel();\n                    if (++count == this.getDataLength() && typeof show == 'number' && show > 0) {\n                        this._carousel.follow(show);\n                    }\n                });\n            }\n\n            // bind window resize for responsiveness\n            if (options.responsive) {\n                $win.on('resize', function() {\n                    if (!self.isFullscreen()) {\n                        self.resize();\n                    }\n                });\n            }\n\n            // double-tap/click fullscreen toggle\n\n            if (options.fullscreenDoubleTap) {\n\n                this.$('stage').on('touchstart', (function() {\n                    var last, cx, cy, lx, ly, now,\n                        getData = function(e) {\n                            return e.originalEvent.touches ? e.originalEvent.touches[0] : e;\n                        };\n                    self.$('stage').on('touchmove', function() {\n                        last = 0;\n                    });\n                    return function(e) {\n                        if (/(-left|-right)/.test(e.target.className)) {\n                            return;\n                        }\n                        now = Utils.timestamp();\n                        cx = getData(e).pageX;\n                        cy = getData(e).pageY;\n                        if (e.originalEvent.touches.length < 2 && (now - last < 300) && (cx - lx < 20) && (cy - ly < 20)) {\n                            self.toggleFullscreen();\n                            e.preventDefault();\n                            return;\n                        }\n                        last = now;\n                        lx = cx;\n                        ly = cy;\n                    };\n                }()));\n            }\n\n            // bind the ons\n            $.each(Galleria.on.binds, function(i, bind) {\n                // check if already bound\n                if ($.inArray(bind.hash, self._binds) == -1) {\n                    self.bind(bind.type, bind.callback);\n                }\n            });\n\n            return this;\n        },\n\n        addTimer: function() {\n            this._timer.add.apply(this._timer, Utils.array(arguments));\n            return this;\n        },\n\n        clearTimer: function() {\n            this._timer.clear.apply(this._timer, Utils.array(arguments));\n            return this;\n        },\n\n        // parse width & height from CSS or options\n\n        _getWH: function() {\n\n            var $container = this.$('container'),\n                $target = this.$('target'),\n                self = this,\n                num = {},\n                arr;\n\n            $.each(['width', 'height'], function(i, m) {\n\n                // first check if options is set\n                if (self._options[m] && typeof self._options[m] === 'number') {\n                    num[m] = self._options[m];\n                } else {\n\n                    arr = [\n                        Utils.parseValue($container.css(m)), // the container css height\n                        Utils.parseValue($target.css(m)), // the target css height\n                        $container[m](), // the container jQuery method\n                        $target[m]() // the target jQuery method\n                    ];\n\n                    // if first time, include the min-width & min-height\n                    if (!self['_' + m]) {\n                        arr.splice(arr.length,\n                            Utils.parseValue($container.css('min-' + m)),\n                            Utils.parseValue($target.css('min-' + m))\n                        );\n                    }\n\n                    // else extract the measures from different sources and grab the highest value\n                    num[m] = M.max.apply(M, arr);\n                }\n            });\n\n            // allow setting a height ratio instead of exact value\n            // useful when doing responsive galleries\n\n            if (self._userRatio) {\n                num.height = num.width * self._userRatio;\n            }\n\n            return num;\n        },\n\n        // Creates the thumbnails and carousel\n        // can be used at any time, f.ex when the data object is manipulated\n        // push is an optional argument with pushed images\n\n        _createThumbnails: function(push) {\n\n            this.get('total').innerHTML = this.getDataLength();\n\n            var src,\n                thumb,\n                data,\n\n                $container,\n\n                self = this,\n                o = this._options,\n\n                i = push ? this._data.length - push.length : 0,\n                chunk = i,\n\n                thumbchunk = [],\n                loadindex = 0,\n\n                gif = IE < 8 ? 'http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif' :\n                'data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D',\n\n                // get previously active thumbnail, if exists\n                active = (function() {\n                    var a = self.$('thumbnails').find('.active');\n                    if (!a.length) {\n                        return false;\n                    }\n                    return a.find('img').attr('src');\n                }()),\n\n                // cache the thumbnail option\n                optval = typeof o.thumbnails === 'string' ? o.thumbnails.toLowerCase() : null,\n\n                // move some data into the instance\n                // for some reason, jQuery cant handle css(property) when zooming in FF, breaking the gallery\n                // so we resort to getComputedStyle for browsers who support it\n                getStyle = function(prop) {\n                    return doc.defaultView && doc.defaultView.getComputedStyle ?\n                        doc.defaultView.getComputedStyle(thumb.container, null)[prop] :\n                        $container.css(prop);\n                },\n\n                fake = function(image, index, container) {\n                    return function() {\n                        $(container).append(image);\n                        self.trigger({\n                            type: Galleria.THUMBNAIL,\n                            thumbTarget: image,\n                            index: index,\n                            galleriaData: self.getData(index)\n                        });\n                    };\n                },\n\n                onThumbEvent = function(e) {\n\n                    // pause if option is set\n                    if (o.pauseOnInteraction) {\n                        self.pause();\n                    }\n\n                    // extract the index from the data\n                    var index = $(e.currentTarget).data('index');\n                    if (self.getIndex() !== index) {\n                        self.show(index);\n                    }\n\n                    e.preventDefault();\n                },\n\n                thumbComplete = function(thumb, callback) {\n\n                    $(thumb.container).css('visibility', 'visible');\n                    self.trigger({\n                        type: Galleria.THUMBNAIL,\n                        thumbTarget: thumb.image,\n                        index: thumb.data.order,\n                        galleriaData: self.getData(thumb.data.order)\n                    });\n\n                    if (typeof callback == 'function') {\n                        callback.call(self, thumb);\n                    }\n                },\n\n                onThumbLoad = function(thumb, callback) {\n\n                    // scale when ready\n                    thumb.scale({\n                        width: thumb.data.width,\n                        height: thumb.data.height,\n                        crop: o.thumbCrop,\n                        margin: o.thumbMargin,\n                        canvas: o.useCanvas,\n                        position: o.thumbPosition,\n                        complete: function(thumb) {\n\n                            // shrink thumbnails to fit\n                            var top = ['left', 'top'],\n                                arr = ['Width', 'Height'],\n                                m,\n                                css,\n                                data = self.getData(thumb.index);\n\n                            // calculate shrinked positions\n                            $.each(arr, function(i, measure) {\n                                m = measure.toLowerCase();\n                                if ((o.thumbCrop !== true || o.thumbCrop === m)) {\n                                    css = {};\n                                    css[m] = thumb[m];\n                                    $(thumb.container).css(css);\n                                    css = {};\n                                    css[top[i]] = 0;\n                                    $(thumb.image).css(css);\n                                }\n\n                                // cache outer measures\n                                thumb['outer' + measure] = $(thumb.container)['outer' + measure](true);\n                            });\n\n                            // set high quality if downscale is moderate\n                            Utils.toggleQuality(thumb.image,\n                                o.thumbQuality === true ||\n                                (o.thumbQuality === 'auto' && thumb.original.width < thumb.width * 3)\n                            );\n\n                            if (o.thumbDisplayOrder && !thumb.lazy) {\n\n                                $.each(thumbchunk, function(i, th) {\n                                    if (i === loadindex && th.ready && !th.displayed) {\n\n                                        loadindex++;\n                                        th.displayed = true;\n\n                                        thumbComplete(th, callback);\n\n                                        return;\n                                    }\n                                });\n                            } else {\n                                thumbComplete(thumb, callback);\n                            }\n                        }\n                    });\n                };\n\n            if (!push) {\n                this._thumbnails = [];\n                this.$('thumbnails').empty();\n            }\n\n            // loop through data and create thumbnails\n            for (; this._data[i]; i++) {\n\n                data = this._data[i];\n\n                // get source from thumb or image\n                src = data.thumb || data.image;\n\n                if ((o.thumbnails === true || optval == 'lazy') && (data.thumb || data.image)) {\n\n                    // add a new Picture instance\n                    thumb = new Galleria.Picture(i);\n\n                    // save the index\n                    thumb.index = i;\n\n                    // flag displayed\n                    thumb.displayed = false;\n\n                    // flag lazy\n                    thumb.lazy = false;\n\n                    // flag video\n                    thumb.video = false;\n\n                    // append the thumbnail\n                    this.$('thumbnails').append(thumb.container);\n\n                    // cache the container\n                    $container = $(thumb.container);\n\n                    // hide it\n                    $container.css('visibility', 'hidden');\n\n                    thumb.data = {\n                        width: Utils.parseValue(getStyle('width')),\n                        height: Utils.parseValue(getStyle('height')),\n                        order: i,\n                        src: src\n                    };\n\n                    // grab & reset size for smoother thumbnail loads\n                    if (o.thumbCrop !== true) {\n                        $container.css({ width: 'auto', height: 'auto' });\n                    } else {\n                        $container.css({ width: thumb.data.width, height: thumb.data.height });\n                    }\n\n                    // load the thumbnail\n                    if (optval == 'lazy') {\n\n                        $container.addClass('lazy');\n\n                        thumb.lazy = true;\n\n                        thumb.load(gif, {\n                            height: thumb.data.height,\n                            width: thumb.data.width\n                        });\n\n                    } else {\n                        thumb.load(src, onThumbLoad);\n                    }\n\n                    // preload all images here\n                    if (o.preload === 'all') {\n                        thumb.preload(data.image);\n                    }\n\n                    // create empty spans if thumbnails is set to 'empty'\n                } else if ((data.iframe && optval !== null) || optval === 'empty' || optval === 'numbers') {\n                    thumb = {\n                        container: Utils.create('galleria-image'),\n                        image: Utils.create('img', 'span'),\n                        ready: true,\n                        data: {\n                            order: i\n                        }\n                    };\n\n                    // create numbered thumbnails\n                    if (optval === 'numbers') {\n                        $(thumb.image).text(i + 1);\n                    }\n\n                    if (data.iframe) {\n                        $(thumb.image).addClass('iframe');\n                    }\n\n                    this.$('thumbnails').append(thumb.container);\n\n                    // we need to \"fake\" a loading delay before we append and trigger\n                    // 50+ should be enough\n\n                    window.setTimeout((fake)(thumb.image, i, thumb.container), 50 + (i * 20));\n\n                    // create null object to silent errors\n                } else {\n                    thumb = {\n                        container: null,\n                        image: null\n                    };\n                }\n\n                // add events for thumbnails\n                // you can control the event type using thumb_event_type\n                // we'll add the same event to the source if it's kept\n\n                $(thumb.container).add(o.keepSource && o.linkSourceImages ? data.original : null)\n                    .data('index', i).on(o.thumbEventType, onThumbEvent)\n                    .data('thumbload', onThumbLoad);\n\n                if (active === src) {\n                    $(thumb.container).addClass('active');\n                }\n\n                this._thumbnails.push(thumb);\n            }\n\n            thumbchunk = this._thumbnails.slice(chunk);\n\n            return this;\n        },\n\n        /**\n            Lazy-loads thumbnails.\n            You can call this method to load lazy thumbnails at run time\n\n            @param {Array|Number} index Index or array of indexes of thumbnails to be loaded\n            @param {Function} complete Callback that is called when all lazy thumbnails have been loaded\n\n            @returns Instance\n        */\n\n        lazyLoad: function(index, complete) {\n\n            var arr = index.constructor == Array ? index : [index],\n                self = this,\n                loaded = 0;\n\n            $.each(arr, function(i, ind) {\n\n                if (ind > self._thumbnails.length - 1) {\n                    return;\n                }\n\n                var thumb = self._thumbnails[ind],\n                    data = thumb.data,\n                    callback = function() {\n                        if (++loaded == arr.length && typeof complete == 'function') {\n                            complete.call(self);\n                        }\n                    },\n                    thumbload = $(thumb.container).data('thumbload');\n                if (thumb.video) {\n                    thumbload.call(self, thumb, callback);\n                } else {\n                    thumb.load(data.src, function(thumb) {\n                        thumbload.call(self, thumb, callback);\n                    });\n                }\n            });\n\n            return this;\n\n        },\n\n        /**\n            Lazy-loads thumbnails in chunks.\n            This method automatcally chops up the loading process of many thumbnails into chunks\n\n            @param {Number} size Size of each chunk to be loaded\n            @param {Number} [delay] Delay between each loads\n\n            @returns Instance\n        */\n\n        lazyLoadChunks: function(size, delay) {\n\n            var len = this.getDataLength(),\n                i = 0,\n                n = 0,\n                arr = [],\n                temp = [],\n                self = this;\n\n            delay = delay || 0;\n\n            for (; i < len; i++) {\n                temp.push(i);\n                if (++n == size || i == len - 1) {\n                    arr.push(temp);\n                    n = 0;\n                    temp = [];\n                }\n            }\n\n            var init = function(wait) {\n                var a = arr.shift();\n                if (a) {\n                    window.setTimeout(function() {\n                        self.lazyLoad(a, function() {\n                            init(true);\n                        });\n                    }, (delay && wait) ? delay : 0);\n                }\n            };\n\n            init(false);\n\n            return this;\n\n        },\n\n        // the internal _run method should be called after loading data into galleria\n        // makes sure the gallery has proper measurements before postrun & ready\n        _run: function() {\n\n            var self = this;\n\n            self._createThumbnails();\n\n            // make sure we have a stageHeight && stageWidth\n\n            Utils.wait({\n\n                timeout: 10000,\n\n                until: function() {\n\n                    // Opera crap\n                    if (Galleria.OPERA) {\n                        self.$('stage').css('display', 'inline-block');\n                    }\n\n                    self._stageWidth = self.$('stage').width();\n                    self._stageHeight = self.$('stage').height();\n\n                    return (self._stageWidth &&\n                        self._stageHeight > 50); // what is an acceptable height?\n                },\n\n                success: function() {\n\n                    // save the instance\n                    _galleries.push(self);\n\n                    // postrun some stuff after the gallery is ready\n\n                    // create the touch slider\n                    if (self._options.swipe) {\n\n                        var $images = self.$('images').width(self.getDataLength() * self._stageWidth);\n                        $.each(new Array(self.getDataLength()), function(i) {\n\n                            var image = new Galleria.Picture(),\n                                data = self.getData(i);\n\n                            $(image.container).css({\n                                position: 'absolute',\n                                top: 0,\n                                left: self._stageWidth * i\n                            }).prepend(self._layers[i] = $(Utils.create('galleria-layer')).css({\n                                position: 'absolute',\n                                top: 0,\n                                left: 0,\n                                right: 0,\n                                bottom: 0,\n                                zIndex: 2\n                            })[0]).appendTo($images);\n\n                            if (data.video) {\n                                _playIcon(image.container);\n                            }\n\n                            self._controls.slides.push(image);\n\n                            var frame = new Galleria.Picture();\n                            frame.isIframe = true;\n\n                            $(frame.container).attr('class', 'galleria-frame').css({\n                                position: 'absolute',\n                                top: 0,\n                                left: 0,\n                                zIndex: 4,\n                                background: '#000',\n                                display: 'none'\n                            }).appendTo(image.container);\n\n                            self._controls.frames.push(frame);\n                        });\n\n                        self.finger.setup();\n                    }\n\n                    // show counter\n                    Utils.show(self.get('counter'));\n\n                    // bind carousel nav\n                    if (self._options.carousel) {\n                        self._carousel.bindControls();\n                    }\n\n                    // start autoplay\n                    if (self._options.autoplay) {\n\n                        self.pause();\n\n                        if (typeof self._options.autoplay === 'number') {\n                            self._playtime = self._options.autoplay;\n                        }\n\n                        self._playing = true;\n                    }\n                    // if second load, just do the show and return\n                    if (self._firstrun) {\n\n                        if (self._options.autoplay) {\n                            self.trigger(Galleria.PLAY);\n                        }\n\n                        if (typeof self._options.show === 'number') {\n                            self.show(self._options.show);\n                        }\n                        return;\n                    }\n\n                    self._firstrun = true;\n\n                    // initialize the History plugin\n                    if (Galleria.History) {\n\n                        // bind the show method\n                        Galleria.History.change(function(value) {\n\n                            // if ID is NaN, the user pressed back from the first image\n                            // return to previous address\n                            if (isNaN(value)) {\n                                window.history.go(-1);\n\n                                // else show the image\n                            } else {\n                                self.show(value, undef, true);\n                            }\n                        });\n                    }\n\n                    self.trigger(Galleria.READY);\n\n                    // call the theme init method\n                    self.theme.init.call(self, self._options);\n\n                    // Trigger Galleria.ready\n                    $.each(Galleria.ready.callbacks, function(i, fn) {\n                        if (typeof fn == 'function') {\n                            fn.call(self, self._options);\n                        }\n                    });\n\n                    // call the extend option\n                    self._options.extend.call(self, self._options);\n\n                    // show the initial image\n                    // first test for permalinks in history\n                    if (/^[0-9]{1,4}$/.test(HASH) && Galleria.History) {\n                        self.show(HASH, undef, true);\n\n                    } else if (self._data[self._options.show]) {\n                        self.show(self._options.show);\n                    }\n\n                    // play trigger\n                    if (self._options.autoplay) {\n                        self.trigger(Galleria.PLAY);\n                    }\n                },\n\n                error: function() {\n                    Galleria.raise('Stage width or height is too small to show the gallery. Traced measures: width:' + self._stageWidth + 'px, height: ' + self._stageHeight + 'px.', true);\n                }\n\n            });\n        },\n\n        /**\n            Loads data into the gallery.\n            You can call this method on an existing gallery to reload the gallery with new data.\n\n            @param {Array|string} [source] Optional JSON array of data or selector of where to find data in the document.\n            Defaults to the Galleria target or dataSource option.\n\n            @param {string} [selector] Optional element selector of what elements to parse.\n            Defaults to 'img'.\n\n            @param {Function} [config] Optional function to modify the data extraction proceedure from the selector.\n            See the dataConfig option for more information.\n\n            @returns Instance\n        */\n\n        load: function(source, selector, config) {\n\n            var self = this,\n                o = this._options;\n\n            // empty the data array\n            this._data = [];\n\n            // empty the thumbnails\n            this._thumbnails = [];\n            this.$('thumbnails').empty();\n\n            // shorten the arguments\n            if (typeof selector === 'function') {\n                config = selector;\n                selector = null;\n            }\n\n            // use the source set by target\n            source = source || o.dataSource;\n\n            // use selector set by option\n            selector = selector || o.dataSelector;\n\n            // use the dataConfig set by option\n            config = config || o.dataConfig;\n\n            // if source is a true object, make it into an array\n            if ($.isPlainObject(source)) {\n                source = [source];\n            }\n\n            // check if the data is an array already\n            if ($.isArray(source)) {\n                if (this.validate(source)) {\n                    this._data = source;\n                } else {\n                    Galleria.raise('Load failed: JSON Array not valid.');\n                }\n            } else {\n\n                // add .video and .iframe to the selector (1.2.7)\n                selector += ',.video,.iframe';\n\n                // loop through images and set data\n                $(source).find(selector).each(function(i, elem) {\n\n                    elem = $(elem);\n                    var data = {},\n                        parent = elem.parent(),\n                        href = parent.attr('href'),\n                        rel = parent.attr('rel');\n\n                    if (href && (elem[0].nodeName == 'IMG' || elem.hasClass('video')) && _videoTest(href)) {\n                        data.video = href;\n                    } else if (href && elem.hasClass('iframe')) {\n                        data.iframe = href;\n                    } else {\n                        data.image = data.big = href;\n                    }\n\n                    if (rel) {\n                        data.big = rel;\n                    }\n\n                    // alternative extraction from HTML5 data attribute, added in 1.2.7\n                    $.each('big title description link layer image'.split(' '), function(i, val) {\n                        if (elem.data(val)) {\n                            data[val] = elem.data(val).toString();\n                        }\n                    });\n\n                    if (!data.big) {\n                        data.big = data.image;\n                    }\n\n                    // mix default extractions with the hrefs and config\n                    // and push it into the data array\n                    self._data.push($.extend({\n\n                        title: elem.attr('title') || '',\n                        thumb: elem.attr('src'),\n                        image: elem.attr('src'),\n                        big: elem.attr('src'),\n                        description: elem.attr('alt') || '',\n                        link: elem.attr('longdesc'),\n                        original: elem.get(0) // saved as a reference\n\n                    }, data, config(elem)));\n\n                });\n            }\n\n            if (typeof o.dataSort == 'function') {\n                protoArray.sort.call(this._data, o.dataSort);\n            } else if (o.dataSort == 'random') {\n                this._data.sort(function() {\n                    return M.round(M.random()) - 0.5;\n                });\n            }\n\n            // trigger the DATA event and return\n            if (this.getDataLength()) {\n                this._parseData(function() {\n                    this.trigger(Galleria.DATA);\n                });\n            }\n            return this;\n\n        },\n\n        // make sure the data works properly\n        _parseData: function(callback) {\n\n            var self = this,\n                current,\n                ready = false,\n                onload = function() {\n                    var complete = true;\n                    $.each(self._data, function(i, data) {\n                        if (data.loading) {\n                            complete = false;\n                            return false;\n                        }\n                    });\n                    if (complete && !ready) {\n                        ready = true;\n                        callback.call(self);\n                    }\n                };\n\n            $.each(this._data, function(i, data) {\n\n                current = self._data[i];\n\n                // copy image as thumb if no thumb exists\n                if ('thumb' in data === false) {\n                    current.thumb = data.image;\n                }\n                // copy image as big image if no biggie exists\n                if (!data.big) {\n                    current.big = data.image;\n                }\n                // parse video\n                if ('video' in data) {\n                    var result = _videoTest(data.video);\n\n                    if (result) {\n                        current.iframe = new Video(result.provider, result.id).embed() + (function() {\n\n                            // add options\n                            if (typeof self._options[result.provider] == 'object') {\n                                var str = '?',\n                                    arr = [];\n                                $.each(self._options[result.provider], function(key, val) {\n                                    arr.push(key + '=' + val);\n                                });\n\n                                // small youtube specifics, perhaps move to _video later\n                                if (result.provider == 'youtube') {\n                                    arr = ['wmode=opaque'].concat(arr);\n                                }\n                                return str + arr.join('&');\n                            }\n                            return '';\n                        }());\n\n                        // pre-fetch video providers media\n\n                        if (!current.thumb || !current.image) {\n                            $.each(['thumb', 'image'], function(i, type) {\n                                if (type == 'image' && !self._options.videoPoster) {\n                                    current.image = undef;\n                                    return;\n                                }\n                                var video = new Video(result.provider, result.id);\n                                if (!current[type]) {\n                                    current.loading = true;\n                                    video.getMedia(type, (function(current, type) {\n                                        return function(src) {\n                                            current[type] = src;\n                                            if (type == 'image' && !current.big) {\n                                                current.big = current.image;\n                                            }\n                                            delete current.loading;\n                                            onload();\n                                        };\n                                    }(current, type)));\n                                }\n                            });\n                        }\n                    }\n                }\n            });\n\n            onload();\n\n            return this;\n        },\n\n        /**\n            Destroy the Galleria instance and recover the original content\n\n            @example this.destroy();\n\n            @returns Instance\n        */\n\n        destroy: function() {\n            this.$('target').data('galleria', null);\n            this.$('container').off('galleria');\n            this.get('target').innerHTML = this._original.html;\n            this.clearTimer();\n            Utils.removeFromArray(_instances, this);\n            Utils.removeFromArray(_galleries, this);\n            if (Galleria._waiters.length) {\n                $.each(Galleria._waiters, function(i, w) {\n                    if (w) window.clearTimeout(w);\n                });\n            }\n            return this;\n        },\n\n        /**\n            Adds and/or removes images from the gallery\n            Works just like Array.splice\n            https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice\n\n            @example this.splice( 2, 4 ); // removes 4 images after the second image\n\n            @returns Instance\n        */\n\n        splice: function() {\n            var self = this,\n                args = Utils.array(arguments);\n            window.setTimeout(function() {\n                protoArray.splice.apply(self._data, args);\n                self._parseData(function() {\n                    self._createThumbnails();\n                });\n            }, 2);\n            return self;\n        },\n\n        /**\n            Append images to the gallery\n            Works just like Array.push\n            https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push\n\n            @example this.push({ image: 'image1.jpg' }); // appends the image to the gallery\n\n            @returns Instance\n        */\n\n        push: function() {\n            var self = this,\n                args = Utils.array(arguments);\n\n            if (args.length == 1 && args[0].constructor == Array) {\n                args = args[0];\n            }\n\n            window.setTimeout(function() {\n                protoArray.push.apply(self._data, args);\n                self._parseData(function() {\n                    self._createThumbnails(args);\n                });\n            }, 2);\n            return self;\n        },\n\n        _getActive: function() {\n            return this._controls.getActive();\n        },\n\n        validate: function(data) {\n            // todo: validate a custom data array\n            return true;\n        },\n\n        /**\n            Bind any event to Galleria\n\n            @param {string} type The Event type to listen for\n            @param {Function} fn The function to execute when the event is triggered\n\n            @example this.bind( 'image', function() { Galleria.log('image shown') });\n\n            @returns Instance\n        */\n\n        bind: function(type, fn) {\n\n            // allow 'image' instead of Galleria.IMAGE\n            type = _patchEvent(type);\n\n            this.$('container').on(type, this.proxy(fn));\n            return this;\n        },\n\n        /**\n            Unbind any event to Galleria\n\n            @param {string} type The Event type to forget\n\n            @returns Instance\n        */\n\n        unbind: function(type) {\n\n            type = _patchEvent(type);\n\n            this.$('container').off(type);\n            return this;\n        },\n\n        /**\n            Manually trigger a Galleria event\n\n            @param {string} type The Event to trigger\n\n            @returns Instance\n        */\n\n        trigger: function(type) {\n\n            type = typeof type === 'object' ?\n                $.extend(type, { scope: this }) : { type: _patchEvent(type), scope: this };\n\n            this.$('container').trigger(type);\n\n            return this;\n        },\n\n        /**\n            Assign an \"idle state\" to any element.\n            The idle state will be applied after a certain amount of idle time\n            Useful to hide f.ex navigation when the gallery is inactive\n\n            @param {HTMLElement|string} elem The Dom node or selector to apply the idle state to\n            @param {Object} styles the CSS styles to apply when in idle mode\n            @param {Object} [from] the CSS styles to apply when in normal\n            @param {Boolean} [hide] set to true if you want to hide it first\n\n            @example addIdleState( this.get('image-nav'), { opacity: 0 });\n            @example addIdleState( '.galleria-image-nav', { top: -200 }, true);\n\n            @returns Instance\n        */\n\n        addIdleState: function(elem, styles, from, hide) {\n            this._idle.add.apply(this._idle, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Removes any idle state previously set using addIdleState()\n\n            @param {HTMLElement|string} elem The Dom node or selector to remove the idle state from.\n\n            @returns Instance\n        */\n\n        removeIdleState: function(elem) {\n            this._idle.remove.apply(this._idle, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Force Galleria to enter idle mode.\n\n            @returns Instance\n        */\n\n        enterIdleMode: function() {\n            this._idle.hide();\n            return this;\n        },\n\n        /**\n            Force Galleria to exit idle mode.\n\n            @returns Instance\n        */\n\n        exitIdleMode: function() {\n            this._idle.showAll();\n            return this;\n        },\n\n        /**\n            Enter FullScreen mode\n\n            @param {Function} callback the function to be executed when the fullscreen mode is fully applied.\n\n            @returns Instance\n        */\n\n        enterFullscreen: function(callback) {\n            this._fullscreen.enter.apply(this, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Exits FullScreen mode\n\n            @param {Function} callback the function to be executed when the fullscreen mode is fully applied.\n\n            @returns Instance\n        */\n\n        exitFullscreen: function(callback) {\n            this._fullscreen.exit.apply(this, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Toggle FullScreen mode\n\n            @param {Function} callback the function to be executed when the fullscreen mode is fully applied or removed.\n\n            @returns Instance\n        */\n\n        toggleFullscreen: function(callback) {\n            this._fullscreen[this.isFullscreen() ? 'exit' : 'enter'].apply(this, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Adds a tooltip to any element.\n            You can also call this method with an object as argument with elemID:value pairs to apply tooltips to (see examples)\n\n            @param {HTMLElement} elem The DOM Node to attach the event to\n            @param {string|Function} value The tooltip message. Can also be a function that returns a string.\n\n            @example this.bindTooltip( this.get('thumbnails'), 'My thumbnails');\n            @example this.bindTooltip( this.get('thumbnails'), function() { return 'My thumbs' });\n            @example this.bindTooltip( { image_nav: 'Navigation' });\n\n            @returns Instance\n        */\n\n        bindTooltip: function(elem, value) {\n            this._tooltip.bind.apply(this._tooltip, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Note: this method is deprecated. Use refreshTooltip() instead.\n\n            Redefine a tooltip.\n            Use this if you want to re-apply a tooltip value to an already bound tooltip element.\n\n            @param {HTMLElement} elem The DOM Node to attach the event to\n            @param {string|Function} value The tooltip message. Can also be a function that returns a string.\n\n            @returns Instance\n        */\n\n        defineTooltip: function(elem, value) {\n            this._tooltip.define.apply(this._tooltip, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Refresh a tooltip value.\n            Use this if you want to change the tooltip value at runtime, f.ex if you have a play/pause toggle.\n\n            @param {HTMLElement} elem The DOM Node that has a tooltip that should be refreshed\n\n            @returns Instance\n        */\n\n        refreshTooltip: function(elem) {\n            this._tooltip.show.apply(this._tooltip, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Open a pre-designed lightbox with the currently active image.\n            You can control some visuals using gallery options.\n\n            @returns Instance\n        */\n\n        openLightbox: function() {\n            this._lightbox.show.apply(this._lightbox, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Close the lightbox.\n\n            @returns Instance\n        */\n\n        closeLightbox: function() {\n            this._lightbox.hide.apply(this._lightbox, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Check if a variation exists\n\n            @returns {Boolean} If the variation has been applied\n        */\n\n        hasVariation: function(variation) {\n            return $.inArray(variation, this._options.variation.split(/\\s+/)) > -1;\n        },\n\n        /**\n            Get the currently active image element.\n\n            @returns {HTMLElement} The image element\n        */\n\n        getActiveImage: function() {\n            var active = this._getActive();\n            return active ? active.image : undef;\n        },\n\n        /**\n            Get the currently active thumbnail element.\n\n            @returns {HTMLElement} The thumbnail element\n        */\n\n        getActiveThumb: function() {\n            return this._thumbnails[this._active].image || undef;\n        },\n\n        /**\n        Get the mouse position relative to the gallery container\n\n        @param e The mouse event\n\n        @example\n\nvar gallery = this;\n$(document).mousemove(function(e) {\n    console.log( gallery.getMousePosition(e).x );\n});\n\n        @returns {Object} Object with x & y of the relative mouse postion\n    */\n\n        getMousePosition: function(e) {\n            return {\n                x: e.pageX - this.$('container').offset().left,\n                y: e.pageY - this.$('container').offset().top\n            };\n        },\n\n        /**\n            Adds a panning effect to the image\n\n            @param [img] The optional image element. If not specified it takes the currently active image\n\n            @returns Instance\n        */\n\n        addPan: function(img) {\n\n            if (this._options.imageCrop === false) {\n                return;\n            }\n\n            img = $(img || this.getActiveImage());\n\n            // define some variables and methods\n            var self = this,\n                x = img.width() / 2,\n                y = img.height() / 2,\n                destX = parseInt(img.css('left'), 10),\n                destY = parseInt(img.css('top'), 10),\n                curX = destX || 0,\n                curY = destY || 0,\n                distX = 0,\n                distY = 0,\n                active = false,\n                ts = Utils.timestamp(),\n                cache = 0,\n                move = 0,\n\n                // positions the image\n                position = function(dist, cur, pos) {\n                    if (dist > 0) {\n                        move = M.round(M.max(dist * -1, M.min(0, cur)));\n                        if (cache !== move) {\n\n                            cache = move;\n\n                            if (IE === 8) { // scroll is faster for IE\n                                img.parent()['scroll' + pos](move * -1);\n                            } else {\n                                var css = {};\n                                css[pos.toLowerCase()] = move;\n                                img.css(css);\n                            }\n                        }\n                    }\n                },\n\n                // calculates mouse position after 50ms\n                calculate = function(e) {\n                    if (Utils.timestamp() - ts < 50) {\n                        return;\n                    }\n                    active = true;\n                    x = self.getMousePosition(e).x;\n                    y = self.getMousePosition(e).y;\n                },\n\n                // the main loop to check\n                loop = function(e) {\n\n                    if (!active) {\n                        return;\n                    }\n\n                    distX = img.width() - self._stageWidth;\n                    distY = img.height() - self._stageHeight;\n                    destX = x / self._stageWidth * distX * -1;\n                    destY = y / self._stageHeight * distY * -1;\n                    curX += (destX - curX) / self._options.imagePanSmoothness;\n                    curY += (destY - curY) / self._options.imagePanSmoothness;\n\n                    position(distY, curY, 'Top');\n                    position(distX, curX, 'Left');\n\n                };\n\n            // we need to use scroll in IE8 to speed things up\n            if (IE === 8) {\n\n                img.parent().scrollTop(curY * -1).scrollLeft(curX * -1);\n                img.css({\n                    top: 0,\n                    left: 0\n                });\n\n            }\n\n            // unbind and bind event\n            this.$('stage').off('mousemove', calculate).on('mousemove', calculate);\n\n            // loop the loop\n            this.addTimer('pan' + self._id, loop, 50, true);\n\n            return this;\n        },\n\n        /**\n            Brings the scope into any callback\n\n            @param fn The callback to bring the scope into\n            @param [scope] Optional scope to bring\n\n            @example $('#fullscreen').click( this.proxy(function() { this.enterFullscreen(); }) )\n\n            @returns {Function} Return the callback with the gallery scope\n        */\n\n        proxy: function(fn, scope) {\n            if (typeof fn !== 'function') {\n                return F;\n            }\n            scope = scope || this;\n            return function() {\n                return fn.apply(scope, Utils.array(arguments));\n            };\n        },\n\n        /**\n            Tells you the theme name of the gallery\n\n            @returns {String} theme name\n        */\n\n        getThemeName: function() {\n            return this.theme.name;\n        },\n\n        /**\n            Removes the panning effect set by addPan()\n\n            @returns Instance\n        */\n\n        removePan: function() {\n\n            // todo: doublecheck IE8\n\n            this.$('stage').off('mousemove');\n\n            this.clearTimer('pan' + this._id);\n\n            return this;\n        },\n\n        /**\n            Adds an element to the Galleria DOM array.\n            When you add an element here, you can access it using element ID in many API calls\n\n            @param {string} id The element ID you wish to use. You can add many elements by adding more arguments.\n\n            @example addElement('mybutton');\n            @example addElement('mybutton','mylink');\n\n            @returns Instance\n        */\n\n        addElement: function(id) {\n\n            var dom = this._dom;\n\n            $.each(Utils.array(arguments), function(i, blueprint) {\n                dom[blueprint] = Utils.create('galleria-' + blueprint);\n            });\n\n            return this;\n        },\n\n        /**\n        Attach keyboard events to Galleria\n\n        @param {Object} map The map object of events.\n        Possible keys are 'UP', 'DOWN', 'LEFT', 'RIGHT', 'RETURN', 'ESCAPE', 'BACKSPACE', and 'SPACE'.\n\n        @example\n\nthis.attachKeyboard({\n    right: this.next,\n    left: this.prev,\n    up: function() {\n        console.log( 'up key pressed' )\n    }\n});\n\n        @returns Instance\n    */\n\n        attachKeyboard: function(map) {\n            this._keyboard.attach.apply(this._keyboard, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Detach all keyboard events to Galleria\n\n            @returns Instance\n        */\n\n        detachKeyboard: function() {\n            this._keyboard.detach.apply(this._keyboard, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Fast helper for appending galleria elements that you added using addElement()\n\n            @param {string} parentID The parent element ID where the element will be appended\n            @param {string} childID the element ID that should be appended\n\n            @example this.addElement('myElement');\n            this.appendChild( 'info', 'myElement' );\n\n            @returns Instance\n        */\n\n        appendChild: function(parentID, childID) {\n            this.$(parentID).append(this.get(childID) || childID);\n            return this;\n        },\n\n        /**\n        Fast helper for prepending galleria elements that you added using addElement()\n\n        @param {string} parentID The parent element ID where the element will be prepended\n        @param {string} childID the element ID that should be prepended\n\n        @example\n\nthis.addElement('myElement');\nthis.prependChild( 'info', 'myElement' );\n\n        @returns Instance\n    */\n\n        prependChild: function(parentID, childID) {\n            this.$(parentID).prepend(this.get(childID) || childID);\n            return this;\n        },\n\n        /**\n            Remove an element by blueprint\n\n            @param {string} elemID The element to be removed.\n            You can remove multiple elements by adding arguments.\n\n            @returns Instance\n        */\n\n        remove: function(elemID) {\n            this.$(Utils.array(arguments).join(',')).remove();\n            return this;\n        },\n\n        // a fast helper for building dom structures\n        // leave this out of the API for now\n\n        append: function(data) {\n            var i, j;\n            for (i in data) {\n                if (data.hasOwnProperty(i)) {\n                    if (data[i].constructor === Array) {\n                        for (j = 0; data[i][j]; j++) {\n                            this.appendChild(i, data[i][j]);\n                        }\n                    } else {\n                        this.appendChild(i, data[i]);\n                    }\n                }\n            }\n            return this;\n        },\n\n        // an internal helper for scaling according to options\n        _scaleImage: function(image, options) {\n\n            image = image || this._controls.getActive();\n\n            // janpub (JH) fix:\n            // image might be unselected yet\n            // e.g. when external logics rescales the gallery on window resize events\n            if (!image) {\n                return;\n            }\n\n            var complete,\n\n                scaleLayer = function(img) {\n                    $(img.container).children(':first').css({\n                        top: M.max(0, Utils.parseValue(img.image.style.top)),\n                        left: M.max(0, Utils.parseValue(img.image.style.left)),\n                        width: Utils.parseValue(img.image.width),\n                        height: Utils.parseValue(img.image.height)\n                    });\n                };\n\n            options = $.extend({\n                width: this._stageWidth,\n                height: this._stageHeight,\n                crop: this._options.imageCrop,\n                max: this._options.maxScaleRatio,\n                min: this._options.minScaleRatio,\n                margin: this._options.imageMargin,\n                position: this._options.imagePosition,\n                iframelimit: this._options.maxVideoSize\n            }, options);\n\n            if (this._options.layerFollow && this._options.imageCrop !== true) {\n\n                if (typeof options.complete == 'function') {\n                    complete = options.complete;\n                    options.complete = function() {\n                        complete.call(image, image);\n                        scaleLayer(image);\n                    };\n                } else {\n                    options.complete = scaleLayer;\n                }\n\n            } else {\n                $(image.container).children(':first').css({ top: 0, left: 0 });\n            }\n\n            image.scale(options);\n            return this;\n        },\n\n        /**\n            Updates the carousel,\n            useful if you resize the gallery and want to re-check if the carousel nav is needed.\n\n            @returns Instance\n        */\n\n        updateCarousel: function() {\n            this._carousel.update();\n            return this;\n        },\n\n        /**\n            Resize the entire gallery container\n\n            @param {Object} [measures] Optional object with width/height specified\n            @param {Function} [complete] The callback to be called when the scaling is complete\n\n            @returns Instance\n        */\n\n        resize: function(measures, complete) {\n\n            if (typeof measures == 'function') {\n                complete = measures;\n                measures = undef;\n            }\n\n            measures = $.extend({ width: 0, height: 0 }, measures);\n\n            var self = this,\n                $container = this.$('container');\n\n            $.each(measures, function(m, val) {\n                if (!val) {\n                    $container[m]('auto');\n                    measures[m] = self._getWH()[m];\n                }\n            });\n\n            $.each(measures, function(m, val) {\n                $container[m](val);\n            });\n\n            return this.rescale(complete);\n\n        },\n\n        /**\n            Rescales the gallery\n\n            @param {number} width The target width\n            @param {number} height The target height\n            @param {Function} complete The callback to be called when the scaling is complete\n\n            @returns Instance\n        */\n\n        rescale: function(width, height, complete) {\n\n            var self = this;\n\n            // allow rescale(fn)\n            if (typeof width === 'function') {\n                complete = width;\n                width = undef;\n            }\n\n            var scale = function() {\n\n                // set stagewidth\n                self._stageWidth = width || self.$('stage').width();\n                self._stageHeight = height || self.$('stage').height();\n\n                if (self._options.swipe) {\n                    $.each(self._controls.slides, function(i, img) {\n                        self._scaleImage(img);\n                        $(img.container).css('left', self._stageWidth * i);\n                    });\n                    self.$('images').css('width', self._stageWidth * self.getDataLength());\n                } else {\n                    // scale the active image\n                    self._scaleImage();\n                }\n\n                if (self._options.carousel) {\n                    self.updateCarousel();\n                }\n\n                var frame = self._controls.frames[self._controls.active];\n\n                if (frame) {\n                    self._controls.frames[self._controls.active].scale({\n                        width: self._stageWidth,\n                        height: self._stageHeight,\n                        iframelimit: self._options.maxVideoSize\n                    });\n                }\n\n                self.trigger(Galleria.RESCALE);\n\n                if (typeof complete === 'function') {\n                    complete.call(self);\n                }\n            };\n\n            scale.call(self);\n\n            return this;\n        },\n\n        /**\n            Refreshes the gallery.\n            Useful if you change image options at runtime and want to apply the changes to the active image.\n\n            @returns Instance\n        */\n\n        refreshImage: function() {\n            this._scaleImage();\n            if (this._options.imagePan) {\n                this.addPan();\n            }\n            return this;\n        },\n\n        _preload: function() {\n            if (this._options.preload) {\n                var p, i,\n                    n = this.getNext(),\n                    ndata;\n                try {\n                    for (i = this._options.preload; i > 0; i--) {\n                        p = new Galleria.Picture();\n                        ndata = this.getData(n);\n                        p.preload(this.isFullscreen() && ndata.big ? ndata.big : ndata.image);\n                        n = this.getNext(n);\n                    }\n                } catch (e) {}\n            }\n        },\n\n        /**\n            Shows an image by index\n\n            @param {number|boolean} index The index to show\n            @param {Boolean} rewind A boolean that should be true if you want the transition to go back\n\n            @returns Instance\n        */\n\n        show: function(index, rewind, _history) {\n\n            var swipe = this._options.swipe;\n\n            // do nothing queue is long || index is false || queue is false and transition is in progress\n            if (!swipe &&\n                (this._queue.length > 3 || index === false || (!this._options.queue && this._queue.stalled))) {\n                return;\n            }\n\n            index = M.max(0, M.min(parseInt(index, 10), this.getDataLength() - 1));\n\n            rewind = typeof rewind !== 'undefined' ? !!rewind : index < this.getIndex();\n\n            _history = _history || false;\n\n            // do the history thing and return\n            if (!_history && Galleria.History) {\n                Galleria.History.set(index.toString());\n                return;\n            }\n\n            if (this.finger && index !== this._active) {\n                this.finger.to = -(index * this.finger.width);\n                this.finger.index = index;\n            }\n            this._active = index;\n\n            // we do things a bit simpler in swipe:\n            if (swipe) {\n\n                var data = this.getData(index),\n                    self = this;\n                if (!data) {\n                    return;\n                }\n\n                var src = this.isFullscreen() && data.big ? data.big : (data.image || data.iframe),\n                    image = this._controls.slides[index],\n                    cached = image.isCached(src),\n                    thumb = this._thumbnails[index];\n\n                var evObj = {\n                    cached: cached,\n                    index: index,\n                    rewind: rewind,\n                    imageTarget: image.image,\n                    thumbTarget: thumb.image,\n                    galleriaData: data\n                };\n\n                this.trigger($.extend(evObj, {\n                    type: Galleria.LOADSTART\n                }));\n\n                self.$('container').removeClass('videoplay');\n\n                var complete = function() {\n\n                    self._layers[index].innerHTML = self.getData().layer || '';\n\n                    self.trigger($.extend(evObj, {\n                        type: Galleria.LOADFINISH\n                    }));\n                    self._playCheck();\n                };\n\n                self._preload();\n\n                window.setTimeout(function() {\n\n                    // load if not ready\n                    if (!image.ready || $(image.image).attr('src') != src) {\n                        if (data.iframe && !data.image) {\n                            image.isIframe = true;\n                        }\n                        image.load(src, function(image) {\n                            evObj.imageTarget = image.image;\n                            self._scaleImage(image, complete).trigger($.extend(evObj, {\n                                type: Galleria.IMAGE\n                            }));\n                            complete();\n                        });\n                    } else {\n                        self.trigger($.extend(evObj, {\n                            type: Galleria.IMAGE\n                        }));\n                        complete();\n                    }\n                }, 100);\n\n            } else {\n                protoArray.push.call(this._queue, {\n                    index: index,\n                    rewind: rewind\n                });\n                if (!this._queue.stalled) {\n                    this._show();\n                }\n            }\n\n            return this;\n        },\n\n        // the internal _show method does the actual showing\n        _show: function() {\n\n            // shortcuts\n            var self = this,\n                queue = this._queue[0],\n                data = this.getData(queue.index);\n\n            if (!data) {\n                return;\n            }\n\n            var src = this.isFullscreen() && data.big ? data.big : (data.image || data.iframe),\n                active = this._controls.getActive(),\n                next = this._controls.getNext(),\n                cached = next.isCached(src),\n                thumb = this._thumbnails[queue.index],\n                mousetrigger = function() {\n                    $(next.image).trigger('mouseup');\n                };\n\n            self.$('container').toggleClass('iframe', !!data.isIframe).removeClass('videoplay');\n\n            // to be fired when loading & transition is complete:\n            var complete = (function(data, next, active, queue, thumb) {\n\n                return function() {\n\n                    var win;\n\n                    _transitions.active = false;\n\n                    // optimize quality\n                    Utils.toggleQuality(next.image, self._options.imageQuality);\n\n                    // remove old layer\n                    self._layers[self._controls.active].innerHTML = '';\n\n                    // swap\n                    $(active.container).css({\n                        zIndex: 0,\n                        opacity: 0\n                    }).show();\n\n                    $(active.container).find('iframe, .galleria-videoicon').remove();\n                    $(self._controls.frames[self._controls.active].container).hide();\n\n                    $(next.container).css({\n                        zIndex: 1,\n                        left: 0,\n                        top: 0\n                    }).show();\n\n                    self._controls.swap();\n\n                    // add pan according to option\n                    if (self._options.imagePan) {\n                        self.addPan(next.image);\n                    }\n\n                    // make the image clickable\n                    // order of precedence: iframe, link, lightbox, clicknext\n                    if ((data.iframe && data.image) || data.link || self._options.lightbox || self._options.clicknext) {\n\n                        $(next.image).css({\n                            cursor: 'pointer'\n                        }).on('mouseup', function(e) {\n\n                            // non-left click\n                            if (typeof e.which == 'number' && e.which > 1) {\n                                return;\n                            }\n\n                            // iframe / video\n                            if (data.iframe) {\n\n                                if (self.isPlaying()) {\n                                    self.pause();\n                                }\n                                var frame = self._controls.frames[self._controls.active],\n                                    w = self._stageWidth,\n                                    h = self._stageHeight;\n\n                                $(frame.container).css({\n                                    width: w,\n                                    height: h,\n                                    opacity: 0\n                                }).show().animate({\n                                    opacity: 1\n                                }, 200);\n\n                                window.setTimeout(function() {\n                                    frame.load(data.iframe + (data.video ? '&autoplay=1' : ''), {\n                                        width: w,\n                                        height: h\n                                    }, function(frame) {\n                                        self.$('container').addClass('videoplay');\n                                        frame.scale({\n                                            width: self._stageWidth,\n                                            height: self._stageHeight,\n                                            iframelimit: data.video ? self._options.maxVideoSize : undef\n                                        });\n                                    });\n                                }, 100);\n\n                                return;\n                            }\n\n                            // clicknext\n                            if (self._options.clicknext && !Galleria.TOUCH) {\n                                if (self._options.pauseOnInteraction) {\n                                    self.pause();\n                                }\n                                self.next();\n                                return;\n                            }\n\n                            // popup link\n                            if (data.link) {\n                                if (self._options.popupLinks) {\n                                    win = window.open(data.link, '_blank');\n                                } else {\n                                    window.location.href = data.link;\n                                }\n                                return;\n                            }\n\n                            if (self._options.lightbox) {\n                                self.openLightbox();\n                            }\n\n                        });\n                    }\n\n                    // check if we are playing\n                    self._playCheck();\n\n                    // trigger IMAGE event\n                    self.trigger({\n                        type: Galleria.IMAGE,\n                        index: queue.index,\n                        imageTarget: next.image,\n                        thumbTarget: thumb.image,\n                        galleriaData: data\n                    });\n\n                    // remove the queued image\n                    protoArray.shift.call(self._queue);\n\n                    // remove stalled\n                    self._queue.stalled = false;\n\n                    // if we still have images in the queue, show it\n                    if (self._queue.length) {\n                        self._show();\n                    }\n\n                };\n            }(data, next, active, queue, thumb));\n\n            // let the carousel follow\n            if (this._options.carousel && this._options.carouselFollow) {\n                this._carousel.follow(queue.index);\n            }\n\n            // preload images\n            self._preload();\n\n            // show the next image, just in case\n            Utils.show(next.container);\n\n            next.isIframe = data.iframe && !data.image;\n\n            // add active classes\n            $(self._thumbnails[queue.index].container)\n                .addClass('active')\n                .siblings('.active')\n                .removeClass('active');\n\n            // trigger the LOADSTART event\n            self.trigger({\n                type: Galleria.LOADSTART,\n                cached: cached,\n                index: queue.index,\n                rewind: queue.rewind,\n                imageTarget: next.image,\n                thumbTarget: thumb.image,\n                galleriaData: data\n            });\n\n            // stall the queue\n            self._queue.stalled = true;\n\n            // begin loading the next image\n            next.load(src, function(next) {\n\n                // add layer HTML\n                var layer = $(self._layers[1 - self._controls.active]).html(data.layer || '').hide();\n\n                self._scaleImage(next, {\n\n                    complete: function(next) {\n\n                        // toggle low quality for IE\n                        if ('image' in active) {\n                            Utils.toggleQuality(active.image, false);\n                        }\n                        Utils.toggleQuality(next.image, false);\n\n                        // remove the image panning, if applied\n                        // TODO: rethink if this is necessary\n                        self.removePan();\n\n                        // set the captions and counter\n                        self.setInfo(queue.index);\n                        self.setCounter(queue.index);\n\n                        // show the layer now\n                        if (data.layer) {\n                            layer.show();\n                            // inherit click events set on image\n                            if ((data.iframe && data.image) || data.link || self._options.lightbox || self._options.clicknext) {\n                                layer.css('cursor', 'pointer').off('mouseup').mouseup(mousetrigger);\n                            }\n                        }\n\n                        // add play icon\n                        if (data.video && data.image) {\n                            _playIcon(next.container);\n                        }\n\n                        var transition = self._options.transition;\n\n                        // can JavaScript loop through objects in order? yes.\n                        $.each({\n                            initial: active.image === null,\n                            touch: Galleria.TOUCH,\n                            fullscreen: self.isFullscreen()\n                        }, function(type, arg) {\n                            if (arg && self._options[type + 'Transition'] !== undef) {\n                                transition = self._options[type + 'Transition'];\n                                return false;\n                            }\n                        });\n\n                        // validate the transition\n                        if (transition in _transitions.effects === false) {\n                            complete();\n                        } else {\n                            var params = {\n                                prev: active.container,\n                                next: next.container,\n                                rewind: queue.rewind,\n                                speed: self._options.transitionSpeed || 400\n                            };\n\n                            _transitions.active = true;\n\n                            // call the transition function and send some stuff\n                            _transitions.init.call(self, transition, params, complete);\n\n                        }\n\n                        // trigger the LOADFINISH event\n                        self.trigger({\n                            type: Galleria.LOADFINISH,\n                            cached: cached,\n                            index: queue.index,\n                            rewind: queue.rewind,\n                            imageTarget: next.image,\n                            thumbTarget: self._thumbnails[queue.index].image,\n                            galleriaData: self.getData(queue.index)\n                        });\n                    }\n                });\n            });\n        },\n\n        /**\n            Gets the next index\n\n            @param {number} [base] Optional starting point\n\n            @returns {number} the next index, or the first if you are at the first (looping)\n        */\n\n        getNext: function(base) {\n            base = typeof base === 'number' ? base : this.getIndex();\n            return base === this.getDataLength() - 1 ? 0 : base + 1;\n        },\n\n        /**\n            Gets the previous index\n\n            @param {number} [base] Optional starting point\n\n            @returns {number} the previous index, or the last if you are at the first (looping)\n        */\n\n        getPrev: function(base) {\n            base = typeof base === 'number' ? base : this.getIndex();\n            return base === 0 ? this.getDataLength() - 1 : base - 1;\n        },\n\n        /**\n            Shows the next image in line\n\n            @returns Instance\n        */\n\n        next: function() {\n            if (this.getDataLength() > 1) {\n                this.show(this.getNext(), false);\n            }\n            return this;\n        },\n\n        /**\n            Shows the previous image in line\n\n            @returns Instance\n        */\n\n        prev: function() {\n            if (this.getDataLength() > 1) {\n                this.show(this.getPrev(), true);\n            }\n            return this;\n        },\n\n        /**\n            Retrieve a DOM element by element ID\n\n            @param {string} elemId The delement ID to fetch\n\n            @returns {HTMLElement} The elements DOM node or null if not found.\n        */\n\n        get: function(elemId) {\n            return elemId in this._dom ? this._dom[elemId] : null;\n        },\n\n        /**\n            Retrieve a data object\n\n            @param {number} index The data index to retrieve.\n            If no index specified it will take the currently active image\n\n            @returns {Object} The data object\n        */\n\n        getData: function(index) {\n            return index in this._data ?\n                this._data[index] : this._data[this._active];\n        },\n\n        /**\n            Retrieve the number of data items\n\n            @returns {number} The data length\n        */\n        getDataLength: function() {\n            return this._data.length;\n        },\n\n        /**\n            Retrieve the currently active index\n\n            @returns {number|boolean} The active index or false if none found\n        */\n\n        getIndex: function() {\n            return typeof this._active === 'number' ? this._active : false;\n        },\n\n        /**\n            Retrieve the stage height\n\n            @returns {number} The stage height\n        */\n\n        getStageHeight: function() {\n            return this._stageHeight;\n        },\n\n        /**\n            Retrieve the stage width\n\n            @returns {number} The stage width\n        */\n\n        getStageWidth: function() {\n            return this._stageWidth;\n        },\n\n        /**\n            Retrieve the option\n\n            @param {string} key The option key to retrieve. If no key specified it will return all options in an object.\n\n            @returns option or options\n        */\n\n        getOptions: function(key) {\n            return typeof key === 'undefined' ? this._options : this._options[key];\n        },\n\n        /**\n            Set options to the instance.\n            You can set options using a key & value argument or a single object argument (see examples)\n\n            @param {string} key The option key\n            @param {string} value the the options value\n\n            @example setOptions( 'autoplay', true )\n            @example setOptions({ autoplay: true });\n\n            @returns Instance\n        */\n\n        setOptions: function(key, value) {\n            if (typeof key === 'object') {\n                $.extend(this._options, key);\n            } else {\n                this._options[key] = value;\n            }\n            return this;\n        },\n\n        /**\n            Starts playing the slideshow\n\n            @param {number} delay Sets the slideshow interval in milliseconds.\n            If you set it once, you can just call play() and get the same interval the next time.\n\n            @returns Instance\n        */\n\n        play: function(delay) {\n\n            this._playing = true;\n\n            this._playtime = delay || this._playtime;\n\n            this._playCheck();\n\n            this.trigger(Galleria.PLAY);\n\n            return this;\n        },\n\n        /**\n            Stops the slideshow if currently playing\n\n            @returns Instance\n        */\n\n        pause: function() {\n\n            this._playing = false;\n\n            this.trigger(Galleria.PAUSE);\n\n            return this;\n        },\n\n        /**\n            Toggle between play and pause events.\n\n            @param {number} delay Sets the slideshow interval in milliseconds.\n\n            @returns Instance\n        */\n\n        playToggle: function(delay) {\n            return (this._playing) ? this.pause() : this.play(delay);\n        },\n\n        /**\n            Checks if the gallery is currently playing\n\n            @returns {Boolean}\n        */\n\n        isPlaying: function() {\n            return this._playing;\n        },\n\n        /**\n            Checks if the gallery is currently in fullscreen mode\n\n            @returns {Boolean}\n        */\n\n        isFullscreen: function() {\n            return this._fullscreen.active;\n        },\n\n        _playCheck: function() {\n            var self = this,\n                played = 0,\n                interval = 20,\n                now = Utils.timestamp(),\n                timer_id = 'play' + this._id;\n\n            if (this._playing) {\n\n                this.clearTimer(timer_id);\n\n                var fn = function() {\n\n                    played = Utils.timestamp() - now;\n                    if (played >= self._playtime && self._playing) {\n                        self.clearTimer(timer_id);\n                        self.next();\n                        return;\n                    }\n                    if (self._playing) {\n\n                        // trigger the PROGRESS event\n                        self.trigger({\n                            type: Galleria.PROGRESS,\n                            percent: M.ceil(played / self._playtime * 100),\n                            seconds: M.floor(played / 1000),\n                            milliseconds: played\n                        });\n\n                        self.addTimer(timer_id, fn, interval);\n                    }\n                };\n                self.addTimer(timer_id, fn, interval);\n            }\n        },\n\n        /**\n            Modify the slideshow delay\n\n            @param {number} delay the number of milliseconds between slides,\n\n            @returns Instance\n        */\n\n        setPlaytime: function(delay) {\n            this._playtime = delay;\n            return this;\n        },\n\n        setIndex: function(val) {\n            this._active = val;\n            return this;\n        },\n\n        /**\n            Manually modify the counter\n\n            @param {number} [index] Optional data index to fectch,\n            if no index found it assumes the currently active index\n\n            @returns Instance\n        */\n\n        setCounter: function(index) {\n\n            if (typeof index === 'number') {\n                index++;\n            } else if (typeof index === 'undefined') {\n                index = this.getIndex() + 1;\n            }\n\n            this.get('current').innerHTML = index;\n\n            if (IE) { // weird IE bug\n\n                var count = this.$('counter'),\n                    opacity = count.css('opacity');\n\n                if (parseInt(opacity, 10) === 1) {\n                    Utils.removeAlpha(count[0]);\n                } else {\n                    this.$('counter').css('opacity', opacity);\n                }\n\n            }\n\n            return this;\n        },\n\n        /**\n            Manually set captions\n\n            @param {number} [index] Optional data index to fectch and apply as caption,\n            if no index found it assumes the currently active index\n\n            @returns Instance\n        */\n\n        setInfo: function(index) {\n\n            var self = this,\n                data = this.getData(index);\n\n            $.each(['title', 'description'], function(i, type) {\n\n                var elem = self.$('info-' + type);\n\n                if (!!data[type]) {\n                    elem[data[type].length ? 'show' : 'hide']().html(data[type]);\n                } else {\n                    elem.empty().hide();\n                }\n            });\n\n            return this;\n        },\n\n        /**\n            Checks if the data contains any captions\n\n            @param {number} [index] Optional data index to fectch,\n            if no index found it assumes the currently active index.\n\n            @returns {boolean}\n        */\n\n        hasInfo: function(index) {\n\n            var check = 'title description'.split(' '),\n                i;\n\n            for (i = 0; check[i]; i++) {\n                if (!!this.getData(index)[check[i]]) {\n                    return true;\n                }\n            }\n            return false;\n\n        },\n\n        jQuery: function(str) {\n\n            var self = this,\n                ret = [];\n\n            $.each(str.split(','), function(i, elemId) {\n                elemId = $.trim(elemId);\n\n                if (self.get(elemId)) {\n                    ret.push(elemId);\n                }\n            });\n\n            var jQ = $(self.get(ret.shift()));\n\n            $.each(ret, function(i, elemId) {\n                jQ = jQ.add(self.get(elemId));\n            });\n\n            return jQ;\n\n        },\n\n        /**\n            Converts element IDs into a jQuery collection\n            You can call for multiple IDs separated with commas.\n\n            @param {string} str One or more element IDs (comma-separated)\n\n            @returns jQuery\n\n            @example this.$('info,container').hide();\n        */\n\n        $: function(str) {\n            return this.jQuery.apply(this, Utils.array(arguments));\n        }\n\n    };\n\n    // End of Galleria prototype\n\n    // Add events as static variables\n    $.each(_events, function(i, ev) {\n\n        // legacy events\n        var type = /_/.test(ev) ? ev.replace(/_/g, '') : ev;\n\n        Galleria[ev.toUpperCase()] = 'galleria.' + type;\n\n    });\n\n    $.extend(Galleria, {\n\n        // Browser helpers\n        IE9: IE === 9,\n        IE8: IE === 8,\n        IE7: IE === 7,\n        IE6: IE === 6,\n        IE: IE,\n        WEBKIT: /webkit/.test(NAV),\n        CHROME: /chrome/.test(NAV),\n        SAFARI: /safari/.test(NAV) && !(/chrome/.test(NAV)),\n        QUIRK: (IE && doc.compatMode && doc.compatMode === \"BackCompat\"),\n        MAC: /mac/.test(navigator.platform.toLowerCase()),\n        OPERA: !!window.opera,\n        IPHONE: /iphone/.test(NAV),\n        IPAD: /ipad/.test(NAV),\n        ANDROID: /android/.test(NAV),\n        TOUCH: ('ontouchstart' in doc)\n\n    });\n\n    // Galleria static methods\n\n    /**\n        Adds a theme that you can use for your Gallery\n\n        @param {Object} theme Object that should contain all your theme settings.\n        <ul>\n            <li>name - name of the theme</li>\n            <li>author - name of the author</li>\n            <li>css - css file name (not path)</li>\n            <li>defaults - default options to apply, including theme-specific options</li>\n            <li>init - the init function</li>\n        </ul>\n\n        @returns {Object} theme\n    */\n\n    Galleria.addTheme = function(theme) {\n\n        // make sure we have a name\n        if (!theme.name) {\n            Galleria.raise('No theme name specified');\n        }\n\n        if (typeof theme.defaults !== 'object') {\n            theme.defaults = {};\n        } else {\n            theme.defaults = _legacyOptions(theme.defaults);\n        }\n\n        var css = false,\n            reg;\n\n        if (typeof theme.css === 'string') {\n\n            // look for manually added CSS\n            $('link').each(function(i, link) {\n                reg = new RegExp(theme.css);\n                if (reg.test(link.href)) {\n\n                    // we found the css\n                    css = true;\n\n                    // the themeload trigger\n                    _themeLoad(theme);\n\n                    return false;\n                }\n            });\n\n            // else look for the absolute path and load the CSS dynamic\n            if (!css) {\n\n\n                $(function() {\n                    // Try to determine the css-path from the theme script.\n                    // In IE8/9, the script-dom-element seems to be not present\n                    // at once, if galleria itself is inserted into the dom\n                    // dynamically. We therefore try multiple times before raising\n                    // an error.\n                    var retryCount = 0;\n                    var tryLoadCss = function() {\n                        $('script').each(function(i, script) {\n                            // look for the theme script\n                            reg = new RegExp('galleria\\\\.' + theme.name.toLowerCase() + '\\\\.');\n                            if (reg.test(script.src)) {\n\n                                // we have a match\n                                css = script.src.replace(/[^\\/]*$/, '') + theme.css;\n\n                                window.setTimeout(function() {\n                                    Utils.loadCSS(css, 'galleria-theme-' + theme.name, function() {\n\n                                        // run galleries with this theme\n                                        _themeLoad(theme);\n\n                                    });\n                                }, 1);\n                            }\n                        });\n                        if (!css) {\n                            if (retryCount++ > 5) {\n                                Galleria.raise('No theme CSS loaded');\n                            } else {\n                                window.setTimeout(tryLoadCss, 500);\n                            }\n                        }\n                    };\n                    tryLoadCss();\n                });\n            }\n\n        } else {\n\n            // pass\n            _themeLoad(theme);\n        }\n        return theme;\n    };\n\n    /**\n        loadTheme loads a theme js file and attaches a load event to Galleria\n\n        @param {string} src The relative path to the theme source file\n\n        @param {Object} [options] Optional options you want to apply\n\n        @returns Galleria\n    */\n\n    Galleria.loadTheme = function(src, options) {\n\n        // Don't load if theme is already loaded\n        if ($('script').filter(function() {\n                return $(this).attr('src') == src; }).length) {\n            return;\n        }\n\n        var loaded = false,\n            err;\n\n        // start listening for the timeout onload\n        $(window).load(function() {\n            if (!loaded) {\n                // give it another 20 seconds\n                err = window.setTimeout(function() {\n                    if (!loaded) {\n                        Galleria.raise(\"Galleria had problems loading theme at \" + src + \". Please check theme path or load manually.\", true);\n                    }\n                }, 20000);\n            }\n        });\n\n        // load the theme\n        Utils.loadScript(src, function() {\n            loaded = true;\n            window.clearTimeout(err);\n        });\n\n        return Galleria;\n    };\n\n    /**\n        Retrieves a Galleria instance.\n\n        @param {number} [index] Optional index to retrieve.\n        If no index is supplied, the method will return all instances in an array.\n\n        @returns Instance or Array of instances\n    */\n\n    Galleria.get = function(index) {\n        if (!!_instances[index]) {\n            return _instances[index];\n        } else if (typeof index !== 'number') {\n            return _instances;\n        } else {\n            Galleria.raise('Gallery index ' + index + ' not found');\n        }\n    };\n\n    /**\n\n        Configure Galleria options via a static function.\n        The options will be applied to all instances\n\n        @param {string|object} key The options to apply or a key\n\n        @param [value] If key is a string, this is the value\n\n        @returns Galleria\n\n    */\n\n    Galleria.configure = function(key, value) {\n\n        var opts = {};\n\n        if (typeof key == 'string' && value) {\n            opts[key] = value;\n            key = opts;\n        } else {\n            $.extend(opts, key);\n        }\n\n        Galleria.configure.options = opts;\n\n        $.each(Galleria.get(), function(i, instance) {\n            instance.setOptions(opts);\n        });\n\n        return Galleria;\n    };\n\n    Galleria.configure.options = {};\n\n    /**\n\n        Bind a Galleria event to the gallery\n\n        @param {string} type A string representing the galleria event\n\n        @param {function} callback The function that should run when the event is triggered\n\n        @returns Galleria\n\n    */\n\n    Galleria.on = function(type, callback) {\n        if (!type) {\n            return;\n        }\n\n        callback = callback || F;\n\n        // hash the bind\n        var hash = type + callback.toString().replace(/\\s/g, '') + Utils.timestamp();\n\n        // for existing instances\n        $.each(Galleria.get(), function(i, instance) {\n            instance._binds.push(hash);\n            instance.bind(type, callback);\n        });\n\n        // for future instances\n        Galleria.on.binds.push({\n            type: type,\n            callback: callback,\n            hash: hash\n        });\n\n        return Galleria;\n    };\n\n    Galleria.on.binds = [];\n\n    /**\n\n        Run Galleria\n        Alias for $(selector).galleria(options)\n\n        @param {string} selector A selector of element(s) to intialize galleria to\n\n        @param {object} options The options to apply\n\n        @returns Galleria\n\n    */\n\n    Galleria.run = function(selector, options) {\n        if ($.isFunction(options)) {\n            options = { extend: options };\n        }\n        $(selector || '#galleria').galleria(options);\n        return Galleria;\n    };\n\n    /**\n        Creates a transition to be used in your gallery\n\n        @param {string} name The name of the transition that you will use as an option\n\n        @param {Function} fn The function to be executed in the transition.\n        The function contains two arguments, params and complete.\n        Use the params Object to integrate the transition, and then call complete when you are done.\n\n        @returns Galleria\n\n    */\n\n    Galleria.addTransition = function(name, fn) {\n        _transitions.effects[name] = fn;\n        return Galleria;\n    };\n\n    /**\n        The Galleria utilites\n    */\n\n    Galleria.utils = Utils;\n\n    /**\n        A helper metod for cross-browser logging.\n        It uses the console log if available otherwise it falls back to alert\n\n        @example Galleria.log(\"hello\", document.body, [1,2,3]);\n    */\n\n    Galleria.log = function() {\n        var args = Utils.array(arguments);\n        if ('console' in window && 'log' in window.console) {\n            try {\n                return window.console.log.apply(window.console, args);\n            } catch (e) {\n                $.each(args, function() {\n                    window.console.log(this);\n                });\n            }\n        } else {\n            return window.alert(args.join('<br>'));\n        }\n    };\n\n    /**\n        A ready method for adding callbacks when a gallery is ready\n        Each method is call before the extend option for every instance\n\n        @param {function} callback The function to call\n\n        @returns Galleria\n    */\n\n    Galleria.ready = function(fn) {\n        if (typeof fn != 'function') {\n            return Galleria;\n        }\n        $.each(_galleries, function(i, gallery) {\n            fn.call(gallery, gallery._options);\n        });\n        Galleria.ready.callbacks.push(fn);\n        return Galleria;\n    };\n\n    Galleria.ready.callbacks = [];\n\n    /**\n        Method for raising errors\n\n        @param {string} msg The message to throw\n\n        @param {boolean} [fatal] Set this to true to override debug settings and display a fatal error\n    */\n\n    Galleria.raise = function(msg, fatal) {\n\n        var type = fatal ? 'Fatal error' : 'Error',\n\n            css = {\n                color: '#fff',\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                zIndex: 100000\n            },\n\n            echo = function(msg) {\n\n                var html = '<div style=\"padding:4px;margin:0 0 2px;background:#' +\n                    (fatal ? '811' : '222') + ';\">' +\n                    (fatal ? '<strong>' + type + ': </strong>' : '') +\n                    msg + '</div>';\n\n                $.each(_instances, function() {\n\n                    var cont = this.$('errors'),\n                        target = this.$('target');\n\n                    if (!cont.length) {\n\n                        target.css('position', 'relative');\n\n                        cont = this.addElement('errors').appendChild('target', 'errors').$('errors').css(css);\n                    }\n                    cont.append(html);\n\n                });\n\n                if (!_instances.length) {\n                    $('<div>').css($.extend(css, { position: 'fixed' })).append(html).appendTo(DOM().body);\n                }\n            };\n\n        // if debug is on, display errors and throw exception if fatal\n        if (DEBUG) {\n            echo(msg);\n            if (fatal) {\n                throw new Error(type + ': ' + msg);\n            }\n\n            // else just echo a silent generic error if fatal\n        } else if (fatal) {\n            if (_hasError) {\n                return;\n            }\n            _hasError = true;\n            fatal = false;\n            echo('Gallery could not load.');\n        }\n    };\n\n    // Add the version\n    Galleria.version = VERSION;\n\n    Galleria.getLoadedThemes = function() {\n        return $.map(_loadedThemes, function(theme) {\n            return theme.name;\n        });\n    };\n\n    /**\n        A method for checking what version of Galleria the user has installed and throws a readable error if the user needs to upgrade.\n        Useful when building plugins that requires a certain version to function.\n\n        @param {number} version The minimum version required\n\n        @param {string} [msg] Optional message to display. If not specified, Galleria will throw a generic error.\n\n        @returns Galleria\n    */\n\n    Galleria.requires = function(version, msg) {\n        msg = msg || 'You need to upgrade Galleria to version ' + version + ' to use one or more components.';\n        if (Galleria.version < version) {\n            Galleria.raise(msg, true);\n        }\n        return Galleria;\n    };\n\n    /**\n        Adds preload, cache, scale and crop functionality\n\n        @constructor\n\n        @requires jQuery\n\n        @param {number} [id] Optional id to keep track of instances\n    */\n\n    Galleria.Picture = function(id) {\n\n        // save the id\n        this.id = id || null;\n\n        // the image should be null until loaded\n        this.image = null;\n\n        // Create a new container\n        this.container = Utils.create('galleria-image');\n\n        // add container styles\n        $(this.container).css({\n            overflow: 'hidden',\n            position: 'relative' // for IE Standards mode\n        });\n\n        // saves the original measurements\n        this.original = {\n            width: 0,\n            height: 0\n        };\n\n        // flag when the image is ready\n        this.ready = false;\n\n        // flag for iframe Picture\n        this.isIframe = false;\n\n    };\n\n    Galleria.Picture.prototype = {\n\n        // the inherited cache object\n        cache: {},\n\n        // show the image on stage\n        show: function() {\n            Utils.show(this.image);\n        },\n\n        // hide the image\n        hide: function() {\n            Utils.moveOut(this.image);\n        },\n\n        clear: function() {\n            this.image = null;\n        },\n\n        /**\n            Checks if an image is in cache\n\n            @param {string} src The image source path, ex '/path/to/img.jpg'\n\n            @returns {boolean}\n        */\n\n        isCached: function(src) {\n            return !!this.cache[src];\n        },\n\n        /**\n            Preloads an image into the cache\n\n            @param {string} src The image source path, ex '/path/to/img.jpg'\n\n            @returns Galleria.Picture\n        */\n\n        preload: function(src) {\n            $(new Image()).load((function(src, cache) {\n                return function() {\n                    cache[src] = src;\n                };\n            }(src, this.cache))).attr('src', src);\n        },\n\n        /**\n            Loads an image and call the callback when ready.\n            Will also add the image to cache.\n\n            @param {string} src The image source path, ex '/path/to/img.jpg'\n            @param {Object} [size] The forced size of the image, defined as an object { width: xx, height:xx }\n            @param {Function} callback The function to be executed when the image is loaded & scaled\n\n            @returns The image container (jQuery object)\n        */\n\n        load: function(src, size, callback) {\n\n            if (typeof size == 'function') {\n                callback = size;\n                size = null;\n            }\n\n            if (this.isIframe) {\n                var id = 'if' + new Date().getTime();\n\n                var iframe = this.image = $('<iframe>', {\n                    src: src,\n                    frameborder: 0,\n                    id: id,\n                    allowfullscreen: true,\n                    css: { visibility: 'hidden' }\n                })[0];\n\n                if (size) {\n                    $(iframe).css(size);\n                }\n\n                $(this.container).find('iframe,img').remove();\n\n                this.container.appendChild(this.image);\n\n                $('#' + id).load((function(self, callback) {\n                    return function() {\n                        window.setTimeout(function() {\n                            $(self.image).css('visibility', 'visible');\n                            if (typeof callback == 'function') {\n                                callback.call(self, self);\n                            }\n                        }, 10);\n                    };\n                }(this, callback)));\n\n                return this.container;\n            }\n\n            this.image = new Image();\n\n            // IE8 opacity inherit bug\n            if (Galleria.IE8) {\n                $(this.image).css('filter', 'inherit');\n            }\n\n            // FF shaking images bug:\n            // http://support.galleria.io/discussions/problems/12245-shaking-photos\n            if (!Galleria.IE && !Galleria.CHROME && !Galleria.SAFARI) {\n                $(this.image).css('image-rendering', 'optimizequality');\n            }\n\n            var reload = false,\n                resort = false,\n\n                // some jquery cache\n                $container = $(this.container),\n                $image = $(this.image),\n\n                onerror = function() {\n                    if (!reload) {\n                        reload = true;\n                        // reload the image with a timestamp\n                        window.setTimeout((function(image, src) {\n                            return function() {\n                                image.attr('src', src + (src.indexOf('?') > -1 ? '&' : '?') + Utils.timestamp());\n                            };\n                        }($(this), src)), 50);\n                    } else {\n                        // apply the dummy image if it exists\n                        if (DUMMY) {\n                            $(this).attr('src', DUMMY);\n                        } else {\n                            Galleria.raise('Image not found: ' + src);\n                        }\n                    }\n                },\n\n                // the onload method\n                onload = (function(self, callback, src) {\n\n                    return function() {\n\n                        var complete = function() {\n\n                            $(this).off('load');\n\n                            // save the original size\n                            self.original = size || {\n                                height: this.height,\n                                width: this.width\n                            };\n\n                            // translate3d if needed\n                            if (Galleria.HAS3D) {\n                                this.style.MozTransform = this.style.webkitTransform = 'translate3d(0,0,0)';\n                            }\n\n                            $container.append(this);\n\n                            self.cache[src] = src; // will override old cache\n\n                            if (typeof callback == 'function') {\n                                window.setTimeout(function() {\n                                    callback.call(self, self);\n                                }, 1);\n                            }\n                        };\n\n                        // Delay the callback to \"fix\" the Adblock Bug\n                        // http://code.google.com/p/adblockforchrome/issues/detail?id=3701\n                        if ((!this.width || !this.height)) {\n                            (function(img) {\n                                Utils.wait({\n                                    until: function() {\n                                        return img.width && img.height;\n                                    },\n                                    success: function() {\n                                        complete.call(img);\n                                    },\n                                    error: function() {\n                                        if (!resort) {\n                                            $(new Image()).load(onload).attr('src', img.src);\n                                            resort = true;\n                                        } else {\n                                            Galleria.raise('Could not extract width/height from image: ' + img.src +\n                                                '. Traced measures: width:' + img.width + 'px, height: ' + img.height + 'px.');\n                                        }\n                                    },\n                                    timeout: 100\n                                });\n                            }(this));\n                        } else {\n                            complete.call(this);\n                        }\n                    };\n                }(this, callback, src));\n\n            // remove any previous images\n            $container.find('iframe,img').remove();\n\n            // append the image\n            $image.css('display', 'block');\n\n            // hide it for now\n            Utils.hide(this.image);\n\n            // remove any max/min scaling\n            $.each('minWidth minHeight maxWidth maxHeight'.split(' '), function(i, prop) {\n                $image.css(prop, (/min/.test(prop) ? '0' : 'none'));\n            });\n\n            // begin load and insert in cache when done\n            $image.load(onload).on('error', onerror).attr('src', src);\n\n            // return the container\n            return this.container;\n        },\n\n        /**\n            Scales and crops the image\n\n            @param {Object} options The method takes an object with a number of options:\n\n            <ul>\n                <li>width - width of the container</li>\n                <li>height - height of the container</li>\n                <li>min - minimum scale ratio</li>\n                <li>max - maximum scale ratio</li>\n                <li>margin - distance in pixels from the image border to the container</li>\n                <li>complete - a callback that fires when scaling is complete</li>\n                <li>position - positions the image, works like the css background-image property.</li>\n                <li>crop - defines how to crop. Can be true, false, 'width' or 'height'</li>\n                <li>canvas - set to true to try a canvas-based rescale</li>\n            </ul>\n\n            @returns The image container object (jQuery)\n        */\n\n        scale: function(options) {\n\n            var self = this;\n\n            // extend some defaults\n            options = $.extend({\n                width: 0,\n                height: 0,\n                min: undef,\n                max: undef,\n                margin: 0,\n                complete: F,\n                position: 'center',\n                crop: false,\n                canvas: false,\n                iframelimit: undef\n            }, options);\n\n            if (this.isIframe) {\n\n                var cw = options.width,\n                    ch = options.height,\n                    nw, nh;\n                if (options.iframelimit) {\n                    var r = M.min(options.iframelimit / cw, options.iframelimit / ch);\n                    if (r < 1) {\n                        nw = cw * r;\n                        nh = ch * r;\n\n                        $(this.image).css({\n                            top: ch / 2 - nh / 2,\n                            left: cw / 2 - nw / 2,\n                            position: 'absolute'\n                        });\n                    } else {\n                        $(this.image).css({\n                            top: 0,\n                            left: 0\n                        });\n                    }\n                }\n                $(this.image).width(nw || cw).height(nh || ch).removeAttr('width').removeAttr('height');\n                $(this.container).width(cw).height(ch);\n                options.complete.call(self, self);\n                try {\n                    if (this.image.contentWindow) {\n                        $(this.image.contentWindow).trigger('resize');\n                    }\n                } catch (e) {}\n                return this.container;\n\n            }\n\n            // return the element if no image found\n            if (!this.image) {\n                return this.container;\n            }\n\n            // store locale variables\n            var width,\n                height,\n                $container = $(self.container),\n                data;\n\n            // wait for the width/height\n            Utils.wait({\n                until: function() {\n                    width = options.width ||\n                        $container.width() ||\n                        Utils.parseValue($container.css('width'));\n\n                    height = options.height ||\n                        $container.height() ||\n                        Utils.parseValue($container.css('height'));\n\n                    return width && height;\n                },\n                success: function() {\n\n                    // calculate some cropping\n                    var newWidth = (width - options.margin * 2) / self.original.width,\n                        newHeight = (height - options.margin * 2) / self.original.height,\n                        min = M.min(newWidth, newHeight),\n                        max = M.max(newWidth, newHeight),\n                        cropMap = {\n                            'true': max,\n                            'width': newWidth,\n                            'height': newHeight,\n                            'false': min,\n                            'landscape': self.original.width > self.original.height ? max : min,\n                            'portrait': self.original.width < self.original.height ? max : min\n                        },\n                        ratio = cropMap[options.crop.toString()],\n                        canvasKey = '';\n\n                    // allow maxScaleRatio\n                    if (options.max) {\n                        ratio = M.min(options.max, ratio);\n                    }\n\n                    // allow minScaleRatio\n                    if (options.min) {\n                        ratio = M.max(options.min, ratio);\n                    }\n\n                    $.each(['width', 'height'], function(i, m) {\n                        $(self.image)[m](self[m] = self.image[m] = M.round(self.original[m] * ratio));\n                    });\n\n                    $(self.container).width(width).height(height);\n\n                    if (options.canvas && _canvas) {\n\n                        _canvas.elem.width = self.width;\n                        _canvas.elem.height = self.height;\n\n                        canvasKey = self.image.src + ':' + self.width + 'x' + self.height;\n\n                        self.image.src = _canvas.cache[canvasKey] || (function(key) {\n\n                            _canvas.context.drawImage(self.image, 0, 0, self.original.width * ratio, self.original.height * ratio);\n\n                            try {\n\n                                data = _canvas.elem.toDataURL();\n                                _canvas.length += data.length;\n                                _canvas.cache[key] = data;\n                                return data;\n\n                            } catch (e) {\n                                return self.image.src;\n                            }\n\n                        }(canvasKey));\n\n                    }\n\n                    // calculate image_position\n                    var pos = {},\n                        mix = {},\n                        getPosition = function(value, measure, margin) {\n                            var result = 0;\n                            if (/\\%/.test(value)) {\n                                var flt = parseInt(value, 10) / 100,\n                                    m = self.image[measure] || $(self.image)[measure]();\n\n                                result = M.ceil(m * -1 * flt + margin * flt);\n                            } else {\n                                result = Utils.parseValue(value);\n                            }\n                            return result;\n                        },\n                        positionMap = {\n                            'top': { top: 0 },\n                            'left': { left: 0 },\n                            'right': { left: '100%' },\n                            'bottom': { top: '100%' }\n                        };\n\n                    $.each(options.position.toLowerCase().split(' '), function(i, value) {\n                        if (value === 'center') {\n                            value = '50%';\n                        }\n                        pos[i ? 'top' : 'left'] = value;\n                    });\n\n                    $.each(pos, function(i, value) {\n                        if (positionMap.hasOwnProperty(value)) {\n                            $.extend(mix, positionMap[value]);\n                        }\n                    });\n\n                    pos = pos.top ? $.extend(pos, mix) : mix;\n\n                    pos = $.extend({\n                        top: '50%',\n                        left: '50%'\n                    }, pos);\n\n                    // apply position\n                    $(self.image).css({\n                        position: 'absolute',\n                        top: getPosition(pos.top, 'height', height),\n                        left: getPosition(pos.left, 'width', width)\n                    });\n\n                    // show the image\n                    self.show();\n\n                    // flag ready and call the callback\n                    self.ready = true;\n                    options.complete.call(self, self);\n\n                },\n                error: function() {\n                    Galleria.raise('Could not scale image: ' + self.image.src);\n                },\n                timeout: 1000\n            });\n            return this;\n        }\n    };\n\n    // our own easings\n    $.extend($.easing, {\n\n        galleria: function(_, t, b, c, d) {\n            if ((t /= d / 2) < 1) {\n                return c / 2 * t * t * t + b;\n            }\n            return c / 2 * ((t -= 2) * t * t + 2) + b;\n        },\n\n        galleriaIn: function(_, t, b, c, d) {\n            return c * (t /= d) * t + b;\n        },\n\n        galleriaOut: function(_, t, b, c, d) {\n            return -c * (t /= d) * (t - 2) + b;\n        }\n\n    });\n\n\n    // Forked version of Ainos Finger.js for native-style touch\n\n    Galleria.Finger = (function() {\n\n        var abs = M.abs;\n\n        // test for translate3d support\n        var has3d = Galleria.HAS3D = (function() {\n\n            var el = doc.createElement('p'),\n                has3d,\n                t = ['webkit', 'O', 'ms', 'Moz', ''],\n                s,\n                i = 0,\n                a = 'transform';\n\n            DOM().html.insertBefore(el, null);\n\n            for (; t[i]; i++) {\n                s = t[i] ? t[i] + 'Transform' : a;\n                if (el.style[s] !== undefined) {\n                    el.style[s] = \"translate3d(1px,1px,1px)\";\n                    has3d = $(el).css(t[i] ? '-' + t[i].toLowerCase() + '-' + a : a);\n                }\n            }\n\n            DOM().html.removeChild(el);\n            return (has3d !== undefined && has3d.length > 0 && has3d !== \"none\");\n        }());\n\n        // request animation shim\n        var requestFrame = (function() {\n            var r = 'RequestAnimationFrame';\n            return window.requestAnimationFrame ||\n                window['webkit' + r] ||\n                window['moz' + r] ||\n                window['o' + r] ||\n                window['ms' + r] ||\n                function(callback) {\n                    window.setTimeout(callback, 1000 / 60);\n                };\n        }());\n\n        var Finger = function(elem, options) {\n\n            // default options\n            this.config = {\n                start: 0,\n                duration: 500,\n                onchange: function() {},\n                oncomplete: function() {},\n                easing: function(x, t, b, c, d) {\n                    return -c * ((t = t / d - 1) * t * t * t - 1) + b; // easeOutQuart\n                }\n            };\n\n            this.easeout = function(x, t, b, c, d) {\n                return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n            };\n\n            if (!elem.children.length) {\n                return;\n            }\n\n            var self = this;\n\n            // extend options\n            $.extend(this.config, options);\n\n            this.elem = elem;\n            this.child = elem.children[0];\n            this.to = this.pos = 0;\n            this.touching = false;\n            this.start = {};\n            this.index = this.config.start;\n            this.anim = 0;\n            this.easing = this.config.easing;\n\n            if (!has3d) {\n                this.child.style.position = 'absolute';\n                this.elem.style.position = 'relative';\n            }\n\n            // Bind event handlers to context\n            $.each(['ontouchstart', 'ontouchmove', 'ontouchend', 'setup'], function(i, fn) {\n                self[fn] = (function(caller) {\n                    return function() {\n                        caller.apply(self, arguments);\n                    };\n                }(self[fn]));\n            });\n\n            // the physical animator\n            this.setX = function() {\n\n                var style = self.child.style;\n\n                if (!has3d) {\n                    // this is actually faster than CSS3 translate\n                    style.left = self.pos + 'px';\n                    return;\n                }\n                style.MozTransform = style.webkitTransform = style.transform = 'translate3d(' + self.pos + 'px,0,0)';\n                return;\n            };\n\n            // bind events\n            $(elem).on('touchstart', this.ontouchstart);\n            $(window).on('resize', this.setup);\n            $(window).on('orientationchange', this.setup);\n\n            // set up width\n            this.setup();\n\n            // start the animations\n            (function animloop() {\n                requestFrame(animloop);\n                self.loop.call(self);\n            }());\n\n        };\n\n        Finger.prototype = {\n\n            constructor: Finger,\n\n            setup: function() {\n                this.width = $(this.elem).width();\n                this.length = M.ceil($(this.child).width() / this.width);\n                if (this.index !== 0) {\n                    this.index = M.max(0, M.min(this.index, this.length - 1));\n                    this.pos = this.to = -this.width * this.index;\n                }\n            },\n\n            setPosition: function(pos) {\n                this.pos = pos;\n                this.to = pos;\n            },\n\n            ontouchstart: function(e) {\n\n                var touch = e.originalEvent.touches;\n\n                this.start = {\n                    pageX: touch[0].pageX,\n                    pageY: touch[0].pageY,\n                    time: +new Date()\n                };\n\n                this.isScrolling = null;\n                this.touching = true;\n                this.deltaX = 0;\n\n                $doc.on('touchmove', this.ontouchmove);\n                $doc.on('touchend', this.ontouchend);\n            },\n\n            ontouchmove: function(e) {\n\n                var touch = e.originalEvent.touches;\n\n                // ensure swiping with one touch and not pinching\n                if (touch && touch.length > 1 || e.scale && e.scale !== 1) {\n                    return;\n                }\n\n                this.deltaX = touch[0].pageX - this.start.pageX;\n\n                // determine if scrolling test has run - one time test\n                if (this.isScrolling === null) {\n                    this.isScrolling = !!(\n                        this.isScrolling ||\n                        M.abs(this.deltaX) < M.abs(touch[0].pageY - this.start.pageY)\n                    );\n                }\n\n                // if user is not trying to scroll vertically\n                if (!this.isScrolling) {\n\n                    // prevent native scrolling\n                    e.preventDefault();\n\n                    // increase resistance if first or last slide\n                    this.deltaX /= ((!this.index && this.deltaX > 0 || this.index == this.length - 1 && this.deltaX < 0) ?\n                        (M.abs(this.deltaX) / this.width + 1.8) : 1);\n                    this.to = this.deltaX - this.index * this.width;\n                }\n                e.stopPropagation();\n            },\n\n            ontouchend: function(e) {\n\n                this.touching = false;\n\n                // determine if slide attempt triggers next/prev slide\n                var isValidSlide = +new Date() - this.start.time < 250 &&\n                    M.abs(this.deltaX) > 40 ||\n                    M.abs(this.deltaX) > this.width / 2,\n\n                    isPastBounds = !this.index && this.deltaX > 0 ||\n                    this.index == this.length - 1 && this.deltaX < 0;\n\n                // if not scrolling vertically\n                if (!this.isScrolling) {\n                    this.show(this.index + (isValidSlide && !isPastBounds ? (this.deltaX < 0 ? 1 : -1) : 0));\n                }\n\n                $doc.off('touchmove', this.ontouchmove);\n                $doc.off('touchend', this.ontouchend);\n            },\n\n            show: function(index) {\n                if (index != this.index) {\n                    this.config.onchange.call(this, index);\n                } else {\n                    this.to = -(index * this.width);\n                }\n            },\n\n            moveTo: function(index) {\n                if (index != this.index) {\n                    this.pos = this.to = -(index * this.width);\n                    this.index = index;\n                }\n            },\n\n            loop: function() {\n\n                var distance = this.to - this.pos,\n                    factor = 1;\n\n                if (this.width && distance) {\n                    factor = M.max(0.5, M.min(1.5, M.abs(distance / this.width)));\n                }\n\n                // if distance is short or the user is touching, do a 1-1 animation\n                if (this.touching || M.abs(distance) <= 1) {\n                    this.pos = this.to;\n                    distance = 0;\n                    if (this.anim && !this.touching) {\n                        this.config.oncomplete(this.index);\n                    }\n                    this.anim = 0;\n                    this.easing = this.config.easing;\n                } else {\n                    if (!this.anim) {\n                        // save animation parameters\n                        this.anim = { start: this.pos, time: +new Date(), distance: distance, factor: factor, destination: this.to };\n                    }\n                    // check if to has changed or time has run out\n                    var elapsed = +new Date() - this.anim.time;\n                    var duration = this.config.duration * this.anim.factor;\n\n                    if (elapsed > duration || this.anim.destination != this.to) {\n                        this.anim = 0;\n                        this.easing = this.easeout;\n                        return;\n                    }\n                    // apply easing\n                    this.pos = this.easing(\n                        null,\n                        elapsed,\n                        this.anim.start,\n                        this.anim.distance,\n                        duration\n                    );\n                }\n                this.setX();\n            }\n        };\n\n        return Finger;\n\n    }());\n\n    // the plugin initializer\n    $.fn.galleria = function(options) {\n\n        var selector = this.selector;\n\n        // try domReady if element not found\n        if (!$(this).length) {\n\n            $(function() {\n                if ($(selector).length) {\n\n                    // if found on domReady, go ahead\n                    $(selector).galleria(options);\n\n                } else {\n\n                    // if not, try fetching the element for 5 secs, then raise a warning.\n                    Galleria.utils.wait({\n                        until: function() {\n                            return $(selector).length;\n                        },\n                        success: function() {\n                            $(selector).galleria(options);\n                        },\n                        error: function() {\n                            Galleria.raise('Init failed: Galleria could not find the element \"' + selector + '\".');\n                        },\n                        timeout: 5000\n                    });\n\n                }\n            });\n            return this;\n        }\n\n        return this.each(function() {\n\n            // destroy previous instance and prepare for new load\n            if ($.data(this, 'galleria')) {\n                $.data(this, 'galleria').destroy();\n                $(this).find('*').hide();\n            }\n\n            // load the new gallery\n            $.data(this, 'galleria', new Galleria().init(this, options));\n        });\n\n    };\n\n    // export as AMD or CommonJS\n    if (typeof module === \"object\" && module && typeof module.exports === \"object\") {\n        module.exports = Galleria;\n    } else {\n        window.Galleria = Galleria;\n        if (typeof define === \"function\" && define.amd) {\n            define(\"galleria\", ['jquery'], function() {\n                return Galleria; });\n        }\n    }\n\n    // phew\n\n}(jQuery, this));\n","date":"2017-06-24T13:46:41.000Z","updated":"2016-09-15T16:45:47.000Z","path":"galleria/galleria-1.4.5.js","layout":"false","title":"","comments":1,"_id":"cj5o1vdoz000brtwyhduktz4t","content":"/**\n * Galleria v 1.4.5 2016-09-04\n * http://galleria.io\n *\n * Licensed under the MIT license\n * https://raw.github.com/worseisbetter/galleria/master/LICENSE\n *\n */\n\n(function($, window, Galleria, undef) {\n\n    /*global jQuery, navigator, Image, module, define */\n\n    // some references\n    var doc = window.document,\n        $doc = $(doc),\n        $win = $(window),\n\n        // native prototypes\n        protoArray = Array.prototype,\n\n        // internal constants\n        VERSION = 1.45,\n        DEBUG = true,\n        TIMEOUT = 30000,\n        DUMMY = false,\n        NAV = navigator.userAgent.toLowerCase(),\n        HASH = window.location.hash.replace(/#\\//, ''),\n        PROT = window.location.protocol == \"file:\" ? \"http:\" : window.location.protocol,\n        M = Math,\n        F = function() {},\n        FALSE = function() {\n            return false; },\n        IE = (function() {\n\n            var v = 3,\n                div = doc.createElement('div'),\n                all = div.getElementsByTagName('i');\n\n            do {\n                div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->';\n            } while (all[0]);\n\n            return v > 4 ? v : doc.documentMode || undef;\n\n        }()),\n        DOM = function() {\n            return {\n                html: doc.documentElement,\n                body: doc.body,\n                head: doc.getElementsByTagName('head')[0],\n                title: doc.title\n            };\n        },\n        IFRAME = window.parent !== window.self,\n\n        // list of Galleria events\n        _eventlist = 'data ready thumbnail loadstart loadfinish image play pause progress ' +\n        'fullscreen_enter fullscreen_exit idle_enter idle_exit rescale ' +\n        'lightbox_open lightbox_close lightbox_image',\n\n        _events = (function() {\n\n            var evs = [];\n\n            $.each(_eventlist.split(' '), function(i, ev) {\n                evs.push(ev);\n\n                // legacy events\n                if (/_/.test(ev)) {\n                    evs.push(ev.replace(/_/g, ''));\n                }\n            });\n\n            return evs;\n\n        }()),\n\n        // legacy options\n        // allows the old my_setting syntax and converts it to camel case\n\n        _legacyOptions = function(options) {\n\n            var n;\n\n            if (typeof options !== 'object') {\n\n                // return whatever it was...\n                return options;\n            }\n\n            $.each(options, function(key, value) {\n                if (/^[a-z]+_/.test(key)) {\n                    n = '';\n                    $.each(key.split('_'), function(i, k) {\n                        n += i > 0 ? k.substr(0, 1).toUpperCase() + k.substr(1) : k;\n                    });\n                    options[n] = value;\n                    delete options[key];\n                }\n            });\n\n            return options;\n        },\n\n        _patchEvent = function(type) {\n\n            // allow 'image' instead of Galleria.IMAGE\n            if ($.inArray(type, _events) > -1) {\n                return Galleria[type.toUpperCase()];\n            }\n\n            return type;\n        },\n\n        // video providers\n        _video = {\n            youtube: {\n                reg: /https?:\\/\\/(?:[a-zA_Z]{2,3}.)?(?:youtube\\.com\\/watch\\?)((?:[\\w\\d\\-\\_\\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\\-\\_]+))/i,\n                embed: function() {\n                    return PROT + '//www.youtube.com/embed/' + this.id;\n                },\n                get_thumb: function(data) {\n                    return PROT + '//img.youtube.com/vi/' + this.id + '/default.jpg';\n                },\n                get_image: function(data) {\n                    return PROT + '//img.youtube.com/vi/' + this.id + '/hqdefault.jpg';\n                }\n            },\n            vimeo: {\n                reg: /https?:\\/\\/(?:www\\.)?(vimeo\\.com)\\/(?:hd#)?([0-9]+)/i,\n                embed: function() {\n                    return PROT + '//player.vimeo.com/video/' + this.id;\n                },\n                getUrl: function() {\n                    return PROT + '//vimeo.com/api/v2/video/' + this.id + '.json?callback=?';\n                },\n                get_thumb: function(data) {\n                    return data[0].thumbnail_medium;\n                },\n                get_image: function(data) {\n                    return data[0].thumbnail_large;\n                }\n            },\n            dailymotion: {\n                reg: /https?:\\/\\/(?:www\\.)?(dailymotion\\.com)\\/video\\/([^_]+)/,\n                embed: function() {\n                    return PROT + '//www.dailymotion.com/embed/video/' + this.id;\n                },\n                getUrl: function() {\n                    return 'https://api.dailymotion.com/video/' + this.id + '?fields=thumbnail_240_url,thumbnail_720_url&callback=?';\n                },\n                get_thumb: function(data) {\n                    return data.thumbnail_240_url;\n                },\n                get_image: function(data) {\n                    return data.thumbnail_720_url;\n                }\n            },\n            _inst: []\n        },\n        Video = function(type, id) {\n\n            for (var i = 0; i < _video._inst.length; i++) {\n                if (_video._inst[i].id === id && _video._inst[i].type == type) {\n                    return _video._inst[i];\n                }\n            }\n\n            this.type = type;\n            this.id = id;\n            this.readys = [];\n\n            _video._inst.push(this);\n\n            var self = this;\n\n            $.extend(this, _video[type]);\n\n            _videoThumbs = function(data) {\n                self.data = data;\n                $.each(self.readys, function(i, fn) {\n                    fn(self.data);\n                });\n                self.readys = [];\n            };\n\n            if (this.hasOwnProperty('getUrl')) {\n                $.getJSON(this.getUrl(), _videoThumbs);\n            } else {\n                window.setTimeout(_videoThumbs, 400);\n            }\n\n            this.getMedia = function(type, callback, fail) {\n                fail = fail || F;\n                var self = this;\n                var success = function(data) {\n                    callback(self['get_' + type](data));\n                };\n                try {\n                    if (self.data) {\n                        success(self.data);\n                    } else {\n                        self.readys.push(success);\n                    }\n                } catch (e) {\n                    fail();\n                }\n            };\n        },\n\n        // utility for testing the video URL and getting the video ID\n        _videoTest = function(url) {\n            var match;\n            for (var v in _video) {\n                match = url && _video[v].reg && url.match(_video[v].reg);\n                if (match && match.length) {\n                    return {\n                        id: match[2],\n                        provider: v\n                    };\n                }\n            }\n            return false;\n        },\n\n        // native fullscreen handler\n        _nativeFullscreen = {\n\n            support: (function() {\n                var html = DOM().html;\n                return !IFRAME && (html.requestFullscreen || html.msRequestFullscreen || html.mozRequestFullScreen || html.webkitRequestFullScreen);\n            }()),\n\n            callback: F,\n\n            enter: function(instance, callback, elem) {\n\n                this.instance = instance;\n\n                this.callback = callback || F;\n\n                elem = elem || DOM().html;\n                if (elem.requestFullscreen) {\n                    elem.requestFullscreen();\n                } else if (elem.msRequestFullscreen) {\n                    elem.msRequestFullscreen();\n                } else if (elem.mozRequestFullScreen) {\n                    elem.mozRequestFullScreen();\n                } else if (elem.webkitRequestFullScreen) {\n                    elem.webkitRequestFullScreen();\n                }\n            },\n\n            exit: function(callback) {\n\n                this.callback = callback || F;\n\n                if (doc.exitFullscreen) {\n                    doc.exitFullscreen();\n                } else if (doc.msExitFullscreen) {\n                    doc.msExitFullscreen();\n                } else if (doc.mozCancelFullScreen) {\n                    doc.mozCancelFullScreen();\n                } else if (doc.webkitCancelFullScreen) {\n                    doc.webkitCancelFullScreen();\n                }\n            },\n\n            instance: null,\n\n            listen: function() {\n\n                if (!this.support) {\n                    return;\n                }\n\n                var handler = function() {\n\n                    if (!_nativeFullscreen.instance) {\n                        return;\n                    }\n                    var fs = _nativeFullscreen.instance._fullscreen;\n\n                    if (doc.fullscreen || doc.mozFullScreen || doc.webkitIsFullScreen || (doc.msFullscreenElement && doc.msFullscreenElement !== null)) {\n                        fs._enter(_nativeFullscreen.callback);\n                    } else {\n                        fs._exit(_nativeFullscreen.callback);\n                    }\n                };\n                doc.addEventListener('fullscreenchange', handler, false);\n                doc.addEventListener('MSFullscreenChange', handler, false);\n                doc.addEventListener('mozfullscreenchange', handler, false);\n                doc.addEventListener('webkitfullscreenchange', handler, false);\n            }\n        },\n\n        // the internal gallery holder\n        _galleries = [],\n\n        // the internal instance holder\n        _instances = [],\n\n        // flag for errors\n        _hasError = false,\n\n        // canvas holder\n        _canvas = false,\n\n        // instance pool, holds the galleries until themeLoad is triggered\n        _pool = [],\n\n        // Run galleries from theme trigger\n        _loadedThemes = [],\n        _themeLoad = function(theme) {\n\n            _loadedThemes.push(theme);\n\n            // run the instances we have in the pool\n            // and apply the last theme if not specified\n            $.each(_pool, function(i, instance) {\n                if (instance._options.theme == theme.name || (!instance._initialized && !instance._options.theme)) {\n                    instance.theme = theme;\n                    instance._init.call(instance);\n                }\n            });\n        },\n\n        // the Utils singleton\n        Utils = (function() {\n\n            return {\n\n                // legacy support for clearTimer\n                clearTimer: function(id) {\n                    $.each(Galleria.get(), function() {\n                        this.clearTimer(id);\n                    });\n                },\n\n                // legacy support for addTimer\n                addTimer: function(id) {\n                    $.each(Galleria.get(), function() {\n                        this.addTimer(id);\n                    });\n                },\n\n                array: function(obj) {\n                    return protoArray.slice.call(obj, 0);\n                },\n\n                create: function(className, nodeName) {\n                    nodeName = nodeName || 'div';\n                    var elem = doc.createElement(nodeName);\n                    elem.className = className;\n                    return elem;\n                },\n\n                removeFromArray: function(arr, elem) {\n                    $.each(arr, function(i, el) {\n                        if (el == elem) {\n                            arr.splice(i, 1);\n                            return false;\n                        }\n                    });\n                    return arr;\n                },\n\n                getScriptPath: function(src) {\n\n                    // the currently executing script is always the last\n                    src = src || $('script:last').attr('src');\n                    var slices = src.split('/');\n\n                    if (slices.length == 1) {\n                        return '';\n                    }\n\n                    slices.pop();\n\n                    return slices.join('/') + '/';\n                },\n\n                // CSS3 transitions, added in 1.2.4\n                animate: (function() {\n\n                    // detect transition\n                    var transition = (function(style) {\n                        var props = 'transition WebkitTransition MozTransition OTransition'.split(' '),\n                            i;\n\n                        // disable css3 animations in opera until stable\n                        if (window.opera) {\n                            return false;\n                        }\n\n                        for (i = 0; props[i]; i++) {\n                            if (typeof style[props[i]] !== 'undefined') {\n                                return props[i];\n                            }\n                        }\n                        return false;\n                    }((doc.body || doc.documentElement).style));\n\n                    // map transitionend event\n                    var endEvent = {\n                        MozTransition: 'transitionend',\n                        OTransition: 'oTransitionEnd',\n                        WebkitTransition: 'webkitTransitionEnd',\n                        transition: 'transitionend'\n                    }[transition];\n\n                    // map bezier easing conversions\n                    var easings = {\n                        _default: [0.25, 0.1, 0.25, 1],\n                        galleria: [0.645, 0.045, 0.355, 1],\n                        galleriaIn: [0.55, 0.085, 0.68, 0.53],\n                        galleriaOut: [0.25, 0.46, 0.45, 0.94],\n                        ease: [0.25, 0, 0.25, 1],\n                        linear: [0.25, 0.25, 0.75, 0.75],\n                        'ease-in': [0.42, 0, 1, 1],\n                        'ease-out': [0, 0, 0.58, 1],\n                        'ease-in-out': [0.42, 0, 0.58, 1]\n                    };\n\n                    // function for setting transition css for all browsers\n                    var setStyle = function(elem, value, suffix) {\n                        var css = {};\n                        suffix = suffix || 'transition';\n                        $.each('webkit moz ms o'.split(' '), function() {\n                            css['-' + this + '-' + suffix] = value;\n                        });\n                        elem.css(css);\n                    };\n\n                    // clear styles\n                    var clearStyle = function(elem) {\n                        setStyle(elem, 'none', 'transition');\n                        if (Galleria.WEBKIT && Galleria.TOUCH) {\n                            setStyle(elem, 'translate3d(0,0,0)', 'transform');\n                            if (elem.data('revert')) {\n                                elem.css(elem.data('revert'));\n                                elem.data('revert', null);\n                            }\n                        }\n                    };\n\n                    // various variables\n                    var change, strings, easing, syntax, revert, form, css;\n\n                    // the actual animation method\n                    return function(elem, to, options) {\n\n                        // extend defaults\n                        options = $.extend({\n                            duration: 400,\n                            complete: F,\n                            stop: false\n                        }, options);\n\n                        // cache jQuery instance\n                        elem = $(elem);\n\n                        if (!options.duration) {\n                            elem.css(to);\n                            options.complete.call(elem[0]);\n                            return;\n                        }\n\n                        // fallback to jQuery's animate if transition is not supported\n                        if (!transition) {\n                            elem.animate(to, options);\n                            return;\n                        }\n\n                        // stop\n                        if (options.stop) {\n                            // clear the animation\n                            elem.off(endEvent);\n                            clearStyle(elem);\n                        }\n\n                        // see if there is a change\n                        change = false;\n                        $.each(to, function(key, val) {\n                            css = elem.css(key);\n                            if (Utils.parseValue(css) != Utils.parseValue(val)) {\n                                change = true;\n                            }\n                            // also add computed styles for FF\n                            elem.css(key, css);\n                        });\n                        if (!change) {\n                            window.setTimeout(function() {\n                                options.complete.call(elem[0]);\n                            }, options.duration);\n                            return;\n                        }\n\n                        // the css strings to be applied\n                        strings = [];\n\n                        // the easing bezier\n                        easing = options.easing in easings ? easings[options.easing] : easings._default;\n\n                        // the syntax\n                        syntax = ' ' + options.duration + 'ms' + ' cubic-bezier(' + easing.join(',') + ')';\n\n                        // add a tiny timeout so that the browsers catches any css changes before animating\n                        window.setTimeout((function(elem, endEvent, to, syntax) {\n                            return function() {\n\n                                // attach the end event\n                                elem.one(endEvent, (function(elem) {\n                                    return function() {\n\n                                        // clear the animation\n                                        clearStyle(elem);\n\n                                        // run the complete method\n                                        options.complete.call(elem[0]);\n                                    };\n                                }(elem)));\n\n                                // do the webkit translate3d for better performance on iOS\n                                if (Galleria.WEBKIT && Galleria.TOUCH) {\n\n                                    revert = {};\n                                    form = [0, 0, 0];\n\n                                    $.each(['left', 'top'], function(i, m) {\n                                        if (m in to) {\n                                            form[i] = (Utils.parseValue(to[m]) - Utils.parseValue(elem.css(m))) + 'px';\n                                            revert[m] = to[m];\n                                            delete to[m];\n                                        }\n                                    });\n\n                                    if (form[0] || form[1]) {\n\n                                        elem.data('revert', revert);\n\n                                        strings.push('-webkit-transform' + syntax);\n\n                                        // 3d animate\n                                        setStyle(elem, 'translate3d(' + form.join(',') + ')', 'transform');\n                                    }\n                                }\n\n                                // push the animation props\n                                $.each(to, function(p, val) {\n                                    strings.push(p + syntax);\n                                });\n\n                                // set the animation styles\n                                setStyle(elem, strings.join(','));\n\n                                // animate\n                                elem.css(to);\n\n                            };\n                        }(elem, endEvent, to, syntax)), 2);\n                    };\n                }()),\n\n                removeAlpha: function(elem) {\n                    if (elem instanceof jQuery) {\n                        elem = elem[0];\n                    }\n                    if (IE < 9 && elem) {\n\n                        var style = elem.style,\n                            currentStyle = elem.currentStyle,\n                            filter = currentStyle && currentStyle.filter || style.filter || \"\";\n\n                        if (/alpha/.test(filter)) {\n                            style.filter = filter.replace(/alpha\\([^)]*\\)/i, '');\n                        }\n                    }\n                },\n\n                forceStyles: function(elem, styles) {\n                    elem = $(elem);\n                    if (elem.attr('style')) {\n                        elem.data('styles', elem.attr('style')).removeAttr('style');\n                    }\n                    elem.css(styles);\n                },\n\n                revertStyles: function() {\n                    $.each(Utils.array(arguments), function(i, elem) {\n\n                        elem = $(elem);\n                        elem.removeAttr('style');\n\n                        elem.attr('style', ''); // \"fixes\" webkit bug\n\n                        if (elem.data('styles')) {\n                            elem.attr('style', elem.data('styles')).data('styles', null);\n                        }\n                    });\n                },\n\n                moveOut: function(elem) {\n                    Utils.forceStyles(elem, {\n                        position: 'absolute',\n                        left: -10000\n                    });\n                },\n\n                moveIn: function() {\n                    Utils.revertStyles.apply(Utils, Utils.array(arguments));\n                },\n\n                hide: function(elem, speed, callback) {\n\n                    callback = callback || F;\n\n                    var $elem = $(elem);\n                    elem = $elem[0];\n\n                    // save the value if not exist\n                    if (!$elem.data('opacity')) {\n                        $elem.data('opacity', $elem.css('opacity'));\n                    }\n\n                    // always hide\n                    var style = { opacity: 0 };\n\n                    if (speed) {\n\n                        var complete = IE < 9 && elem ? function() {\n                            Utils.removeAlpha(elem);\n                            elem.style.visibility = 'hidden';\n                            callback.call(elem);\n                        } : callback;\n\n                        Utils.animate(elem, style, {\n                            duration: speed,\n                            complete: complete,\n                            stop: true\n                        });\n                    } else {\n                        if (IE < 9 && elem) {\n                            Utils.removeAlpha(elem);\n                            elem.style.visibility = 'hidden';\n                        } else {\n                            $elem.css(style);\n                        }\n                    }\n                },\n\n                show: function(elem, speed, callback) {\n\n                    callback = callback || F;\n\n                    var $elem = $(elem);\n                    elem = $elem[0];\n\n                    // bring back saved opacity\n                    var saved = parseFloat($elem.data('opacity')) || 1,\n                        style = { opacity: saved };\n\n                    // animate or toggle\n                    if (speed) {\n\n                        if (IE < 9) {\n                            $elem.css('opacity', 0);\n                            elem.style.visibility = 'visible';\n                        }\n\n                        var complete = IE < 9 && elem ? function() {\n                            if (style.opacity == 1) {\n                                Utils.removeAlpha(elem);\n                            }\n                            callback.call(elem);\n                        } : callback;\n\n                        Utils.animate(elem, style, {\n                            duration: speed,\n                            complete: complete,\n                            stop: true\n                        });\n                    } else {\n                        if (IE < 9 && style.opacity == 1 && elem) {\n                            Utils.removeAlpha(elem);\n                            elem.style.visibility = 'visible';\n                        } else {\n                            $elem.css(style);\n                        }\n                    }\n                },\n\n                wait: function(options) {\n\n                    Galleria._waiters = Galleria._waiters || [];\n\n                    options = $.extend({\n                        until: FALSE,\n                        success: F,\n                        error: function() { Galleria.raise('Could not complete wait function.'); },\n                        timeout: 3000\n                    }, options);\n\n                    var start = Utils.timestamp(),\n                        elapsed,\n                        now,\n                        tid,\n                        fn = function() {\n                            now = Utils.timestamp();\n                            elapsed = now - start;\n                            Utils.removeFromArray(Galleria._waiters, tid);\n                            if (options.until(elapsed)) {\n                                options.success();\n                                return false;\n                            }\n                            if (typeof options.timeout == 'number' && now >= start + options.timeout) {\n                                options.error();\n                                return false;\n                            }\n                            Galleria._waiters.push(tid = window.setTimeout(fn, 10));\n                        };\n                    Galleria._waiters.push(tid = window.setTimeout(fn, 10));\n                },\n\n                toggleQuality: function(img, force) {\n\n                    if ((IE !== 7 && IE !== 8) || !img || img.nodeName.toUpperCase() != 'IMG') {\n                        return;\n                    }\n\n                    if (typeof force === 'undefined') {\n                        force = img.style.msInterpolationMode === 'nearest-neighbor';\n                    }\n\n                    img.style.msInterpolationMode = force ? 'bicubic' : 'nearest-neighbor';\n                },\n\n                insertStyleTag: function(styles, id) {\n\n                    if (id && $('#' + id).length) {\n                        return;\n                    }\n\n                    var style = doc.createElement('style');\n                    if (id) {\n                        style.id = id;\n                    }\n\n                    DOM().head.appendChild(style);\n\n                    if (style.styleSheet) { // IE\n                        style.styleSheet.cssText = styles;\n                    } else {\n                        var cssText = doc.createTextNode(styles);\n                        style.appendChild(cssText);\n                    }\n                },\n\n                // a loadscript method that works for local scripts\n                loadScript: function(url, callback) {\n\n                    var done = false,\n                        script = $('<scr' +=\"\" 'ipt=\"\">').attr({\n                            src: url,\n                            async: true\n                        }).get(0);\n\n                    // Attach handlers for all browsers\n                    script.onload = script.onreadystatechange = function() {\n                        if (!done && (!this.readyState ||\n                                this.readyState === 'loaded' || this.readyState === 'complete')) {\n\n                            done = true;\n\n                            // Handle memory leak in IE\n                            script.onload = script.onreadystatechange = null;\n\n                            if (typeof callback === 'function') {\n                                callback.call(this, this);\n                            }\n                        }\n                    };\n\n                    DOM().head.appendChild(script);\n                },\n\n                // parse anything into a number\n                parseValue: function(val) {\n                    if (typeof val === 'number') {\n                        return val;\n                    } else if (typeof val === 'string') {\n                        var arr = val.match(/\\-?\\d|\\./g);\n                        return arr && arr.constructor === Array ? arr.join('') * 1 : 0;\n                    } else {\n                        return 0;\n                    }\n                },\n\n                // timestamp abstraction\n                timestamp: function() {\n                    return new Date().getTime();\n                },\n\n                loadCSS: function(href, id, callback) {\n\n                    var link,\n                        length;\n\n                    // look for manual css\n                    $('link[rel=stylesheet]').each(function() {\n                        if (new RegExp(href).test(this.href)) {\n                            link = this;\n                            return false;\n                        }\n                    });\n\n                    if (typeof id === 'function') {\n                        callback = id;\n                        id = undef;\n                    }\n\n                    callback = callback || F; // dirty\n\n                    // if already present, return\n                    if (link) {\n                        callback.call(link, link);\n                        return link;\n                    }\n\n                    // save the length of stylesheets to check against\n                    length = doc.styleSheets.length;\n\n                    // check for existing id\n                    if ($('#' + id).length) {\n\n                        $('#' + id).attr('href', href);\n                        length--;\n\n                    } else {\n                        link = $('<link>').attr({\n                            rel: 'stylesheet',\n                            href: href,\n                            id: id\n                        }).get(0);\n\n                        var styles = $('link[rel=\"stylesheet\"], style');\n                        if (styles.length) {\n                            styles.get(0).parentNode.insertBefore(link, styles[0]);\n                        } else {\n                            DOM().head.appendChild(link);\n                        }\n\n                        if (IE && length >= 31) {\n                            Galleria.raise('You have reached the browser stylesheet limit (31)', true);\n                            return;\n                        }\n                    }\n\n                    if (typeof callback === 'function') {\n\n                        // First check for dummy element (new in 1.2.8)\n                        var $loader = $('<s>').attr('id', 'galleria-loader').hide().appendTo(DOM().body);\n\n                        Utils.wait({\n                            until: function() {\n                                return $loader.height() == 1;\n                            },\n                            success: function() {\n                                $loader.remove();\n                                callback.call(link, link);\n                            },\n                            error: function() {\n                                $loader.remove();\n\n                                // If failed, tell the dev to download the latest theme\n                                Galleria.raise('Theme CSS could not load after 20 sec. ' + (Galleria.QUIRK ?\n                                    'Your browser is in Quirks Mode, please add a correct doctype.' :\n                                    'Please download the latest theme at http://galleria.io/customer/.'), true);\n                            },\n                            timeout: 5000\n                        });\n                    }\n                    return link;\n                }\n            };\n        }()),\n\n        // play icon\n        _playIcon = function(container) {\n\n            var css = '.galleria-videoicon{width:60px;height:60px;position:absolute;top:50%;left:50%;z-index:1;' +\n                'margin:-30px 0 0 -30px;cursor:pointer;background:#000;background:rgba(0,0,0,.8);border-radius:3px;-webkit-transition:all 150ms}' +\n                '.galleria-videoicon i{width:0px;height:0px;border-style:solid;border-width:10px 0 10px 16px;display:block;' +\n                'border-color:transparent transparent transparent #ffffff;margin:20px 0 0 22px}.galleria-image:hover .galleria-videoicon{background:#000}';\n\n            Utils.insertStyleTag(css, 'galleria-videoicon');\n\n            return $(Utils.create('galleria-videoicon')).html('<i></i>').appendTo(container)\n                .click(function() { $(this).siblings('img').mouseup(); });\n        },\n\n        // the transitions holder\n        _transitions = (function() {\n\n            var _slide = function(params, complete, fade, door) {\n\n                var easing = this.getOptions('easing'),\n                    distance = this.getStageWidth(),\n                    from = { left: distance * (params.rewind ? -1 : 1) },\n                    to = { left: 0 };\n\n                if (fade) {\n                    from.opacity = 0;\n                    to.opacity = 1;\n                } else {\n                    from.opacity = 1;\n                }\n\n                $(params.next).css(from);\n\n                Utils.animate(params.next, to, {\n                    duration: params.speed,\n                    complete: (function(elems) {\n                        return function() {\n                            complete();\n                            elems.css({\n                                left: 0\n                            });\n                        };\n                    }($(params.next).add(params.prev))),\n                    queue: false,\n                    easing: easing\n                });\n\n                if (door) {\n                    params.rewind = !params.rewind;\n                }\n\n                if (params.prev) {\n\n                    from = { left: 0 };\n                    to = { left: distance * (params.rewind ? 1 : -1) };\n\n                    if (fade) {\n                        from.opacity = 1;\n                        to.opacity = 0;\n                    }\n\n                    $(params.prev).css(from);\n                    Utils.animate(params.prev, to, {\n                        duration: params.speed,\n                        queue: false,\n                        easing: easing,\n                        complete: function() {\n                            $(this).css('opacity', 0);\n                        }\n                    });\n                }\n            };\n\n            return {\n\n                active: false,\n\n                init: function(effect, params, complete) {\n                    if (_transitions.effects.hasOwnProperty(effect)) {\n                        _transitions.effects[effect].call(this, params, complete);\n                    }\n                },\n\n                effects: {\n\n                    fade: function(params, complete) {\n                        $(params.next).css({\n                            opacity: 0,\n                            left: 0\n                        });\n                        Utils.animate(params.next, {\n                            opacity: 1\n                        }, {\n                            duration: params.speed,\n                            complete: complete\n                        });\n                        if (params.prev) {\n                            $(params.prev).css('opacity', 1).show();\n                            Utils.animate(params.prev, {\n                                opacity: 0\n                            }, {\n                                duration: params.speed\n                            });\n                        }\n                    },\n\n                    flash: function(params, complete) {\n                        $(params.next).css({\n                            opacity: 0,\n                            left: 0\n                        });\n                        if (params.prev) {\n                            Utils.animate(params.prev, {\n                                opacity: 0\n                            }, {\n                                duration: params.speed / 2,\n                                complete: function() {\n                                    Utils.animate(params.next, {\n                                        opacity: 1\n                                    }, {\n                                        duration: params.speed,\n                                        complete: complete\n                                    });\n                                }\n                            });\n                        } else {\n                            Utils.animate(params.next, {\n                                opacity: 1\n                            }, {\n                                duration: params.speed,\n                                complete: complete\n                            });\n                        }\n                    },\n\n                    pulse: function(params, complete) {\n                        if (params.prev) {\n                            $(params.prev).hide();\n                        }\n                        $(params.next).css({\n                            opacity: 0,\n                            left: 0\n                        }).show();\n                        Utils.animate(params.next, {\n                            opacity: 1\n                        }, {\n                            duration: params.speed,\n                            complete: complete\n                        });\n                    },\n\n                    slide: function(params, complete) {\n                        _slide.apply(this, Utils.array(arguments));\n                    },\n\n                    fadeslide: function(params, complete) {\n                        _slide.apply(this, Utils.array(arguments).concat([true]));\n                    },\n\n                    doorslide: function(params, complete) {\n                        _slide.apply(this, Utils.array(arguments).concat([false, true]));\n                    }\n                }\n            };\n        }());\n\n    // listen to fullscreen\n    _nativeFullscreen.listen();\n\n    // create special click:fast event for fast touch interaction\n    $.event.special['click:fast'] = {\n        propagate: true,\n        add: function(handleObj) {\n\n            var getCoords = function(e) {\n                if (e.touches && e.touches.length) {\n                    var touch = e.touches[0];\n                    return {\n                        x: touch.pageX,\n                        y: touch.pageY\n                    };\n                }\n            };\n\n            var def = {\n                touched: false,\n                touchdown: false,\n                coords: { x: 0, y: 0 },\n                evObj: {}\n            };\n\n            $(this).data({\n                clickstate: def,\n                timer: 0\n            }).on('touchstart.fast', function(e) {\n                window.clearTimeout($(this).data('timer'));\n                $(this).data('clickstate', {\n                    touched: true,\n                    touchdown: true,\n                    coords: getCoords(e.originalEvent),\n                    evObj: e\n                });\n            }).on('touchmove.fast', function(e) {\n                var coords = getCoords(e.originalEvent),\n                    state = $(this).data('clickstate'),\n                    distance = Math.max(\n                        Math.abs(state.coords.x - coords.x),\n                        Math.abs(state.coords.y - coords.y)\n                    );\n                if (distance > 6) {\n                    $(this).data('clickstate', $.extend(state, {\n                        touchdown: false\n                    }));\n                }\n            }).on('touchend.fast', function(e) {\n                var $this = $(this),\n                    state = $this.data('clickstate');\n                if (state.touchdown) {\n                    handleObj.handler.call(this, e);\n                }\n                $this.data('timer', window.setTimeout(function() {\n                    $this.data('clickstate', def);\n                }, 400));\n            }).on('click.fast', function(e) {\n                var state = $(this).data('clickstate');\n                if (state.touched) {\n                    return false;\n                }\n                $(this).data('clickstate', def);\n                handleObj.handler.call(this, e);\n            });\n        },\n        remove: function() {\n            $(this).off('touchstart.fast touchmove.fast touchend.fast click.fast');\n        }\n    };\n\n    // trigger resize on orientationchange (IOS7)\n    $win.on('orientationchange', function() {\n        $(this).resize();\n    });\n\n    /**\n        The main Galleria class\n\n        @class\n        @constructor\n\n        @example var gallery = new Galleria();\n\n        @author http://wib.io\n\n        @requires jQuery\n\n    */\n\n    Galleria = function() {\n\n        var self = this;\n\n        // internal options\n        this._options = {};\n\n        // flag for controlling play/pause\n        this._playing = false;\n\n        // internal interval for slideshow\n        this._playtime = 5000;\n\n        // internal variable for the currently active image\n        this._active = null;\n\n        // the internal queue, arrayified\n        this._queue = { length: 0 };\n\n        // the internal data array\n        this._data = [];\n\n        // the internal dom collection\n        this._dom = {};\n\n        // the internal thumbnails array\n        this._thumbnails = [];\n\n        // the internal layers array\n        this._layers = [];\n\n        // internal init flag\n        this._initialized = false;\n\n        // internal firstrun flag\n        this._firstrun = false;\n\n        // global stagewidth/height\n        this._stageWidth = 0;\n        this._stageHeight = 0;\n\n        // target holder\n        this._target = undef;\n\n        // bind hashes\n        this._binds = [];\n\n        // instance id\n        this._id = parseInt(M.random() * 10000, 10);\n\n        // add some elements\n        var divs = 'container stage images image-nav image-nav-left image-nav-right ' +\n            'info info-text info-title info-description ' +\n            'thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right ' +\n            'loader counter tooltip',\n            spans = 'current total';\n\n        $.each(divs.split(' '), function(i, elemId) {\n            self._dom[elemId] = Utils.create('galleria-' + elemId);\n        });\n\n        $.each(spans.split(' '), function(i, elemId) {\n            self._dom[elemId] = Utils.create('galleria-' + elemId, 'span');\n        });\n\n        // the internal keyboard object\n        // keeps reference of the keybinds and provides helper methods for binding keys\n        var keyboard = this._keyboard = {\n\n            keys: {\n                'UP': 38,\n                'DOWN': 40,\n                'LEFT': 37,\n                'RIGHT': 39,\n                'RETURN': 13,\n                'ESCAPE': 27,\n                'BACKSPACE': 8,\n                'SPACE': 32\n            },\n\n            map: {},\n\n            bound: false,\n\n            press: function(e) {\n                var key = e.keyCode || e.which;\n                if (key in keyboard.map && typeof keyboard.map[key] === 'function') {\n                    keyboard.map[key].call(self, e);\n                }\n            },\n\n            attach: function(map) {\n\n                var key, up;\n\n                for (key in map) {\n                    if (map.hasOwnProperty(key)) {\n                        up = key.toUpperCase();\n                        if (up in keyboard.keys) {\n                            keyboard.map[keyboard.keys[up]] = map[key];\n                        } else {\n                            keyboard.map[up] = map[key];\n                        }\n                    }\n                }\n                if (!keyboard.bound) {\n                    keyboard.bound = true;\n                    $doc.on('keydown', keyboard.press);\n                }\n            },\n\n            detach: function() {\n                keyboard.bound = false;\n                keyboard.map = {};\n                $doc.off('keydown', keyboard.press);\n            }\n        };\n\n        // internal controls for keeping track of active / inactive images\n        var controls = this._controls = {\n\n            0: undef,\n\n            1: undef,\n\n            active: 0,\n\n            swap: function() {\n                controls.active = controls.active ? 0 : 1;\n            },\n\n            getActive: function() {\n                return self._options.swipe ? controls.slides[self._active] : controls[controls.active];\n            },\n\n            getNext: function() {\n                return self._options.swipe ? controls.slides[self.getNext(self._active)] : controls[1 - controls.active];\n            },\n\n            slides: [],\n\n            frames: [],\n\n            layers: []\n        };\n\n        // internal carousel object\n        var carousel = this._carousel = {\n\n            // shortcuts\n            next: self.$('thumb-nav-right'),\n            prev: self.$('thumb-nav-left'),\n\n            // cache the width\n            width: 0,\n\n            // track the current position\n            current: 0,\n\n            // cache max value\n            max: 0,\n\n            // save all hooks for each width in an array\n            hooks: [],\n\n            // update the carousel\n            // you can run this method anytime, f.ex on window.resize\n            update: function() {\n                var w = 0,\n                    h = 0,\n                    hooks = [0];\n\n                $.each(self._thumbnails, function(i, thumb) {\n                    if (thumb.ready) {\n                        w += thumb.outerWidth || $(thumb.container).outerWidth(true);\n                        // Due to a bug in jquery, outerwidth() returns the floor of the actual outerwidth,\n                        // if the browser is zoom to a value other than 100%. height() returns the floating point value.\n                        var containerWidth = $(thumb.container).width();\n                        w += containerWidth - M.floor(containerWidth);\n\n                        hooks[i + 1] = w;\n                        h = M.max(h, thumb.outerHeight || $(thumb.container).outerHeight(true));\n                    }\n                });\n\n                self.$('thumbnails').css({\n                    width: w,\n                    height: h\n                });\n\n                carousel.max = w;\n                carousel.hooks = hooks;\n                carousel.width = self.$('thumbnails-list').width();\n                carousel.setClasses();\n\n                self.$('thumbnails-container').toggleClass('galleria-carousel', w > carousel.width);\n\n                // one extra calculation\n                carousel.width = self.$('thumbnails-list').width();\n\n                // todo: fix so the carousel moves to the left\n            },\n\n            bindControls: function() {\n\n                var i;\n\n                carousel.next.on('click:fast', function(e) {\n                    e.preventDefault();\n\n                    if (self._options.carouselSteps === 'auto') {\n\n                        for (i = carousel.current; i < carousel.hooks.length; i++) {\n                            if (carousel.hooks[i] - carousel.hooks[carousel.current] > carousel.width) {\n                                carousel.set(i - 2);\n                                break;\n                            }\n                        }\n\n                    } else {\n                        carousel.set(carousel.current + self._options.carouselSteps);\n                    }\n                });\n\n                carousel.prev.on('click:fast', function(e) {\n                    e.preventDefault();\n\n                    if (self._options.carouselSteps === 'auto') {\n\n                        for (i = carousel.current; i >= 0; i--) {\n                            if (carousel.hooks[carousel.current] - carousel.hooks[i] > carousel.width) {\n                                carousel.set(i + 2);\n                                break;\n                            } else if (i === 0) {\n                                carousel.set(0);\n                                break;\n                            }\n                        }\n                    } else {\n                        carousel.set(carousel.current - self._options.carouselSteps);\n                    }\n                });\n            },\n\n            // calculate and set positions\n            set: function(i) {\n                i = M.max(i, 0);\n                while (carousel.hooks[i - 1] + carousel.width >= carousel.max && i >= 0) {\n                    i--;\n                }\n                carousel.current = i;\n                carousel.animate();\n            },\n\n            // get the last position\n            getLast: function(i) {\n                return (i || carousel.current) - 1;\n            },\n\n            // follow the active image\n            follow: function(i) {\n\n                //don't follow if position fits\n                if (i === 0 || i === carousel.hooks.length - 2) {\n                    carousel.set(i);\n                    return;\n                }\n\n                // calculate last position\n                var last = carousel.current;\n                while (carousel.hooks[last] - carousel.hooks[carousel.current] <\n                    carousel.width && last <= 1=\"\" 2=\"\" carousel.hooks.length)=\"\" {=\"\" last++;=\"\" }=\"\" set=\"\" position=\"\" if=\"\" (i=\"\" -=\"\" <=\"\" carousel.current)=\"\" carousel.set(i=\"\" 1);=\"\" else=\"\" +=\"\"> last) {\n                    carousel.set(i - last + carousel.current + 2);\n                }\n            },\n\n            // helper for setting disabled classes\n            setClasses: function() {\n                carousel.prev.toggleClass('disabled', !carousel.current);\n                carousel.next.toggleClass('disabled', carousel.hooks[carousel.current] + carousel.width >= carousel.max);\n            },\n\n            // the animation method\n            animate: function(to) {\n                carousel.setClasses();\n                var num = carousel.hooks[carousel.current] * -1;\n\n                if (isNaN(num)) {\n                    return;\n                }\n\n                // FF 24 bug\n                self.$('thumbnails').css('left', function() {\n                    return $(this).css('left');\n                });\n\n                Utils.animate(self.get('thumbnails'), {\n                    left: num\n                }, {\n                    duration: self._options.carouselSpeed,\n                    easing: self._options.easing,\n                    queue: false\n                });\n            }\n        };\n\n        // tooltip control\n        // added in 1.2\n        var tooltip = this._tooltip = {\n\n            initialized: false,\n\n            open: false,\n\n            timer: 'tooltip' + self._id,\n\n            swapTimer: 'swap' + self._id,\n\n            init: function() {\n\n                tooltip.initialized = true;\n\n                var css = '.galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;' +\n                    'opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}';\n\n                Utils.insertStyleTag(css, 'galleria-tooltip');\n\n                self.$('tooltip').css({\n                    opacity: 0.8,\n                    visibility: 'visible',\n                    display: 'none'\n                });\n\n            },\n\n            // move handler\n            move: function(e) {\n                var mouseX = self.getMousePosition(e).x,\n                    mouseY = self.getMousePosition(e).y,\n                    $elem = self.$('tooltip'),\n                    x = mouseX,\n                    y = mouseY,\n                    height = $elem.outerHeight(true) + 1,\n                    width = $elem.outerWidth(true),\n                    limitY = height + 15;\n\n                var maxX = self.$('container').width() - width - 2,\n                    maxY = self.$('container').height() - height - 2;\n\n                if (!isNaN(x) && !isNaN(y)) {\n\n                    x += 10;\n                    y -= (height + 8);\n\n                    x = M.max(0, M.min(maxX, x));\n                    y = M.max(0, M.min(maxY, y));\n\n                    if (mouseY < limitY) {\n                        y = limitY;\n                    }\n\n                    $elem.css({ left: x, top: y });\n                }\n            },\n\n            // bind elements to the tooltip\n            // you can bind multiple elementIDs using { elemID : function } or { elemID : string }\n            // you can also bind single DOM elements using bind(elem, string)\n            bind: function(elem, value) {\n\n                // todo: revise if alternative tooltip is needed for mobile devices\n                if (Galleria.TOUCH) {\n                    return;\n                }\n\n                if (!tooltip.initialized) {\n                    tooltip.init();\n                }\n\n                var mouseout = function() {\n                    self.$('container').off('mousemove', tooltip.move);\n                    self.clearTimer(tooltip.timer);\n\n                    self.$('tooltip').stop().animate({\n                        opacity: 0\n                    }, 200, function() {\n\n                        self.$('tooltip').hide();\n\n                        self.addTimer(tooltip.swapTimer, function() {\n                            tooltip.open = false;\n                        }, 1000);\n                    });\n                };\n\n                var hover = function(elem, value) {\n\n                    tooltip.define(elem, value);\n\n                    $(elem).hover(function() {\n\n                        self.clearTimer(tooltip.swapTimer);\n                        self.$('container').off('mousemove', tooltip.move).on('mousemove', tooltip.move).trigger('mousemove');\n                        tooltip.show(elem);\n\n                        self.addTimer(tooltip.timer, function() {\n                            self.$('tooltip').stop().show().animate({\n                                opacity: 1\n                            });\n                            tooltip.open = true;\n\n                        }, tooltip.open ? 0 : 500);\n\n                    }, mouseout).click(mouseout);\n                };\n\n                if (typeof value === 'string') {\n                    hover((elem in self._dom ? self.get(elem) : elem), value);\n                } else {\n                    // asume elemID here\n                    $.each(elem, function(elemID, val) {\n                        hover(self.get(elemID), val);\n                    });\n                }\n            },\n\n            show: function(elem) {\n\n                elem = $(elem in self._dom ? self.get(elem) : elem);\n\n                var text = elem.data('tt'),\n                    mouseup = function(e) {\n\n                        // attach a tiny settimeout to make sure the new tooltip is filled\n                        window.setTimeout((function(ev) {\n                            return function() {\n                                tooltip.move(ev);\n                            };\n                        }(e)), 10);\n\n                        elem.off('mouseup', mouseup);\n\n                    };\n\n                text = typeof text === 'function' ? text() : text;\n\n                if (!text) {\n                    return;\n                }\n\n                self.$('tooltip').html(text.replace(/\\s/, '&#160;'));\n\n                // trigger mousemove on mouseup in case of click\n                elem.on('mouseup', mouseup);\n            },\n\n            define: function(elem, value) {\n\n                // we store functions, not strings\n                if (typeof value !== 'function') {\n                    var s = value;\n                    value = function() {\n                        return s;\n                    };\n                }\n\n                elem = $(elem in self._dom ? self.get(elem) : elem).data('tt', value);\n\n                tooltip.show(elem);\n\n            }\n        };\n\n        // internal fullscreen control\n        var fullscreen = this._fullscreen = {\n\n            scrolled: 0,\n\n            crop: undef,\n\n            active: false,\n\n            prev: $(),\n\n            beforeEnter: function(fn) { fn(); },\n            beforeExit: function(fn) { fn(); },\n\n            keymap: self._keyboard.map,\n\n            parseCallback: function(callback, enter) {\n\n                return _transitions.active ? function() {\n                    if (typeof callback == 'function') {\n                        callback.call(self);\n                    }\n                    var active = self._controls.getActive(),\n                        next = self._controls.getNext();\n\n                    self._scaleImage(next);\n                    self._scaleImage(active);\n\n                    if (enter && self._options.trueFullscreen) {\n                        // Firefox bug, revise later\n                        $(active.container).add(next.container).trigger('transitionend');\n                    }\n\n                } : callback;\n\n            },\n\n            enter: function(callback) {\n\n                fullscreen.beforeEnter(function() {\n\n                    callback = fullscreen.parseCallback(callback, true);\n\n                    if (self._options.trueFullscreen && _nativeFullscreen.support) {\n\n                        // do some stuff prior animation for wmoother transitions\n\n                        fullscreen.active = true;\n\n                        Utils.forceStyles(self.get('container'), {\n                            width: '100%',\n                            height: '100%'\n                        });\n\n                        self.rescale();\n\n                        if (Galleria.MAC) {\n                            if (!(Galleria.SAFARI && /version\\/[1-5]/.test(NAV))) {\n                                self.$('container').css('opacity', 0).addClass('fullscreen');\n                                window.setTimeout(function() {\n                                    fullscreen.scale();\n                                    self.$('container').css('opacity', 1);\n                                }, 50);\n                            } else {\n                                self.$('stage').css('opacity', 0);\n                                window.setTimeout(function() {\n                                    fullscreen.scale();\n                                    self.$('stage').css('opacity', 1);\n                                }, 4);\n                            }\n                        } else {\n                            self.$('container').addClass('fullscreen');\n                        }\n\n                        $win.resize(fullscreen.scale);\n\n                        _nativeFullscreen.enter(self, callback, self.get('container'));\n\n                    } else {\n\n                        fullscreen.scrolled = $win.scrollTop();\n                        if (!Galleria.TOUCH) {\n                            window.scrollTo(0, 0);\n                        }\n\n                        fullscreen._enter(callback);\n                    }\n                });\n\n            },\n\n            _enter: function(callback) {\n\n                fullscreen.active = true;\n\n                if (IFRAME) {\n\n                    fullscreen.iframe = (function() {\n\n                        var elem,\n                            refer = doc.referrer,\n                            test = doc.createElement('a'),\n                            loc = window.location;\n\n                        test.href = refer;\n\n                        if (test.protocol != loc.protocol ||\n                            test.hostname != loc.hostname ||\n                            test.port != loc.port) {\n                            Galleria.raise('Parent fullscreen not available. Iframe protocol, domains and ports must match.');\n                            return false;\n                        }\n\n                        fullscreen.pd = window.parent.document;\n\n                        $(fullscreen.pd).find('iframe').each(function() {\n                            var idoc = this.contentDocument || this.contentWindow.document;\n                            if (idoc === doc) {\n                                elem = this;\n                                return false;\n                            }\n                        });\n\n                        return elem;\n                    }());\n\n                }\n\n                // hide the image until rescale is complete\n                Utils.hide(self.getActiveImage());\n\n                if (IFRAME && fullscreen.iframe) {\n                    fullscreen.iframe.scrolled = $(window.parent).scrollTop();\n                    window.parent.scrollTo(0, 0);\n                }\n\n                var data = self.getData(),\n                    options = self._options,\n                    inBrowser = !self._options.trueFullscreen || !_nativeFullscreen.support,\n                    htmlbody = {\n                        height: '100%',\n                        overflow: 'hidden',\n                        margin: 0,\n                        padding: 0\n                    };\n\n                if (inBrowser) {\n\n                    self.$('container').addClass('fullscreen');\n                    fullscreen.prev = self.$('container').prev();\n\n                    if (!fullscreen.prev.length) {\n                        fullscreen.parent = self.$('container').parent();\n                    }\n\n                    // move\n                    self.$('container').appendTo('body');\n\n                    // begin styleforce\n\n                    Utils.forceStyles(self.get('container'), {\n                        position: Galleria.TOUCH ? 'absolute' : 'fixed',\n                        top: 0,\n                        left: 0,\n                        width: '100%',\n                        height: '100%',\n                        zIndex: 10000\n                    });\n                    Utils.forceStyles(DOM().html, htmlbody);\n                    Utils.forceStyles(DOM().body, htmlbody);\n                }\n\n                if (IFRAME && fullscreen.iframe) {\n                    Utils.forceStyles(fullscreen.pd.documentElement, htmlbody);\n                    Utils.forceStyles(fullscreen.pd.body, htmlbody);\n                    Utils.forceStyles(fullscreen.iframe, $.extend(htmlbody, {\n                        width: '100%',\n                        height: '100%',\n                        top: 0,\n                        left: 0,\n                        position: 'fixed',\n                        zIndex: 10000,\n                        border: 'none'\n                    }));\n                }\n\n                // temporarily attach some keys\n                // save the old ones first in a cloned object\n                fullscreen.keymap = $.extend({}, self._keyboard.map);\n\n                self.attachKeyboard({\n                    escape: self.exitFullscreen,\n                    right: self.next,\n                    left: self.prev\n                });\n\n                // temporarily save the crop\n                fullscreen.crop = options.imageCrop;\n\n                // set fullscreen options\n                if (options.fullscreenCrop != undef) {\n                    options.imageCrop = options.fullscreenCrop;\n                }\n\n                // swap to big image if it's different from the display image\n                if (data && data.big && data.image !== data.big) {\n                    var big = new Galleria.Picture(),\n                        cached = big.isCached(data.big),\n                        index = self.getIndex(),\n                        thumb = self._thumbnails[index];\n\n                    self.trigger({\n                        type: Galleria.LOADSTART,\n                        cached: cached,\n                        rewind: false,\n                        index: index,\n                        imageTarget: self.getActiveImage(),\n                        thumbTarget: thumb,\n                        galleriaData: data\n                    });\n\n                    big.load(data.big, function(big) {\n                        self._scaleImage(big, {\n                            complete: function(big) {\n                                self.trigger({\n                                    type: Galleria.LOADFINISH,\n                                    cached: cached,\n                                    index: index,\n                                    rewind: false,\n                                    imageTarget: big.image,\n                                    thumbTarget: thumb\n                                });\n                                var image = self._controls.getActive().image;\n                                if (image) {\n                                    $(image).width(big.image.width).height(big.image.height)\n                                        .attr('style', $(big.image).attr('style'))\n                                        .attr('src', big.image.src);\n                                }\n                            }\n                        });\n                    });\n\n                    var n = self.getNext(index),\n                        p = new Galleria.Picture(),\n                        ndata = self.getData(n);\n                    p.preload(self.isFullscreen() && ndata.big ? ndata.big : ndata.image);\n                }\n\n                // init the first rescale and attach callbacks\n\n                self.rescale(function() {\n\n                    self.addTimer(false, function() {\n                        // show the image after 50 ms\n                        if (inBrowser) {\n                            Utils.show(self.getActiveImage());\n                        }\n\n                        if (typeof callback === 'function') {\n                            callback.call(self);\n                        }\n                        self.rescale();\n\n                    }, 100);\n\n                    self.trigger(Galleria.FULLSCREEN_ENTER);\n                });\n\n                if (!inBrowser) {\n                    Utils.show(self.getActiveImage());\n                } else {\n                    $win.resize(fullscreen.scale);\n                }\n\n            },\n\n            scale: function() {\n                self.rescale();\n            },\n\n            exit: function(callback) {\n\n                fullscreen.beforeExit(function() {\n\n                    callback = fullscreen.parseCallback(callback);\n\n                    if (self._options.trueFullscreen && _nativeFullscreen.support) {\n                        _nativeFullscreen.exit(callback);\n                    } else {\n                        fullscreen._exit(callback);\n                    }\n                });\n            },\n\n            _exit: function(callback) {\n\n                fullscreen.active = false;\n\n                var inBrowser = !self._options.trueFullscreen || !_nativeFullscreen.support,\n                    $container = self.$('container').removeClass('fullscreen');\n\n                // move back\n                if (fullscreen.parent) {\n                    fullscreen.parent.prepend($container);\n                } else {\n                    $container.insertAfter(fullscreen.prev);\n                }\n\n                if (inBrowser) {\n                    Utils.hide(self.getActiveImage());\n\n                    // revert all styles\n                    Utils.revertStyles(self.get('container'), DOM().html, DOM().body);\n\n                    // scroll back\n                    if (!Galleria.TOUCH) {\n                        window.scrollTo(0, fullscreen.scrolled);\n                    }\n\n                    // reload iframe src manually\n                    var frame = self._controls.frames[self._controls.active];\n                    if (frame && frame.image) {\n                        frame.image.src = frame.image.src;\n                    }\n                }\n\n                if (IFRAME && fullscreen.iframe) {\n                    Utils.revertStyles(fullscreen.pd.documentElement, fullscreen.pd.body, fullscreen.iframe);\n                    if (fullscreen.iframe.scrolled) {\n                        window.parent.scrollTo(0, fullscreen.iframe.scrolled);\n                    }\n                }\n\n                // detach all keyboard events and apply the old keymap\n                self.detachKeyboard();\n                self.attachKeyboard(fullscreen.keymap);\n\n                // bring back cached options\n                self._options.imageCrop = fullscreen.crop;\n\n                // return to original image\n                var big = self.getData().big,\n                    image = self._controls.getActive().image;\n\n                if (!self.getData().iframe && image && big && big == image.src) {\n\n                    window.setTimeout(function(src) {\n                        return function() {\n                            image.src = src;\n                        };\n                    }(self.getData().image), 1);\n\n                }\n\n                self.rescale(function() {\n                    self.addTimer(false, function() {\n\n                        // show the image after 50 ms\n                        if (inBrowser) {\n                            Utils.show(self.getActiveImage());\n                        }\n\n                        if (typeof callback === 'function') {\n                            callback.call(self);\n                        }\n\n                        $win.trigger('resize');\n\n                    }, 50);\n                    self.trigger(Galleria.FULLSCREEN_EXIT);\n                });\n\n                $win.off('resize', fullscreen.scale);\n            }\n        };\n\n        // the internal idle object for controlling idle states\n        var idle = this._idle = {\n\n            trunk: [],\n\n            bound: false,\n\n            active: false,\n\n            add: function(elem, to, from, hide) {\n                if (!elem || Galleria.TOUCH) {\n                    return;\n                }\n                if (!idle.bound) {\n                    idle.addEvent();\n                }\n                elem = $(elem);\n\n                if (typeof from == 'boolean') {\n                    hide = from;\n                    from = {};\n                }\n\n                from = from || {};\n\n                var extract = {},\n                    style;\n\n                for (style in to) {\n                    if (to.hasOwnProperty(style)) {\n                        extract[style] = elem.css(style);\n                    }\n                }\n\n                elem.data('idle', {\n                    from: $.extend(extract, from),\n                    to: to,\n                    complete: true,\n                    busy: false\n                });\n\n                if (!hide) {\n                    idle.addTimer();\n                } else {\n                    elem.css(to);\n                }\n                idle.trunk.push(elem);\n            },\n\n            remove: function(elem) {\n\n                elem = $(elem);\n\n                $.each(idle.trunk, function(i, el) {\n                    if (el && el.length && !el.not(elem).length) {\n                        elem.css(elem.data('idle').from);\n                        idle.trunk.splice(i, 1);\n                    }\n                });\n\n                if (!idle.trunk.length) {\n                    idle.removeEvent();\n                    self.clearTimer(idle.timer);\n                }\n            },\n\n            addEvent: function() {\n                idle.bound = true;\n                self.$('container').on('mousemove click', idle.showAll);\n                if (self._options.idleMode == 'hover') {\n                    self.$('container').on('mouseleave', idle.hide);\n                }\n            },\n\n            removeEvent: function() {\n                idle.bound = false;\n                self.$('container').on('mousemove click', idle.showAll);\n                if (self._options.idleMode == 'hover') {\n                    self.$('container').off('mouseleave', idle.hide);\n                }\n            },\n\n            addTimer: function() {\n                if (self._options.idleMode == 'hover') {\n                    return;\n                }\n                self.addTimer('idle', function() {\n                    idle.hide();\n                }, self._options.idleTime);\n            },\n\n            hide: function() {\n\n                if (!self._options.idleMode || self.getIndex() === false) {\n                    return;\n                }\n\n                self.trigger(Galleria.IDLE_ENTER);\n\n                var len = idle.trunk.length;\n\n                $.each(idle.trunk, function(i, elem) {\n\n                    var data = elem.data('idle');\n\n                    if (!data) {\n                        return;\n                    }\n\n                    elem.data('idle').complete = false;\n\n                    Utils.animate(elem, data.to, {\n                        duration: self._options.idleSpeed,\n                        complete: function() {\n                            if (i == len - 1) {\n                                idle.active = false;\n                            }\n                        }\n                    });\n                });\n            },\n\n            showAll: function() {\n\n                self.clearTimer('idle');\n\n                $.each(idle.trunk, function(i, elem) {\n                    idle.show(elem);\n                });\n            },\n\n            show: function(elem) {\n\n                var data = elem.data('idle');\n\n                if (!idle.active || (!data.busy && !data.complete)) {\n\n                    data.busy = true;\n\n                    self.trigger(Galleria.IDLE_EXIT);\n\n                    self.clearTimer('idle');\n\n                    Utils.animate(elem, data.from, {\n                        duration: self._options.idleSpeed / 2,\n                        complete: function() {\n                            idle.active = true;\n                            $(elem).data('idle').busy = false;\n                            $(elem).data('idle').complete = true;\n                        }\n                    });\n\n                }\n                idle.addTimer();\n            }\n        };\n\n        // internal lightbox object\n        // creates a predesigned lightbox for simple popups of images in galleria\n        var lightbox = this._lightbox = {\n\n            width: 0,\n\n            height: 0,\n\n            initialized: false,\n\n            active: null,\n\n            image: null,\n\n            elems: {},\n\n            keymap: false,\n\n            init: function() {\n\n                if (lightbox.initialized) {\n                    return;\n                }\n                lightbox.initialized = true;\n\n                // create some elements to work with\n                var elems = 'overlay box content shadow title info close prevholder prev nextholder next counter image',\n                    el = {},\n                    op = self._options,\n                    css = '',\n                    abs = 'position:absolute;',\n                    prefix = 'lightbox-',\n                    cssMap = {\n                        overlay: 'position:fixed;display:none;opacity:' + op.overlayOpacity + ';filter:alpha(opacity=' + (op.overlayOpacity * 100) +\n                            ');top:0;left:0;width:100%;height:100%;background:' + op.overlayBackground + ';z-index:99990',\n                        box: 'position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991',\n                        shadow: abs + 'background:#000;width:100%;height:100%;',\n                        content: abs + 'background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden',\n                        info: abs + 'bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px',\n                        close: abs + 'top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999',\n                        image: abs + 'top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;',\n                        prevholder: abs + 'width:50%;top:0;bottom:40px;cursor:pointer;',\n                        nextholder: abs + 'width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;',\n                        prev: abs + 'top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif',\n                        next: abs + 'top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000',\n                        title: 'float:left',\n                        counter: 'float:right;margin-left:8px;'\n                    },\n                    hover = function(elem) {\n                        return elem.hover(\n                            function() { $(this).css('color', '#bbb'); },\n                            function() { $(this).css('color', '#444'); }\n                        );\n                    },\n                    appends = {};\n\n                // fix for navigation hovers transparent background event \"feature\"\n                var exs = '';\n                if (IE > 7) {\n                    exs = IE < 9 ? 'background:#000;filter:alpha(opacity=0);' : 'background:rgba(0,0,0,0);';\n                } else {\n                    exs = 'z-index:99999';\n                }\n\n                cssMap.nextholder += exs;\n                cssMap.prevholder += exs;\n\n                // create and insert CSS\n                $.each(cssMap, function(key, value) {\n                    css += '.galleria-' + prefix + key + '{' + value + '}';\n                });\n\n                css += '.galleria-' + prefix + 'box.iframe .galleria-' + prefix + 'prevholder,' +\n                    '.galleria-' + prefix + 'box.iframe .galleria-' + prefix + 'nextholder{' +\n                    'width:100px;height:100px;top:50%;margin-top:-70px}';\n\n                Utils.insertStyleTag(css, 'galleria-lightbox');\n\n                // create the elements\n                $.each(elems.split(' '), function(i, elemId) {\n                    self.addElement('lightbox-' + elemId);\n                    el[elemId] = lightbox.elems[elemId] = self.get('lightbox-' + elemId);\n                });\n\n                // initiate the image\n                lightbox.image = new Galleria.Picture();\n\n                // append the elements\n                $.each({\n                    box: 'shadow content close prevholder nextholder',\n                    info: 'title counter',\n                    content: 'info image',\n                    prevholder: 'prev',\n                    nextholder: 'next'\n                }, function(key, val) {\n                    var arr = [];\n                    $.each(val.split(' '), function(i, prop) {\n                        arr.push(prefix + prop);\n                    });\n                    appends[prefix + key] = arr;\n                });\n\n                self.append(appends);\n\n                $(el.image).append(lightbox.image.container);\n\n                $(DOM().body).append(el.overlay, el.box);\n\n                // add the prev/next nav and bind some controls\n\n                hover($(el.close).on('click:fast', lightbox.hide).html('&#215;'));\n\n                $.each(['Prev', 'Next'], function(i, dir) {\n\n                    var $d = $(el[dir.toLowerCase()]).html(/v/.test(dir) ? '&#8249;&#160;' : '&#160;&#8250;'),\n                        $e = $(el[dir.toLowerCase() + 'holder']);\n\n                    $e.on('click:fast', function() {\n                        lightbox['show' + dir]();\n                    });\n\n                    // IE7 and touch devices will simply show the nav\n                    if (IE < 8 || Galleria.TOUCH) {\n                        $d.show();\n                        return;\n                    }\n\n                    $e.hover(function() {\n                        $d.show();\n                    }, function(e) {\n                        $d.stop().fadeOut(200);\n                    });\n\n                });\n                $(el.overlay).on('click:fast', lightbox.hide);\n\n                // the lightbox animation is slow on ipad\n                if (Galleria.IPAD) {\n                    self._options.lightboxTransitionSpeed = 0;\n                }\n\n            },\n\n            rescale: function(event) {\n\n                // calculate\n                var width = M.min($win.width() - 40, lightbox.width),\n                    height = M.min($win.height() - 60, lightbox.height),\n                    ratio = M.min(width / lightbox.width, height / lightbox.height),\n                    destWidth = M.round(lightbox.width * ratio) + 40,\n                    destHeight = M.round(lightbox.height * ratio) + 60,\n                    to = {\n                        width: destWidth,\n                        height: destHeight,\n                        'margin-top': M.ceil(destHeight / 2) * -1,\n                        'margin-left': M.ceil(destWidth / 2) * -1\n                    };\n\n                // if rescale event, don't animate\n                if (event) {\n                    $(lightbox.elems.box).css(to);\n                } else {\n                    $(lightbox.elems.box).animate(to, {\n                        duration: self._options.lightboxTransitionSpeed,\n                        easing: self._options.easing,\n                        complete: function() {\n                            var image = lightbox.image,\n                                speed = self._options.lightboxFadeSpeed;\n\n                            self.trigger({\n                                type: Galleria.LIGHTBOX_IMAGE,\n                                imageTarget: image.image\n                            });\n\n                            $(image.container).show();\n\n                            $(image.image).animate({ opacity: 1 }, speed);\n                            Utils.show(lightbox.elems.info, speed);\n                        }\n                    });\n                }\n            },\n\n            hide: function() {\n\n                // remove the image\n                lightbox.image.image = null;\n\n                $win.off('resize', lightbox.rescale);\n\n                $(lightbox.elems.box).hide().find('iframe').remove();\n\n                Utils.hide(lightbox.elems.info);\n\n                self.detachKeyboard();\n                self.attachKeyboard(lightbox.keymap);\n\n                lightbox.keymap = false;\n\n                Utils.hide(lightbox.elems.overlay, 200, function() {\n                    $(this).hide().css('opacity', self._options.overlayOpacity);\n                    self.trigger(Galleria.LIGHTBOX_CLOSE);\n                });\n            },\n\n            showNext: function() {\n                lightbox.show(self.getNext(lightbox.active));\n            },\n\n            showPrev: function() {\n                lightbox.show(self.getPrev(lightbox.active));\n            },\n\n            show: function(index) {\n\n                lightbox.active = index = typeof index === 'number' ? index : self.getIndex() || 0;\n\n                if (!lightbox.initialized) {\n                    lightbox.init();\n                }\n\n                // trigger the event\n                self.trigger(Galleria.LIGHTBOX_OPEN);\n\n                // temporarily attach some keys\n                // save the old ones first in a cloned object\n                if (!lightbox.keymap) {\n\n                    lightbox.keymap = $.extend({}, self._keyboard.map);\n\n                    self.attachKeyboard({\n                        escape: lightbox.hide,\n                        right: lightbox.showNext,\n                        left: lightbox.showPrev\n                    });\n                }\n\n                $win.off('resize', lightbox.rescale);\n\n                var data = self.getData(index),\n                    total = self.getDataLength(),\n                    n = self.getNext(index),\n                    ndata, p, i;\n\n                Utils.hide(lightbox.elems.info);\n\n                try {\n                    for (i = self._options.preload; i > 0; i--) {\n                        p = new Galleria.Picture();\n                        ndata = self.getData(n);\n                        p.preload(ndata.big ? ndata.big : ndata.image);\n                        n = self.getNext(n);\n                    }\n                } catch (e) {}\n\n                lightbox.image.isIframe = (data.iframe && !data.image);\n\n                $(lightbox.elems.box).toggleClass('iframe', lightbox.image.isIframe);\n\n                $(lightbox.image.container).find('.galleria-videoicon').remove();\n\n                lightbox.image.load(data.big || data.image || data.iframe, function(image) {\n\n                    if (image.isIframe) {\n\n                        var cw = $(window).width(),\n                            ch = $(window).height();\n\n                        if (image.video && self._options.maxVideoSize) {\n                            var r = M.min(self._options.maxVideoSize / cw, self._options.maxVideoSize / ch);\n                            if (r < 1) {\n                                cw *= r;\n                                ch *= r;\n                            }\n                        }\n                        lightbox.width = cw;\n                        lightbox.height = ch;\n\n                    } else {\n                        lightbox.width = image.original.width;\n                        lightbox.height = image.original.height;\n                    }\n\n                    $(image.image).css({\n                        width: image.isIframe ? '100%' : '100.1%',\n                        height: image.isIframe ? '100%' : '100.1%',\n                        top: 0,\n                        bottom: 0,\n                        zIndex: 99998,\n                        opacity: 0,\n                        visibility: 'visible'\n                    }).parent().height('100%');\n\n                    lightbox.elems.title.innerHTML = data.title || '';\n                    lightbox.elems.counter.innerHTML = (index + 1) + ' / ' + total;\n                    $win.resize(lightbox.rescale);\n                    lightbox.rescale();\n\n                    if (data.image && data.iframe) {\n\n                        $(lightbox.elems.box).addClass('iframe');\n\n                        if (data.video) {\n                            var $icon = _playIcon(image.container).hide();\n                            window.setTimeout(function() {\n                                $icon.fadeIn(200);\n                            }, 200);\n                        }\n\n                        $(image.image).css('cursor', 'pointer').mouseup((function(data, image) {\n                            return function(e) {\n                                $(lightbox.image.container).find('.galleria-videoicon').remove();\n                                e.preventDefault();\n                                image.isIframe = true;\n                                image.load(data.iframe + (data.video ? '&autoplay=1' : ''), {\n                                    width: '100%',\n                                    height: IE < 8 ? $(lightbox.image.container).height() : '100%'\n                                });\n                            };\n                        }(data, image)));\n                    }\n                });\n\n                $(lightbox.elems.overlay).show().css('visibility', 'visible');\n                $(lightbox.elems.box).show();\n            }\n        };\n\n        // the internal timeouts object\n        // provides helper methods for controlling timeouts\n\n        var _timer = this._timer = {\n\n            trunk: {},\n\n            add: function(id, fn, delay, loop) {\n                id = id || new Date().getTime();\n                loop = loop || false;\n                this.clear(id);\n                if (loop) {\n                    var old = fn;\n                    fn = function() {\n                        old();\n                        _timer.add(id, fn, delay);\n                    };\n                }\n                this.trunk[id] = window.setTimeout(fn, delay);\n            },\n\n            clear: function(id) {\n\n                var del = function(i) {\n                        window.clearTimeout(this.trunk[i]);\n                        delete this.trunk[i];\n                    },\n                    i;\n\n                if (!!id && id in this.trunk) {\n                    del.call(this, id);\n\n                } else if (typeof id === 'undefined') {\n                    for (i in this.trunk) {\n                        if (this.trunk.hasOwnProperty(i)) {\n                            del.call(this, i);\n                        }\n                    }\n                }\n            }\n        };\n\n        return this;\n    };\n\n    // end Galleria constructor\n\n    Galleria.prototype = {\n\n        // bring back the constructor reference\n\n        constructor: Galleria,\n\n        /**\n            Use this function to initialize the gallery and start loading.\n            Should only be called once per instance.\n\n            @param {HTMLElement} target The target element\n            @param {Object} options The gallery options\n\n            @returns Instance\n        */\n\n        init: function(target, options) {\n\n            options = _legacyOptions(options);\n\n            // save the original ingredients\n            this._original = {\n                target: target,\n                options: options,\n                data: null\n            };\n\n            // save the target here\n            this._target = this._dom.target = target.nodeName ? target : $(target).get(0);\n\n            // save the original content for destruction\n            this._original.html = this._target.innerHTML;\n\n            // push the instance\n            _instances.push(this);\n\n            // raise error if no target is detected\n            if (!this._target) {\n                Galleria.raise('Target not found', true);\n                return;\n            }\n\n            // apply options\n            this._options = {\n                autoplay: false,\n                carousel: true,\n                carouselFollow: true, // legacy, deprecate at 1.3\n                carouselSpeed: 400,\n                carouselSteps: 'auto',\n                clicknext: false,\n                dailymotion: {\n                    foreground: '%23EEEEEE',\n                    highlight: '%235BCEC5',\n                    background: '%23222222',\n                    logo: 0,\n                    hideInfos: 1\n                },\n                dataConfig: function(elem) {\n                    return {}; },\n                dataSelector: 'img',\n                dataSort: false,\n                dataSource: this._target,\n                debug: undef,\n                dummy: undef, // 1.2.5\n                easing: 'galleria',\n                extend: function(options) {},\n                fullscreenCrop: undef, // 1.2.5\n                fullscreenDoubleTap: true, // 1.2.4 toggles fullscreen on double-tap for touch devices\n                fullscreenTransition: undef, // 1.2.6\n                height: 0,\n                idleMode: true, // 1.2.4 toggles idleMode\n                idleTime: 3000,\n                idleSpeed: 200,\n                imageCrop: false,\n                imageMargin: 0,\n                imagePan: false,\n                imagePanSmoothness: 12,\n                imagePosition: '50%',\n                imageTimeout: undef, // 1.2.5\n                initialTransition: undef, // 1.2.4, replaces transitionInitial\n                keepSource: false,\n                layerFollow: true, // 1.2.5\n                lightbox: false, // 1.2.3\n                lightboxFadeSpeed: 200,\n                lightboxTransitionSpeed: 200,\n                linkSourceImages: true,\n                maxScaleRatio: undef,\n                maxVideoSize: undef, // 1.2.9\n                minScaleRatio: undef, // deprecated in 1.2.9\n                overlayOpacity: 0.85,\n                overlayBackground: '#0b0b0b',\n                pauseOnInteraction: true,\n                popupLinks: false,\n                preload: 2,\n                queue: true,\n                responsive: true,\n                show: 0,\n                showInfo: true,\n                showCounter: true,\n                showImagenav: true,\n                swipe: 'auto', // 1.2.4 -> revised in 1.3 -> changed type in 1.3.5\n                theme: null,\n                thumbCrop: true,\n                thumbEventType: 'click:fast',\n                thumbMargin: 0,\n                thumbQuality: 'auto',\n                thumbDisplayOrder: true, // 1.2.8\n                thumbPosition: '50%', // 1.3\n                thumbnails: true,\n                touchTransition: undef, // 1.2.6\n                transition: 'fade',\n                transitionInitial: undef, // legacy, deprecate in 1.3. Use initialTransition instead.\n                transitionSpeed: 400,\n                trueFullscreen: true, // 1.2.7\n                useCanvas: false, // 1.2.4\n                variation: '', // 1.3.2\n                videoPoster: true, // 1.3\n                vimeo: {\n                    title: 0,\n                    byline: 0,\n                    portrait: 0,\n                    color: 'aaaaaa'\n                },\n                wait: 5000, // 1.2.7\n                width: 'auto',\n                youtube: {\n                    modestbranding: 1,\n                    autohide: 1,\n                    color: 'white',\n                    hd: 1,\n                    rel: 0,\n                    showinfo: 0\n                }\n            };\n\n            // legacy support for transitionInitial\n            this._options.initialTransition = this._options.initialTransition || this._options.transitionInitial;\n\n            if (options) {\n\n                // turn off debug\n                if (options.debug === false) {\n                    DEBUG = false;\n                }\n\n                // set timeout\n                if (typeof options.imageTimeout === 'number') {\n                    TIMEOUT = options.imageTimeout;\n                }\n\n                // set dummy\n                if (typeof options.dummy === 'string') {\n                    DUMMY = options.dummy;\n                }\n\n                // set theme\n                if (typeof options.theme == 'string') {\n                    this._options.theme = options.theme;\n                }\n            }\n\n            // hide all content\n            $(this._target).children().hide();\n\n            // Warn for quirks mode\n            if (Galleria.QUIRK) {\n                Galleria.raise('Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML and add a correct doctype.');\n            }\n\n            // now we just have to wait for the theme...\n            // first check if it has already loaded\n            if (_loadedThemes.length) {\n                if (this._options.theme) {\n                    for (var i = 0; i < _loadedThemes.length; i++) {\n                        if (this._options.theme === _loadedThemes[i].name) {\n                            this.theme = _loadedThemes[i];\n                            break;\n                        }\n                    }\n                } else {\n                    // if no theme sepcified, apply the first loaded theme\n                    this.theme = _loadedThemes[0];\n                }\n            }\n\n            if (typeof this.theme == 'object') {\n                this._init();\n            } else {\n                // if no theme is loaded yet, push the instance into a pool and run it when the theme is ready\n                _pool.push(this);\n            }\n\n            return this;\n        },\n\n        // this method should only be called once per instance\n        // for manipulation of data, use the .load method\n\n        _init: function() {\n\n            var self = this,\n                options = this._options;\n\n            if (this._initialized) {\n                Galleria.raise('Init failed: Gallery instance already initialized.');\n                return this;\n            }\n\n            this._initialized = true;\n\n            if (!this.theme) {\n                Galleria.raise('Init failed: No theme found.', true);\n                return this;\n            }\n\n            // merge the theme & caller options\n            $.extend(true, options, this.theme.defaults, this._original.options, Galleria.configure.options);\n\n            // internally we use boolean for swipe\n            options.swipe = (function(s) {\n\n                if (s == 'enforced') {\n                    return true; }\n\n                // legacy patch\n                if (s === false || s == 'disabled') {\n                    return false; }\n\n                return !!Galleria.TOUCH;\n\n            }(options.swipe));\n\n            // disable options that arent compatible with swipe\n            if (options.swipe) {\n                options.clicknext = false;\n                options.imagePan = false;\n            }\n\n            // check for canvas support\n            (function(can) {\n                if (!('getContext' in can)) {\n                    can = null;\n                    return;\n                }\n                _canvas = _canvas || {\n                    elem: can,\n                    context: can.getContext('2d'),\n                    cache: {},\n                    length: 0\n                };\n            }(doc.createElement('canvas')));\n\n            // bind the gallery to run when data is ready\n            this.bind(Galleria.DATA, function() {\n\n                // remove big if total pixels are less than 1024 (most phones)\n                if (window.screen && window.screen.width && Array.prototype.forEach) {\n\n                    this._data.forEach(function(data) {\n\n                        var density = 'devicePixelRatio' in window ? window.devicePixelRatio : 1,\n                            m = M.max(window.screen.width, window.screen.height);\n\n                        if (m * density < 1024) {\n                            data.big = data.image;\n                        }\n                    });\n                }\n\n                // save the new data\n                this._original.data = this._data;\n\n                // lets show the counter here\n                this.get('total').innerHTML = this.getDataLength();\n\n                // cache the container\n                var $container = this.$('container');\n\n                // set ratio if height is < 2\n                if (self._options.height < 2) {\n                    self._userRatio = self._ratio = self._options.height;\n                }\n\n                // the gallery is ready, let's just wait for the css\n                var num = { width: 0, height: 0 };\n                var testHeight = function() {\n                    return self.$('stage').height();\n                };\n\n                // check container and thumbnail height\n                Utils.wait({\n                    until: function() {\n\n                        // keep trying to get the value\n                        num = self._getWH();\n                        $container.width(num.width).height(num.height);\n                        return testHeight() && num.width && num.height > 50;\n\n                    },\n                    success: function() {\n\n                        self._width = num.width;\n                        self._height = num.height;\n                        self._ratio = self._ratio || num.height / num.width;\n\n                        // for some strange reason, webkit needs a single setTimeout to play ball\n                        if (Galleria.WEBKIT) {\n                            window.setTimeout(function() {\n                                self._run();\n                            }, 1);\n                        } else {\n                            self._run();\n                        }\n                    },\n                    error: function() {\n\n                        // Height was probably not set, raise hard errors\n\n                        if (testHeight()) {\n                            Galleria.raise('Could not extract sufficient width/height of the gallery container. Traced measures: width:' + num.width + 'px, height: ' + num.height + 'px.', true);\n                        } else {\n                            Galleria.raise('Could not extract a stage height from the CSS. Traced height: ' + testHeight() + 'px.', true);\n                        }\n                    },\n                    timeout: typeof this._options.wait == 'number' ? this._options.wait : false\n                });\n            });\n\n            // build the gallery frame\n            this.append({\n                'info-text': ['info-title', 'info-description'],\n                'info': ['info-text'],\n                'image-nav': ['image-nav-right', 'image-nav-left'],\n                'stage': ['images', 'loader', 'counter', 'image-nav'],\n                'thumbnails-list': ['thumbnails'],\n                'thumbnails-container': ['thumb-nav-left', 'thumbnails-list', 'thumb-nav-right'],\n                'container': ['stage', 'thumbnails-container', 'info', 'tooltip']\n            });\n\n            Utils.hide(this.$('counter').append(\n                this.get('current'),\n                doc.createTextNode(' / '),\n                this.get('total')\n            ));\n\n            this.setCounter('&#8211;');\n\n            Utils.hide(self.get('tooltip'));\n\n            // add a notouch class on the container to prevent unwanted :hovers on touch devices\n            this.$('container').addClass([\n                (Galleria.TOUCH ? 'touch' : 'notouch'),\n                this._options.variation,\n                'galleria-theme-' + this.theme.name\n            ].join(' '));\n\n            // add images to the controls\n            if (!this._options.swipe) {\n                $.each(new Array(2), function(i) {\n\n                    // create a new Picture instance\n                    var image = new Galleria.Picture();\n\n                    // apply some styles, create & prepend overlay\n                    $(image.container).css({\n                        position: 'absolute',\n                        top: 0,\n                        left: 0\n                    }).prepend(self._layers[i] = $(Utils.create('galleria-layer')).css({\n                        position: 'absolute',\n                        top: 0,\n                        left: 0,\n                        right: 0,\n                        bottom: 0,\n                        zIndex: 2\n                    })[0]);\n\n                    // append the image\n                    self.$('images').append(image.container);\n\n                    // reload the controls\n                    self._controls[i] = image;\n\n                    // build a frame\n                    var frame = new Galleria.Picture();\n                    frame.isIframe = true;\n\n                    $(frame.container).attr('class', 'galleria-frame').css({\n                        position: 'absolute',\n                        top: 0,\n                        left: 0,\n                        zIndex: 4,\n                        background: '#000',\n                        display: 'none'\n                    }).appendTo(image.container);\n\n                    self._controls.frames[i] = frame;\n\n                });\n            }\n\n            // some forced generic styling\n            this.$('images').css({\n                position: 'relative',\n                top: 0,\n                left: 0,\n                width: '100%',\n                height: '100%'\n            });\n\n            if (options.swipe) {\n                this.$('images').css({\n                    position: 'absolute',\n                    top: 0,\n                    left: 0,\n                    width: 0,\n                    height: '100%'\n                });\n                this.finger = new Galleria.Finger(this.get('stage'), {\n                    onchange: function(page) {\n                        self.pause().show(page);\n                    },\n                    oncomplete: function(page) {\n\n                        var index = M.max(0, M.min(parseInt(page, 10), self.getDataLength() - 1)),\n                            data = self.getData(index);\n\n                        $(self._thumbnails[index].container)\n                            .addClass('active')\n                            .siblings('.active')\n                            .removeClass('active');\n\n                        if (!data) {\n                            return;\n                        }\n\n                        // remove video iframes\n                        self.$('images').find('.galleria-frame').css('opacity', 0).hide().find('iframe').remove();\n\n                        if (self._options.carousel && self._options.carouselFollow) {\n                            self._carousel.follow(index);\n                        }\n                    }\n                });\n                this.bind(Galleria.RESCALE, function() {\n                    this.finger.setup();\n                });\n                this.$('stage').on('click', function(e) {\n                    var data = self.getData();\n                    if (!data) {\n                        return;\n                    }\n                    if (data.iframe) {\n\n                        if (self.isPlaying()) {\n                            self.pause();\n                        }\n                        var frame = self._controls.frames[self._active],\n                            w = self._stageWidth,\n                            h = self._stageHeight;\n\n                        if ($(frame.container).find('iframe').length) {\n                            return;\n                        }\n\n                        $(frame.container).css({\n                            width: w,\n                            height: h,\n                            opacity: 0\n                        }).show().animate({\n                            opacity: 1\n                        }, 200);\n\n                        window.setTimeout(function() {\n                            frame.load(data.iframe + (data.video ? '&autoplay=1' : ''), {\n                                width: w,\n                                height: h\n                            }, function(frame) {\n                                self.$('container').addClass('videoplay');\n                                frame.scale({\n                                    width: self._stageWidth,\n                                    height: self._stageHeight,\n                                    iframelimit: data.video ? self._options.maxVideoSize : undef\n                                });\n                            });\n                        }, 100);\n\n                        return;\n                    }\n\n                    if (data.link) {\n                        if (self._options.popupLinks) {\n                            var win = window.open(data.link, '_blank');\n                        } else {\n                            window.location.href = data.link;\n                        }\n                        return;\n                    }\n                });\n                this.bind(Galleria.IMAGE, function(e) {\n\n                    self.setCounter(e.index);\n                    self.setInfo(e.index);\n\n                    var next = this.getNext(),\n                        prev = this.getPrev();\n\n                    var preloads = [prev, next];\n                    preloads.push(this.getNext(next), this.getPrev(prev), self._controls.slides.length - 1);\n\n                    var filtered = [];\n\n                    $.each(preloads, function(i, val) {\n                        if ($.inArray(val, filtered) == -1) {\n                            filtered.push(val);\n                        }\n                    });\n\n                    $.each(filtered, function(i, loadme) {\n                        var d = self.getData(loadme),\n                            img = self._controls.slides[loadme],\n                            src = self.isFullscreen() && d.big ? d.big : (d.image || d.iframe);\n\n                        if (d.iframe && !d.image) {\n                            img.isIframe = true;\n                        }\n\n                        if (!img.ready) {\n                            self._controls.slides[loadme].load(src, function(img) {\n                                if (!img.isIframe) {\n                                    $(img.image).css('visibility', 'hidden');\n                                }\n                                self._scaleImage(img, {\n                                    complete: function(img) {\n                                        if (!img.isIframe) {\n                                            $(img.image).css({\n                                                opacity: 0,\n                                                visibility: 'visible'\n                                            }).animate({\n                                                opacity: 1\n                                            }, 200);\n                                        }\n                                    }\n                                });\n                            });\n                        }\n                    });\n                });\n            }\n\n            this.$('thumbnails, thumbnails-list').css({\n                overflow: 'hidden',\n                position: 'relative'\n            });\n\n            // bind image navigation arrows\n            this.$('image-nav-right, image-nav-left').on('click:fast', function(e) {\n\n                // pause if options is set\n                if (options.pauseOnInteraction) {\n                    self.pause();\n                }\n\n                // navigate\n                var fn = /right/.test(this.className) ? 'next' : 'prev';\n                self[fn]();\n\n            }).on('click', function(e) {\n\n                e.preventDefault();\n\n                // tune the clicknext option\n                if (options.clicknext || options.swipe) {\n                    e.stopPropagation();\n                }\n            });\n\n            // hide controls if chosen to\n            $.each(['info', 'counter', 'image-nav'], function(i, el) {\n                if (options['show' + el.substr(0, 1).toUpperCase() + el.substr(1).replace(/-/, '')] === false) {\n                    Utils.moveOut(self.get(el.toLowerCase()));\n                }\n            });\n\n            // load up target content\n            this.load();\n\n            // now it's usually safe to remove the content\n            // IE will never stop loading if we remove it, so let's keep it hidden for IE (it's usually fast enough anyway)\n            if (!options.keepSource && !IE) {\n                this._target.innerHTML = '';\n            }\n\n            // re-append the errors, if they happened before clearing\n            if (this.get('errors')) {\n                this.appendChild('target', 'errors');\n            }\n\n            // append the gallery frame\n            this.appendChild('target', 'container');\n\n            // parse the carousel on each thumb load\n            if (options.carousel) {\n                var count = 0,\n                    show = options.show;\n                this.bind(Galleria.THUMBNAIL, function() {\n                    this.updateCarousel();\n                    if (++count == this.getDataLength() && typeof show == 'number' && show > 0) {\n                        this._carousel.follow(show);\n                    }\n                });\n            }\n\n            // bind window resize for responsiveness\n            if (options.responsive) {\n                $win.on('resize', function() {\n                    if (!self.isFullscreen()) {\n                        self.resize();\n                    }\n                });\n            }\n\n            // double-tap/click fullscreen toggle\n\n            if (options.fullscreenDoubleTap) {\n\n                this.$('stage').on('touchstart', (function() {\n                    var last, cx, cy, lx, ly, now,\n                        getData = function(e) {\n                            return e.originalEvent.touches ? e.originalEvent.touches[0] : e;\n                        };\n                    self.$('stage').on('touchmove', function() {\n                        last = 0;\n                    });\n                    return function(e) {\n                        if (/(-left|-right)/.test(e.target.className)) {\n                            return;\n                        }\n                        now = Utils.timestamp();\n                        cx = getData(e).pageX;\n                        cy = getData(e).pageY;\n                        if (e.originalEvent.touches.length < 2 && (now - last < 300) && (cx - lx < 20) && (cy - ly < 20)) {\n                            self.toggleFullscreen();\n                            e.preventDefault();\n                            return;\n                        }\n                        last = now;\n                        lx = cx;\n                        ly = cy;\n                    };\n                }()));\n            }\n\n            // bind the ons\n            $.each(Galleria.on.binds, function(i, bind) {\n                // check if already bound\n                if ($.inArray(bind.hash, self._binds) == -1) {\n                    self.bind(bind.type, bind.callback);\n                }\n            });\n\n            return this;\n        },\n\n        addTimer: function() {\n            this._timer.add.apply(this._timer, Utils.array(arguments));\n            return this;\n        },\n\n        clearTimer: function() {\n            this._timer.clear.apply(this._timer, Utils.array(arguments));\n            return this;\n        },\n\n        // parse width & height from CSS or options\n\n        _getWH: function() {\n\n            var $container = this.$('container'),\n                $target = this.$('target'),\n                self = this,\n                num = {},\n                arr;\n\n            $.each(['width', 'height'], function(i, m) {\n\n                // first check if options is set\n                if (self._options[m] && typeof self._options[m] === 'number') {\n                    num[m] = self._options[m];\n                } else {\n\n                    arr = [\n                        Utils.parseValue($container.css(m)), // the container css height\n                        Utils.parseValue($target.css(m)), // the target css height\n                        $container[m](), // the container jQuery method\n                        $target[m]() // the target jQuery method\n                    ];\n\n                    // if first time, include the min-width & min-height\n                    if (!self['_' + m]) {\n                        arr.splice(arr.length,\n                            Utils.parseValue($container.css('min-' + m)),\n                            Utils.parseValue($target.css('min-' + m))\n                        );\n                    }\n\n                    // else extract the measures from different sources and grab the highest value\n                    num[m] = M.max.apply(M, arr);\n                }\n            });\n\n            // allow setting a height ratio instead of exact value\n            // useful when doing responsive galleries\n\n            if (self._userRatio) {\n                num.height = num.width * self._userRatio;\n            }\n\n            return num;\n        },\n\n        // Creates the thumbnails and carousel\n        // can be used at any time, f.ex when the data object is manipulated\n        // push is an optional argument with pushed images\n\n        _createThumbnails: function(push) {\n\n            this.get('total').innerHTML = this.getDataLength();\n\n            var src,\n                thumb,\n                data,\n\n                $container,\n\n                self = this,\n                o = this._options,\n\n                i = push ? this._data.length - push.length : 0,\n                chunk = i,\n\n                thumbchunk = [],\n                loadindex = 0,\n\n                gif = IE < 8 ? 'http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif' :\n                'data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D',\n\n                // get previously active thumbnail, if exists\n                active = (function() {\n                    var a = self.$('thumbnails').find('.active');\n                    if (!a.length) {\n                        return false;\n                    }\n                    return a.find('img').attr('src');\n                }()),\n\n                // cache the thumbnail option\n                optval = typeof o.thumbnails === 'string' ? o.thumbnails.toLowerCase() : null,\n\n                // move some data into the instance\n                // for some reason, jQuery cant handle css(property) when zooming in FF, breaking the gallery\n                // so we resort to getComputedStyle for browsers who support it\n                getStyle = function(prop) {\n                    return doc.defaultView && doc.defaultView.getComputedStyle ?\n                        doc.defaultView.getComputedStyle(thumb.container, null)[prop] :\n                        $container.css(prop);\n                },\n\n                fake = function(image, index, container) {\n                    return function() {\n                        $(container).append(image);\n                        self.trigger({\n                            type: Galleria.THUMBNAIL,\n                            thumbTarget: image,\n                            index: index,\n                            galleriaData: self.getData(index)\n                        });\n                    };\n                },\n\n                onThumbEvent = function(e) {\n\n                    // pause if option is set\n                    if (o.pauseOnInteraction) {\n                        self.pause();\n                    }\n\n                    // extract the index from the data\n                    var index = $(e.currentTarget).data('index');\n                    if (self.getIndex() !== index) {\n                        self.show(index);\n                    }\n\n                    e.preventDefault();\n                },\n\n                thumbComplete = function(thumb, callback) {\n\n                    $(thumb.container).css('visibility', 'visible');\n                    self.trigger({\n                        type: Galleria.THUMBNAIL,\n                        thumbTarget: thumb.image,\n                        index: thumb.data.order,\n                        galleriaData: self.getData(thumb.data.order)\n                    });\n\n                    if (typeof callback == 'function') {\n                        callback.call(self, thumb);\n                    }\n                },\n\n                onThumbLoad = function(thumb, callback) {\n\n                    // scale when ready\n                    thumb.scale({\n                        width: thumb.data.width,\n                        height: thumb.data.height,\n                        crop: o.thumbCrop,\n                        margin: o.thumbMargin,\n                        canvas: o.useCanvas,\n                        position: o.thumbPosition,\n                        complete: function(thumb) {\n\n                            // shrink thumbnails to fit\n                            var top = ['left', 'top'],\n                                arr = ['Width', 'Height'],\n                                m,\n                                css,\n                                data = self.getData(thumb.index);\n\n                            // calculate shrinked positions\n                            $.each(arr, function(i, measure) {\n                                m = measure.toLowerCase();\n                                if ((o.thumbCrop !== true || o.thumbCrop === m)) {\n                                    css = {};\n                                    css[m] = thumb[m];\n                                    $(thumb.container).css(css);\n                                    css = {};\n                                    css[top[i]] = 0;\n                                    $(thumb.image).css(css);\n                                }\n\n                                // cache outer measures\n                                thumb['outer' + measure] = $(thumb.container)['outer' + measure](true);\n                            });\n\n                            // set high quality if downscale is moderate\n                            Utils.toggleQuality(thumb.image,\n                                o.thumbQuality === true ||\n                                (o.thumbQuality === 'auto' && thumb.original.width < thumb.width * 3)\n                            );\n\n                            if (o.thumbDisplayOrder && !thumb.lazy) {\n\n                                $.each(thumbchunk, function(i, th) {\n                                    if (i === loadindex && th.ready && !th.displayed) {\n\n                                        loadindex++;\n                                        th.displayed = true;\n\n                                        thumbComplete(th, callback);\n\n                                        return;\n                                    }\n                                });\n                            } else {\n                                thumbComplete(thumb, callback);\n                            }\n                        }\n                    });\n                };\n\n            if (!push) {\n                this._thumbnails = [];\n                this.$('thumbnails').empty();\n            }\n\n            // loop through data and create thumbnails\n            for (; this._data[i]; i++) {\n\n                data = this._data[i];\n\n                // get source from thumb or image\n                src = data.thumb || data.image;\n\n                if ((o.thumbnails === true || optval == 'lazy') && (data.thumb || data.image)) {\n\n                    // add a new Picture instance\n                    thumb = new Galleria.Picture(i);\n\n                    // save the index\n                    thumb.index = i;\n\n                    // flag displayed\n                    thumb.displayed = false;\n\n                    // flag lazy\n                    thumb.lazy = false;\n\n                    // flag video\n                    thumb.video = false;\n\n                    // append the thumbnail\n                    this.$('thumbnails').append(thumb.container);\n\n                    // cache the container\n                    $container = $(thumb.container);\n\n                    // hide it\n                    $container.css('visibility', 'hidden');\n\n                    thumb.data = {\n                        width: Utils.parseValue(getStyle('width')),\n                        height: Utils.parseValue(getStyle('height')),\n                        order: i,\n                        src: src\n                    };\n\n                    // grab & reset size for smoother thumbnail loads\n                    if (o.thumbCrop !== true) {\n                        $container.css({ width: 'auto', height: 'auto' });\n                    } else {\n                        $container.css({ width: thumb.data.width, height: thumb.data.height });\n                    }\n\n                    // load the thumbnail\n                    if (optval == 'lazy') {\n\n                        $container.addClass('lazy');\n\n                        thumb.lazy = true;\n\n                        thumb.load(gif, {\n                            height: thumb.data.height,\n                            width: thumb.data.width\n                        });\n\n                    } else {\n                        thumb.load(src, onThumbLoad);\n                    }\n\n                    // preload all images here\n                    if (o.preload === 'all') {\n                        thumb.preload(data.image);\n                    }\n\n                    // create empty spans if thumbnails is set to 'empty'\n                } else if ((data.iframe && optval !== null) || optval === 'empty' || optval === 'numbers') {\n                    thumb = {\n                        container: Utils.create('galleria-image'),\n                        image: Utils.create('img', 'span'),\n                        ready: true,\n                        data: {\n                            order: i\n                        }\n                    };\n\n                    // create numbered thumbnails\n                    if (optval === 'numbers') {\n                        $(thumb.image).text(i + 1);\n                    }\n\n                    if (data.iframe) {\n                        $(thumb.image).addClass('iframe');\n                    }\n\n                    this.$('thumbnails').append(thumb.container);\n\n                    // we need to \"fake\" a loading delay before we append and trigger\n                    // 50+ should be enough\n\n                    window.setTimeout((fake)(thumb.image, i, thumb.container), 50 + (i * 20));\n\n                    // create null object to silent errors\n                } else {\n                    thumb = {\n                        container: null,\n                        image: null\n                    };\n                }\n\n                // add events for thumbnails\n                // you can control the event type using thumb_event_type\n                // we'll add the same event to the source if it's kept\n\n                $(thumb.container).add(o.keepSource && o.linkSourceImages ? data.original : null)\n                    .data('index', i).on(o.thumbEventType, onThumbEvent)\n                    .data('thumbload', onThumbLoad);\n\n                if (active === src) {\n                    $(thumb.container).addClass('active');\n                }\n\n                this._thumbnails.push(thumb);\n            }\n\n            thumbchunk = this._thumbnails.slice(chunk);\n\n            return this;\n        },\n\n        /**\n            Lazy-loads thumbnails.\n            You can call this method to load lazy thumbnails at run time\n\n            @param {Array|Number} index Index or array of indexes of thumbnails to be loaded\n            @param {Function} complete Callback that is called when all lazy thumbnails have been loaded\n\n            @returns Instance\n        */\n\n        lazyLoad: function(index, complete) {\n\n            var arr = index.constructor == Array ? index : [index],\n                self = this,\n                loaded = 0;\n\n            $.each(arr, function(i, ind) {\n\n                if (ind > self._thumbnails.length - 1) {\n                    return;\n                }\n\n                var thumb = self._thumbnails[ind],\n                    data = thumb.data,\n                    callback = function() {\n                        if (++loaded == arr.length && typeof complete == 'function') {\n                            complete.call(self);\n                        }\n                    },\n                    thumbload = $(thumb.container).data('thumbload');\n                if (thumb.video) {\n                    thumbload.call(self, thumb, callback);\n                } else {\n                    thumb.load(data.src, function(thumb) {\n                        thumbload.call(self, thumb, callback);\n                    });\n                }\n            });\n\n            return this;\n\n        },\n\n        /**\n            Lazy-loads thumbnails in chunks.\n            This method automatcally chops up the loading process of many thumbnails into chunks\n\n            @param {Number} size Size of each chunk to be loaded\n            @param {Number} [delay] Delay between each loads\n\n            @returns Instance\n        */\n\n        lazyLoadChunks: function(size, delay) {\n\n            var len = this.getDataLength(),\n                i = 0,\n                n = 0,\n                arr = [],\n                temp = [],\n                self = this;\n\n            delay = delay || 0;\n\n            for (; i < len; i++) {\n                temp.push(i);\n                if (++n == size || i == len - 1) {\n                    arr.push(temp);\n                    n = 0;\n                    temp = [];\n                }\n            }\n\n            var init = function(wait) {\n                var a = arr.shift();\n                if (a) {\n                    window.setTimeout(function() {\n                        self.lazyLoad(a, function() {\n                            init(true);\n                        });\n                    }, (delay && wait) ? delay : 0);\n                }\n            };\n\n            init(false);\n\n            return this;\n\n        },\n\n        // the internal _run method should be called after loading data into galleria\n        // makes sure the gallery has proper measurements before postrun & ready\n        _run: function() {\n\n            var self = this;\n\n            self._createThumbnails();\n\n            // make sure we have a stageHeight && stageWidth\n\n            Utils.wait({\n\n                timeout: 10000,\n\n                until: function() {\n\n                    // Opera crap\n                    if (Galleria.OPERA) {\n                        self.$('stage').css('display', 'inline-block');\n                    }\n\n                    self._stageWidth = self.$('stage').width();\n                    self._stageHeight = self.$('stage').height();\n\n                    return (self._stageWidth &&\n                        self._stageHeight > 50); // what is an acceptable height?\n                },\n\n                success: function() {\n\n                    // save the instance\n                    _galleries.push(self);\n\n                    // postrun some stuff after the gallery is ready\n\n                    // create the touch slider\n                    if (self._options.swipe) {\n\n                        var $images = self.$('images').width(self.getDataLength() * self._stageWidth);\n                        $.each(new Array(self.getDataLength()), function(i) {\n\n                            var image = new Galleria.Picture(),\n                                data = self.getData(i);\n\n                            $(image.container).css({\n                                position: 'absolute',\n                                top: 0,\n                                left: self._stageWidth * i\n                            }).prepend(self._layers[i] = $(Utils.create('galleria-layer')).css({\n                                position: 'absolute',\n                                top: 0,\n                                left: 0,\n                                right: 0,\n                                bottom: 0,\n                                zIndex: 2\n                            })[0]).appendTo($images);\n\n                            if (data.video) {\n                                _playIcon(image.container);\n                            }\n\n                            self._controls.slides.push(image);\n\n                            var frame = new Galleria.Picture();\n                            frame.isIframe = true;\n\n                            $(frame.container).attr('class', 'galleria-frame').css({\n                                position: 'absolute',\n                                top: 0,\n                                left: 0,\n                                zIndex: 4,\n                                background: '#000',\n                                display: 'none'\n                            }).appendTo(image.container);\n\n                            self._controls.frames.push(frame);\n                        });\n\n                        self.finger.setup();\n                    }\n\n                    // show counter\n                    Utils.show(self.get('counter'));\n\n                    // bind carousel nav\n                    if (self._options.carousel) {\n                        self._carousel.bindControls();\n                    }\n\n                    // start autoplay\n                    if (self._options.autoplay) {\n\n                        self.pause();\n\n                        if (typeof self._options.autoplay === 'number') {\n                            self._playtime = self._options.autoplay;\n                        }\n\n                        self._playing = true;\n                    }\n                    // if second load, just do the show and return\n                    if (self._firstrun) {\n\n                        if (self._options.autoplay) {\n                            self.trigger(Galleria.PLAY);\n                        }\n\n                        if (typeof self._options.show === 'number') {\n                            self.show(self._options.show);\n                        }\n                        return;\n                    }\n\n                    self._firstrun = true;\n\n                    // initialize the History plugin\n                    if (Galleria.History) {\n\n                        // bind the show method\n                        Galleria.History.change(function(value) {\n\n                            // if ID is NaN, the user pressed back from the first image\n                            // return to previous address\n                            if (isNaN(value)) {\n                                window.history.go(-1);\n\n                                // else show the image\n                            } else {\n                                self.show(value, undef, true);\n                            }\n                        });\n                    }\n\n                    self.trigger(Galleria.READY);\n\n                    // call the theme init method\n                    self.theme.init.call(self, self._options);\n\n                    // Trigger Galleria.ready\n                    $.each(Galleria.ready.callbacks, function(i, fn) {\n                        if (typeof fn == 'function') {\n                            fn.call(self, self._options);\n                        }\n                    });\n\n                    // call the extend option\n                    self._options.extend.call(self, self._options);\n\n                    // show the initial image\n                    // first test for permalinks in history\n                    if (/^[0-9]{1,4}$/.test(HASH) && Galleria.History) {\n                        self.show(HASH, undef, true);\n\n                    } else if (self._data[self._options.show]) {\n                        self.show(self._options.show);\n                    }\n\n                    // play trigger\n                    if (self._options.autoplay) {\n                        self.trigger(Galleria.PLAY);\n                    }\n                },\n\n                error: function() {\n                    Galleria.raise('Stage width or height is too small to show the gallery. Traced measures: width:' + self._stageWidth + 'px, height: ' + self._stageHeight + 'px.', true);\n                }\n\n            });\n        },\n\n        /**\n            Loads data into the gallery.\n            You can call this method on an existing gallery to reload the gallery with new data.\n\n            @param {Array|string} [source] Optional JSON array of data or selector of where to find data in the document.\n            Defaults to the Galleria target or dataSource option.\n\n            @param {string} [selector] Optional element selector of what elements to parse.\n            Defaults to 'img'.\n\n            @param {Function} [config] Optional function to modify the data extraction proceedure from the selector.\n            See the dataConfig option for more information.\n\n            @returns Instance\n        */\n\n        load: function(source, selector, config) {\n\n            var self = this,\n                o = this._options;\n\n            // empty the data array\n            this._data = [];\n\n            // empty the thumbnails\n            this._thumbnails = [];\n            this.$('thumbnails').empty();\n\n            // shorten the arguments\n            if (typeof selector === 'function') {\n                config = selector;\n                selector = null;\n            }\n\n            // use the source set by target\n            source = source || o.dataSource;\n\n            // use selector set by option\n            selector = selector || o.dataSelector;\n\n            // use the dataConfig set by option\n            config = config || o.dataConfig;\n\n            // if source is a true object, make it into an array\n            if ($.isPlainObject(source)) {\n                source = [source];\n            }\n\n            // check if the data is an array already\n            if ($.isArray(source)) {\n                if (this.validate(source)) {\n                    this._data = source;\n                } else {\n                    Galleria.raise('Load failed: JSON Array not valid.');\n                }\n            } else {\n\n                // add .video and .iframe to the selector (1.2.7)\n                selector += ',.video,.iframe';\n\n                // loop through images and set data\n                $(source).find(selector).each(function(i, elem) {\n\n                    elem = $(elem);\n                    var data = {},\n                        parent = elem.parent(),\n                        href = parent.attr('href'),\n                        rel = parent.attr('rel');\n\n                    if (href && (elem[0].nodeName == 'IMG' || elem.hasClass('video')) && _videoTest(href)) {\n                        data.video = href;\n                    } else if (href && elem.hasClass('iframe')) {\n                        data.iframe = href;\n                    } else {\n                        data.image = data.big = href;\n                    }\n\n                    if (rel) {\n                        data.big = rel;\n                    }\n\n                    // alternative extraction from HTML5 data attribute, added in 1.2.7\n                    $.each('big title description link layer image'.split(' '), function(i, val) {\n                        if (elem.data(val)) {\n                            data[val] = elem.data(val).toString();\n                        }\n                    });\n\n                    if (!data.big) {\n                        data.big = data.image;\n                    }\n\n                    // mix default extractions with the hrefs and config\n                    // and push it into the data array\n                    self._data.push($.extend({\n\n                        title: elem.attr('title') || '',\n                        thumb: elem.attr('src'),\n                        image: elem.attr('src'),\n                        big: elem.attr('src'),\n                        description: elem.attr('alt') || '',\n                        link: elem.attr('longdesc'),\n                        original: elem.get(0) // saved as a reference\n\n                    }, data, config(elem)));\n\n                });\n            }\n\n            if (typeof o.dataSort == 'function') {\n                protoArray.sort.call(this._data, o.dataSort);\n            } else if (o.dataSort == 'random') {\n                this._data.sort(function() {\n                    return M.round(M.random()) - 0.5;\n                });\n            }\n\n            // trigger the DATA event and return\n            if (this.getDataLength()) {\n                this._parseData(function() {\n                    this.trigger(Galleria.DATA);\n                });\n            }\n            return this;\n\n        },\n\n        // make sure the data works properly\n        _parseData: function(callback) {\n\n            var self = this,\n                current,\n                ready = false,\n                onload = function() {\n                    var complete = true;\n                    $.each(self._data, function(i, data) {\n                        if (data.loading) {\n                            complete = false;\n                            return false;\n                        }\n                    });\n                    if (complete && !ready) {\n                        ready = true;\n                        callback.call(self);\n                    }\n                };\n\n            $.each(this._data, function(i, data) {\n\n                current = self._data[i];\n\n                // copy image as thumb if no thumb exists\n                if ('thumb' in data === false) {\n                    current.thumb = data.image;\n                }\n                // copy image as big image if no biggie exists\n                if (!data.big) {\n                    current.big = data.image;\n                }\n                // parse video\n                if ('video' in data) {\n                    var result = _videoTest(data.video);\n\n                    if (result) {\n                        current.iframe = new Video(result.provider, result.id).embed() + (function() {\n\n                            // add options\n                            if (typeof self._options[result.provider] == 'object') {\n                                var str = '?',\n                                    arr = [];\n                                $.each(self._options[result.provider], function(key, val) {\n                                    arr.push(key + '=' + val);\n                                });\n\n                                // small youtube specifics, perhaps move to _video later\n                                if (result.provider == 'youtube') {\n                                    arr = ['wmode=opaque'].concat(arr);\n                                }\n                                return str + arr.join('&');\n                            }\n                            return '';\n                        }());\n\n                        // pre-fetch video providers media\n\n                        if (!current.thumb || !current.image) {\n                            $.each(['thumb', 'image'], function(i, type) {\n                                if (type == 'image' && !self._options.videoPoster) {\n                                    current.image = undef;\n                                    return;\n                                }\n                                var video = new Video(result.provider, result.id);\n                                if (!current[type]) {\n                                    current.loading = true;\n                                    video.getMedia(type, (function(current, type) {\n                                        return function(src) {\n                                            current[type] = src;\n                                            if (type == 'image' && !current.big) {\n                                                current.big = current.image;\n                                            }\n                                            delete current.loading;\n                                            onload();\n                                        };\n                                    }(current, type)));\n                                }\n                            });\n                        }\n                    }\n                }\n            });\n\n            onload();\n\n            return this;\n        },\n\n        /**\n            Destroy the Galleria instance and recover the original content\n\n            @example this.destroy();\n\n            @returns Instance\n        */\n\n        destroy: function() {\n            this.$('target').data('galleria', null);\n            this.$('container').off('galleria');\n            this.get('target').innerHTML = this._original.html;\n            this.clearTimer();\n            Utils.removeFromArray(_instances, this);\n            Utils.removeFromArray(_galleries, this);\n            if (Galleria._waiters.length) {\n                $.each(Galleria._waiters, function(i, w) {\n                    if (w) window.clearTimeout(w);\n                });\n            }\n            return this;\n        },\n\n        /**\n            Adds and/or removes images from the gallery\n            Works just like Array.splice\n            https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice\n\n            @example this.splice( 2, 4 ); // removes 4 images after the second image\n\n            @returns Instance\n        */\n\n        splice: function() {\n            var self = this,\n                args = Utils.array(arguments);\n            window.setTimeout(function() {\n                protoArray.splice.apply(self._data, args);\n                self._parseData(function() {\n                    self._createThumbnails();\n                });\n            }, 2);\n            return self;\n        },\n\n        /**\n            Append images to the gallery\n            Works just like Array.push\n            https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push\n\n            @example this.push({ image: 'image1.jpg' }); // appends the image to the gallery\n\n            @returns Instance\n        */\n\n        push: function() {\n            var self = this,\n                args = Utils.array(arguments);\n\n            if (args.length == 1 && args[0].constructor == Array) {\n                args = args[0];\n            }\n\n            window.setTimeout(function() {\n                protoArray.push.apply(self._data, args);\n                self._parseData(function() {\n                    self._createThumbnails(args);\n                });\n            }, 2);\n            return self;\n        },\n\n        _getActive: function() {\n            return this._controls.getActive();\n        },\n\n        validate: function(data) {\n            // todo: validate a custom data array\n            return true;\n        },\n\n        /**\n            Bind any event to Galleria\n\n            @param {string} type The Event type to listen for\n            @param {Function} fn The function to execute when the event is triggered\n\n            @example this.bind( 'image', function() { Galleria.log('image shown') });\n\n            @returns Instance\n        */\n\n        bind: function(type, fn) {\n\n            // allow 'image' instead of Galleria.IMAGE\n            type = _patchEvent(type);\n\n            this.$('container').on(type, this.proxy(fn));\n            return this;\n        },\n\n        /**\n            Unbind any event to Galleria\n\n            @param {string} type The Event type to forget\n\n            @returns Instance\n        */\n\n        unbind: function(type) {\n\n            type = _patchEvent(type);\n\n            this.$('container').off(type);\n            return this;\n        },\n\n        /**\n            Manually trigger a Galleria event\n\n            @param {string} type The Event to trigger\n\n            @returns Instance\n        */\n\n        trigger: function(type) {\n\n            type = typeof type === 'object' ?\n                $.extend(type, { scope: this }) : { type: _patchEvent(type), scope: this };\n\n            this.$('container').trigger(type);\n\n            return this;\n        },\n\n        /**\n            Assign an \"idle state\" to any element.\n            The idle state will be applied after a certain amount of idle time\n            Useful to hide f.ex navigation when the gallery is inactive\n\n            @param {HTMLElement|string} elem The Dom node or selector to apply the idle state to\n            @param {Object} styles the CSS styles to apply when in idle mode\n            @param {Object} [from] the CSS styles to apply when in normal\n            @param {Boolean} [hide] set to true if you want to hide it first\n\n            @example addIdleState( this.get('image-nav'), { opacity: 0 });\n            @example addIdleState( '.galleria-image-nav', { top: -200 }, true);\n\n            @returns Instance\n        */\n\n        addIdleState: function(elem, styles, from, hide) {\n            this._idle.add.apply(this._idle, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Removes any idle state previously set using addIdleState()\n\n            @param {HTMLElement|string} elem The Dom node or selector to remove the idle state from.\n\n            @returns Instance\n        */\n\n        removeIdleState: function(elem) {\n            this._idle.remove.apply(this._idle, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Force Galleria to enter idle mode.\n\n            @returns Instance\n        */\n\n        enterIdleMode: function() {\n            this._idle.hide();\n            return this;\n        },\n\n        /**\n            Force Galleria to exit idle mode.\n\n            @returns Instance\n        */\n\n        exitIdleMode: function() {\n            this._idle.showAll();\n            return this;\n        },\n\n        /**\n            Enter FullScreen mode\n\n            @param {Function} callback the function to be executed when the fullscreen mode is fully applied.\n\n            @returns Instance\n        */\n\n        enterFullscreen: function(callback) {\n            this._fullscreen.enter.apply(this, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Exits FullScreen mode\n\n            @param {Function} callback the function to be executed when the fullscreen mode is fully applied.\n\n            @returns Instance\n        */\n\n        exitFullscreen: function(callback) {\n            this._fullscreen.exit.apply(this, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Toggle FullScreen mode\n\n            @param {Function} callback the function to be executed when the fullscreen mode is fully applied or removed.\n\n            @returns Instance\n        */\n\n        toggleFullscreen: function(callback) {\n            this._fullscreen[this.isFullscreen() ? 'exit' : 'enter'].apply(this, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Adds a tooltip to any element.\n            You can also call this method with an object as argument with elemID:value pairs to apply tooltips to (see examples)\n\n            @param {HTMLElement} elem The DOM Node to attach the event to\n            @param {string|Function} value The tooltip message. Can also be a function that returns a string.\n\n            @example this.bindTooltip( this.get('thumbnails'), 'My thumbnails');\n            @example this.bindTooltip( this.get('thumbnails'), function() { return 'My thumbs' });\n            @example this.bindTooltip( { image_nav: 'Navigation' });\n\n            @returns Instance\n        */\n\n        bindTooltip: function(elem, value) {\n            this._tooltip.bind.apply(this._tooltip, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Note: this method is deprecated. Use refreshTooltip() instead.\n\n            Redefine a tooltip.\n            Use this if you want to re-apply a tooltip value to an already bound tooltip element.\n\n            @param {HTMLElement} elem The DOM Node to attach the event to\n            @param {string|Function} value The tooltip message. Can also be a function that returns a string.\n\n            @returns Instance\n        */\n\n        defineTooltip: function(elem, value) {\n            this._tooltip.define.apply(this._tooltip, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Refresh a tooltip value.\n            Use this if you want to change the tooltip value at runtime, f.ex if you have a play/pause toggle.\n\n            @param {HTMLElement} elem The DOM Node that has a tooltip that should be refreshed\n\n            @returns Instance\n        */\n\n        refreshTooltip: function(elem) {\n            this._tooltip.show.apply(this._tooltip, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Open a pre-designed lightbox with the currently active image.\n            You can control some visuals using gallery options.\n\n            @returns Instance\n        */\n\n        openLightbox: function() {\n            this._lightbox.show.apply(this._lightbox, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Close the lightbox.\n\n            @returns Instance\n        */\n\n        closeLightbox: function() {\n            this._lightbox.hide.apply(this._lightbox, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Check if a variation exists\n\n            @returns {Boolean} If the variation has been applied\n        */\n\n        hasVariation: function(variation) {\n            return $.inArray(variation, this._options.variation.split(/\\s+/)) > -1;\n        },\n\n        /**\n            Get the currently active image element.\n\n            @returns {HTMLElement} The image element\n        */\n\n        getActiveImage: function() {\n            var active = this._getActive();\n            return active ? active.image : undef;\n        },\n\n        /**\n            Get the currently active thumbnail element.\n\n            @returns {HTMLElement} The thumbnail element\n        */\n\n        getActiveThumb: function() {\n            return this._thumbnails[this._active].image || undef;\n        },\n\n        /**\n        Get the mouse position relative to the gallery container\n\n        @param e The mouse event\n\n        @example\n\nvar gallery = this;\n$(document).mousemove(function(e) {\n    console.log( gallery.getMousePosition(e).x );\n});\n\n        @returns {Object} Object with x & y of the relative mouse postion\n    */\n\n        getMousePosition: function(e) {\n            return {\n                x: e.pageX - this.$('container').offset().left,\n                y: e.pageY - this.$('container').offset().top\n            };\n        },\n\n        /**\n            Adds a panning effect to the image\n\n            @param [img] The optional image element. If not specified it takes the currently active image\n\n            @returns Instance\n        */\n\n        addPan: function(img) {\n\n            if (this._options.imageCrop === false) {\n                return;\n            }\n\n            img = $(img || this.getActiveImage());\n\n            // define some variables and methods\n            var self = this,\n                x = img.width() / 2,\n                y = img.height() / 2,\n                destX = parseInt(img.css('left'), 10),\n                destY = parseInt(img.css('top'), 10),\n                curX = destX || 0,\n                curY = destY || 0,\n                distX = 0,\n                distY = 0,\n                active = false,\n                ts = Utils.timestamp(),\n                cache = 0,\n                move = 0,\n\n                // positions the image\n                position = function(dist, cur, pos) {\n                    if (dist > 0) {\n                        move = M.round(M.max(dist * -1, M.min(0, cur)));\n                        if (cache !== move) {\n\n                            cache = move;\n\n                            if (IE === 8) { // scroll is faster for IE\n                                img.parent()['scroll' + pos](move * -1);\n                            } else {\n                                var css = {};\n                                css[pos.toLowerCase()] = move;\n                                img.css(css);\n                            }\n                        }\n                    }\n                },\n\n                // calculates mouse position after 50ms\n                calculate = function(e) {\n                    if (Utils.timestamp() - ts < 50) {\n                        return;\n                    }\n                    active = true;\n                    x = self.getMousePosition(e).x;\n                    y = self.getMousePosition(e).y;\n                },\n\n                // the main loop to check\n                loop = function(e) {\n\n                    if (!active) {\n                        return;\n                    }\n\n                    distX = img.width() - self._stageWidth;\n                    distY = img.height() - self._stageHeight;\n                    destX = x / self._stageWidth * distX * -1;\n                    destY = y / self._stageHeight * distY * -1;\n                    curX += (destX - curX) / self._options.imagePanSmoothness;\n                    curY += (destY - curY) / self._options.imagePanSmoothness;\n\n                    position(distY, curY, 'Top');\n                    position(distX, curX, 'Left');\n\n                };\n\n            // we need to use scroll in IE8 to speed things up\n            if (IE === 8) {\n\n                img.parent().scrollTop(curY * -1).scrollLeft(curX * -1);\n                img.css({\n                    top: 0,\n                    left: 0\n                });\n\n            }\n\n            // unbind and bind event\n            this.$('stage').off('mousemove', calculate).on('mousemove', calculate);\n\n            // loop the loop\n            this.addTimer('pan' + self._id, loop, 50, true);\n\n            return this;\n        },\n\n        /**\n            Brings the scope into any callback\n\n            @param fn The callback to bring the scope into\n            @param [scope] Optional scope to bring\n\n            @example $('#fullscreen').click( this.proxy(function() { this.enterFullscreen(); }) )\n\n            @returns {Function} Return the callback with the gallery scope\n        */\n\n        proxy: function(fn, scope) {\n            if (typeof fn !== 'function') {\n                return F;\n            }\n            scope = scope || this;\n            return function() {\n                return fn.apply(scope, Utils.array(arguments));\n            };\n        },\n\n        /**\n            Tells you the theme name of the gallery\n\n            @returns {String} theme name\n        */\n\n        getThemeName: function() {\n            return this.theme.name;\n        },\n\n        /**\n            Removes the panning effect set by addPan()\n\n            @returns Instance\n        */\n\n        removePan: function() {\n\n            // todo: doublecheck IE8\n\n            this.$('stage').off('mousemove');\n\n            this.clearTimer('pan' + this._id);\n\n            return this;\n        },\n\n        /**\n            Adds an element to the Galleria DOM array.\n            When you add an element here, you can access it using element ID in many API calls\n\n            @param {string} id The element ID you wish to use. You can add many elements by adding more arguments.\n\n            @example addElement('mybutton');\n            @example addElement('mybutton','mylink');\n\n            @returns Instance\n        */\n\n        addElement: function(id) {\n\n            var dom = this._dom;\n\n            $.each(Utils.array(arguments), function(i, blueprint) {\n                dom[blueprint] = Utils.create('galleria-' + blueprint);\n            });\n\n            return this;\n        },\n\n        /**\n        Attach keyboard events to Galleria\n\n        @param {Object} map The map object of events.\n        Possible keys are 'UP', 'DOWN', 'LEFT', 'RIGHT', 'RETURN', 'ESCAPE', 'BACKSPACE', and 'SPACE'.\n\n        @example\n\nthis.attachKeyboard({\n    right: this.next,\n    left: this.prev,\n    up: function() {\n        console.log( 'up key pressed' )\n    }\n});\n\n        @returns Instance\n    */\n\n        attachKeyboard: function(map) {\n            this._keyboard.attach.apply(this._keyboard, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Detach all keyboard events to Galleria\n\n            @returns Instance\n        */\n\n        detachKeyboard: function() {\n            this._keyboard.detach.apply(this._keyboard, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Fast helper for appending galleria elements that you added using addElement()\n\n            @param {string} parentID The parent element ID where the element will be appended\n            @param {string} childID the element ID that should be appended\n\n            @example this.addElement('myElement');\n            this.appendChild( 'info', 'myElement' );\n\n            @returns Instance\n        */\n\n        appendChild: function(parentID, childID) {\n            this.$(parentID).append(this.get(childID) || childID);\n            return this;\n        },\n\n        /**\n        Fast helper for prepending galleria elements that you added using addElement()\n\n        @param {string} parentID The parent element ID where the element will be prepended\n        @param {string} childID the element ID that should be prepended\n\n        @example\n\nthis.addElement('myElement');\nthis.prependChild( 'info', 'myElement' );\n\n        @returns Instance\n    */\n\n        prependChild: function(parentID, childID) {\n            this.$(parentID).prepend(this.get(childID) || childID);\n            return this;\n        },\n\n        /**\n            Remove an element by blueprint\n\n            @param {string} elemID The element to be removed.\n            You can remove multiple elements by adding arguments.\n\n            @returns Instance\n        */\n\n        remove: function(elemID) {\n            this.$(Utils.array(arguments).join(',')).remove();\n            return this;\n        },\n\n        // a fast helper for building dom structures\n        // leave this out of the API for now\n\n        append: function(data) {\n            var i, j;\n            for (i in data) {\n                if (data.hasOwnProperty(i)) {\n                    if (data[i].constructor === Array) {\n                        for (j = 0; data[i][j]; j++) {\n                            this.appendChild(i, data[i][j]);\n                        }\n                    } else {\n                        this.appendChild(i, data[i]);\n                    }\n                }\n            }\n            return this;\n        },\n\n        // an internal helper for scaling according to options\n        _scaleImage: function(image, options) {\n\n            image = image || this._controls.getActive();\n\n            // janpub (JH) fix:\n            // image might be unselected yet\n            // e.g. when external logics rescales the gallery on window resize events\n            if (!image) {\n                return;\n            }\n\n            var complete,\n\n                scaleLayer = function(img) {\n                    $(img.container).children(':first').css({\n                        top: M.max(0, Utils.parseValue(img.image.style.top)),\n                        left: M.max(0, Utils.parseValue(img.image.style.left)),\n                        width: Utils.parseValue(img.image.width),\n                        height: Utils.parseValue(img.image.height)\n                    });\n                };\n\n            options = $.extend({\n                width: this._stageWidth,\n                height: this._stageHeight,\n                crop: this._options.imageCrop,\n                max: this._options.maxScaleRatio,\n                min: this._options.minScaleRatio,\n                margin: this._options.imageMargin,\n                position: this._options.imagePosition,\n                iframelimit: this._options.maxVideoSize\n            }, options);\n\n            if (this._options.layerFollow && this._options.imageCrop !== true) {\n\n                if (typeof options.complete == 'function') {\n                    complete = options.complete;\n                    options.complete = function() {\n                        complete.call(image, image);\n                        scaleLayer(image);\n                    };\n                } else {\n                    options.complete = scaleLayer;\n                }\n\n            } else {\n                $(image.container).children(':first').css({ top: 0, left: 0 });\n            }\n\n            image.scale(options);\n            return this;\n        },\n\n        /**\n            Updates the carousel,\n            useful if you resize the gallery and want to re-check if the carousel nav is needed.\n\n            @returns Instance\n        */\n\n        updateCarousel: function() {\n            this._carousel.update();\n            return this;\n        },\n\n        /**\n            Resize the entire gallery container\n\n            @param {Object} [measures] Optional object with width/height specified\n            @param {Function} [complete] The callback to be called when the scaling is complete\n\n            @returns Instance\n        */\n\n        resize: function(measures, complete) {\n\n            if (typeof measures == 'function') {\n                complete = measures;\n                measures = undef;\n            }\n\n            measures = $.extend({ width: 0, height: 0 }, measures);\n\n            var self = this,\n                $container = this.$('container');\n\n            $.each(measures, function(m, val) {\n                if (!val) {\n                    $container[m]('auto');\n                    measures[m] = self._getWH()[m];\n                }\n            });\n\n            $.each(measures, function(m, val) {\n                $container[m](val);\n            });\n\n            return this.rescale(complete);\n\n        },\n\n        /**\n            Rescales the gallery\n\n            @param {number} width The target width\n            @param {number} height The target height\n            @param {Function} complete The callback to be called when the scaling is complete\n\n            @returns Instance\n        */\n\n        rescale: function(width, height, complete) {\n\n            var self = this;\n\n            // allow rescale(fn)\n            if (typeof width === 'function') {\n                complete = width;\n                width = undef;\n            }\n\n            var scale = function() {\n\n                // set stagewidth\n                self._stageWidth = width || self.$('stage').width();\n                self._stageHeight = height || self.$('stage').height();\n\n                if (self._options.swipe) {\n                    $.each(self._controls.slides, function(i, img) {\n                        self._scaleImage(img);\n                        $(img.container).css('left', self._stageWidth * i);\n                    });\n                    self.$('images').css('width', self._stageWidth * self.getDataLength());\n                } else {\n                    // scale the active image\n                    self._scaleImage();\n                }\n\n                if (self._options.carousel) {\n                    self.updateCarousel();\n                }\n\n                var frame = self._controls.frames[self._controls.active];\n\n                if (frame) {\n                    self._controls.frames[self._controls.active].scale({\n                        width: self._stageWidth,\n                        height: self._stageHeight,\n                        iframelimit: self._options.maxVideoSize\n                    });\n                }\n\n                self.trigger(Galleria.RESCALE);\n\n                if (typeof complete === 'function') {\n                    complete.call(self);\n                }\n            };\n\n            scale.call(self);\n\n            return this;\n        },\n\n        /**\n            Refreshes the gallery.\n            Useful if you change image options at runtime and want to apply the changes to the active image.\n\n            @returns Instance\n        */\n\n        refreshImage: function() {\n            this._scaleImage();\n            if (this._options.imagePan) {\n                this.addPan();\n            }\n            return this;\n        },\n\n        _preload: function() {\n            if (this._options.preload) {\n                var p, i,\n                    n = this.getNext(),\n                    ndata;\n                try {\n                    for (i = this._options.preload; i > 0; i--) {\n                        p = new Galleria.Picture();\n                        ndata = this.getData(n);\n                        p.preload(this.isFullscreen() && ndata.big ? ndata.big : ndata.image);\n                        n = this.getNext(n);\n                    }\n                } catch (e) {}\n            }\n        },\n\n        /**\n            Shows an image by index\n\n            @param {number|boolean} index The index to show\n            @param {Boolean} rewind A boolean that should be true if you want the transition to go back\n\n            @returns Instance\n        */\n\n        show: function(index, rewind, _history) {\n\n            var swipe = this._options.swipe;\n\n            // do nothing queue is long || index is false || queue is false and transition is in progress\n            if (!swipe &&\n                (this._queue.length > 3 || index === false || (!this._options.queue && this._queue.stalled))) {\n                return;\n            }\n\n            index = M.max(0, M.min(parseInt(index, 10), this.getDataLength() - 1));\n\n            rewind = typeof rewind !== 'undefined' ? !!rewind : index < this.getIndex();\n\n            _history = _history || false;\n\n            // do the history thing and return\n            if (!_history && Galleria.History) {\n                Galleria.History.set(index.toString());\n                return;\n            }\n\n            if (this.finger && index !== this._active) {\n                this.finger.to = -(index * this.finger.width);\n                this.finger.index = index;\n            }\n            this._active = index;\n\n            // we do things a bit simpler in swipe:\n            if (swipe) {\n\n                var data = this.getData(index),\n                    self = this;\n                if (!data) {\n                    return;\n                }\n\n                var src = this.isFullscreen() && data.big ? data.big : (data.image || data.iframe),\n                    image = this._controls.slides[index],\n                    cached = image.isCached(src),\n                    thumb = this._thumbnails[index];\n\n                var evObj = {\n                    cached: cached,\n                    index: index,\n                    rewind: rewind,\n                    imageTarget: image.image,\n                    thumbTarget: thumb.image,\n                    galleriaData: data\n                };\n\n                this.trigger($.extend(evObj, {\n                    type: Galleria.LOADSTART\n                }));\n\n                self.$('container').removeClass('videoplay');\n\n                var complete = function() {\n\n                    self._layers[index].innerHTML = self.getData().layer || '';\n\n                    self.trigger($.extend(evObj, {\n                        type: Galleria.LOADFINISH\n                    }));\n                    self._playCheck();\n                };\n\n                self._preload();\n\n                window.setTimeout(function() {\n\n                    // load if not ready\n                    if (!image.ready || $(image.image).attr('src') != src) {\n                        if (data.iframe && !data.image) {\n                            image.isIframe = true;\n                        }\n                        image.load(src, function(image) {\n                            evObj.imageTarget = image.image;\n                            self._scaleImage(image, complete).trigger($.extend(evObj, {\n                                type: Galleria.IMAGE\n                            }));\n                            complete();\n                        });\n                    } else {\n                        self.trigger($.extend(evObj, {\n                            type: Galleria.IMAGE\n                        }));\n                        complete();\n                    }\n                }, 100);\n\n            } else {\n                protoArray.push.call(this._queue, {\n                    index: index,\n                    rewind: rewind\n                });\n                if (!this._queue.stalled) {\n                    this._show();\n                }\n            }\n\n            return this;\n        },\n\n        // the internal _show method does the actual showing\n        _show: function() {\n\n            // shortcuts\n            var self = this,\n                queue = this._queue[0],\n                data = this.getData(queue.index);\n\n            if (!data) {\n                return;\n            }\n\n            var src = this.isFullscreen() && data.big ? data.big : (data.image || data.iframe),\n                active = this._controls.getActive(),\n                next = this._controls.getNext(),\n                cached = next.isCached(src),\n                thumb = this._thumbnails[queue.index],\n                mousetrigger = function() {\n                    $(next.image).trigger('mouseup');\n                };\n\n            self.$('container').toggleClass('iframe', !!data.isIframe).removeClass('videoplay');\n\n            // to be fired when loading & transition is complete:\n            var complete = (function(data, next, active, queue, thumb) {\n\n                return function() {\n\n                    var win;\n\n                    _transitions.active = false;\n\n                    // optimize quality\n                    Utils.toggleQuality(next.image, self._options.imageQuality);\n\n                    // remove old layer\n                    self._layers[self._controls.active].innerHTML = '';\n\n                    // swap\n                    $(active.container).css({\n                        zIndex: 0,\n                        opacity: 0\n                    }).show();\n\n                    $(active.container).find('iframe, .galleria-videoicon').remove();\n                    $(self._controls.frames[self._controls.active].container).hide();\n\n                    $(next.container).css({\n                        zIndex: 1,\n                        left: 0,\n                        top: 0\n                    }).show();\n\n                    self._controls.swap();\n\n                    // add pan according to option\n                    if (self._options.imagePan) {\n                        self.addPan(next.image);\n                    }\n\n                    // make the image clickable\n                    // order of precedence: iframe, link, lightbox, clicknext\n                    if ((data.iframe && data.image) || data.link || self._options.lightbox || self._options.clicknext) {\n\n                        $(next.image).css({\n                            cursor: 'pointer'\n                        }).on('mouseup', function(e) {\n\n                            // non-left click\n                            if (typeof e.which == 'number' && e.which > 1) {\n                                return;\n                            }\n\n                            // iframe / video\n                            if (data.iframe) {\n\n                                if (self.isPlaying()) {\n                                    self.pause();\n                                }\n                                var frame = self._controls.frames[self._controls.active],\n                                    w = self._stageWidth,\n                                    h = self._stageHeight;\n\n                                $(frame.container).css({\n                                    width: w,\n                                    height: h,\n                                    opacity: 0\n                                }).show().animate({\n                                    opacity: 1\n                                }, 200);\n\n                                window.setTimeout(function() {\n                                    frame.load(data.iframe + (data.video ? '&autoplay=1' : ''), {\n                                        width: w,\n                                        height: h\n                                    }, function(frame) {\n                                        self.$('container').addClass('videoplay');\n                                        frame.scale({\n                                            width: self._stageWidth,\n                                            height: self._stageHeight,\n                                            iframelimit: data.video ? self._options.maxVideoSize : undef\n                                        });\n                                    });\n                                }, 100);\n\n                                return;\n                            }\n\n                            // clicknext\n                            if (self._options.clicknext && !Galleria.TOUCH) {\n                                if (self._options.pauseOnInteraction) {\n                                    self.pause();\n                                }\n                                self.next();\n                                return;\n                            }\n\n                            // popup link\n                            if (data.link) {\n                                if (self._options.popupLinks) {\n                                    win = window.open(data.link, '_blank');\n                                } else {\n                                    window.location.href = data.link;\n                                }\n                                return;\n                            }\n\n                            if (self._options.lightbox) {\n                                self.openLightbox();\n                            }\n\n                        });\n                    }\n\n                    // check if we are playing\n                    self._playCheck();\n\n                    // trigger IMAGE event\n                    self.trigger({\n                        type: Galleria.IMAGE,\n                        index: queue.index,\n                        imageTarget: next.image,\n                        thumbTarget: thumb.image,\n                        galleriaData: data\n                    });\n\n                    // remove the queued image\n                    protoArray.shift.call(self._queue);\n\n                    // remove stalled\n                    self._queue.stalled = false;\n\n                    // if we still have images in the queue, show it\n                    if (self._queue.length) {\n                        self._show();\n                    }\n\n                };\n            }(data, next, active, queue, thumb));\n\n            // let the carousel follow\n            if (this._options.carousel && this._options.carouselFollow) {\n                this._carousel.follow(queue.index);\n            }\n\n            // preload images\n            self._preload();\n\n            // show the next image, just in case\n            Utils.show(next.container);\n\n            next.isIframe = data.iframe && !data.image;\n\n            // add active classes\n            $(self._thumbnails[queue.index].container)\n                .addClass('active')\n                .siblings('.active')\n                .removeClass('active');\n\n            // trigger the LOADSTART event\n            self.trigger({\n                type: Galleria.LOADSTART,\n                cached: cached,\n                index: queue.index,\n                rewind: queue.rewind,\n                imageTarget: next.image,\n                thumbTarget: thumb.image,\n                galleriaData: data\n            });\n\n            // stall the queue\n            self._queue.stalled = true;\n\n            // begin loading the next image\n            next.load(src, function(next) {\n\n                // add layer HTML\n                var layer = $(self._layers[1 - self._controls.active]).html(data.layer || '').hide();\n\n                self._scaleImage(next, {\n\n                    complete: function(next) {\n\n                        // toggle low quality for IE\n                        if ('image' in active) {\n                            Utils.toggleQuality(active.image, false);\n                        }\n                        Utils.toggleQuality(next.image, false);\n\n                        // remove the image panning, if applied\n                        // TODO: rethink if this is necessary\n                        self.removePan();\n\n                        // set the captions and counter\n                        self.setInfo(queue.index);\n                        self.setCounter(queue.index);\n\n                        // show the layer now\n                        if (data.layer) {\n                            layer.show();\n                            // inherit click events set on image\n                            if ((data.iframe && data.image) || data.link || self._options.lightbox || self._options.clicknext) {\n                                layer.css('cursor', 'pointer').off('mouseup').mouseup(mousetrigger);\n                            }\n                        }\n\n                        // add play icon\n                        if (data.video && data.image) {\n                            _playIcon(next.container);\n                        }\n\n                        var transition = self._options.transition;\n\n                        // can JavaScript loop through objects in order? yes.\n                        $.each({\n                            initial: active.image === null,\n                            touch: Galleria.TOUCH,\n                            fullscreen: self.isFullscreen()\n                        }, function(type, arg) {\n                            if (arg && self._options[type + 'Transition'] !== undef) {\n                                transition = self._options[type + 'Transition'];\n                                return false;\n                            }\n                        });\n\n                        // validate the transition\n                        if (transition in _transitions.effects === false) {\n                            complete();\n                        } else {\n                            var params = {\n                                prev: active.container,\n                                next: next.container,\n                                rewind: queue.rewind,\n                                speed: self._options.transitionSpeed || 400\n                            };\n\n                            _transitions.active = true;\n\n                            // call the transition function and send some stuff\n                            _transitions.init.call(self, transition, params, complete);\n\n                        }\n\n                        // trigger the LOADFINISH event\n                        self.trigger({\n                            type: Galleria.LOADFINISH,\n                            cached: cached,\n                            index: queue.index,\n                            rewind: queue.rewind,\n                            imageTarget: next.image,\n                            thumbTarget: self._thumbnails[queue.index].image,\n                            galleriaData: self.getData(queue.index)\n                        });\n                    }\n                });\n            });\n        },\n\n        /**\n            Gets the next index\n\n            @param {number} [base] Optional starting point\n\n            @returns {number} the next index, or the first if you are at the first (looping)\n        */\n\n        getNext: function(base) {\n            base = typeof base === 'number' ? base : this.getIndex();\n            return base === this.getDataLength() - 1 ? 0 : base + 1;\n        },\n\n        /**\n            Gets the previous index\n\n            @param {number} [base] Optional starting point\n\n            @returns {number} the previous index, or the last if you are at the first (looping)\n        */\n\n        getPrev: function(base) {\n            base = typeof base === 'number' ? base : this.getIndex();\n            return base === 0 ? this.getDataLength() - 1 : base - 1;\n        },\n\n        /**\n            Shows the next image in line\n\n            @returns Instance\n        */\n\n        next: function() {\n            if (this.getDataLength() > 1) {\n                this.show(this.getNext(), false);\n            }\n            return this;\n        },\n\n        /**\n            Shows the previous image in line\n\n            @returns Instance\n        */\n\n        prev: function() {\n            if (this.getDataLength() > 1) {\n                this.show(this.getPrev(), true);\n            }\n            return this;\n        },\n\n        /**\n            Retrieve a DOM element by element ID\n\n            @param {string} elemId The delement ID to fetch\n\n            @returns {HTMLElement} The elements DOM node or null if not found.\n        */\n\n        get: function(elemId) {\n            return elemId in this._dom ? this._dom[elemId] : null;\n        },\n\n        /**\n            Retrieve a data object\n\n            @param {number} index The data index to retrieve.\n            If no index specified it will take the currently active image\n\n            @returns {Object} The data object\n        */\n\n        getData: function(index) {\n            return index in this._data ?\n                this._data[index] : this._data[this._active];\n        },\n\n        /**\n            Retrieve the number of data items\n\n            @returns {number} The data length\n        */\n        getDataLength: function() {\n            return this._data.length;\n        },\n\n        /**\n            Retrieve the currently active index\n\n            @returns {number|boolean} The active index or false if none found\n        */\n\n        getIndex: function() {\n            return typeof this._active === 'number' ? this._active : false;\n        },\n\n        /**\n            Retrieve the stage height\n\n            @returns {number} The stage height\n        */\n\n        getStageHeight: function() {\n            return this._stageHeight;\n        },\n\n        /**\n            Retrieve the stage width\n\n            @returns {number} The stage width\n        */\n\n        getStageWidth: function() {\n            return this._stageWidth;\n        },\n\n        /**\n            Retrieve the option\n\n            @param {string} key The option key to retrieve. If no key specified it will return all options in an object.\n\n            @returns option or options\n        */\n\n        getOptions: function(key) {\n            return typeof key === 'undefined' ? this._options : this._options[key];\n        },\n\n        /**\n            Set options to the instance.\n            You can set options using a key & value argument or a single object argument (see examples)\n\n            @param {string} key The option key\n            @param {string} value the the options value\n\n            @example setOptions( 'autoplay', true )\n            @example setOptions({ autoplay: true });\n\n            @returns Instance\n        */\n\n        setOptions: function(key, value) {\n            if (typeof key === 'object') {\n                $.extend(this._options, key);\n            } else {\n                this._options[key] = value;\n            }\n            return this;\n        },\n\n        /**\n            Starts playing the slideshow\n\n            @param {number} delay Sets the slideshow interval in milliseconds.\n            If you set it once, you can just call play() and get the same interval the next time.\n\n            @returns Instance\n        */\n\n        play: function(delay) {\n\n            this._playing = true;\n\n            this._playtime = delay || this._playtime;\n\n            this._playCheck();\n\n            this.trigger(Galleria.PLAY);\n\n            return this;\n        },\n\n        /**\n            Stops the slideshow if currently playing\n\n            @returns Instance\n        */\n\n        pause: function() {\n\n            this._playing = false;\n\n            this.trigger(Galleria.PAUSE);\n\n            return this;\n        },\n\n        /**\n            Toggle between play and pause events.\n\n            @param {number} delay Sets the slideshow interval in milliseconds.\n\n            @returns Instance\n        */\n\n        playToggle: function(delay) {\n            return (this._playing) ? this.pause() : this.play(delay);\n        },\n\n        /**\n            Checks if the gallery is currently playing\n\n            @returns {Boolean}\n        */\n\n        isPlaying: function() {\n            return this._playing;\n        },\n\n        /**\n            Checks if the gallery is currently in fullscreen mode\n\n            @returns {Boolean}\n        */\n\n        isFullscreen: function() {\n            return this._fullscreen.active;\n        },\n\n        _playCheck: function() {\n            var self = this,\n                played = 0,\n                interval = 20,\n                now = Utils.timestamp(),\n                timer_id = 'play' + this._id;\n\n            if (this._playing) {\n\n                this.clearTimer(timer_id);\n\n                var fn = function() {\n\n                    played = Utils.timestamp() - now;\n                    if (played >= self._playtime && self._playing) {\n                        self.clearTimer(timer_id);\n                        self.next();\n                        return;\n                    }\n                    if (self._playing) {\n\n                        // trigger the PROGRESS event\n                        self.trigger({\n                            type: Galleria.PROGRESS,\n                            percent: M.ceil(played / self._playtime * 100),\n                            seconds: M.floor(played / 1000),\n                            milliseconds: played\n                        });\n\n                        self.addTimer(timer_id, fn, interval);\n                    }\n                };\n                self.addTimer(timer_id, fn, interval);\n            }\n        },\n\n        /**\n            Modify the slideshow delay\n\n            @param {number} delay the number of milliseconds between slides,\n\n            @returns Instance\n        */\n\n        setPlaytime: function(delay) {\n            this._playtime = delay;\n            return this;\n        },\n\n        setIndex: function(val) {\n            this._active = val;\n            return this;\n        },\n\n        /**\n            Manually modify the counter\n\n            @param {number} [index] Optional data index to fectch,\n            if no index found it assumes the currently active index\n\n            @returns Instance\n        */\n\n        setCounter: function(index) {\n\n            if (typeof index === 'number') {\n                index++;\n            } else if (typeof index === 'undefined') {\n                index = this.getIndex() + 1;\n            }\n\n            this.get('current').innerHTML = index;\n\n            if (IE) { // weird IE bug\n\n                var count = this.$('counter'),\n                    opacity = count.css('opacity');\n\n                if (parseInt(opacity, 10) === 1) {\n                    Utils.removeAlpha(count[0]);\n                } else {\n                    this.$('counter').css('opacity', opacity);\n                }\n\n            }\n\n            return this;\n        },\n\n        /**\n            Manually set captions\n\n            @param {number} [index] Optional data index to fectch and apply as caption,\n            if no index found it assumes the currently active index\n\n            @returns Instance\n        */\n\n        setInfo: function(index) {\n\n            var self = this,\n                data = this.getData(index);\n\n            $.each(['title', 'description'], function(i, type) {\n\n                var elem = self.$('info-' + type);\n\n                if (!!data[type]) {\n                    elem[data[type].length ? 'show' : 'hide']().html(data[type]);\n                } else {\n                    elem.empty().hide();\n                }\n            });\n\n            return this;\n        },\n\n        /**\n            Checks if the data contains any captions\n\n            @param {number} [index] Optional data index to fectch,\n            if no index found it assumes the currently active index.\n\n            @returns {boolean}\n        */\n\n        hasInfo: function(index) {\n\n            var check = 'title description'.split(' '),\n                i;\n\n            for (i = 0; check[i]; i++) {\n                if (!!this.getData(index)[check[i]]) {\n                    return true;\n                }\n            }\n            return false;\n\n        },\n\n        jQuery: function(str) {\n\n            var self = this,\n                ret = [];\n\n            $.each(str.split(','), function(i, elemId) {\n                elemId = $.trim(elemId);\n\n                if (self.get(elemId)) {\n                    ret.push(elemId);\n                }\n            });\n\n            var jQ = $(self.get(ret.shift()));\n\n            $.each(ret, function(i, elemId) {\n                jQ = jQ.add(self.get(elemId));\n            });\n\n            return jQ;\n\n        },\n\n        /**\n            Converts element IDs into a jQuery collection\n            You can call for multiple IDs separated with commas.\n\n            @param {string} str One or more element IDs (comma-separated)\n\n            @returns jQuery\n\n            @example this.$('info,container').hide();\n        */\n\n        $: function(str) {\n            return this.jQuery.apply(this, Utils.array(arguments));\n        }\n\n    };\n\n    // End of Galleria prototype\n\n    // Add events as static variables\n    $.each(_events, function(i, ev) {\n\n        // legacy events\n        var type = /_/.test(ev) ? ev.replace(/_/g, '') : ev;\n\n        Galleria[ev.toUpperCase()] = 'galleria.' + type;\n\n    });\n\n    $.extend(Galleria, {\n\n        // Browser helpers\n        IE9: IE === 9,\n        IE8: IE === 8,\n        IE7: IE === 7,\n        IE6: IE === 6,\n        IE: IE,\n        WEBKIT: /webkit/.test(NAV),\n        CHROME: /chrome/.test(NAV),\n        SAFARI: /safari/.test(NAV) && !(/chrome/.test(NAV)),\n        QUIRK: (IE && doc.compatMode && doc.compatMode === \"BackCompat\"),\n        MAC: /mac/.test(navigator.platform.toLowerCase()),\n        OPERA: !!window.opera,\n        IPHONE: /iphone/.test(NAV),\n        IPAD: /ipad/.test(NAV),\n        ANDROID: /android/.test(NAV),\n        TOUCH: ('ontouchstart' in doc)\n\n    });\n\n    // Galleria static methods\n\n    /**\n        Adds a theme that you can use for your Gallery\n\n        @param {Object} theme Object that should contain all your theme settings.\n        <ul>\n            <li>name - name of the theme</li>\n            <li>author - name of the author</li>\n            <li>css - css file name (not path)</li>\n            <li>defaults - default options to apply, including theme-specific options</li>\n            <li>init - the init function</li>\n        </ul>\n\n        @returns {Object} theme\n    */\n\n    Galleria.addTheme = function(theme) {\n\n        // make sure we have a name\n        if (!theme.name) {\n            Galleria.raise('No theme name specified');\n        }\n\n        if (typeof theme.defaults !== 'object') {\n            theme.defaults = {};\n        } else {\n            theme.defaults = _legacyOptions(theme.defaults);\n        }\n\n        var css = false,\n            reg;\n\n        if (typeof theme.css === 'string') {\n\n            // look for manually added CSS\n            $('link').each(function(i, link) {\n                reg = new RegExp(theme.css);\n                if (reg.test(link.href)) {\n\n                    // we found the css\n                    css = true;\n\n                    // the themeload trigger\n                    _themeLoad(theme);\n\n                    return false;\n                }\n            });\n\n            // else look for the absolute path and load the CSS dynamic\n            if (!css) {\n\n\n                $(function() {\n                    // Try to determine the css-path from the theme script.\n                    // In IE8/9, the script-dom-element seems to be not present\n                    // at once, if galleria itself is inserted into the dom\n                    // dynamically. We therefore try multiple times before raising\n                    // an error.\n                    var retryCount = 0;\n                    var tryLoadCss = function() {\n                        $('script').each(function(i, script) {\n                            // look for the theme script\n                            reg = new RegExp('galleria\\\\.' + theme.name.toLowerCase() + '\\\\.');\n                            if (reg.test(script.src)) {\n\n                                // we have a match\n                                css = script.src.replace(/[^\\/]*$/, '') + theme.css;\n\n                                window.setTimeout(function() {\n                                    Utils.loadCSS(css, 'galleria-theme-' + theme.name, function() {\n\n                                        // run galleries with this theme\n                                        _themeLoad(theme);\n\n                                    });\n                                }, 1);\n                            }\n                        });\n                        if (!css) {\n                            if (retryCount++ > 5) {\n                                Galleria.raise('No theme CSS loaded');\n                            } else {\n                                window.setTimeout(tryLoadCss, 500);\n                            }\n                        }\n                    };\n                    tryLoadCss();\n                });\n            }\n\n        } else {\n\n            // pass\n            _themeLoad(theme);\n        }\n        return theme;\n    };\n\n    /**\n        loadTheme loads a theme js file and attaches a load event to Galleria\n\n        @param {string} src The relative path to the theme source file\n\n        @param {Object} [options] Optional options you want to apply\n\n        @returns Galleria\n    */\n\n    Galleria.loadTheme = function(src, options) {\n\n        // Don't load if theme is already loaded\n        if ($('script').filter(function() {\n                return $(this).attr('src') == src; }).length) {\n            return;\n        }\n\n        var loaded = false,\n            err;\n\n        // start listening for the timeout onload\n        $(window).load(function() {\n            if (!loaded) {\n                // give it another 20 seconds\n                err = window.setTimeout(function() {\n                    if (!loaded) {\n                        Galleria.raise(\"Galleria had problems loading theme at \" + src + \". Please check theme path or load manually.\", true);\n                    }\n                }, 20000);\n            }\n        });\n\n        // load the theme\n        Utils.loadScript(src, function() {\n            loaded = true;\n            window.clearTimeout(err);\n        });\n\n        return Galleria;\n    };\n\n    /**\n        Retrieves a Galleria instance.\n\n        @param {number} [index] Optional index to retrieve.\n        If no index is supplied, the method will return all instances in an array.\n\n        @returns Instance or Array of instances\n    */\n\n    Galleria.get = function(index) {\n        if (!!_instances[index]) {\n            return _instances[index];\n        } else if (typeof index !== 'number') {\n            return _instances;\n        } else {\n            Galleria.raise('Gallery index ' + index + ' not found');\n        }\n    };\n\n    /**\n\n        Configure Galleria options via a static function.\n        The options will be applied to all instances\n\n        @param {string|object} key The options to apply or a key\n\n        @param [value] If key is a string, this is the value\n\n        @returns Galleria\n\n    */\n\n    Galleria.configure = function(key, value) {\n\n        var opts = {};\n\n        if (typeof key == 'string' && value) {\n            opts[key] = value;\n            key = opts;\n        } else {\n            $.extend(opts, key);\n        }\n\n        Galleria.configure.options = opts;\n\n        $.each(Galleria.get(), function(i, instance) {\n            instance.setOptions(opts);\n        });\n\n        return Galleria;\n    };\n\n    Galleria.configure.options = {};\n\n    /**\n\n        Bind a Galleria event to the gallery\n\n        @param {string} type A string representing the galleria event\n\n        @param {function} callback The function that should run when the event is triggered\n\n        @returns Galleria\n\n    */\n\n    Galleria.on = function(type, callback) {\n        if (!type) {\n            return;\n        }\n\n        callback = callback || F;\n\n        // hash the bind\n        var hash = type + callback.toString().replace(/\\s/g, '') + Utils.timestamp();\n\n        // for existing instances\n        $.each(Galleria.get(), function(i, instance) {\n            instance._binds.push(hash);\n            instance.bind(type, callback);\n        });\n\n        // for future instances\n        Galleria.on.binds.push({\n            type: type,\n            callback: callback,\n            hash: hash\n        });\n\n        return Galleria;\n    };\n\n    Galleria.on.binds = [];\n\n    /**\n\n        Run Galleria\n        Alias for $(selector).galleria(options)\n\n        @param {string} selector A selector of element(s) to intialize galleria to\n\n        @param {object} options The options to apply\n\n        @returns Galleria\n\n    */\n\n    Galleria.run = function(selector, options) {\n        if ($.isFunction(options)) {\n            options = { extend: options };\n        }\n        $(selector || '#galleria').galleria(options);\n        return Galleria;\n    };\n\n    /**\n        Creates a transition to be used in your gallery\n\n        @param {string} name The name of the transition that you will use as an option\n\n        @param {Function} fn The function to be executed in the transition.\n        The function contains two arguments, params and complete.\n        Use the params Object to integrate the transition, and then call complete when you are done.\n\n        @returns Galleria\n\n    */\n\n    Galleria.addTransition = function(name, fn) {\n        _transitions.effects[name] = fn;\n        return Galleria;\n    };\n\n    /**\n        The Galleria utilites\n    */\n\n    Galleria.utils = Utils;\n\n    /**\n        A helper metod for cross-browser logging.\n        It uses the console log if available otherwise it falls back to alert\n\n        @example Galleria.log(\"hello\", document.body, [1,2,3]);\n    */\n\n    Galleria.log = function() {\n        var args = Utils.array(arguments);\n        if ('console' in window && 'log' in window.console) {\n            try {\n                return window.console.log.apply(window.console, args);\n            } catch (e) {\n                $.each(args, function() {\n                    window.console.log(this);\n                });\n            }\n        } else {\n            return window.alert(args.join('<br>'));\n        }\n    };\n\n    /**\n        A ready method for adding callbacks when a gallery is ready\n        Each method is call before the extend option for every instance\n\n        @param {function} callback The function to call\n\n        @returns Galleria\n    */\n\n    Galleria.ready = function(fn) {\n        if (typeof fn != 'function') {\n            return Galleria;\n        }\n        $.each(_galleries, function(i, gallery) {\n            fn.call(gallery, gallery._options);\n        });\n        Galleria.ready.callbacks.push(fn);\n        return Galleria;\n    };\n\n    Galleria.ready.callbacks = [];\n\n    /**\n        Method for raising errors\n\n        @param {string} msg The message to throw\n\n        @param {boolean} [fatal] Set this to true to override debug settings and display a fatal error\n    */\n\n    Galleria.raise = function(msg, fatal) {\n\n        var type = fatal ? 'Fatal error' : 'Error',\n\n            css = {\n                color: '#fff',\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                zIndex: 100000\n            },\n\n            echo = function(msg) {\n\n                var html = '<div style=\"padding:4px;margin:0 0 2px;background:#' +\n                    (fatal ? '811' : '222') + ';\">' +\n                    (fatal ? '<strong>' + type + ': </strong>' : '') +\n                    msg + '</div>';\n\n                $.each(_instances, function() {\n\n                    var cont = this.$('errors'),\n                        target = this.$('target');\n\n                    if (!cont.length) {\n\n                        target.css('position', 'relative');\n\n                        cont = this.addElement('errors').appendChild('target', 'errors').$('errors').css(css);\n                    }\n                    cont.append(html);\n\n                });\n\n                if (!_instances.length) {\n                    $('<div>').css($.extend(css, { position: 'fixed' })).append(html).appendTo(DOM().body);\n                }\n            };\n\n        // if debug is on, display errors and throw exception if fatal\n        if (DEBUG) {\n            echo(msg);\n            if (fatal) {\n                throw new Error(type + ': ' + msg);\n            }\n\n            // else just echo a silent generic error if fatal\n        } else if (fatal) {\n            if (_hasError) {\n                return;\n            }\n            _hasError = true;\n            fatal = false;\n            echo('Gallery could not load.');\n        }\n    };\n\n    // Add the version\n    Galleria.version = VERSION;\n\n    Galleria.getLoadedThemes = function() {\n        return $.map(_loadedThemes, function(theme) {\n            return theme.name;\n        });\n    };\n\n    /**\n        A method for checking what version of Galleria the user has installed and throws a readable error if the user needs to upgrade.\n        Useful when building plugins that requires a certain version to function.\n\n        @param {number} version The minimum version required\n\n        @param {string} [msg] Optional message to display. If not specified, Galleria will throw a generic error.\n\n        @returns Galleria\n    */\n\n    Galleria.requires = function(version, msg) {\n        msg = msg || 'You need to upgrade Galleria to version ' + version + ' to use one or more components.';\n        if (Galleria.version < version) {\n            Galleria.raise(msg, true);\n        }\n        return Galleria;\n    };\n\n    /**\n        Adds preload, cache, scale and crop functionality\n\n        @constructor\n\n        @requires jQuery\n\n        @param {number} [id] Optional id to keep track of instances\n    */\n\n    Galleria.Picture = function(id) {\n\n        // save the id\n        this.id = id || null;\n\n        // the image should be null until loaded\n        this.image = null;\n\n        // Create a new container\n        this.container = Utils.create('galleria-image');\n\n        // add container styles\n        $(this.container).css({\n            overflow: 'hidden',\n            position: 'relative' // for IE Standards mode\n        });\n\n        // saves the original measurements\n        this.original = {\n            width: 0,\n            height: 0\n        };\n\n        // flag when the image is ready\n        this.ready = false;\n\n        // flag for iframe Picture\n        this.isIframe = false;\n\n    };\n\n    Galleria.Picture.prototype = {\n\n        // the inherited cache object\n        cache: {},\n\n        // show the image on stage\n        show: function() {\n            Utils.show(this.image);\n        },\n\n        // hide the image\n        hide: function() {\n            Utils.moveOut(this.image);\n        },\n\n        clear: function() {\n            this.image = null;\n        },\n\n        /**\n            Checks if an image is in cache\n\n            @param {string} src The image source path, ex '/path/to/img.jpg'\n\n            @returns {boolean}\n        */\n\n        isCached: function(src) {\n            return !!this.cache[src];\n        },\n\n        /**\n            Preloads an image into the cache\n\n            @param {string} src The image source path, ex '/path/to/img.jpg'\n\n            @returns Galleria.Picture\n        */\n\n        preload: function(src) {\n            $(new Image()).load((function(src, cache) {\n                return function() {\n                    cache[src] = src;\n                };\n            }(src, this.cache))).attr('src', src);\n        },\n\n        /**\n            Loads an image and call the callback when ready.\n            Will also add the image to cache.\n\n            @param {string} src The image source path, ex '/path/to/img.jpg'\n            @param {Object} [size] The forced size of the image, defined as an object { width: xx, height:xx }\n            @param {Function} callback The function to be executed when the image is loaded & scaled\n\n            @returns The image container (jQuery object)\n        */\n\n        load: function(src, size, callback) {\n\n            if (typeof size == 'function') {\n                callback = size;\n                size = null;\n            }\n\n            if (this.isIframe) {\n                var id = 'if' + new Date().getTime();\n\n                var iframe = this.image = $('<iframe>', {\n                    src: src,\n                    frameborder: 0,\n                    id: id,\n                    allowfullscreen: true,\n                    css: { visibility: 'hidden' }\n                })[0];\n\n                if (size) {\n                    $(iframe).css(size);\n                }\n\n                $(this.container).find('iframe,img').remove();\n\n                this.container.appendChild(this.image);\n\n                $('#' + id).load((function(self, callback) {\n                    return function() {\n                        window.setTimeout(function() {\n                            $(self.image).css('visibility', 'visible');\n                            if (typeof callback == 'function') {\n                                callback.call(self, self);\n                            }\n                        }, 10);\n                    };\n                }(this, callback)));\n\n                return this.container;\n            }\n\n            this.image = new Image();\n\n            // IE8 opacity inherit bug\n            if (Galleria.IE8) {\n                $(this.image).css('filter', 'inherit');\n            }\n\n            // FF shaking images bug:\n            // http://support.galleria.io/discussions/problems/12245-shaking-photos\n            if (!Galleria.IE && !Galleria.CHROME && !Galleria.SAFARI) {\n                $(this.image).css('image-rendering', 'optimizequality');\n            }\n\n            var reload = false,\n                resort = false,\n\n                // some jquery cache\n                $container = $(this.container),\n                $image = $(this.image),\n\n                onerror = function() {\n                    if (!reload) {\n                        reload = true;\n                        // reload the image with a timestamp\n                        window.setTimeout((function(image, src) {\n                            return function() {\n                                image.attr('src', src + (src.indexOf('?') > -1 ? '&' : '?') + Utils.timestamp());\n                            };\n                        }($(this), src)), 50);\n                    } else {\n                        // apply the dummy image if it exists\n                        if (DUMMY) {\n                            $(this).attr('src', DUMMY);\n                        } else {\n                            Galleria.raise('Image not found: ' + src);\n                        }\n                    }\n                },\n\n                // the onload method\n                onload = (function(self, callback, src) {\n\n                    return function() {\n\n                        var complete = function() {\n\n                            $(this).off('load');\n\n                            // save the original size\n                            self.original = size || {\n                                height: this.height,\n                                width: this.width\n                            };\n\n                            // translate3d if needed\n                            if (Galleria.HAS3D) {\n                                this.style.MozTransform = this.style.webkitTransform = 'translate3d(0,0,0)';\n                            }\n\n                            $container.append(this);\n\n                            self.cache[src] = src; // will override old cache\n\n                            if (typeof callback == 'function') {\n                                window.setTimeout(function() {\n                                    callback.call(self, self);\n                                }, 1);\n                            }\n                        };\n\n                        // Delay the callback to \"fix\" the Adblock Bug\n                        // http://code.google.com/p/adblockforchrome/issues/detail?id=3701\n                        if ((!this.width || !this.height)) {\n                            (function(img) {\n                                Utils.wait({\n                                    until: function() {\n                                        return img.width && img.height;\n                                    },\n                                    success: function() {\n                                        complete.call(img);\n                                    },\n                                    error: function() {\n                                        if (!resort) {\n                                            $(new Image()).load(onload).attr('src', img.src);\n                                            resort = true;\n                                        } else {\n                                            Galleria.raise('Could not extract width/height from image: ' + img.src +\n                                                '. Traced measures: width:' + img.width + 'px, height: ' + img.height + 'px.');\n                                        }\n                                    },\n                                    timeout: 100\n                                });\n                            }(this));\n                        } else {\n                            complete.call(this);\n                        }\n                    };\n                }(this, callback, src));\n\n            // remove any previous images\n            $container.find('iframe,img').remove();\n\n            // append the image\n            $image.css('display', 'block');\n\n            // hide it for now\n            Utils.hide(this.image);\n\n            // remove any max/min scaling\n            $.each('minWidth minHeight maxWidth maxHeight'.split(' '), function(i, prop) {\n                $image.css(prop, (/min/.test(prop) ? '0' : 'none'));\n            });\n\n            // begin load and insert in cache when done\n            $image.load(onload).on('error', onerror).attr('src', src);\n\n            // return the container\n            return this.container;\n        },\n\n        /**\n            Scales and crops the image\n\n            @param {Object} options The method takes an object with a number of options:\n\n            <ul>\n                <li>width - width of the container</li>\n                <li>height - height of the container</li>\n                <li>min - minimum scale ratio</li>\n                <li>max - maximum scale ratio</li>\n                <li>margin - distance in pixels from the image border to the container</li>\n                <li>complete - a callback that fires when scaling is complete</li>\n                <li>position - positions the image, works like the css background-image property.</li>\n                <li>crop - defines how to crop. Can be true, false, 'width' or 'height'</li>\n                <li>canvas - set to true to try a canvas-based rescale</li>\n            </ul>\n\n            @returns The image container object (jQuery)\n        */\n\n        scale: function(options) {\n\n            var self = this;\n\n            // extend some defaults\n            options = $.extend({\n                width: 0,\n                height: 0,\n                min: undef,\n                max: undef,\n                margin: 0,\n                complete: F,\n                position: 'center',\n                crop: false,\n                canvas: false,\n                iframelimit: undef\n            }, options);\n\n            if (this.isIframe) {\n\n                var cw = options.width,\n                    ch = options.height,\n                    nw, nh;\n                if (options.iframelimit) {\n                    var r = M.min(options.iframelimit / cw, options.iframelimit / ch);\n                    if (r < 1) {\n                        nw = cw * r;\n                        nh = ch * r;\n\n                        $(this.image).css({\n                            top: ch / 2 - nh / 2,\n                            left: cw / 2 - nw / 2,\n                            position: 'absolute'\n                        });\n                    } else {\n                        $(this.image).css({\n                            top: 0,\n                            left: 0\n                        });\n                    }\n                }\n                $(this.image).width(nw || cw).height(nh || ch).removeAttr('width').removeAttr('height');\n                $(this.container).width(cw).height(ch);\n                options.complete.call(self, self);\n                try {\n                    if (this.image.contentWindow) {\n                        $(this.image.contentWindow).trigger('resize');\n                    }\n                } catch (e) {}\n                return this.container;\n\n            }\n\n            // return the element if no image found\n            if (!this.image) {\n                return this.container;\n            }\n\n            // store locale variables\n            var width,\n                height,\n                $container = $(self.container),\n                data;\n\n            // wait for the width/height\n            Utils.wait({\n                until: function() {\n                    width = options.width ||\n                        $container.width() ||\n                        Utils.parseValue($container.css('width'));\n\n                    height = options.height ||\n                        $container.height() ||\n                        Utils.parseValue($container.css('height'));\n\n                    return width && height;\n                },\n                success: function() {\n\n                    // calculate some cropping\n                    var newWidth = (width - options.margin * 2) / self.original.width,\n                        newHeight = (height - options.margin * 2) / self.original.height,\n                        min = M.min(newWidth, newHeight),\n                        max = M.max(newWidth, newHeight),\n                        cropMap = {\n                            'true': max,\n                            'width': newWidth,\n                            'height': newHeight,\n                            'false': min,\n                            'landscape': self.original.width > self.original.height ? max : min,\n                            'portrait': self.original.width < self.original.height ? max : min\n                        },\n                        ratio = cropMap[options.crop.toString()],\n                        canvasKey = '';\n\n                    // allow maxScaleRatio\n                    if (options.max) {\n                        ratio = M.min(options.max, ratio);\n                    }\n\n                    // allow minScaleRatio\n                    if (options.min) {\n                        ratio = M.max(options.min, ratio);\n                    }\n\n                    $.each(['width', 'height'], function(i, m) {\n                        $(self.image)[m](self[m] = self.image[m] = M.round(self.original[m] * ratio));\n                    });\n\n                    $(self.container).width(width).height(height);\n\n                    if (options.canvas && _canvas) {\n\n                        _canvas.elem.width = self.width;\n                        _canvas.elem.height = self.height;\n\n                        canvasKey = self.image.src + ':' + self.width + 'x' + self.height;\n\n                        self.image.src = _canvas.cache[canvasKey] || (function(key) {\n\n                            _canvas.context.drawImage(self.image, 0, 0, self.original.width * ratio, self.original.height * ratio);\n\n                            try {\n\n                                data = _canvas.elem.toDataURL();\n                                _canvas.length += data.length;\n                                _canvas.cache[key] = data;\n                                return data;\n\n                            } catch (e) {\n                                return self.image.src;\n                            }\n\n                        }(canvasKey));\n\n                    }\n\n                    // calculate image_position\n                    var pos = {},\n                        mix = {},\n                        getPosition = function(value, measure, margin) {\n                            var result = 0;\n                            if (/\\%/.test(value)) {\n                                var flt = parseInt(value, 10) / 100,\n                                    m = self.image[measure] || $(self.image)[measure]();\n\n                                result = M.ceil(m * -1 * flt + margin * flt);\n                            } else {\n                                result = Utils.parseValue(value);\n                            }\n                            return result;\n                        },\n                        positionMap = {\n                            'top': { top: 0 },\n                            'left': { left: 0 },\n                            'right': { left: '100%' },\n                            'bottom': { top: '100%' }\n                        };\n\n                    $.each(options.position.toLowerCase().split(' '), function(i, value) {\n                        if (value === 'center') {\n                            value = '50%';\n                        }\n                        pos[i ? 'top' : 'left'] = value;\n                    });\n\n                    $.each(pos, function(i, value) {\n                        if (positionMap.hasOwnProperty(value)) {\n                            $.extend(mix, positionMap[value]);\n                        }\n                    });\n\n                    pos = pos.top ? $.extend(pos, mix) : mix;\n\n                    pos = $.extend({\n                        top: '50%',\n                        left: '50%'\n                    }, pos);\n\n                    // apply position\n                    $(self.image).css({\n                        position: 'absolute',\n                        top: getPosition(pos.top, 'height', height),\n                        left: getPosition(pos.left, 'width', width)\n                    });\n\n                    // show the image\n                    self.show();\n\n                    // flag ready and call the callback\n                    self.ready = true;\n                    options.complete.call(self, self);\n\n                },\n                error: function() {\n                    Galleria.raise('Could not scale image: ' + self.image.src);\n                },\n                timeout: 1000\n            });\n            return this;\n        }\n    };\n\n    // our own easings\n    $.extend($.easing, {\n\n        galleria: function(_, t, b, c, d) {\n            if ((t /= d / 2) < 1) {\n                return c / 2 * t * t * t + b;\n            }\n            return c / 2 * ((t -= 2) * t * t + 2) + b;\n        },\n\n        galleriaIn: function(_, t, b, c, d) {\n            return c * (t /= d) * t + b;\n        },\n\n        galleriaOut: function(_, t, b, c, d) {\n            return -c * (t /= d) * (t - 2) + b;\n        }\n\n    });\n\n\n    // Forked version of Ainos Finger.js for native-style touch\n\n    Galleria.Finger = (function() {\n\n        var abs = M.abs;\n\n        // test for translate3d support\n        var has3d = Galleria.HAS3D = (function() {\n\n            var el = doc.createElement('p'),\n                has3d,\n                t = ['webkit', 'O', 'ms', 'Moz', ''],\n                s,\n                i = 0,\n                a = 'transform';\n\n            DOM().html.insertBefore(el, null);\n\n            for (; t[i]; i++) {\n                s = t[i] ? t[i] + 'Transform' : a;\n                if (el.style[s] !== undefined) {\n                    el.style[s] = \"translate3d(1px,1px,1px)\";\n                    has3d = $(el).css(t[i] ? '-' + t[i].toLowerCase() + '-' + a : a);\n                }\n            }\n\n            DOM().html.removeChild(el);\n            return (has3d !== undefined && has3d.length > 0 && has3d !== \"none\");\n        }());\n\n        // request animation shim\n        var requestFrame = (function() {\n            var r = 'RequestAnimationFrame';\n            return window.requestAnimationFrame ||\n                window['webkit' + r] ||\n                window['moz' + r] ||\n                window['o' + r] ||\n                window['ms' + r] ||\n                function(callback) {\n                    window.setTimeout(callback, 1000 / 60);\n                };\n        }());\n\n        var Finger = function(elem, options) {\n\n            // default options\n            this.config = {\n                start: 0,\n                duration: 500,\n                onchange: function() {},\n                oncomplete: function() {},\n                easing: function(x, t, b, c, d) {\n                    return -c * ((t = t / d - 1) * t * t * t - 1) + b; // easeOutQuart\n                }\n            };\n\n            this.easeout = function(x, t, b, c, d) {\n                return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n            };\n\n            if (!elem.children.length) {\n                return;\n            }\n\n            var self = this;\n\n            // extend options\n            $.extend(this.config, options);\n\n            this.elem = elem;\n            this.child = elem.children[0];\n            this.to = this.pos = 0;\n            this.touching = false;\n            this.start = {};\n            this.index = this.config.start;\n            this.anim = 0;\n            this.easing = this.config.easing;\n\n            if (!has3d) {\n                this.child.style.position = 'absolute';\n                this.elem.style.position = 'relative';\n            }\n\n            // Bind event handlers to context\n            $.each(['ontouchstart', 'ontouchmove', 'ontouchend', 'setup'], function(i, fn) {\n                self[fn] = (function(caller) {\n                    return function() {\n                        caller.apply(self, arguments);\n                    };\n                }(self[fn]));\n            });\n\n            // the physical animator\n            this.setX = function() {\n\n                var style = self.child.style;\n\n                if (!has3d) {\n                    // this is actually faster than CSS3 translate\n                    style.left = self.pos + 'px';\n                    return;\n                }\n                style.MozTransform = style.webkitTransform = style.transform = 'translate3d(' + self.pos + 'px,0,0)';\n                return;\n            };\n\n            // bind events\n            $(elem).on('touchstart', this.ontouchstart);\n            $(window).on('resize', this.setup);\n            $(window).on('orientationchange', this.setup);\n\n            // set up width\n            this.setup();\n\n            // start the animations\n            (function animloop() {\n                requestFrame(animloop);\n                self.loop.call(self);\n            }());\n\n        };\n\n        Finger.prototype = {\n\n            constructor: Finger,\n\n            setup: function() {\n                this.width = $(this.elem).width();\n                this.length = M.ceil($(this.child).width() / this.width);\n                if (this.index !== 0) {\n                    this.index = M.max(0, M.min(this.index, this.length - 1));\n                    this.pos = this.to = -this.width * this.index;\n                }\n            },\n\n            setPosition: function(pos) {\n                this.pos = pos;\n                this.to = pos;\n            },\n\n            ontouchstart: function(e) {\n\n                var touch = e.originalEvent.touches;\n\n                this.start = {\n                    pageX: touch[0].pageX,\n                    pageY: touch[0].pageY,\n                    time: +new Date()\n                };\n\n                this.isScrolling = null;\n                this.touching = true;\n                this.deltaX = 0;\n\n                $doc.on('touchmove', this.ontouchmove);\n                $doc.on('touchend', this.ontouchend);\n            },\n\n            ontouchmove: function(e) {\n\n                var touch = e.originalEvent.touches;\n\n                // ensure swiping with one touch and not pinching\n                if (touch && touch.length > 1 || e.scale && e.scale !== 1) {\n                    return;\n                }\n\n                this.deltaX = touch[0].pageX - this.start.pageX;\n\n                // determine if scrolling test has run - one time test\n                if (this.isScrolling === null) {\n                    this.isScrolling = !!(\n                        this.isScrolling ||\n                        M.abs(this.deltaX) < M.abs(touch[0].pageY - this.start.pageY)\n                    );\n                }\n\n                // if user is not trying to scroll vertically\n                if (!this.isScrolling) {\n\n                    // prevent native scrolling\n                    e.preventDefault();\n\n                    // increase resistance if first or last slide\n                    this.deltaX /= ((!this.index && this.deltaX > 0 || this.index == this.length - 1 && this.deltaX < 0) ?\n                        (M.abs(this.deltaX) / this.width + 1.8) : 1);\n                    this.to = this.deltaX - this.index * this.width;\n                }\n                e.stopPropagation();\n            },\n\n            ontouchend: function(e) {\n\n                this.touching = false;\n\n                // determine if slide attempt triggers next/prev slide\n                var isValidSlide = +new Date() - this.start.time < 250 &&\n                    M.abs(this.deltaX) > 40 ||\n                    M.abs(this.deltaX) > this.width / 2,\n\n                    isPastBounds = !this.index && this.deltaX > 0 ||\n                    this.index == this.length - 1 && this.deltaX < 0;\n\n                // if not scrolling vertically\n                if (!this.isScrolling) {\n                    this.show(this.index + (isValidSlide && !isPastBounds ? (this.deltaX < 0 ? 1 : -1) : 0));\n                }\n\n                $doc.off('touchmove', this.ontouchmove);\n                $doc.off('touchend', this.ontouchend);\n            },\n\n            show: function(index) {\n                if (index != this.index) {\n                    this.config.onchange.call(this, index);\n                } else {\n                    this.to = -(index * this.width);\n                }\n            },\n\n            moveTo: function(index) {\n                if (index != this.index) {\n                    this.pos = this.to = -(index * this.width);\n                    this.index = index;\n                }\n            },\n\n            loop: function() {\n\n                var distance = this.to - this.pos,\n                    factor = 1;\n\n                if (this.width && distance) {\n                    factor = M.max(0.5, M.min(1.5, M.abs(distance / this.width)));\n                }\n\n                // if distance is short or the user is touching, do a 1-1 animation\n                if (this.touching || M.abs(distance) <= 1)=\"\" {=\"\" this.pos=\"this.to;\" distance=\"0;\" if=\"\" (this.anim=\"\" &&=\"\" !this.touching)=\"\" this.config.oncomplete(this.index);=\"\" }=\"\" this.anim=\"0;\" this.easing=\"this.config.easing;\" else=\"\" (!this.anim)=\"\" save=\"\" animation=\"\" parameters=\"\" start:=\"\" this.pos,=\"\" time:=\"\" +new=\"\" date(),=\"\" distance:=\"\" distance,=\"\" factor:=\"\" factor,=\"\" destination:=\"\" this.to=\"\" };=\"\" check=\"\" to=\"\" has=\"\" changed=\"\" or=\"\" time=\"\" run=\"\" out=\"\" var=\"\" elapsed=\"+new\" date()=\"\" -=\"\" this.anim.time;=\"\" duration=\"this.config.duration\" *=\"\" this.anim.factor;=\"\" (elapsed=\"\"> duration || this.anim.destination != this.to) {\n                        this.anim = 0;\n                        this.easing = this.easeout;\n                        return;\n                    }\n                    // apply easing\n                    this.pos = this.easing(\n                        null,\n                        elapsed,\n                        this.anim.start,\n                        this.anim.distance,\n                        duration\n                    );\n                }\n                this.setX();\n            }\n        };\n\n        return Finger;\n\n    }());\n\n    // the plugin initializer\n    $.fn.galleria = function(options) {\n\n        var selector = this.selector;\n\n        // try domReady if element not found\n        if (!$(this).length) {\n\n            $(function() {\n                if ($(selector).length) {\n\n                    // if found on domReady, go ahead\n                    $(selector).galleria(options);\n\n                } else {\n\n                    // if not, try fetching the element for 5 secs, then raise a warning.\n                    Galleria.utils.wait({\n                        until: function() {\n                            return $(selector).length;\n                        },\n                        success: function() {\n                            $(selector).galleria(options);\n                        },\n                        error: function() {\n                            Galleria.raise('Init failed: Galleria could not find the element \"' + selector + '\".');\n                        },\n                        timeout: 5000\n                    });\n\n                }\n            });\n            return this;\n        }\n\n        return this.each(function() {\n\n            // destroy previous instance and prepare for new load\n            if ($.data(this, 'galleria')) {\n                $.data(this, 'galleria').destroy();\n                $(this).find('*').hide();\n            }\n\n            // load the new gallery\n            $.data(this, 'galleria', new Galleria().init(this, options));\n        });\n\n    };\n\n    // export as AMD or CommonJS\n    if (typeof module === \"object\" && module && typeof module.exports === \"object\") {\n        module.exports = Galleria;\n    } else {\n        window.Galleria = Galleria;\n        if (typeof define === \"function\" && define.amd) {\n            define(\"galleria\", ['jquery'], function() {\n                return Galleria; });\n        }\n    }\n\n    // phew\n\n}(jQuery, this));\n</=></iframe></div></=></s></scr'>","site":{"data":{}},"excerpt":"","more":"/**\n * Galleria v 1.4.5 2016-09-04\n * http://galleria.io\n *\n * Licensed under the MIT license\n * https://raw.github.com/worseisbetter/galleria/master/LICENSE\n *\n */\n\n(function($, window, Galleria, undef) {\n\n    /*global jQuery, navigator, Image, module, define */\n\n    // some references\n    var doc = window.document,\n        $doc = $(doc),\n        $win = $(window),\n\n        // native prototypes\n        protoArray = Array.prototype,\n\n        // internal constants\n        VERSION = 1.45,\n        DEBUG = true,\n        TIMEOUT = 30000,\n        DUMMY = false,\n        NAV = navigator.userAgent.toLowerCase(),\n        HASH = window.location.hash.replace(/#\\//, ''),\n        PROT = window.location.protocol == \"file:\" ? \"http:\" : window.location.protocol,\n        M = Math,\n        F = function() {},\n        FALSE = function() {\n            return false; },\n        IE = (function() {\n\n            var v = 3,\n                div = doc.createElement('div'),\n                all = div.getElementsByTagName('i');\n\n            do {\n                div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->';\n            } while (all[0]);\n\n            return v > 4 ? v : doc.documentMode || undef;\n\n        }()),\n        DOM = function() {\n            return {\n                html: doc.documentElement,\n                body: doc.body,\n                head: doc.getElementsByTagName('head')[0],\n                title: doc.title\n            };\n        },\n        IFRAME = window.parent !== window.self,\n\n        // list of Galleria events\n        _eventlist = 'data ready thumbnail loadstart loadfinish image play pause progress ' +\n        'fullscreen_enter fullscreen_exit idle_enter idle_exit rescale ' +\n        'lightbox_open lightbox_close lightbox_image',\n\n        _events = (function() {\n\n            var evs = [];\n\n            $.each(_eventlist.split(' '), function(i, ev) {\n                evs.push(ev);\n\n                // legacy events\n                if (/_/.test(ev)) {\n                    evs.push(ev.replace(/_/g, ''));\n                }\n            });\n\n            return evs;\n\n        }()),\n\n        // legacy options\n        // allows the old my_setting syntax and converts it to camel case\n\n        _legacyOptions = function(options) {\n\n            var n;\n\n            if (typeof options !== 'object') {\n\n                // return whatever it was...\n                return options;\n            }\n\n            $.each(options, function(key, value) {\n                if (/^[a-z]+_/.test(key)) {\n                    n = '';\n                    $.each(key.split('_'), function(i, k) {\n                        n += i > 0 ? k.substr(0, 1).toUpperCase() + k.substr(1) : k;\n                    });\n                    options[n] = value;\n                    delete options[key];\n                }\n            });\n\n            return options;\n        },\n\n        _patchEvent = function(type) {\n\n            // allow 'image' instead of Galleria.IMAGE\n            if ($.inArray(type, _events) > -1) {\n                return Galleria[type.toUpperCase()];\n            }\n\n            return type;\n        },\n\n        // video providers\n        _video = {\n            youtube: {\n                reg: /https?:\\/\\/(?:[a-zA_Z]{2,3}.)?(?:youtube\\.com\\/watch\\?)((?:[\\w\\d\\-\\_\\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\\-\\_]+))/i,\n                embed: function() {\n                    return PROT + '//www.youtube.com/embed/' + this.id;\n                },\n                get_thumb: function(data) {\n                    return PROT + '//img.youtube.com/vi/' + this.id + '/default.jpg';\n                },\n                get_image: function(data) {\n                    return PROT + '//img.youtube.com/vi/' + this.id + '/hqdefault.jpg';\n                }\n            },\n            vimeo: {\n                reg: /https?:\\/\\/(?:www\\.)?(vimeo\\.com)\\/(?:hd#)?([0-9]+)/i,\n                embed: function() {\n                    return PROT + '//player.vimeo.com/video/' + this.id;\n                },\n                getUrl: function() {\n                    return PROT + '//vimeo.com/api/v2/video/' + this.id + '.json?callback=?';\n                },\n                get_thumb: function(data) {\n                    return data[0].thumbnail_medium;\n                },\n                get_image: function(data) {\n                    return data[0].thumbnail_large;\n                }\n            },\n            dailymotion: {\n                reg: /https?:\\/\\/(?:www\\.)?(dailymotion\\.com)\\/video\\/([^_]+)/,\n                embed: function() {\n                    return PROT + '//www.dailymotion.com/embed/video/' + this.id;\n                },\n                getUrl: function() {\n                    return 'https://api.dailymotion.com/video/' + this.id + '?fields=thumbnail_240_url,thumbnail_720_url&callback=?';\n                },\n                get_thumb: function(data) {\n                    return data.thumbnail_240_url;\n                },\n                get_image: function(data) {\n                    return data.thumbnail_720_url;\n                }\n            },\n            _inst: []\n        },\n        Video = function(type, id) {\n\n            for (var i = 0; i < _video._inst.length; i++) {\n                if (_video._inst[i].id === id && _video._inst[i].type == type) {\n                    return _video._inst[i];\n                }\n            }\n\n            this.type = type;\n            this.id = id;\n            this.readys = [];\n\n            _video._inst.push(this);\n\n            var self = this;\n\n            $.extend(this, _video[type]);\n\n            _videoThumbs = function(data) {\n                self.data = data;\n                $.each(self.readys, function(i, fn) {\n                    fn(self.data);\n                });\n                self.readys = [];\n            };\n\n            if (this.hasOwnProperty('getUrl')) {\n                $.getJSON(this.getUrl(), _videoThumbs);\n            } else {\n                window.setTimeout(_videoThumbs, 400);\n            }\n\n            this.getMedia = function(type, callback, fail) {\n                fail = fail || F;\n                var self = this;\n                var success = function(data) {\n                    callback(self['get_' + type](data));\n                };\n                try {\n                    if (self.data) {\n                        success(self.data);\n                    } else {\n                        self.readys.push(success);\n                    }\n                } catch (e) {\n                    fail();\n                }\n            };\n        },\n\n        // utility for testing the video URL and getting the video ID\n        _videoTest = function(url) {\n            var match;\n            for (var v in _video) {\n                match = url && _video[v].reg && url.match(_video[v].reg);\n                if (match && match.length) {\n                    return {\n                        id: match[2],\n                        provider: v\n                    };\n                }\n            }\n            return false;\n        },\n\n        // native fullscreen handler\n        _nativeFullscreen = {\n\n            support: (function() {\n                var html = DOM().html;\n                return !IFRAME && (html.requestFullscreen || html.msRequestFullscreen || html.mozRequestFullScreen || html.webkitRequestFullScreen);\n            }()),\n\n            callback: F,\n\n            enter: function(instance, callback, elem) {\n\n                this.instance = instance;\n\n                this.callback = callback || F;\n\n                elem = elem || DOM().html;\n                if (elem.requestFullscreen) {\n                    elem.requestFullscreen();\n                } else if (elem.msRequestFullscreen) {\n                    elem.msRequestFullscreen();\n                } else if (elem.mozRequestFullScreen) {\n                    elem.mozRequestFullScreen();\n                } else if (elem.webkitRequestFullScreen) {\n                    elem.webkitRequestFullScreen();\n                }\n            },\n\n            exit: function(callback) {\n\n                this.callback = callback || F;\n\n                if (doc.exitFullscreen) {\n                    doc.exitFullscreen();\n                } else if (doc.msExitFullscreen) {\n                    doc.msExitFullscreen();\n                } else if (doc.mozCancelFullScreen) {\n                    doc.mozCancelFullScreen();\n                } else if (doc.webkitCancelFullScreen) {\n                    doc.webkitCancelFullScreen();\n                }\n            },\n\n            instance: null,\n\n            listen: function() {\n\n                if (!this.support) {\n                    return;\n                }\n\n                var handler = function() {\n\n                    if (!_nativeFullscreen.instance) {\n                        return;\n                    }\n                    var fs = _nativeFullscreen.instance._fullscreen;\n\n                    if (doc.fullscreen || doc.mozFullScreen || doc.webkitIsFullScreen || (doc.msFullscreenElement && doc.msFullscreenElement !== null)) {\n                        fs._enter(_nativeFullscreen.callback);\n                    } else {\n                        fs._exit(_nativeFullscreen.callback);\n                    }\n                };\n                doc.addEventListener('fullscreenchange', handler, false);\n                doc.addEventListener('MSFullscreenChange', handler, false);\n                doc.addEventListener('mozfullscreenchange', handler, false);\n                doc.addEventListener('webkitfullscreenchange', handler, false);\n            }\n        },\n\n        // the internal gallery holder\n        _galleries = [],\n\n        // the internal instance holder\n        _instances = [],\n\n        // flag for errors\n        _hasError = false,\n\n        // canvas holder\n        _canvas = false,\n\n        // instance pool, holds the galleries until themeLoad is triggered\n        _pool = [],\n\n        // Run galleries from theme trigger\n        _loadedThemes = [],\n        _themeLoad = function(theme) {\n\n            _loadedThemes.push(theme);\n\n            // run the instances we have in the pool\n            // and apply the last theme if not specified\n            $.each(_pool, function(i, instance) {\n                if (instance._options.theme == theme.name || (!instance._initialized && !instance._options.theme)) {\n                    instance.theme = theme;\n                    instance._init.call(instance);\n                }\n            });\n        },\n\n        // the Utils singleton\n        Utils = (function() {\n\n            return {\n\n                // legacy support for clearTimer\n                clearTimer: function(id) {\n                    $.each(Galleria.get(), function() {\n                        this.clearTimer(id);\n                    });\n                },\n\n                // legacy support for addTimer\n                addTimer: function(id) {\n                    $.each(Galleria.get(), function() {\n                        this.addTimer(id);\n                    });\n                },\n\n                array: function(obj) {\n                    return protoArray.slice.call(obj, 0);\n                },\n\n                create: function(className, nodeName) {\n                    nodeName = nodeName || 'div';\n                    var elem = doc.createElement(nodeName);\n                    elem.className = className;\n                    return elem;\n                },\n\n                removeFromArray: function(arr, elem) {\n                    $.each(arr, function(i, el) {\n                        if (el == elem) {\n                            arr.splice(i, 1);\n                            return false;\n                        }\n                    });\n                    return arr;\n                },\n\n                getScriptPath: function(src) {\n\n                    // the currently executing script is always the last\n                    src = src || $('script:last').attr('src');\n                    var slices = src.split('/');\n\n                    if (slices.length == 1) {\n                        return '';\n                    }\n\n                    slices.pop();\n\n                    return slices.join('/') + '/';\n                },\n\n                // CSS3 transitions, added in 1.2.4\n                animate: (function() {\n\n                    // detect transition\n                    var transition = (function(style) {\n                        var props = 'transition WebkitTransition MozTransition OTransition'.split(' '),\n                            i;\n\n                        // disable css3 animations in opera until stable\n                        if (window.opera) {\n                            return false;\n                        }\n\n                        for (i = 0; props[i]; i++) {\n                            if (typeof style[props[i]] !== 'undefined') {\n                                return props[i];\n                            }\n                        }\n                        return false;\n                    }((doc.body || doc.documentElement).style));\n\n                    // map transitionend event\n                    var endEvent = {\n                        MozTransition: 'transitionend',\n                        OTransition: 'oTransitionEnd',\n                        WebkitTransition: 'webkitTransitionEnd',\n                        transition: 'transitionend'\n                    }[transition];\n\n                    // map bezier easing conversions\n                    var easings = {\n                        _default: [0.25, 0.1, 0.25, 1],\n                        galleria: [0.645, 0.045, 0.355, 1],\n                        galleriaIn: [0.55, 0.085, 0.68, 0.53],\n                        galleriaOut: [0.25, 0.46, 0.45, 0.94],\n                        ease: [0.25, 0, 0.25, 1],\n                        linear: [0.25, 0.25, 0.75, 0.75],\n                        'ease-in': [0.42, 0, 1, 1],\n                        'ease-out': [0, 0, 0.58, 1],\n                        'ease-in-out': [0.42, 0, 0.58, 1]\n                    };\n\n                    // function for setting transition css for all browsers\n                    var setStyle = function(elem, value, suffix) {\n                        var css = {};\n                        suffix = suffix || 'transition';\n                        $.each('webkit moz ms o'.split(' '), function() {\n                            css['-' + this + '-' + suffix] = value;\n                        });\n                        elem.css(css);\n                    };\n\n                    // clear styles\n                    var clearStyle = function(elem) {\n                        setStyle(elem, 'none', 'transition');\n                        if (Galleria.WEBKIT && Galleria.TOUCH) {\n                            setStyle(elem, 'translate3d(0,0,0)', 'transform');\n                            if (elem.data('revert')) {\n                                elem.css(elem.data('revert'));\n                                elem.data('revert', null);\n                            }\n                        }\n                    };\n\n                    // various variables\n                    var change, strings, easing, syntax, revert, form, css;\n\n                    // the actual animation method\n                    return function(elem, to, options) {\n\n                        // extend defaults\n                        options = $.extend({\n                            duration: 400,\n                            complete: F,\n                            stop: false\n                        }, options);\n\n                        // cache jQuery instance\n                        elem = $(elem);\n\n                        if (!options.duration) {\n                            elem.css(to);\n                            options.complete.call(elem[0]);\n                            return;\n                        }\n\n                        // fallback to jQuery's animate if transition is not supported\n                        if (!transition) {\n                            elem.animate(to, options);\n                            return;\n                        }\n\n                        // stop\n                        if (options.stop) {\n                            // clear the animation\n                            elem.off(endEvent);\n                            clearStyle(elem);\n                        }\n\n                        // see if there is a change\n                        change = false;\n                        $.each(to, function(key, val) {\n                            css = elem.css(key);\n                            if (Utils.parseValue(css) != Utils.parseValue(val)) {\n                                change = true;\n                            }\n                            // also add computed styles for FF\n                            elem.css(key, css);\n                        });\n                        if (!change) {\n                            window.setTimeout(function() {\n                                options.complete.call(elem[0]);\n                            }, options.duration);\n                            return;\n                        }\n\n                        // the css strings to be applied\n                        strings = [];\n\n                        // the easing bezier\n                        easing = options.easing in easings ? easings[options.easing] : easings._default;\n\n                        // the syntax\n                        syntax = ' ' + options.duration + 'ms' + ' cubic-bezier(' + easing.join(',') + ')';\n\n                        // add a tiny timeout so that the browsers catches any css changes before animating\n                        window.setTimeout((function(elem, endEvent, to, syntax) {\n                            return function() {\n\n                                // attach the end event\n                                elem.one(endEvent, (function(elem) {\n                                    return function() {\n\n                                        // clear the animation\n                                        clearStyle(elem);\n\n                                        // run the complete method\n                                        options.complete.call(elem[0]);\n                                    };\n                                }(elem)));\n\n                                // do the webkit translate3d for better performance on iOS\n                                if (Galleria.WEBKIT && Galleria.TOUCH) {\n\n                                    revert = {};\n                                    form = [0, 0, 0];\n\n                                    $.each(['left', 'top'], function(i, m) {\n                                        if (m in to) {\n                                            form[i] = (Utils.parseValue(to[m]) - Utils.parseValue(elem.css(m))) + 'px';\n                                            revert[m] = to[m];\n                                            delete to[m];\n                                        }\n                                    });\n\n                                    if (form[0] || form[1]) {\n\n                                        elem.data('revert', revert);\n\n                                        strings.push('-webkit-transform' + syntax);\n\n                                        // 3d animate\n                                        setStyle(elem, 'translate3d(' + form.join(',') + ')', 'transform');\n                                    }\n                                }\n\n                                // push the animation props\n                                $.each(to, function(p, val) {\n                                    strings.push(p + syntax);\n                                });\n\n                                // set the animation styles\n                                setStyle(elem, strings.join(','));\n\n                                // animate\n                                elem.css(to);\n\n                            };\n                        }(elem, endEvent, to, syntax)), 2);\n                    };\n                }()),\n\n                removeAlpha: function(elem) {\n                    if (elem instanceof jQuery) {\n                        elem = elem[0];\n                    }\n                    if (IE < 9 && elem) {\n\n                        var style = elem.style,\n                            currentStyle = elem.currentStyle,\n                            filter = currentStyle && currentStyle.filter || style.filter || \"\";\n\n                        if (/alpha/.test(filter)) {\n                            style.filter = filter.replace(/alpha\\([^)]*\\)/i, '');\n                        }\n                    }\n                },\n\n                forceStyles: function(elem, styles) {\n                    elem = $(elem);\n                    if (elem.attr('style')) {\n                        elem.data('styles', elem.attr('style')).removeAttr('style');\n                    }\n                    elem.css(styles);\n                },\n\n                revertStyles: function() {\n                    $.each(Utils.array(arguments), function(i, elem) {\n\n                        elem = $(elem);\n                        elem.removeAttr('style');\n\n                        elem.attr('style', ''); // \"fixes\" webkit bug\n\n                        if (elem.data('styles')) {\n                            elem.attr('style', elem.data('styles')).data('styles', null);\n                        }\n                    });\n                },\n\n                moveOut: function(elem) {\n                    Utils.forceStyles(elem, {\n                        position: 'absolute',\n                        left: -10000\n                    });\n                },\n\n                moveIn: function() {\n                    Utils.revertStyles.apply(Utils, Utils.array(arguments));\n                },\n\n                hide: function(elem, speed, callback) {\n\n                    callback = callback || F;\n\n                    var $elem = $(elem);\n                    elem = $elem[0];\n\n                    // save the value if not exist\n                    if (!$elem.data('opacity')) {\n                        $elem.data('opacity', $elem.css('opacity'));\n                    }\n\n                    // always hide\n                    var style = { opacity: 0 };\n\n                    if (speed) {\n\n                        var complete = IE < 9 && elem ? function() {\n                            Utils.removeAlpha(elem);\n                            elem.style.visibility = 'hidden';\n                            callback.call(elem);\n                        } : callback;\n\n                        Utils.animate(elem, style, {\n                            duration: speed,\n                            complete: complete,\n                            stop: true\n                        });\n                    } else {\n                        if (IE < 9 && elem) {\n                            Utils.removeAlpha(elem);\n                            elem.style.visibility = 'hidden';\n                        } else {\n                            $elem.css(style);\n                        }\n                    }\n                },\n\n                show: function(elem, speed, callback) {\n\n                    callback = callback || F;\n\n                    var $elem = $(elem);\n                    elem = $elem[0];\n\n                    // bring back saved opacity\n                    var saved = parseFloat($elem.data('opacity')) || 1,\n                        style = { opacity: saved };\n\n                    // animate or toggle\n                    if (speed) {\n\n                        if (IE < 9) {\n                            $elem.css('opacity', 0);\n                            elem.style.visibility = 'visible';\n                        }\n\n                        var complete = IE < 9 && elem ? function() {\n                            if (style.opacity == 1) {\n                                Utils.removeAlpha(elem);\n                            }\n                            callback.call(elem);\n                        } : callback;\n\n                        Utils.animate(elem, style, {\n                            duration: speed,\n                            complete: complete,\n                            stop: true\n                        });\n                    } else {\n                        if (IE < 9 && style.opacity == 1 && elem) {\n                            Utils.removeAlpha(elem);\n                            elem.style.visibility = 'visible';\n                        } else {\n                            $elem.css(style);\n                        }\n                    }\n                },\n\n                wait: function(options) {\n\n                    Galleria._waiters = Galleria._waiters || [];\n\n                    options = $.extend({\n                        until: FALSE,\n                        success: F,\n                        error: function() { Galleria.raise('Could not complete wait function.'); },\n                        timeout: 3000\n                    }, options);\n\n                    var start = Utils.timestamp(),\n                        elapsed,\n                        now,\n                        tid,\n                        fn = function() {\n                            now = Utils.timestamp();\n                            elapsed = now - start;\n                            Utils.removeFromArray(Galleria._waiters, tid);\n                            if (options.until(elapsed)) {\n                                options.success();\n                                return false;\n                            }\n                            if (typeof options.timeout == 'number' && now >= start + options.timeout) {\n                                options.error();\n                                return false;\n                            }\n                            Galleria._waiters.push(tid = window.setTimeout(fn, 10));\n                        };\n                    Galleria._waiters.push(tid = window.setTimeout(fn, 10));\n                },\n\n                toggleQuality: function(img, force) {\n\n                    if ((IE !== 7 && IE !== 8) || !img || img.nodeName.toUpperCase() != 'IMG') {\n                        return;\n                    }\n\n                    if (typeof force === 'undefined') {\n                        force = img.style.msInterpolationMode === 'nearest-neighbor';\n                    }\n\n                    img.style.msInterpolationMode = force ? 'bicubic' : 'nearest-neighbor';\n                },\n\n                insertStyleTag: function(styles, id) {\n\n                    if (id && $('#' + id).length) {\n                        return;\n                    }\n\n                    var style = doc.createElement('style');\n                    if (id) {\n                        style.id = id;\n                    }\n\n                    DOM().head.appendChild(style);\n\n                    if (style.styleSheet) { // IE\n                        style.styleSheet.cssText = styles;\n                    } else {\n                        var cssText = doc.createTextNode(styles);\n                        style.appendChild(cssText);\n                    }\n                },\n\n                // a loadscript method that works for local scripts\n                loadScript: function(url, callback) {\n\n                    var done = false,\n                        script = $('<scr' +=\"\" 'ipt=\"\">').attr({\n                            src: url,\n                            async: true\n                        }).get(0);\n\n                    // Attach handlers for all browsers\n                    script.onload = script.onreadystatechange = function() {\n                        if (!done && (!this.readyState ||\n                                this.readyState === 'loaded' || this.readyState === 'complete')) {\n\n                            done = true;\n\n                            // Handle memory leak in IE\n                            script.onload = script.onreadystatechange = null;\n\n                            if (typeof callback === 'function') {\n                                callback.call(this, this);\n                            }\n                        }\n                    };\n\n                    DOM().head.appendChild(script);\n                },\n\n                // parse anything into a number\n                parseValue: function(val) {\n                    if (typeof val === 'number') {\n                        return val;\n                    } else if (typeof val === 'string') {\n                        var arr = val.match(/\\-?\\d|\\./g);\n                        return arr && arr.constructor === Array ? arr.join('') * 1 : 0;\n                    } else {\n                        return 0;\n                    }\n                },\n\n                // timestamp abstraction\n                timestamp: function() {\n                    return new Date().getTime();\n                },\n\n                loadCSS: function(href, id, callback) {\n\n                    var link,\n                        length;\n\n                    // look for manual css\n                    $('link[rel=stylesheet]').each(function() {\n                        if (new RegExp(href).test(this.href)) {\n                            link = this;\n                            return false;\n                        }\n                    });\n\n                    if (typeof id === 'function') {\n                        callback = id;\n                        id = undef;\n                    }\n\n                    callback = callback || F; // dirty\n\n                    // if already present, return\n                    if (link) {\n                        callback.call(link, link);\n                        return link;\n                    }\n\n                    // save the length of stylesheets to check against\n                    length = doc.styleSheets.length;\n\n                    // check for existing id\n                    if ($('#' + id).length) {\n\n                        $('#' + id).attr('href', href);\n                        length--;\n\n                    } else {\n                        link = $('<link>').attr({\n                            rel: 'stylesheet',\n                            href: href,\n                            id: id\n                        }).get(0);\n\n                        var styles = $('link[rel=\"stylesheet\"], style');\n                        if (styles.length) {\n                            styles.get(0).parentNode.insertBefore(link, styles[0]);\n                        } else {\n                            DOM().head.appendChild(link);\n                        }\n\n                        if (IE && length >= 31) {\n                            Galleria.raise('You have reached the browser stylesheet limit (31)', true);\n                            return;\n                        }\n                    }\n\n                    if (typeof callback === 'function') {\n\n                        // First check for dummy element (new in 1.2.8)\n                        var $loader = $('<s>').attr('id', 'galleria-loader').hide().appendTo(DOM().body);\n\n                        Utils.wait({\n                            until: function() {\n                                return $loader.height() == 1;\n                            },\n                            success: function() {\n                                $loader.remove();\n                                callback.call(link, link);\n                            },\n                            error: function() {\n                                $loader.remove();\n\n                                // If failed, tell the dev to download the latest theme\n                                Galleria.raise('Theme CSS could not load after 20 sec. ' + (Galleria.QUIRK ?\n                                    'Your browser is in Quirks Mode, please add a correct doctype.' :\n                                    'Please download the latest theme at http://galleria.io/customer/.'), true);\n                            },\n                            timeout: 5000\n                        });\n                    }\n                    return link;\n                }\n            };\n        }()),\n\n        // play icon\n        _playIcon = function(container) {\n\n            var css = '.galleria-videoicon{width:60px;height:60px;position:absolute;top:50%;left:50%;z-index:1;' +\n                'margin:-30px 0 0 -30px;cursor:pointer;background:#000;background:rgba(0,0,0,.8);border-radius:3px;-webkit-transition:all 150ms}' +\n                '.galleria-videoicon i{width:0px;height:0px;border-style:solid;border-width:10px 0 10px 16px;display:block;' +\n                'border-color:transparent transparent transparent #ffffff;margin:20px 0 0 22px}.galleria-image:hover .galleria-videoicon{background:#000}';\n\n            Utils.insertStyleTag(css, 'galleria-videoicon');\n\n            return $(Utils.create('galleria-videoicon')).html('<i></i>').appendTo(container)\n                .click(function() { $(this).siblings('img').mouseup(); });\n        },\n\n        // the transitions holder\n        _transitions = (function() {\n\n            var _slide = function(params, complete, fade, door) {\n\n                var easing = this.getOptions('easing'),\n                    distance = this.getStageWidth(),\n                    from = { left: distance * (params.rewind ? -1 : 1) },\n                    to = { left: 0 };\n\n                if (fade) {\n                    from.opacity = 0;\n                    to.opacity = 1;\n                } else {\n                    from.opacity = 1;\n                }\n\n                $(params.next).css(from);\n\n                Utils.animate(params.next, to, {\n                    duration: params.speed,\n                    complete: (function(elems) {\n                        return function() {\n                            complete();\n                            elems.css({\n                                left: 0\n                            });\n                        };\n                    }($(params.next).add(params.prev))),\n                    queue: false,\n                    easing: easing\n                });\n\n                if (door) {\n                    params.rewind = !params.rewind;\n                }\n\n                if (params.prev) {\n\n                    from = { left: 0 };\n                    to = { left: distance * (params.rewind ? 1 : -1) };\n\n                    if (fade) {\n                        from.opacity = 1;\n                        to.opacity = 0;\n                    }\n\n                    $(params.prev).css(from);\n                    Utils.animate(params.prev, to, {\n                        duration: params.speed,\n                        queue: false,\n                        easing: easing,\n                        complete: function() {\n                            $(this).css('opacity', 0);\n                        }\n                    });\n                }\n            };\n\n            return {\n\n                active: false,\n\n                init: function(effect, params, complete) {\n                    if (_transitions.effects.hasOwnProperty(effect)) {\n                        _transitions.effects[effect].call(this, params, complete);\n                    }\n                },\n\n                effects: {\n\n                    fade: function(params, complete) {\n                        $(params.next).css({\n                            opacity: 0,\n                            left: 0\n                        });\n                        Utils.animate(params.next, {\n                            opacity: 1\n                        }, {\n                            duration: params.speed,\n                            complete: complete\n                        });\n                        if (params.prev) {\n                            $(params.prev).css('opacity', 1).show();\n                            Utils.animate(params.prev, {\n                                opacity: 0\n                            }, {\n                                duration: params.speed\n                            });\n                        }\n                    },\n\n                    flash: function(params, complete) {\n                        $(params.next).css({\n                            opacity: 0,\n                            left: 0\n                        });\n                        if (params.prev) {\n                            Utils.animate(params.prev, {\n                                opacity: 0\n                            }, {\n                                duration: params.speed / 2,\n                                complete: function() {\n                                    Utils.animate(params.next, {\n                                        opacity: 1\n                                    }, {\n                                        duration: params.speed,\n                                        complete: complete\n                                    });\n                                }\n                            });\n                        } else {\n                            Utils.animate(params.next, {\n                                opacity: 1\n                            }, {\n                                duration: params.speed,\n                                complete: complete\n                            });\n                        }\n                    },\n\n                    pulse: function(params, complete) {\n                        if (params.prev) {\n                            $(params.prev).hide();\n                        }\n                        $(params.next).css({\n                            opacity: 0,\n                            left: 0\n                        }).show();\n                        Utils.animate(params.next, {\n                            opacity: 1\n                        }, {\n                            duration: params.speed,\n                            complete: complete\n                        });\n                    },\n\n                    slide: function(params, complete) {\n                        _slide.apply(this, Utils.array(arguments));\n                    },\n\n                    fadeslide: function(params, complete) {\n                        _slide.apply(this, Utils.array(arguments).concat([true]));\n                    },\n\n                    doorslide: function(params, complete) {\n                        _slide.apply(this, Utils.array(arguments).concat([false, true]));\n                    }\n                }\n            };\n        }());\n\n    // listen to fullscreen\n    _nativeFullscreen.listen();\n\n    // create special click:fast event for fast touch interaction\n    $.event.special['click:fast'] = {\n        propagate: true,\n        add: function(handleObj) {\n\n            var getCoords = function(e) {\n                if (e.touches && e.touches.length) {\n                    var touch = e.touches[0];\n                    return {\n                        x: touch.pageX,\n                        y: touch.pageY\n                    };\n                }\n            };\n\n            var def = {\n                touched: false,\n                touchdown: false,\n                coords: { x: 0, y: 0 },\n                evObj: {}\n            };\n\n            $(this).data({\n                clickstate: def,\n                timer: 0\n            }).on('touchstart.fast', function(e) {\n                window.clearTimeout($(this).data('timer'));\n                $(this).data('clickstate', {\n                    touched: true,\n                    touchdown: true,\n                    coords: getCoords(e.originalEvent),\n                    evObj: e\n                });\n            }).on('touchmove.fast', function(e) {\n                var coords = getCoords(e.originalEvent),\n                    state = $(this).data('clickstate'),\n                    distance = Math.max(\n                        Math.abs(state.coords.x - coords.x),\n                        Math.abs(state.coords.y - coords.y)\n                    );\n                if (distance > 6) {\n                    $(this).data('clickstate', $.extend(state, {\n                        touchdown: false\n                    }));\n                }\n            }).on('touchend.fast', function(e) {\n                var $this = $(this),\n                    state = $this.data('clickstate');\n                if (state.touchdown) {\n                    handleObj.handler.call(this, e);\n                }\n                $this.data('timer', window.setTimeout(function() {\n                    $this.data('clickstate', def);\n                }, 400));\n            }).on('click.fast', function(e) {\n                var state = $(this).data('clickstate');\n                if (state.touched) {\n                    return false;\n                }\n                $(this).data('clickstate', def);\n                handleObj.handler.call(this, e);\n            });\n        },\n        remove: function() {\n            $(this).off('touchstart.fast touchmove.fast touchend.fast click.fast');\n        }\n    };\n\n    // trigger resize on orientationchange (IOS7)\n    $win.on('orientationchange', function() {\n        $(this).resize();\n    });\n\n    /**\n        The main Galleria class\n\n        @class\n        @constructor\n\n        @example var gallery = new Galleria();\n\n        @author http://wib.io\n\n        @requires jQuery\n\n    */\n\n    Galleria = function() {\n\n        var self = this;\n\n        // internal options\n        this._options = {};\n\n        // flag for controlling play/pause\n        this._playing = false;\n\n        // internal interval for slideshow\n        this._playtime = 5000;\n\n        // internal variable for the currently active image\n        this._active = null;\n\n        // the internal queue, arrayified\n        this._queue = { length: 0 };\n\n        // the internal data array\n        this._data = [];\n\n        // the internal dom collection\n        this._dom = {};\n\n        // the internal thumbnails array\n        this._thumbnails = [];\n\n        // the internal layers array\n        this._layers = [];\n\n        // internal init flag\n        this._initialized = false;\n\n        // internal firstrun flag\n        this._firstrun = false;\n\n        // global stagewidth/height\n        this._stageWidth = 0;\n        this._stageHeight = 0;\n\n        // target holder\n        this._target = undef;\n\n        // bind hashes\n        this._binds = [];\n\n        // instance id\n        this._id = parseInt(M.random() * 10000, 10);\n\n        // add some elements\n        var divs = 'container stage images image-nav image-nav-left image-nav-right ' +\n            'info info-text info-title info-description ' +\n            'thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right ' +\n            'loader counter tooltip',\n            spans = 'current total';\n\n        $.each(divs.split(' '), function(i, elemId) {\n            self._dom[elemId] = Utils.create('galleria-' + elemId);\n        });\n\n        $.each(spans.split(' '), function(i, elemId) {\n            self._dom[elemId] = Utils.create('galleria-' + elemId, 'span');\n        });\n\n        // the internal keyboard object\n        // keeps reference of the keybinds and provides helper methods for binding keys\n        var keyboard = this._keyboard = {\n\n            keys: {\n                'UP': 38,\n                'DOWN': 40,\n                'LEFT': 37,\n                'RIGHT': 39,\n                'RETURN': 13,\n                'ESCAPE': 27,\n                'BACKSPACE': 8,\n                'SPACE': 32\n            },\n\n            map: {},\n\n            bound: false,\n\n            press: function(e) {\n                var key = e.keyCode || e.which;\n                if (key in keyboard.map && typeof keyboard.map[key] === 'function') {\n                    keyboard.map[key].call(self, e);\n                }\n            },\n\n            attach: function(map) {\n\n                var key, up;\n\n                for (key in map) {\n                    if (map.hasOwnProperty(key)) {\n                        up = key.toUpperCase();\n                        if (up in keyboard.keys) {\n                            keyboard.map[keyboard.keys[up]] = map[key];\n                        } else {\n                            keyboard.map[up] = map[key];\n                        }\n                    }\n                }\n                if (!keyboard.bound) {\n                    keyboard.bound = true;\n                    $doc.on('keydown', keyboard.press);\n                }\n            },\n\n            detach: function() {\n                keyboard.bound = false;\n                keyboard.map = {};\n                $doc.off('keydown', keyboard.press);\n            }\n        };\n\n        // internal controls for keeping track of active / inactive images\n        var controls = this._controls = {\n\n            0: undef,\n\n            1: undef,\n\n            active: 0,\n\n            swap: function() {\n                controls.active = controls.active ? 0 : 1;\n            },\n\n            getActive: function() {\n                return self._options.swipe ? controls.slides[self._active] : controls[controls.active];\n            },\n\n            getNext: function() {\n                return self._options.swipe ? controls.slides[self.getNext(self._active)] : controls[1 - controls.active];\n            },\n\n            slides: [],\n\n            frames: [],\n\n            layers: []\n        };\n\n        // internal carousel object\n        var carousel = this._carousel = {\n\n            // shortcuts\n            next: self.$('thumb-nav-right'),\n            prev: self.$('thumb-nav-left'),\n\n            // cache the width\n            width: 0,\n\n            // track the current position\n            current: 0,\n\n            // cache max value\n            max: 0,\n\n            // save all hooks for each width in an array\n            hooks: [],\n\n            // update the carousel\n            // you can run this method anytime, f.ex on window.resize\n            update: function() {\n                var w = 0,\n                    h = 0,\n                    hooks = [0];\n\n                $.each(self._thumbnails, function(i, thumb) {\n                    if (thumb.ready) {\n                        w += thumb.outerWidth || $(thumb.container).outerWidth(true);\n                        // Due to a bug in jquery, outerwidth() returns the floor of the actual outerwidth,\n                        // if the browser is zoom to a value other than 100%. height() returns the floating point value.\n                        var containerWidth = $(thumb.container).width();\n                        w += containerWidth - M.floor(containerWidth);\n\n                        hooks[i + 1] = w;\n                        h = M.max(h, thumb.outerHeight || $(thumb.container).outerHeight(true));\n                    }\n                });\n\n                self.$('thumbnails').css({\n                    width: w,\n                    height: h\n                });\n\n                carousel.max = w;\n                carousel.hooks = hooks;\n                carousel.width = self.$('thumbnails-list').width();\n                carousel.setClasses();\n\n                self.$('thumbnails-container').toggleClass('galleria-carousel', w > carousel.width);\n\n                // one extra calculation\n                carousel.width = self.$('thumbnails-list').width();\n\n                // todo: fix so the carousel moves to the left\n            },\n\n            bindControls: function() {\n\n                var i;\n\n                carousel.next.on('click:fast', function(e) {\n                    e.preventDefault();\n\n                    if (self._options.carouselSteps === 'auto') {\n\n                        for (i = carousel.current; i < carousel.hooks.length; i++) {\n                            if (carousel.hooks[i] - carousel.hooks[carousel.current] > carousel.width) {\n                                carousel.set(i - 2);\n                                break;\n                            }\n                        }\n\n                    } else {\n                        carousel.set(carousel.current + self._options.carouselSteps);\n                    }\n                });\n\n                carousel.prev.on('click:fast', function(e) {\n                    e.preventDefault();\n\n                    if (self._options.carouselSteps === 'auto') {\n\n                        for (i = carousel.current; i >= 0; i--) {\n                            if (carousel.hooks[carousel.current] - carousel.hooks[i] > carousel.width) {\n                                carousel.set(i + 2);\n                                break;\n                            } else if (i === 0) {\n                                carousel.set(0);\n                                break;\n                            }\n                        }\n                    } else {\n                        carousel.set(carousel.current - self._options.carouselSteps);\n                    }\n                });\n            },\n\n            // calculate and set positions\n            set: function(i) {\n                i = M.max(i, 0);\n                while (carousel.hooks[i - 1] + carousel.width >= carousel.max && i >= 0) {\n                    i--;\n                }\n                carousel.current = i;\n                carousel.animate();\n            },\n\n            // get the last position\n            getLast: function(i) {\n                return (i || carousel.current) - 1;\n            },\n\n            // follow the active image\n            follow: function(i) {\n\n                //don't follow if position fits\n                if (i === 0 || i === carousel.hooks.length - 2) {\n                    carousel.set(i);\n                    return;\n                }\n\n                // calculate last position\n                var last = carousel.current;\n                while (carousel.hooks[last] - carousel.hooks[carousel.current] <\n                    carousel.width && last <= 1=\"\" 2=\"\" carousel.hooks.length)=\"\" {=\"\" last++;=\"\" }=\"\" set=\"\" position=\"\" if=\"\" (i=\"\" -=\"\" <=\"\" carousel.current)=\"\" carousel.set(i=\"\" 1);=\"\" else=\"\" +=\"\"> last) {\n                    carousel.set(i - last + carousel.current + 2);\n                }\n            },\n\n            // helper for setting disabled classes\n            setClasses: function() {\n                carousel.prev.toggleClass('disabled', !carousel.current);\n                carousel.next.toggleClass('disabled', carousel.hooks[carousel.current] + carousel.width >= carousel.max);\n            },\n\n            // the animation method\n            animate: function(to) {\n                carousel.setClasses();\n                var num = carousel.hooks[carousel.current] * -1;\n\n                if (isNaN(num)) {\n                    return;\n                }\n\n                // FF 24 bug\n                self.$('thumbnails').css('left', function() {\n                    return $(this).css('left');\n                });\n\n                Utils.animate(self.get('thumbnails'), {\n                    left: num\n                }, {\n                    duration: self._options.carouselSpeed,\n                    easing: self._options.easing,\n                    queue: false\n                });\n            }\n        };\n\n        // tooltip control\n        // added in 1.2\n        var tooltip = this._tooltip = {\n\n            initialized: false,\n\n            open: false,\n\n            timer: 'tooltip' + self._id,\n\n            swapTimer: 'swap' + self._id,\n\n            init: function() {\n\n                tooltip.initialized = true;\n\n                var css = '.galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;' +\n                    'opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}';\n\n                Utils.insertStyleTag(css, 'galleria-tooltip');\n\n                self.$('tooltip').css({\n                    opacity: 0.8,\n                    visibility: 'visible',\n                    display: 'none'\n                });\n\n            },\n\n            // move handler\n            move: function(e) {\n                var mouseX = self.getMousePosition(e).x,\n                    mouseY = self.getMousePosition(e).y,\n                    $elem = self.$('tooltip'),\n                    x = mouseX,\n                    y = mouseY,\n                    height = $elem.outerHeight(true) + 1,\n                    width = $elem.outerWidth(true),\n                    limitY = height + 15;\n\n                var maxX = self.$('container').width() - width - 2,\n                    maxY = self.$('container').height() - height - 2;\n\n                if (!isNaN(x) && !isNaN(y)) {\n\n                    x += 10;\n                    y -= (height + 8);\n\n                    x = M.max(0, M.min(maxX, x));\n                    y = M.max(0, M.min(maxY, y));\n\n                    if (mouseY < limitY) {\n                        y = limitY;\n                    }\n\n                    $elem.css({ left: x, top: y });\n                }\n            },\n\n            // bind elements to the tooltip\n            // you can bind multiple elementIDs using { elemID : function } or { elemID : string }\n            // you can also bind single DOM elements using bind(elem, string)\n            bind: function(elem, value) {\n\n                // todo: revise if alternative tooltip is needed for mobile devices\n                if (Galleria.TOUCH) {\n                    return;\n                }\n\n                if (!tooltip.initialized) {\n                    tooltip.init();\n                }\n\n                var mouseout = function() {\n                    self.$('container').off('mousemove', tooltip.move);\n                    self.clearTimer(tooltip.timer);\n\n                    self.$('tooltip').stop().animate({\n                        opacity: 0\n                    }, 200, function() {\n\n                        self.$('tooltip').hide();\n\n                        self.addTimer(tooltip.swapTimer, function() {\n                            tooltip.open = false;\n                        }, 1000);\n                    });\n                };\n\n                var hover = function(elem, value) {\n\n                    tooltip.define(elem, value);\n\n                    $(elem).hover(function() {\n\n                        self.clearTimer(tooltip.swapTimer);\n                        self.$('container').off('mousemove', tooltip.move).on('mousemove', tooltip.move).trigger('mousemove');\n                        tooltip.show(elem);\n\n                        self.addTimer(tooltip.timer, function() {\n                            self.$('tooltip').stop().show().animate({\n                                opacity: 1\n                            });\n                            tooltip.open = true;\n\n                        }, tooltip.open ? 0 : 500);\n\n                    }, mouseout).click(mouseout);\n                };\n\n                if (typeof value === 'string') {\n                    hover((elem in self._dom ? self.get(elem) : elem), value);\n                } else {\n                    // asume elemID here\n                    $.each(elem, function(elemID, val) {\n                        hover(self.get(elemID), val);\n                    });\n                }\n            },\n\n            show: function(elem) {\n\n                elem = $(elem in self._dom ? self.get(elem) : elem);\n\n                var text = elem.data('tt'),\n                    mouseup = function(e) {\n\n                        // attach a tiny settimeout to make sure the new tooltip is filled\n                        window.setTimeout((function(ev) {\n                            return function() {\n                                tooltip.move(ev);\n                            };\n                        }(e)), 10);\n\n                        elem.off('mouseup', mouseup);\n\n                    };\n\n                text = typeof text === 'function' ? text() : text;\n\n                if (!text) {\n                    return;\n                }\n\n                self.$('tooltip').html(text.replace(/\\s/, '&#160;'));\n\n                // trigger mousemove on mouseup in case of click\n                elem.on('mouseup', mouseup);\n            },\n\n            define: function(elem, value) {\n\n                // we store functions, not strings\n                if (typeof value !== 'function') {\n                    var s = value;\n                    value = function() {\n                        return s;\n                    };\n                }\n\n                elem = $(elem in self._dom ? self.get(elem) : elem).data('tt', value);\n\n                tooltip.show(elem);\n\n            }\n        };\n\n        // internal fullscreen control\n        var fullscreen = this._fullscreen = {\n\n            scrolled: 0,\n\n            crop: undef,\n\n            active: false,\n\n            prev: $(),\n\n            beforeEnter: function(fn) { fn(); },\n            beforeExit: function(fn) { fn(); },\n\n            keymap: self._keyboard.map,\n\n            parseCallback: function(callback, enter) {\n\n                return _transitions.active ? function() {\n                    if (typeof callback == 'function') {\n                        callback.call(self);\n                    }\n                    var active = self._controls.getActive(),\n                        next = self._controls.getNext();\n\n                    self._scaleImage(next);\n                    self._scaleImage(active);\n\n                    if (enter && self._options.trueFullscreen) {\n                        // Firefox bug, revise later\n                        $(active.container).add(next.container).trigger('transitionend');\n                    }\n\n                } : callback;\n\n            },\n\n            enter: function(callback) {\n\n                fullscreen.beforeEnter(function() {\n\n                    callback = fullscreen.parseCallback(callback, true);\n\n                    if (self._options.trueFullscreen && _nativeFullscreen.support) {\n\n                        // do some stuff prior animation for wmoother transitions\n\n                        fullscreen.active = true;\n\n                        Utils.forceStyles(self.get('container'), {\n                            width: '100%',\n                            height: '100%'\n                        });\n\n                        self.rescale();\n\n                        if (Galleria.MAC) {\n                            if (!(Galleria.SAFARI && /version\\/[1-5]/.test(NAV))) {\n                                self.$('container').css('opacity', 0).addClass('fullscreen');\n                                window.setTimeout(function() {\n                                    fullscreen.scale();\n                                    self.$('container').css('opacity', 1);\n                                }, 50);\n                            } else {\n                                self.$('stage').css('opacity', 0);\n                                window.setTimeout(function() {\n                                    fullscreen.scale();\n                                    self.$('stage').css('opacity', 1);\n                                }, 4);\n                            }\n                        } else {\n                            self.$('container').addClass('fullscreen');\n                        }\n\n                        $win.resize(fullscreen.scale);\n\n                        _nativeFullscreen.enter(self, callback, self.get('container'));\n\n                    } else {\n\n                        fullscreen.scrolled = $win.scrollTop();\n                        if (!Galleria.TOUCH) {\n                            window.scrollTo(0, 0);\n                        }\n\n                        fullscreen._enter(callback);\n                    }\n                });\n\n            },\n\n            _enter: function(callback) {\n\n                fullscreen.active = true;\n\n                if (IFRAME) {\n\n                    fullscreen.iframe = (function() {\n\n                        var elem,\n                            refer = doc.referrer,\n                            test = doc.createElement('a'),\n                            loc = window.location;\n\n                        test.href = refer;\n\n                        if (test.protocol != loc.protocol ||\n                            test.hostname != loc.hostname ||\n                            test.port != loc.port) {\n                            Galleria.raise('Parent fullscreen not available. Iframe protocol, domains and ports must match.');\n                            return false;\n                        }\n\n                        fullscreen.pd = window.parent.document;\n\n                        $(fullscreen.pd).find('iframe').each(function() {\n                            var idoc = this.contentDocument || this.contentWindow.document;\n                            if (idoc === doc) {\n                                elem = this;\n                                return false;\n                            }\n                        });\n\n                        return elem;\n                    }());\n\n                }\n\n                // hide the image until rescale is complete\n                Utils.hide(self.getActiveImage());\n\n                if (IFRAME && fullscreen.iframe) {\n                    fullscreen.iframe.scrolled = $(window.parent).scrollTop();\n                    window.parent.scrollTo(0, 0);\n                }\n\n                var data = self.getData(),\n                    options = self._options,\n                    inBrowser = !self._options.trueFullscreen || !_nativeFullscreen.support,\n                    htmlbody = {\n                        height: '100%',\n                        overflow: 'hidden',\n                        margin: 0,\n                        padding: 0\n                    };\n\n                if (inBrowser) {\n\n                    self.$('container').addClass('fullscreen');\n                    fullscreen.prev = self.$('container').prev();\n\n                    if (!fullscreen.prev.length) {\n                        fullscreen.parent = self.$('container').parent();\n                    }\n\n                    // move\n                    self.$('container').appendTo('body');\n\n                    // begin styleforce\n\n                    Utils.forceStyles(self.get('container'), {\n                        position: Galleria.TOUCH ? 'absolute' : 'fixed',\n                        top: 0,\n                        left: 0,\n                        width: '100%',\n                        height: '100%',\n                        zIndex: 10000\n                    });\n                    Utils.forceStyles(DOM().html, htmlbody);\n                    Utils.forceStyles(DOM().body, htmlbody);\n                }\n\n                if (IFRAME && fullscreen.iframe) {\n                    Utils.forceStyles(fullscreen.pd.documentElement, htmlbody);\n                    Utils.forceStyles(fullscreen.pd.body, htmlbody);\n                    Utils.forceStyles(fullscreen.iframe, $.extend(htmlbody, {\n                        width: '100%',\n                        height: '100%',\n                        top: 0,\n                        left: 0,\n                        position: 'fixed',\n                        zIndex: 10000,\n                        border: 'none'\n                    }));\n                }\n\n                // temporarily attach some keys\n                // save the old ones first in a cloned object\n                fullscreen.keymap = $.extend({}, self._keyboard.map);\n\n                self.attachKeyboard({\n                    escape: self.exitFullscreen,\n                    right: self.next,\n                    left: self.prev\n                });\n\n                // temporarily save the crop\n                fullscreen.crop = options.imageCrop;\n\n                // set fullscreen options\n                if (options.fullscreenCrop != undef) {\n                    options.imageCrop = options.fullscreenCrop;\n                }\n\n                // swap to big image if it's different from the display image\n                if (data && data.big && data.image !== data.big) {\n                    var big = new Galleria.Picture(),\n                        cached = big.isCached(data.big),\n                        index = self.getIndex(),\n                        thumb = self._thumbnails[index];\n\n                    self.trigger({\n                        type: Galleria.LOADSTART,\n                        cached: cached,\n                        rewind: false,\n                        index: index,\n                        imageTarget: self.getActiveImage(),\n                        thumbTarget: thumb,\n                        galleriaData: data\n                    });\n\n                    big.load(data.big, function(big) {\n                        self._scaleImage(big, {\n                            complete: function(big) {\n                                self.trigger({\n                                    type: Galleria.LOADFINISH,\n                                    cached: cached,\n                                    index: index,\n                                    rewind: false,\n                                    imageTarget: big.image,\n                                    thumbTarget: thumb\n                                });\n                                var image = self._controls.getActive().image;\n                                if (image) {\n                                    $(image).width(big.image.width).height(big.image.height)\n                                        .attr('style', $(big.image).attr('style'))\n                                        .attr('src', big.image.src);\n                                }\n                            }\n                        });\n                    });\n\n                    var n = self.getNext(index),\n                        p = new Galleria.Picture(),\n                        ndata = self.getData(n);\n                    p.preload(self.isFullscreen() && ndata.big ? ndata.big : ndata.image);\n                }\n\n                // init the first rescale and attach callbacks\n\n                self.rescale(function() {\n\n                    self.addTimer(false, function() {\n                        // show the image after 50 ms\n                        if (inBrowser) {\n                            Utils.show(self.getActiveImage());\n                        }\n\n                        if (typeof callback === 'function') {\n                            callback.call(self);\n                        }\n                        self.rescale();\n\n                    }, 100);\n\n                    self.trigger(Galleria.FULLSCREEN_ENTER);\n                });\n\n                if (!inBrowser) {\n                    Utils.show(self.getActiveImage());\n                } else {\n                    $win.resize(fullscreen.scale);\n                }\n\n            },\n\n            scale: function() {\n                self.rescale();\n            },\n\n            exit: function(callback) {\n\n                fullscreen.beforeExit(function() {\n\n                    callback = fullscreen.parseCallback(callback);\n\n                    if (self._options.trueFullscreen && _nativeFullscreen.support) {\n                        _nativeFullscreen.exit(callback);\n                    } else {\n                        fullscreen._exit(callback);\n                    }\n                });\n            },\n\n            _exit: function(callback) {\n\n                fullscreen.active = false;\n\n                var inBrowser = !self._options.trueFullscreen || !_nativeFullscreen.support,\n                    $container = self.$('container').removeClass('fullscreen');\n\n                // move back\n                if (fullscreen.parent) {\n                    fullscreen.parent.prepend($container);\n                } else {\n                    $container.insertAfter(fullscreen.prev);\n                }\n\n                if (inBrowser) {\n                    Utils.hide(self.getActiveImage());\n\n                    // revert all styles\n                    Utils.revertStyles(self.get('container'), DOM().html, DOM().body);\n\n                    // scroll back\n                    if (!Galleria.TOUCH) {\n                        window.scrollTo(0, fullscreen.scrolled);\n                    }\n\n                    // reload iframe src manually\n                    var frame = self._controls.frames[self._controls.active];\n                    if (frame && frame.image) {\n                        frame.image.src = frame.image.src;\n                    }\n                }\n\n                if (IFRAME && fullscreen.iframe) {\n                    Utils.revertStyles(fullscreen.pd.documentElement, fullscreen.pd.body, fullscreen.iframe);\n                    if (fullscreen.iframe.scrolled) {\n                        window.parent.scrollTo(0, fullscreen.iframe.scrolled);\n                    }\n                }\n\n                // detach all keyboard events and apply the old keymap\n                self.detachKeyboard();\n                self.attachKeyboard(fullscreen.keymap);\n\n                // bring back cached options\n                self._options.imageCrop = fullscreen.crop;\n\n                // return to original image\n                var big = self.getData().big,\n                    image = self._controls.getActive().image;\n\n                if (!self.getData().iframe && image && big && big == image.src) {\n\n                    window.setTimeout(function(src) {\n                        return function() {\n                            image.src = src;\n                        };\n                    }(self.getData().image), 1);\n\n                }\n\n                self.rescale(function() {\n                    self.addTimer(false, function() {\n\n                        // show the image after 50 ms\n                        if (inBrowser) {\n                            Utils.show(self.getActiveImage());\n                        }\n\n                        if (typeof callback === 'function') {\n                            callback.call(self);\n                        }\n\n                        $win.trigger('resize');\n\n                    }, 50);\n                    self.trigger(Galleria.FULLSCREEN_EXIT);\n                });\n\n                $win.off('resize', fullscreen.scale);\n            }\n        };\n\n        // the internal idle object for controlling idle states\n        var idle = this._idle = {\n\n            trunk: [],\n\n            bound: false,\n\n            active: false,\n\n            add: function(elem, to, from, hide) {\n                if (!elem || Galleria.TOUCH) {\n                    return;\n                }\n                if (!idle.bound) {\n                    idle.addEvent();\n                }\n                elem = $(elem);\n\n                if (typeof from == 'boolean') {\n                    hide = from;\n                    from = {};\n                }\n\n                from = from || {};\n\n                var extract = {},\n                    style;\n\n                for (style in to) {\n                    if (to.hasOwnProperty(style)) {\n                        extract[style] = elem.css(style);\n                    }\n                }\n\n                elem.data('idle', {\n                    from: $.extend(extract, from),\n                    to: to,\n                    complete: true,\n                    busy: false\n                });\n\n                if (!hide) {\n                    idle.addTimer();\n                } else {\n                    elem.css(to);\n                }\n                idle.trunk.push(elem);\n            },\n\n            remove: function(elem) {\n\n                elem = $(elem);\n\n                $.each(idle.trunk, function(i, el) {\n                    if (el && el.length && !el.not(elem).length) {\n                        elem.css(elem.data('idle').from);\n                        idle.trunk.splice(i, 1);\n                    }\n                });\n\n                if (!idle.trunk.length) {\n                    idle.removeEvent();\n                    self.clearTimer(idle.timer);\n                }\n            },\n\n            addEvent: function() {\n                idle.bound = true;\n                self.$('container').on('mousemove click', idle.showAll);\n                if (self._options.idleMode == 'hover') {\n                    self.$('container').on('mouseleave', idle.hide);\n                }\n            },\n\n            removeEvent: function() {\n                idle.bound = false;\n                self.$('container').on('mousemove click', idle.showAll);\n                if (self._options.idleMode == 'hover') {\n                    self.$('container').off('mouseleave', idle.hide);\n                }\n            },\n\n            addTimer: function() {\n                if (self._options.idleMode == 'hover') {\n                    return;\n                }\n                self.addTimer('idle', function() {\n                    idle.hide();\n                }, self._options.idleTime);\n            },\n\n            hide: function() {\n\n                if (!self._options.idleMode || self.getIndex() === false) {\n                    return;\n                }\n\n                self.trigger(Galleria.IDLE_ENTER);\n\n                var len = idle.trunk.length;\n\n                $.each(idle.trunk, function(i, elem) {\n\n                    var data = elem.data('idle');\n\n                    if (!data) {\n                        return;\n                    }\n\n                    elem.data('idle').complete = false;\n\n                    Utils.animate(elem, data.to, {\n                        duration: self._options.idleSpeed,\n                        complete: function() {\n                            if (i == len - 1) {\n                                idle.active = false;\n                            }\n                        }\n                    });\n                });\n            },\n\n            showAll: function() {\n\n                self.clearTimer('idle');\n\n                $.each(idle.trunk, function(i, elem) {\n                    idle.show(elem);\n                });\n            },\n\n            show: function(elem) {\n\n                var data = elem.data('idle');\n\n                if (!idle.active || (!data.busy && !data.complete)) {\n\n                    data.busy = true;\n\n                    self.trigger(Galleria.IDLE_EXIT);\n\n                    self.clearTimer('idle');\n\n                    Utils.animate(elem, data.from, {\n                        duration: self._options.idleSpeed / 2,\n                        complete: function() {\n                            idle.active = true;\n                            $(elem).data('idle').busy = false;\n                            $(elem).data('idle').complete = true;\n                        }\n                    });\n\n                }\n                idle.addTimer();\n            }\n        };\n\n        // internal lightbox object\n        // creates a predesigned lightbox for simple popups of images in galleria\n        var lightbox = this._lightbox = {\n\n            width: 0,\n\n            height: 0,\n\n            initialized: false,\n\n            active: null,\n\n            image: null,\n\n            elems: {},\n\n            keymap: false,\n\n            init: function() {\n\n                if (lightbox.initialized) {\n                    return;\n                }\n                lightbox.initialized = true;\n\n                // create some elements to work with\n                var elems = 'overlay box content shadow title info close prevholder prev nextholder next counter image',\n                    el = {},\n                    op = self._options,\n                    css = '',\n                    abs = 'position:absolute;',\n                    prefix = 'lightbox-',\n                    cssMap = {\n                        overlay: 'position:fixed;display:none;opacity:' + op.overlayOpacity + ';filter:alpha(opacity=' + (op.overlayOpacity * 100) +\n                            ');top:0;left:0;width:100%;height:100%;background:' + op.overlayBackground + ';z-index:99990',\n                        box: 'position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991',\n                        shadow: abs + 'background:#000;width:100%;height:100%;',\n                        content: abs + 'background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden',\n                        info: abs + 'bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px',\n                        close: abs + 'top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999',\n                        image: abs + 'top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;',\n                        prevholder: abs + 'width:50%;top:0;bottom:40px;cursor:pointer;',\n                        nextholder: abs + 'width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;',\n                        prev: abs + 'top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif',\n                        next: abs + 'top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000',\n                        title: 'float:left',\n                        counter: 'float:right;margin-left:8px;'\n                    },\n                    hover = function(elem) {\n                        return elem.hover(\n                            function() { $(this).css('color', '#bbb'); },\n                            function() { $(this).css('color', '#444'); }\n                        );\n                    },\n                    appends = {};\n\n                // fix for navigation hovers transparent background event \"feature\"\n                var exs = '';\n                if (IE > 7) {\n                    exs = IE < 9 ? 'background:#000;filter:alpha(opacity=0);' : 'background:rgba(0,0,0,0);';\n                } else {\n                    exs = 'z-index:99999';\n                }\n\n                cssMap.nextholder += exs;\n                cssMap.prevholder += exs;\n\n                // create and insert CSS\n                $.each(cssMap, function(key, value) {\n                    css += '.galleria-' + prefix + key + '{' + value + '}';\n                });\n\n                css += '.galleria-' + prefix + 'box.iframe .galleria-' + prefix + 'prevholder,' +\n                    '.galleria-' + prefix + 'box.iframe .galleria-' + prefix + 'nextholder{' +\n                    'width:100px;height:100px;top:50%;margin-top:-70px}';\n\n                Utils.insertStyleTag(css, 'galleria-lightbox');\n\n                // create the elements\n                $.each(elems.split(' '), function(i, elemId) {\n                    self.addElement('lightbox-' + elemId);\n                    el[elemId] = lightbox.elems[elemId] = self.get('lightbox-' + elemId);\n                });\n\n                // initiate the image\n                lightbox.image = new Galleria.Picture();\n\n                // append the elements\n                $.each({\n                    box: 'shadow content close prevholder nextholder',\n                    info: 'title counter',\n                    content: 'info image',\n                    prevholder: 'prev',\n                    nextholder: 'next'\n                }, function(key, val) {\n                    var arr = [];\n                    $.each(val.split(' '), function(i, prop) {\n                        arr.push(prefix + prop);\n                    });\n                    appends[prefix + key] = arr;\n                });\n\n                self.append(appends);\n\n                $(el.image).append(lightbox.image.container);\n\n                $(DOM().body).append(el.overlay, el.box);\n\n                // add the prev/next nav and bind some controls\n\n                hover($(el.close).on('click:fast', lightbox.hide).html('&#215;'));\n\n                $.each(['Prev', 'Next'], function(i, dir) {\n\n                    var $d = $(el[dir.toLowerCase()]).html(/v/.test(dir) ? '&#8249;&#160;' : '&#160;&#8250;'),\n                        $e = $(el[dir.toLowerCase() + 'holder']);\n\n                    $e.on('click:fast', function() {\n                        lightbox['show' + dir]();\n                    });\n\n                    // IE7 and touch devices will simply show the nav\n                    if (IE < 8 || Galleria.TOUCH) {\n                        $d.show();\n                        return;\n                    }\n\n                    $e.hover(function() {\n                        $d.show();\n                    }, function(e) {\n                        $d.stop().fadeOut(200);\n                    });\n\n                });\n                $(el.overlay).on('click:fast', lightbox.hide);\n\n                // the lightbox animation is slow on ipad\n                if (Galleria.IPAD) {\n                    self._options.lightboxTransitionSpeed = 0;\n                }\n\n            },\n\n            rescale: function(event) {\n\n                // calculate\n                var width = M.min($win.width() - 40, lightbox.width),\n                    height = M.min($win.height() - 60, lightbox.height),\n                    ratio = M.min(width / lightbox.width, height / lightbox.height),\n                    destWidth = M.round(lightbox.width * ratio) + 40,\n                    destHeight = M.round(lightbox.height * ratio) + 60,\n                    to = {\n                        width: destWidth,\n                        height: destHeight,\n                        'margin-top': M.ceil(destHeight / 2) * -1,\n                        'margin-left': M.ceil(destWidth / 2) * -1\n                    };\n\n                // if rescale event, don't animate\n                if (event) {\n                    $(lightbox.elems.box).css(to);\n                } else {\n                    $(lightbox.elems.box).animate(to, {\n                        duration: self._options.lightboxTransitionSpeed,\n                        easing: self._options.easing,\n                        complete: function() {\n                            var image = lightbox.image,\n                                speed = self._options.lightboxFadeSpeed;\n\n                            self.trigger({\n                                type: Galleria.LIGHTBOX_IMAGE,\n                                imageTarget: image.image\n                            });\n\n                            $(image.container).show();\n\n                            $(image.image).animate({ opacity: 1 }, speed);\n                            Utils.show(lightbox.elems.info, speed);\n                        }\n                    });\n                }\n            },\n\n            hide: function() {\n\n                // remove the image\n                lightbox.image.image = null;\n\n                $win.off('resize', lightbox.rescale);\n\n                $(lightbox.elems.box).hide().find('iframe').remove();\n\n                Utils.hide(lightbox.elems.info);\n\n                self.detachKeyboard();\n                self.attachKeyboard(lightbox.keymap);\n\n                lightbox.keymap = false;\n\n                Utils.hide(lightbox.elems.overlay, 200, function() {\n                    $(this).hide().css('opacity', self._options.overlayOpacity);\n                    self.trigger(Galleria.LIGHTBOX_CLOSE);\n                });\n            },\n\n            showNext: function() {\n                lightbox.show(self.getNext(lightbox.active));\n            },\n\n            showPrev: function() {\n                lightbox.show(self.getPrev(lightbox.active));\n            },\n\n            show: function(index) {\n\n                lightbox.active = index = typeof index === 'number' ? index : self.getIndex() || 0;\n\n                if (!lightbox.initialized) {\n                    lightbox.init();\n                }\n\n                // trigger the event\n                self.trigger(Galleria.LIGHTBOX_OPEN);\n\n                // temporarily attach some keys\n                // save the old ones first in a cloned object\n                if (!lightbox.keymap) {\n\n                    lightbox.keymap = $.extend({}, self._keyboard.map);\n\n                    self.attachKeyboard({\n                        escape: lightbox.hide,\n                        right: lightbox.showNext,\n                        left: lightbox.showPrev\n                    });\n                }\n\n                $win.off('resize', lightbox.rescale);\n\n                var data = self.getData(index),\n                    total = self.getDataLength(),\n                    n = self.getNext(index),\n                    ndata, p, i;\n\n                Utils.hide(lightbox.elems.info);\n\n                try {\n                    for (i = self._options.preload; i > 0; i--) {\n                        p = new Galleria.Picture();\n                        ndata = self.getData(n);\n                        p.preload(ndata.big ? ndata.big : ndata.image);\n                        n = self.getNext(n);\n                    }\n                } catch (e) {}\n\n                lightbox.image.isIframe = (data.iframe && !data.image);\n\n                $(lightbox.elems.box).toggleClass('iframe', lightbox.image.isIframe);\n\n                $(lightbox.image.container).find('.galleria-videoicon').remove();\n\n                lightbox.image.load(data.big || data.image || data.iframe, function(image) {\n\n                    if (image.isIframe) {\n\n                        var cw = $(window).width(),\n                            ch = $(window).height();\n\n                        if (image.video && self._options.maxVideoSize) {\n                            var r = M.min(self._options.maxVideoSize / cw, self._options.maxVideoSize / ch);\n                            if (r < 1) {\n                                cw *= r;\n                                ch *= r;\n                            }\n                        }\n                        lightbox.width = cw;\n                        lightbox.height = ch;\n\n                    } else {\n                        lightbox.width = image.original.width;\n                        lightbox.height = image.original.height;\n                    }\n\n                    $(image.image).css({\n                        width: image.isIframe ? '100%' : '100.1%',\n                        height: image.isIframe ? '100%' : '100.1%',\n                        top: 0,\n                        bottom: 0,\n                        zIndex: 99998,\n                        opacity: 0,\n                        visibility: 'visible'\n                    }).parent().height('100%');\n\n                    lightbox.elems.title.innerHTML = data.title || '';\n                    lightbox.elems.counter.innerHTML = (index + 1) + ' / ' + total;\n                    $win.resize(lightbox.rescale);\n                    lightbox.rescale();\n\n                    if (data.image && data.iframe) {\n\n                        $(lightbox.elems.box).addClass('iframe');\n\n                        if (data.video) {\n                            var $icon = _playIcon(image.container).hide();\n                            window.setTimeout(function() {\n                                $icon.fadeIn(200);\n                            }, 200);\n                        }\n\n                        $(image.image).css('cursor', 'pointer').mouseup((function(data, image) {\n                            return function(e) {\n                                $(lightbox.image.container).find('.galleria-videoicon').remove();\n                                e.preventDefault();\n                                image.isIframe = true;\n                                image.load(data.iframe + (data.video ? '&autoplay=1' : ''), {\n                                    width: '100%',\n                                    height: IE < 8 ? $(lightbox.image.container).height() : '100%'\n                                });\n                            };\n                        }(data, image)));\n                    }\n                });\n\n                $(lightbox.elems.overlay).show().css('visibility', 'visible');\n                $(lightbox.elems.box).show();\n            }\n        };\n\n        // the internal timeouts object\n        // provides helper methods for controlling timeouts\n\n        var _timer = this._timer = {\n\n            trunk: {},\n\n            add: function(id, fn, delay, loop) {\n                id = id || new Date().getTime();\n                loop = loop || false;\n                this.clear(id);\n                if (loop) {\n                    var old = fn;\n                    fn = function() {\n                        old();\n                        _timer.add(id, fn, delay);\n                    };\n                }\n                this.trunk[id] = window.setTimeout(fn, delay);\n            },\n\n            clear: function(id) {\n\n                var del = function(i) {\n                        window.clearTimeout(this.trunk[i]);\n                        delete this.trunk[i];\n                    },\n                    i;\n\n                if (!!id && id in this.trunk) {\n                    del.call(this, id);\n\n                } else if (typeof id === 'undefined') {\n                    for (i in this.trunk) {\n                        if (this.trunk.hasOwnProperty(i)) {\n                            del.call(this, i);\n                        }\n                    }\n                }\n            }\n        };\n\n        return this;\n    };\n\n    // end Galleria constructor\n\n    Galleria.prototype = {\n\n        // bring back the constructor reference\n\n        constructor: Galleria,\n\n        /**\n            Use this function to initialize the gallery and start loading.\n            Should only be called once per instance.\n\n            @param {HTMLElement} target The target element\n            @param {Object} options The gallery options\n\n            @returns Instance\n        */\n\n        init: function(target, options) {\n\n            options = _legacyOptions(options);\n\n            // save the original ingredients\n            this._original = {\n                target: target,\n                options: options,\n                data: null\n            };\n\n            // save the target here\n            this._target = this._dom.target = target.nodeName ? target : $(target).get(0);\n\n            // save the original content for destruction\n            this._original.html = this._target.innerHTML;\n\n            // push the instance\n            _instances.push(this);\n\n            // raise error if no target is detected\n            if (!this._target) {\n                Galleria.raise('Target not found', true);\n                return;\n            }\n\n            // apply options\n            this._options = {\n                autoplay: false,\n                carousel: true,\n                carouselFollow: true, // legacy, deprecate at 1.3\n                carouselSpeed: 400,\n                carouselSteps: 'auto',\n                clicknext: false,\n                dailymotion: {\n                    foreground: '%23EEEEEE',\n                    highlight: '%235BCEC5',\n                    background: '%23222222',\n                    logo: 0,\n                    hideInfos: 1\n                },\n                dataConfig: function(elem) {\n                    return {}; },\n                dataSelector: 'img',\n                dataSort: false,\n                dataSource: this._target,\n                debug: undef,\n                dummy: undef, // 1.2.5\n                easing: 'galleria',\n                extend: function(options) {},\n                fullscreenCrop: undef, // 1.2.5\n                fullscreenDoubleTap: true, // 1.2.4 toggles fullscreen on double-tap for touch devices\n                fullscreenTransition: undef, // 1.2.6\n                height: 0,\n                idleMode: true, // 1.2.4 toggles idleMode\n                idleTime: 3000,\n                idleSpeed: 200,\n                imageCrop: false,\n                imageMargin: 0,\n                imagePan: false,\n                imagePanSmoothness: 12,\n                imagePosition: '50%',\n                imageTimeout: undef, // 1.2.5\n                initialTransition: undef, // 1.2.4, replaces transitionInitial\n                keepSource: false,\n                layerFollow: true, // 1.2.5\n                lightbox: false, // 1.2.3\n                lightboxFadeSpeed: 200,\n                lightboxTransitionSpeed: 200,\n                linkSourceImages: true,\n                maxScaleRatio: undef,\n                maxVideoSize: undef, // 1.2.9\n                minScaleRatio: undef, // deprecated in 1.2.9\n                overlayOpacity: 0.85,\n                overlayBackground: '#0b0b0b',\n                pauseOnInteraction: true,\n                popupLinks: false,\n                preload: 2,\n                queue: true,\n                responsive: true,\n                show: 0,\n                showInfo: true,\n                showCounter: true,\n                showImagenav: true,\n                swipe: 'auto', // 1.2.4 -> revised in 1.3 -> changed type in 1.3.5\n                theme: null,\n                thumbCrop: true,\n                thumbEventType: 'click:fast',\n                thumbMargin: 0,\n                thumbQuality: 'auto',\n                thumbDisplayOrder: true, // 1.2.8\n                thumbPosition: '50%', // 1.3\n                thumbnails: true,\n                touchTransition: undef, // 1.2.6\n                transition: 'fade',\n                transitionInitial: undef, // legacy, deprecate in 1.3. Use initialTransition instead.\n                transitionSpeed: 400,\n                trueFullscreen: true, // 1.2.7\n                useCanvas: false, // 1.2.4\n                variation: '', // 1.3.2\n                videoPoster: true, // 1.3\n                vimeo: {\n                    title: 0,\n                    byline: 0,\n                    portrait: 0,\n                    color: 'aaaaaa'\n                },\n                wait: 5000, // 1.2.7\n                width: 'auto',\n                youtube: {\n                    modestbranding: 1,\n                    autohide: 1,\n                    color: 'white',\n                    hd: 1,\n                    rel: 0,\n                    showinfo: 0\n                }\n            };\n\n            // legacy support for transitionInitial\n            this._options.initialTransition = this._options.initialTransition || this._options.transitionInitial;\n\n            if (options) {\n\n                // turn off debug\n                if (options.debug === false) {\n                    DEBUG = false;\n                }\n\n                // set timeout\n                if (typeof options.imageTimeout === 'number') {\n                    TIMEOUT = options.imageTimeout;\n                }\n\n                // set dummy\n                if (typeof options.dummy === 'string') {\n                    DUMMY = options.dummy;\n                }\n\n                // set theme\n                if (typeof options.theme == 'string') {\n                    this._options.theme = options.theme;\n                }\n            }\n\n            // hide all content\n            $(this._target).children().hide();\n\n            // Warn for quirks mode\n            if (Galleria.QUIRK) {\n                Galleria.raise('Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML and add a correct doctype.');\n            }\n\n            // now we just have to wait for the theme...\n            // first check if it has already loaded\n            if (_loadedThemes.length) {\n                if (this._options.theme) {\n                    for (var i = 0; i < _loadedThemes.length; i++) {\n                        if (this._options.theme === _loadedThemes[i].name) {\n                            this.theme = _loadedThemes[i];\n                            break;\n                        }\n                    }\n                } else {\n                    // if no theme sepcified, apply the first loaded theme\n                    this.theme = _loadedThemes[0];\n                }\n            }\n\n            if (typeof this.theme == 'object') {\n                this._init();\n            } else {\n                // if no theme is loaded yet, push the instance into a pool and run it when the theme is ready\n                _pool.push(this);\n            }\n\n            return this;\n        },\n\n        // this method should only be called once per instance\n        // for manipulation of data, use the .load method\n\n        _init: function() {\n\n            var self = this,\n                options = this._options;\n\n            if (this._initialized) {\n                Galleria.raise('Init failed: Gallery instance already initialized.');\n                return this;\n            }\n\n            this._initialized = true;\n\n            if (!this.theme) {\n                Galleria.raise('Init failed: No theme found.', true);\n                return this;\n            }\n\n            // merge the theme & caller options\n            $.extend(true, options, this.theme.defaults, this._original.options, Galleria.configure.options);\n\n            // internally we use boolean for swipe\n            options.swipe = (function(s) {\n\n                if (s == 'enforced') {\n                    return true; }\n\n                // legacy patch\n                if (s === false || s == 'disabled') {\n                    return false; }\n\n                return !!Galleria.TOUCH;\n\n            }(options.swipe));\n\n            // disable options that arent compatible with swipe\n            if (options.swipe) {\n                options.clicknext = false;\n                options.imagePan = false;\n            }\n\n            // check for canvas support\n            (function(can) {\n                if (!('getContext' in can)) {\n                    can = null;\n                    return;\n                }\n                _canvas = _canvas || {\n                    elem: can,\n                    context: can.getContext('2d'),\n                    cache: {},\n                    length: 0\n                };\n            }(doc.createElement('canvas')));\n\n            // bind the gallery to run when data is ready\n            this.bind(Galleria.DATA, function() {\n\n                // remove big if total pixels are less than 1024 (most phones)\n                if (window.screen && window.screen.width && Array.prototype.forEach) {\n\n                    this._data.forEach(function(data) {\n\n                        var density = 'devicePixelRatio' in window ? window.devicePixelRatio : 1,\n                            m = M.max(window.screen.width, window.screen.height);\n\n                        if (m * density < 1024) {\n                            data.big = data.image;\n                        }\n                    });\n                }\n\n                // save the new data\n                this._original.data = this._data;\n\n                // lets show the counter here\n                this.get('total').innerHTML = this.getDataLength();\n\n                // cache the container\n                var $container = this.$('container');\n\n                // set ratio if height is < 2\n                if (self._options.height < 2) {\n                    self._userRatio = self._ratio = self._options.height;\n                }\n\n                // the gallery is ready, let's just wait for the css\n                var num = { width: 0, height: 0 };\n                var testHeight = function() {\n                    return self.$('stage').height();\n                };\n\n                // check container and thumbnail height\n                Utils.wait({\n                    until: function() {\n\n                        // keep trying to get the value\n                        num = self._getWH();\n                        $container.width(num.width).height(num.height);\n                        return testHeight() && num.width && num.height > 50;\n\n                    },\n                    success: function() {\n\n                        self._width = num.width;\n                        self._height = num.height;\n                        self._ratio = self._ratio || num.height / num.width;\n\n                        // for some strange reason, webkit needs a single setTimeout to play ball\n                        if (Galleria.WEBKIT) {\n                            window.setTimeout(function() {\n                                self._run();\n                            }, 1);\n                        } else {\n                            self._run();\n                        }\n                    },\n                    error: function() {\n\n                        // Height was probably not set, raise hard errors\n\n                        if (testHeight()) {\n                            Galleria.raise('Could not extract sufficient width/height of the gallery container. Traced measures: width:' + num.width + 'px, height: ' + num.height + 'px.', true);\n                        } else {\n                            Galleria.raise('Could not extract a stage height from the CSS. Traced height: ' + testHeight() + 'px.', true);\n                        }\n                    },\n                    timeout: typeof this._options.wait == 'number' ? this._options.wait : false\n                });\n            });\n\n            // build the gallery frame\n            this.append({\n                'info-text': ['info-title', 'info-description'],\n                'info': ['info-text'],\n                'image-nav': ['image-nav-right', 'image-nav-left'],\n                'stage': ['images', 'loader', 'counter', 'image-nav'],\n                'thumbnails-list': ['thumbnails'],\n                'thumbnails-container': ['thumb-nav-left', 'thumbnails-list', 'thumb-nav-right'],\n                'container': ['stage', 'thumbnails-container', 'info', 'tooltip']\n            });\n\n            Utils.hide(this.$('counter').append(\n                this.get('current'),\n                doc.createTextNode(' / '),\n                this.get('total')\n            ));\n\n            this.setCounter('&#8211;');\n\n            Utils.hide(self.get('tooltip'));\n\n            // add a notouch class on the container to prevent unwanted :hovers on touch devices\n            this.$('container').addClass([\n                (Galleria.TOUCH ? 'touch' : 'notouch'),\n                this._options.variation,\n                'galleria-theme-' + this.theme.name\n            ].join(' '));\n\n            // add images to the controls\n            if (!this._options.swipe) {\n                $.each(new Array(2), function(i) {\n\n                    // create a new Picture instance\n                    var image = new Galleria.Picture();\n\n                    // apply some styles, create & prepend overlay\n                    $(image.container).css({\n                        position: 'absolute',\n                        top: 0,\n                        left: 0\n                    }).prepend(self._layers[i] = $(Utils.create('galleria-layer')).css({\n                        position: 'absolute',\n                        top: 0,\n                        left: 0,\n                        right: 0,\n                        bottom: 0,\n                        zIndex: 2\n                    })[0]);\n\n                    // append the image\n                    self.$('images').append(image.container);\n\n                    // reload the controls\n                    self._controls[i] = image;\n\n                    // build a frame\n                    var frame = new Galleria.Picture();\n                    frame.isIframe = true;\n\n                    $(frame.container).attr('class', 'galleria-frame').css({\n                        position: 'absolute',\n                        top: 0,\n                        left: 0,\n                        zIndex: 4,\n                        background: '#000',\n                        display: 'none'\n                    }).appendTo(image.container);\n\n                    self._controls.frames[i] = frame;\n\n                });\n            }\n\n            // some forced generic styling\n            this.$('images').css({\n                position: 'relative',\n                top: 0,\n                left: 0,\n                width: '100%',\n                height: '100%'\n            });\n\n            if (options.swipe) {\n                this.$('images').css({\n                    position: 'absolute',\n                    top: 0,\n                    left: 0,\n                    width: 0,\n                    height: '100%'\n                });\n                this.finger = new Galleria.Finger(this.get('stage'), {\n                    onchange: function(page) {\n                        self.pause().show(page);\n                    },\n                    oncomplete: function(page) {\n\n                        var index = M.max(0, M.min(parseInt(page, 10), self.getDataLength() - 1)),\n                            data = self.getData(index);\n\n                        $(self._thumbnails[index].container)\n                            .addClass('active')\n                            .siblings('.active')\n                            .removeClass('active');\n\n                        if (!data) {\n                            return;\n                        }\n\n                        // remove video iframes\n                        self.$('images').find('.galleria-frame').css('opacity', 0).hide().find('iframe').remove();\n\n                        if (self._options.carousel && self._options.carouselFollow) {\n                            self._carousel.follow(index);\n                        }\n                    }\n                });\n                this.bind(Galleria.RESCALE, function() {\n                    this.finger.setup();\n                });\n                this.$('stage').on('click', function(e) {\n                    var data = self.getData();\n                    if (!data) {\n                        return;\n                    }\n                    if (data.iframe) {\n\n                        if (self.isPlaying()) {\n                            self.pause();\n                        }\n                        var frame = self._controls.frames[self._active],\n                            w = self._stageWidth,\n                            h = self._stageHeight;\n\n                        if ($(frame.container).find('iframe').length) {\n                            return;\n                        }\n\n                        $(frame.container).css({\n                            width: w,\n                            height: h,\n                            opacity: 0\n                        }).show().animate({\n                            opacity: 1\n                        }, 200);\n\n                        window.setTimeout(function() {\n                            frame.load(data.iframe + (data.video ? '&autoplay=1' : ''), {\n                                width: w,\n                                height: h\n                            }, function(frame) {\n                                self.$('container').addClass('videoplay');\n                                frame.scale({\n                                    width: self._stageWidth,\n                                    height: self._stageHeight,\n                                    iframelimit: data.video ? self._options.maxVideoSize : undef\n                                });\n                            });\n                        }, 100);\n\n                        return;\n                    }\n\n                    if (data.link) {\n                        if (self._options.popupLinks) {\n                            var win = window.open(data.link, '_blank');\n                        } else {\n                            window.location.href = data.link;\n                        }\n                        return;\n                    }\n                });\n                this.bind(Galleria.IMAGE, function(e) {\n\n                    self.setCounter(e.index);\n                    self.setInfo(e.index);\n\n                    var next = this.getNext(),\n                        prev = this.getPrev();\n\n                    var preloads = [prev, next];\n                    preloads.push(this.getNext(next), this.getPrev(prev), self._controls.slides.length - 1);\n\n                    var filtered = [];\n\n                    $.each(preloads, function(i, val) {\n                        if ($.inArray(val, filtered) == -1) {\n                            filtered.push(val);\n                        }\n                    });\n\n                    $.each(filtered, function(i, loadme) {\n                        var d = self.getData(loadme),\n                            img = self._controls.slides[loadme],\n                            src = self.isFullscreen() && d.big ? d.big : (d.image || d.iframe);\n\n                        if (d.iframe && !d.image) {\n                            img.isIframe = true;\n                        }\n\n                        if (!img.ready) {\n                            self._controls.slides[loadme].load(src, function(img) {\n                                if (!img.isIframe) {\n                                    $(img.image).css('visibility', 'hidden');\n                                }\n                                self._scaleImage(img, {\n                                    complete: function(img) {\n                                        if (!img.isIframe) {\n                                            $(img.image).css({\n                                                opacity: 0,\n                                                visibility: 'visible'\n                                            }).animate({\n                                                opacity: 1\n                                            }, 200);\n                                        }\n                                    }\n                                });\n                            });\n                        }\n                    });\n                });\n            }\n\n            this.$('thumbnails, thumbnails-list').css({\n                overflow: 'hidden',\n                position: 'relative'\n            });\n\n            // bind image navigation arrows\n            this.$('image-nav-right, image-nav-left').on('click:fast', function(e) {\n\n                // pause if options is set\n                if (options.pauseOnInteraction) {\n                    self.pause();\n                }\n\n                // navigate\n                var fn = /right/.test(this.className) ? 'next' : 'prev';\n                self[fn]();\n\n            }).on('click', function(e) {\n\n                e.preventDefault();\n\n                // tune the clicknext option\n                if (options.clicknext || options.swipe) {\n                    e.stopPropagation();\n                }\n            });\n\n            // hide controls if chosen to\n            $.each(['info', 'counter', 'image-nav'], function(i, el) {\n                if (options['show' + el.substr(0, 1).toUpperCase() + el.substr(1).replace(/-/, '')] === false) {\n                    Utils.moveOut(self.get(el.toLowerCase()));\n                }\n            });\n\n            // load up target content\n            this.load();\n\n            // now it's usually safe to remove the content\n            // IE will never stop loading if we remove it, so let's keep it hidden for IE (it's usually fast enough anyway)\n            if (!options.keepSource && !IE) {\n                this._target.innerHTML = '';\n            }\n\n            // re-append the errors, if they happened before clearing\n            if (this.get('errors')) {\n                this.appendChild('target', 'errors');\n            }\n\n            // append the gallery frame\n            this.appendChild('target', 'container');\n\n            // parse the carousel on each thumb load\n            if (options.carousel) {\n                var count = 0,\n                    show = options.show;\n                this.bind(Galleria.THUMBNAIL, function() {\n                    this.updateCarousel();\n                    if (++count == this.getDataLength() && typeof show == 'number' && show > 0) {\n                        this._carousel.follow(show);\n                    }\n                });\n            }\n\n            // bind window resize for responsiveness\n            if (options.responsive) {\n                $win.on('resize', function() {\n                    if (!self.isFullscreen()) {\n                        self.resize();\n                    }\n                });\n            }\n\n            // double-tap/click fullscreen toggle\n\n            if (options.fullscreenDoubleTap) {\n\n                this.$('stage').on('touchstart', (function() {\n                    var last, cx, cy, lx, ly, now,\n                        getData = function(e) {\n                            return e.originalEvent.touches ? e.originalEvent.touches[0] : e;\n                        };\n                    self.$('stage').on('touchmove', function() {\n                        last = 0;\n                    });\n                    return function(e) {\n                        if (/(-left|-right)/.test(e.target.className)) {\n                            return;\n                        }\n                        now = Utils.timestamp();\n                        cx = getData(e).pageX;\n                        cy = getData(e).pageY;\n                        if (e.originalEvent.touches.length < 2 && (now - last < 300) && (cx - lx < 20) && (cy - ly < 20)) {\n                            self.toggleFullscreen();\n                            e.preventDefault();\n                            return;\n                        }\n                        last = now;\n                        lx = cx;\n                        ly = cy;\n                    };\n                }()));\n            }\n\n            // bind the ons\n            $.each(Galleria.on.binds, function(i, bind) {\n                // check if already bound\n                if ($.inArray(bind.hash, self._binds) == -1) {\n                    self.bind(bind.type, bind.callback);\n                }\n            });\n\n            return this;\n        },\n\n        addTimer: function() {\n            this._timer.add.apply(this._timer, Utils.array(arguments));\n            return this;\n        },\n\n        clearTimer: function() {\n            this._timer.clear.apply(this._timer, Utils.array(arguments));\n            return this;\n        },\n\n        // parse width & height from CSS or options\n\n        _getWH: function() {\n\n            var $container = this.$('container'),\n                $target = this.$('target'),\n                self = this,\n                num = {},\n                arr;\n\n            $.each(['width', 'height'], function(i, m) {\n\n                // first check if options is set\n                if (self._options[m] && typeof self._options[m] === 'number') {\n                    num[m] = self._options[m];\n                } else {\n\n                    arr = [\n                        Utils.parseValue($container.css(m)), // the container css height\n                        Utils.parseValue($target.css(m)), // the target css height\n                        $container[m](), // the container jQuery method\n                        $target[m]() // the target jQuery method\n                    ];\n\n                    // if first time, include the min-width & min-height\n                    if (!self['_' + m]) {\n                        arr.splice(arr.length,\n                            Utils.parseValue($container.css('min-' + m)),\n                            Utils.parseValue($target.css('min-' + m))\n                        );\n                    }\n\n                    // else extract the measures from different sources and grab the highest value\n                    num[m] = M.max.apply(M, arr);\n                }\n            });\n\n            // allow setting a height ratio instead of exact value\n            // useful when doing responsive galleries\n\n            if (self._userRatio) {\n                num.height = num.width * self._userRatio;\n            }\n\n            return num;\n        },\n\n        // Creates the thumbnails and carousel\n        // can be used at any time, f.ex when the data object is manipulated\n        // push is an optional argument with pushed images\n\n        _createThumbnails: function(push) {\n\n            this.get('total').innerHTML = this.getDataLength();\n\n            var src,\n                thumb,\n                data,\n\n                $container,\n\n                self = this,\n                o = this._options,\n\n                i = push ? this._data.length - push.length : 0,\n                chunk = i,\n\n                thumbchunk = [],\n                loadindex = 0,\n\n                gif = IE < 8 ? 'http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif' :\n                'data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D',\n\n                // get previously active thumbnail, if exists\n                active = (function() {\n                    var a = self.$('thumbnails').find('.active');\n                    if (!a.length) {\n                        return false;\n                    }\n                    return a.find('img').attr('src');\n                }()),\n\n                // cache the thumbnail option\n                optval = typeof o.thumbnails === 'string' ? o.thumbnails.toLowerCase() : null,\n\n                // move some data into the instance\n                // for some reason, jQuery cant handle css(property) when zooming in FF, breaking the gallery\n                // so we resort to getComputedStyle for browsers who support it\n                getStyle = function(prop) {\n                    return doc.defaultView && doc.defaultView.getComputedStyle ?\n                        doc.defaultView.getComputedStyle(thumb.container, null)[prop] :\n                        $container.css(prop);\n                },\n\n                fake = function(image, index, container) {\n                    return function() {\n                        $(container).append(image);\n                        self.trigger({\n                            type: Galleria.THUMBNAIL,\n                            thumbTarget: image,\n                            index: index,\n                            galleriaData: self.getData(index)\n                        });\n                    };\n                },\n\n                onThumbEvent = function(e) {\n\n                    // pause if option is set\n                    if (o.pauseOnInteraction) {\n                        self.pause();\n                    }\n\n                    // extract the index from the data\n                    var index = $(e.currentTarget).data('index');\n                    if (self.getIndex() !== index) {\n                        self.show(index);\n                    }\n\n                    e.preventDefault();\n                },\n\n                thumbComplete = function(thumb, callback) {\n\n                    $(thumb.container).css('visibility', 'visible');\n                    self.trigger({\n                        type: Galleria.THUMBNAIL,\n                        thumbTarget: thumb.image,\n                        index: thumb.data.order,\n                        galleriaData: self.getData(thumb.data.order)\n                    });\n\n                    if (typeof callback == 'function') {\n                        callback.call(self, thumb);\n                    }\n                },\n\n                onThumbLoad = function(thumb, callback) {\n\n                    // scale when ready\n                    thumb.scale({\n                        width: thumb.data.width,\n                        height: thumb.data.height,\n                        crop: o.thumbCrop,\n                        margin: o.thumbMargin,\n                        canvas: o.useCanvas,\n                        position: o.thumbPosition,\n                        complete: function(thumb) {\n\n                            // shrink thumbnails to fit\n                            var top = ['left', 'top'],\n                                arr = ['Width', 'Height'],\n                                m,\n                                css,\n                                data = self.getData(thumb.index);\n\n                            // calculate shrinked positions\n                            $.each(arr, function(i, measure) {\n                                m = measure.toLowerCase();\n                                if ((o.thumbCrop !== true || o.thumbCrop === m)) {\n                                    css = {};\n                                    css[m] = thumb[m];\n                                    $(thumb.container).css(css);\n                                    css = {};\n                                    css[top[i]] = 0;\n                                    $(thumb.image).css(css);\n                                }\n\n                                // cache outer measures\n                                thumb['outer' + measure] = $(thumb.container)['outer' + measure](true);\n                            });\n\n                            // set high quality if downscale is moderate\n                            Utils.toggleQuality(thumb.image,\n                                o.thumbQuality === true ||\n                                (o.thumbQuality === 'auto' && thumb.original.width < thumb.width * 3)\n                            );\n\n                            if (o.thumbDisplayOrder && !thumb.lazy) {\n\n                                $.each(thumbchunk, function(i, th) {\n                                    if (i === loadindex && th.ready && !th.displayed) {\n\n                                        loadindex++;\n                                        th.displayed = true;\n\n                                        thumbComplete(th, callback);\n\n                                        return;\n                                    }\n                                });\n                            } else {\n                                thumbComplete(thumb, callback);\n                            }\n                        }\n                    });\n                };\n\n            if (!push) {\n                this._thumbnails = [];\n                this.$('thumbnails').empty();\n            }\n\n            // loop through data and create thumbnails\n            for (; this._data[i]; i++) {\n\n                data = this._data[i];\n\n                // get source from thumb or image\n                src = data.thumb || data.image;\n\n                if ((o.thumbnails === true || optval == 'lazy') && (data.thumb || data.image)) {\n\n                    // add a new Picture instance\n                    thumb = new Galleria.Picture(i);\n\n                    // save the index\n                    thumb.index = i;\n\n                    // flag displayed\n                    thumb.displayed = false;\n\n                    // flag lazy\n                    thumb.lazy = false;\n\n                    // flag video\n                    thumb.video = false;\n\n                    // append the thumbnail\n                    this.$('thumbnails').append(thumb.container);\n\n                    // cache the container\n                    $container = $(thumb.container);\n\n                    // hide it\n                    $container.css('visibility', 'hidden');\n\n                    thumb.data = {\n                        width: Utils.parseValue(getStyle('width')),\n                        height: Utils.parseValue(getStyle('height')),\n                        order: i,\n                        src: src\n                    };\n\n                    // grab & reset size for smoother thumbnail loads\n                    if (o.thumbCrop !== true) {\n                        $container.css({ width: 'auto', height: 'auto' });\n                    } else {\n                        $container.css({ width: thumb.data.width, height: thumb.data.height });\n                    }\n\n                    // load the thumbnail\n                    if (optval == 'lazy') {\n\n                        $container.addClass('lazy');\n\n                        thumb.lazy = true;\n\n                        thumb.load(gif, {\n                            height: thumb.data.height,\n                            width: thumb.data.width\n                        });\n\n                    } else {\n                        thumb.load(src, onThumbLoad);\n                    }\n\n                    // preload all images here\n                    if (o.preload === 'all') {\n                        thumb.preload(data.image);\n                    }\n\n                    // create empty spans if thumbnails is set to 'empty'\n                } else if ((data.iframe && optval !== null) || optval === 'empty' || optval === 'numbers') {\n                    thumb = {\n                        container: Utils.create('galleria-image'),\n                        image: Utils.create('img', 'span'),\n                        ready: true,\n                        data: {\n                            order: i\n                        }\n                    };\n\n                    // create numbered thumbnails\n                    if (optval === 'numbers') {\n                        $(thumb.image).text(i + 1);\n                    }\n\n                    if (data.iframe) {\n                        $(thumb.image).addClass('iframe');\n                    }\n\n                    this.$('thumbnails').append(thumb.container);\n\n                    // we need to \"fake\" a loading delay before we append and trigger\n                    // 50+ should be enough\n\n                    window.setTimeout((fake)(thumb.image, i, thumb.container), 50 + (i * 20));\n\n                    // create null object to silent errors\n                } else {\n                    thumb = {\n                        container: null,\n                        image: null\n                    };\n                }\n\n                // add events for thumbnails\n                // you can control the event type using thumb_event_type\n                // we'll add the same event to the source if it's kept\n\n                $(thumb.container).add(o.keepSource && o.linkSourceImages ? data.original : null)\n                    .data('index', i).on(o.thumbEventType, onThumbEvent)\n                    .data('thumbload', onThumbLoad);\n\n                if (active === src) {\n                    $(thumb.container).addClass('active');\n                }\n\n                this._thumbnails.push(thumb);\n            }\n\n            thumbchunk = this._thumbnails.slice(chunk);\n\n            return this;\n        },\n\n        /**\n            Lazy-loads thumbnails.\n            You can call this method to load lazy thumbnails at run time\n\n            @param {Array|Number} index Index or array of indexes of thumbnails to be loaded\n            @param {Function} complete Callback that is called when all lazy thumbnails have been loaded\n\n            @returns Instance\n        */\n\n        lazyLoad: function(index, complete) {\n\n            var arr = index.constructor == Array ? index : [index],\n                self = this,\n                loaded = 0;\n\n            $.each(arr, function(i, ind) {\n\n                if (ind > self._thumbnails.length - 1) {\n                    return;\n                }\n\n                var thumb = self._thumbnails[ind],\n                    data = thumb.data,\n                    callback = function() {\n                        if (++loaded == arr.length && typeof complete == 'function') {\n                            complete.call(self);\n                        }\n                    },\n                    thumbload = $(thumb.container).data('thumbload');\n                if (thumb.video) {\n                    thumbload.call(self, thumb, callback);\n                } else {\n                    thumb.load(data.src, function(thumb) {\n                        thumbload.call(self, thumb, callback);\n                    });\n                }\n            });\n\n            return this;\n\n        },\n\n        /**\n            Lazy-loads thumbnails in chunks.\n            This method automatcally chops up the loading process of many thumbnails into chunks\n\n            @param {Number} size Size of each chunk to be loaded\n            @param {Number} [delay] Delay between each loads\n\n            @returns Instance\n        */\n\n        lazyLoadChunks: function(size, delay) {\n\n            var len = this.getDataLength(),\n                i = 0,\n                n = 0,\n                arr = [],\n                temp = [],\n                self = this;\n\n            delay = delay || 0;\n\n            for (; i < len; i++) {\n                temp.push(i);\n                if (++n == size || i == len - 1) {\n                    arr.push(temp);\n                    n = 0;\n                    temp = [];\n                }\n            }\n\n            var init = function(wait) {\n                var a = arr.shift();\n                if (a) {\n                    window.setTimeout(function() {\n                        self.lazyLoad(a, function() {\n                            init(true);\n                        });\n                    }, (delay && wait) ? delay : 0);\n                }\n            };\n\n            init(false);\n\n            return this;\n\n        },\n\n        // the internal _run method should be called after loading data into galleria\n        // makes sure the gallery has proper measurements before postrun & ready\n        _run: function() {\n\n            var self = this;\n\n            self._createThumbnails();\n\n            // make sure we have a stageHeight && stageWidth\n\n            Utils.wait({\n\n                timeout: 10000,\n\n                until: function() {\n\n                    // Opera crap\n                    if (Galleria.OPERA) {\n                        self.$('stage').css('display', 'inline-block');\n                    }\n\n                    self._stageWidth = self.$('stage').width();\n                    self._stageHeight = self.$('stage').height();\n\n                    return (self._stageWidth &&\n                        self._stageHeight > 50); // what is an acceptable height?\n                },\n\n                success: function() {\n\n                    // save the instance\n                    _galleries.push(self);\n\n                    // postrun some stuff after the gallery is ready\n\n                    // create the touch slider\n                    if (self._options.swipe) {\n\n                        var $images = self.$('images').width(self.getDataLength() * self._stageWidth);\n                        $.each(new Array(self.getDataLength()), function(i) {\n\n                            var image = new Galleria.Picture(),\n                                data = self.getData(i);\n\n                            $(image.container).css({\n                                position: 'absolute',\n                                top: 0,\n                                left: self._stageWidth * i\n                            }).prepend(self._layers[i] = $(Utils.create('galleria-layer')).css({\n                                position: 'absolute',\n                                top: 0,\n                                left: 0,\n                                right: 0,\n                                bottom: 0,\n                                zIndex: 2\n                            })[0]).appendTo($images);\n\n                            if (data.video) {\n                                _playIcon(image.container);\n                            }\n\n                            self._controls.slides.push(image);\n\n                            var frame = new Galleria.Picture();\n                            frame.isIframe = true;\n\n                            $(frame.container).attr('class', 'galleria-frame').css({\n                                position: 'absolute',\n                                top: 0,\n                                left: 0,\n                                zIndex: 4,\n                                background: '#000',\n                                display: 'none'\n                            }).appendTo(image.container);\n\n                            self._controls.frames.push(frame);\n                        });\n\n                        self.finger.setup();\n                    }\n\n                    // show counter\n                    Utils.show(self.get('counter'));\n\n                    // bind carousel nav\n                    if (self._options.carousel) {\n                        self._carousel.bindControls();\n                    }\n\n                    // start autoplay\n                    if (self._options.autoplay) {\n\n                        self.pause();\n\n                        if (typeof self._options.autoplay === 'number') {\n                            self._playtime = self._options.autoplay;\n                        }\n\n                        self._playing = true;\n                    }\n                    // if second load, just do the show and return\n                    if (self._firstrun) {\n\n                        if (self._options.autoplay) {\n                            self.trigger(Galleria.PLAY);\n                        }\n\n                        if (typeof self._options.show === 'number') {\n                            self.show(self._options.show);\n                        }\n                        return;\n                    }\n\n                    self._firstrun = true;\n\n                    // initialize the History plugin\n                    if (Galleria.History) {\n\n                        // bind the show method\n                        Galleria.History.change(function(value) {\n\n                            // if ID is NaN, the user pressed back from the first image\n                            // return to previous address\n                            if (isNaN(value)) {\n                                window.history.go(-1);\n\n                                // else show the image\n                            } else {\n                                self.show(value, undef, true);\n                            }\n                        });\n                    }\n\n                    self.trigger(Galleria.READY);\n\n                    // call the theme init method\n                    self.theme.init.call(self, self._options);\n\n                    // Trigger Galleria.ready\n                    $.each(Galleria.ready.callbacks, function(i, fn) {\n                        if (typeof fn == 'function') {\n                            fn.call(self, self._options);\n                        }\n                    });\n\n                    // call the extend option\n                    self._options.extend.call(self, self._options);\n\n                    // show the initial image\n                    // first test for permalinks in history\n                    if (/^[0-9]{1,4}$/.test(HASH) && Galleria.History) {\n                        self.show(HASH, undef, true);\n\n                    } else if (self._data[self._options.show]) {\n                        self.show(self._options.show);\n                    }\n\n                    // play trigger\n                    if (self._options.autoplay) {\n                        self.trigger(Galleria.PLAY);\n                    }\n                },\n\n                error: function() {\n                    Galleria.raise('Stage width or height is too small to show the gallery. Traced measures: width:' + self._stageWidth + 'px, height: ' + self._stageHeight + 'px.', true);\n                }\n\n            });\n        },\n\n        /**\n            Loads data into the gallery.\n            You can call this method on an existing gallery to reload the gallery with new data.\n\n            @param {Array|string} [source] Optional JSON array of data or selector of where to find data in the document.\n            Defaults to the Galleria target or dataSource option.\n\n            @param {string} [selector] Optional element selector of what elements to parse.\n            Defaults to 'img'.\n\n            @param {Function} [config] Optional function to modify the data extraction proceedure from the selector.\n            See the dataConfig option for more information.\n\n            @returns Instance\n        */\n\n        load: function(source, selector, config) {\n\n            var self = this,\n                o = this._options;\n\n            // empty the data array\n            this._data = [];\n\n            // empty the thumbnails\n            this._thumbnails = [];\n            this.$('thumbnails').empty();\n\n            // shorten the arguments\n            if (typeof selector === 'function') {\n                config = selector;\n                selector = null;\n            }\n\n            // use the source set by target\n            source = source || o.dataSource;\n\n            // use selector set by option\n            selector = selector || o.dataSelector;\n\n            // use the dataConfig set by option\n            config = config || o.dataConfig;\n\n            // if source is a true object, make it into an array\n            if ($.isPlainObject(source)) {\n                source = [source];\n            }\n\n            // check if the data is an array already\n            if ($.isArray(source)) {\n                if (this.validate(source)) {\n                    this._data = source;\n                } else {\n                    Galleria.raise('Load failed: JSON Array not valid.');\n                }\n            } else {\n\n                // add .video and .iframe to the selector (1.2.7)\n                selector += ',.video,.iframe';\n\n                // loop through images and set data\n                $(source).find(selector).each(function(i, elem) {\n\n                    elem = $(elem);\n                    var data = {},\n                        parent = elem.parent(),\n                        href = parent.attr('href'),\n                        rel = parent.attr('rel');\n\n                    if (href && (elem[0].nodeName == 'IMG' || elem.hasClass('video')) && _videoTest(href)) {\n                        data.video = href;\n                    } else if (href && elem.hasClass('iframe')) {\n                        data.iframe = href;\n                    } else {\n                        data.image = data.big = href;\n                    }\n\n                    if (rel) {\n                        data.big = rel;\n                    }\n\n                    // alternative extraction from HTML5 data attribute, added in 1.2.7\n                    $.each('big title description link layer image'.split(' '), function(i, val) {\n                        if (elem.data(val)) {\n                            data[val] = elem.data(val).toString();\n                        }\n                    });\n\n                    if (!data.big) {\n                        data.big = data.image;\n                    }\n\n                    // mix default extractions with the hrefs and config\n                    // and push it into the data array\n                    self._data.push($.extend({\n\n                        title: elem.attr('title') || '',\n                        thumb: elem.attr('src'),\n                        image: elem.attr('src'),\n                        big: elem.attr('src'),\n                        description: elem.attr('alt') || '',\n                        link: elem.attr('longdesc'),\n                        original: elem.get(0) // saved as a reference\n\n                    }, data, config(elem)));\n\n                });\n            }\n\n            if (typeof o.dataSort == 'function') {\n                protoArray.sort.call(this._data, o.dataSort);\n            } else if (o.dataSort == 'random') {\n                this._data.sort(function() {\n                    return M.round(M.random()) - 0.5;\n                });\n            }\n\n            // trigger the DATA event and return\n            if (this.getDataLength()) {\n                this._parseData(function() {\n                    this.trigger(Galleria.DATA);\n                });\n            }\n            return this;\n\n        },\n\n        // make sure the data works properly\n        _parseData: function(callback) {\n\n            var self = this,\n                current,\n                ready = false,\n                onload = function() {\n                    var complete = true;\n                    $.each(self._data, function(i, data) {\n                        if (data.loading) {\n                            complete = false;\n                            return false;\n                        }\n                    });\n                    if (complete && !ready) {\n                        ready = true;\n                        callback.call(self);\n                    }\n                };\n\n            $.each(this._data, function(i, data) {\n\n                current = self._data[i];\n\n                // copy image as thumb if no thumb exists\n                if ('thumb' in data === false) {\n                    current.thumb = data.image;\n                }\n                // copy image as big image if no biggie exists\n                if (!data.big) {\n                    current.big = data.image;\n                }\n                // parse video\n                if ('video' in data) {\n                    var result = _videoTest(data.video);\n\n                    if (result) {\n                        current.iframe = new Video(result.provider, result.id).embed() + (function() {\n\n                            // add options\n                            if (typeof self._options[result.provider] == 'object') {\n                                var str = '?',\n                                    arr = [];\n                                $.each(self._options[result.provider], function(key, val) {\n                                    arr.push(key + '=' + val);\n                                });\n\n                                // small youtube specifics, perhaps move to _video later\n                                if (result.provider == 'youtube') {\n                                    arr = ['wmode=opaque'].concat(arr);\n                                }\n                                return str + arr.join('&');\n                            }\n                            return '';\n                        }());\n\n                        // pre-fetch video providers media\n\n                        if (!current.thumb || !current.image) {\n                            $.each(['thumb', 'image'], function(i, type) {\n                                if (type == 'image' && !self._options.videoPoster) {\n                                    current.image = undef;\n                                    return;\n                                }\n                                var video = new Video(result.provider, result.id);\n                                if (!current[type]) {\n                                    current.loading = true;\n                                    video.getMedia(type, (function(current, type) {\n                                        return function(src) {\n                                            current[type] = src;\n                                            if (type == 'image' && !current.big) {\n                                                current.big = current.image;\n                                            }\n                                            delete current.loading;\n                                            onload();\n                                        };\n                                    }(current, type)));\n                                }\n                            });\n                        }\n                    }\n                }\n            });\n\n            onload();\n\n            return this;\n        },\n\n        /**\n            Destroy the Galleria instance and recover the original content\n\n            @example this.destroy();\n\n            @returns Instance\n        */\n\n        destroy: function() {\n            this.$('target').data('galleria', null);\n            this.$('container').off('galleria');\n            this.get('target').innerHTML = this._original.html;\n            this.clearTimer();\n            Utils.removeFromArray(_instances, this);\n            Utils.removeFromArray(_galleries, this);\n            if (Galleria._waiters.length) {\n                $.each(Galleria._waiters, function(i, w) {\n                    if (w) window.clearTimeout(w);\n                });\n            }\n            return this;\n        },\n\n        /**\n            Adds and/or removes images from the gallery\n            Works just like Array.splice\n            https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice\n\n            @example this.splice( 2, 4 ); // removes 4 images after the second image\n\n            @returns Instance\n        */\n\n        splice: function() {\n            var self = this,\n                args = Utils.array(arguments);\n            window.setTimeout(function() {\n                protoArray.splice.apply(self._data, args);\n                self._parseData(function() {\n                    self._createThumbnails();\n                });\n            }, 2);\n            return self;\n        },\n\n        /**\n            Append images to the gallery\n            Works just like Array.push\n            https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push\n\n            @example this.push({ image: 'image1.jpg' }); // appends the image to the gallery\n\n            @returns Instance\n        */\n\n        push: function() {\n            var self = this,\n                args = Utils.array(arguments);\n\n            if (args.length == 1 && args[0].constructor == Array) {\n                args = args[0];\n            }\n\n            window.setTimeout(function() {\n                protoArray.push.apply(self._data, args);\n                self._parseData(function() {\n                    self._createThumbnails(args);\n                });\n            }, 2);\n            return self;\n        },\n\n        _getActive: function() {\n            return this._controls.getActive();\n        },\n\n        validate: function(data) {\n            // todo: validate a custom data array\n            return true;\n        },\n\n        /**\n            Bind any event to Galleria\n\n            @param {string} type The Event type to listen for\n            @param {Function} fn The function to execute when the event is triggered\n\n            @example this.bind( 'image', function() { Galleria.log('image shown') });\n\n            @returns Instance\n        */\n\n        bind: function(type, fn) {\n\n            // allow 'image' instead of Galleria.IMAGE\n            type = _patchEvent(type);\n\n            this.$('container').on(type, this.proxy(fn));\n            return this;\n        },\n\n        /**\n            Unbind any event to Galleria\n\n            @param {string} type The Event type to forget\n\n            @returns Instance\n        */\n\n        unbind: function(type) {\n\n            type = _patchEvent(type);\n\n            this.$('container').off(type);\n            return this;\n        },\n\n        /**\n            Manually trigger a Galleria event\n\n            @param {string} type The Event to trigger\n\n            @returns Instance\n        */\n\n        trigger: function(type) {\n\n            type = typeof type === 'object' ?\n                $.extend(type, { scope: this }) : { type: _patchEvent(type), scope: this };\n\n            this.$('container').trigger(type);\n\n            return this;\n        },\n\n        /**\n            Assign an \"idle state\" to any element.\n            The idle state will be applied after a certain amount of idle time\n            Useful to hide f.ex navigation when the gallery is inactive\n\n            @param {HTMLElement|string} elem The Dom node or selector to apply the idle state to\n            @param {Object} styles the CSS styles to apply when in idle mode\n            @param {Object} [from] the CSS styles to apply when in normal\n            @param {Boolean} [hide] set to true if you want to hide it first\n\n            @example addIdleState( this.get('image-nav'), { opacity: 0 });\n            @example addIdleState( '.galleria-image-nav', { top: -200 }, true);\n\n            @returns Instance\n        */\n\n        addIdleState: function(elem, styles, from, hide) {\n            this._idle.add.apply(this._idle, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Removes any idle state previously set using addIdleState()\n\n            @param {HTMLElement|string} elem The Dom node or selector to remove the idle state from.\n\n            @returns Instance\n        */\n\n        removeIdleState: function(elem) {\n            this._idle.remove.apply(this._idle, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Force Galleria to enter idle mode.\n\n            @returns Instance\n        */\n\n        enterIdleMode: function() {\n            this._idle.hide();\n            return this;\n        },\n\n        /**\n            Force Galleria to exit idle mode.\n\n            @returns Instance\n        */\n\n        exitIdleMode: function() {\n            this._idle.showAll();\n            return this;\n        },\n\n        /**\n            Enter FullScreen mode\n\n            @param {Function} callback the function to be executed when the fullscreen mode is fully applied.\n\n            @returns Instance\n        */\n\n        enterFullscreen: function(callback) {\n            this._fullscreen.enter.apply(this, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Exits FullScreen mode\n\n            @param {Function} callback the function to be executed when the fullscreen mode is fully applied.\n\n            @returns Instance\n        */\n\n        exitFullscreen: function(callback) {\n            this._fullscreen.exit.apply(this, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Toggle FullScreen mode\n\n            @param {Function} callback the function to be executed when the fullscreen mode is fully applied or removed.\n\n            @returns Instance\n        */\n\n        toggleFullscreen: function(callback) {\n            this._fullscreen[this.isFullscreen() ? 'exit' : 'enter'].apply(this, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Adds a tooltip to any element.\n            You can also call this method with an object as argument with elemID:value pairs to apply tooltips to (see examples)\n\n            @param {HTMLElement} elem The DOM Node to attach the event to\n            @param {string|Function} value The tooltip message. Can also be a function that returns a string.\n\n            @example this.bindTooltip( this.get('thumbnails'), 'My thumbnails');\n            @example this.bindTooltip( this.get('thumbnails'), function() { return 'My thumbs' });\n            @example this.bindTooltip( { image_nav: 'Navigation' });\n\n            @returns Instance\n        */\n\n        bindTooltip: function(elem, value) {\n            this._tooltip.bind.apply(this._tooltip, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Note: this method is deprecated. Use refreshTooltip() instead.\n\n            Redefine a tooltip.\n            Use this if you want to re-apply a tooltip value to an already bound tooltip element.\n\n            @param {HTMLElement} elem The DOM Node to attach the event to\n            @param {string|Function} value The tooltip message. Can also be a function that returns a string.\n\n            @returns Instance\n        */\n\n        defineTooltip: function(elem, value) {\n            this._tooltip.define.apply(this._tooltip, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Refresh a tooltip value.\n            Use this if you want to change the tooltip value at runtime, f.ex if you have a play/pause toggle.\n\n            @param {HTMLElement} elem The DOM Node that has a tooltip that should be refreshed\n\n            @returns Instance\n        */\n\n        refreshTooltip: function(elem) {\n            this._tooltip.show.apply(this._tooltip, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Open a pre-designed lightbox with the currently active image.\n            You can control some visuals using gallery options.\n\n            @returns Instance\n        */\n\n        openLightbox: function() {\n            this._lightbox.show.apply(this._lightbox, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Close the lightbox.\n\n            @returns Instance\n        */\n\n        closeLightbox: function() {\n            this._lightbox.hide.apply(this._lightbox, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Check if a variation exists\n\n            @returns {Boolean} If the variation has been applied\n        */\n\n        hasVariation: function(variation) {\n            return $.inArray(variation, this._options.variation.split(/\\s+/)) > -1;\n        },\n\n        /**\n            Get the currently active image element.\n\n            @returns {HTMLElement} The image element\n        */\n\n        getActiveImage: function() {\n            var active = this._getActive();\n            return active ? active.image : undef;\n        },\n\n        /**\n            Get the currently active thumbnail element.\n\n            @returns {HTMLElement} The thumbnail element\n        */\n\n        getActiveThumb: function() {\n            return this._thumbnails[this._active].image || undef;\n        },\n\n        /**\n        Get the mouse position relative to the gallery container\n\n        @param e The mouse event\n\n        @example\n\nvar gallery = this;\n$(document).mousemove(function(e) {\n    console.log( gallery.getMousePosition(e).x );\n});\n\n        @returns {Object} Object with x & y of the relative mouse postion\n    */\n\n        getMousePosition: function(e) {\n            return {\n                x: e.pageX - this.$('container').offset().left,\n                y: e.pageY - this.$('container').offset().top\n            };\n        },\n\n        /**\n            Adds a panning effect to the image\n\n            @param [img] The optional image element. If not specified it takes the currently active image\n\n            @returns Instance\n        */\n\n        addPan: function(img) {\n\n            if (this._options.imageCrop === false) {\n                return;\n            }\n\n            img = $(img || this.getActiveImage());\n\n            // define some variables and methods\n            var self = this,\n                x = img.width() / 2,\n                y = img.height() / 2,\n                destX = parseInt(img.css('left'), 10),\n                destY = parseInt(img.css('top'), 10),\n                curX = destX || 0,\n                curY = destY || 0,\n                distX = 0,\n                distY = 0,\n                active = false,\n                ts = Utils.timestamp(),\n                cache = 0,\n                move = 0,\n\n                // positions the image\n                position = function(dist, cur, pos) {\n                    if (dist > 0) {\n                        move = M.round(M.max(dist * -1, M.min(0, cur)));\n                        if (cache !== move) {\n\n                            cache = move;\n\n                            if (IE === 8) { // scroll is faster for IE\n                                img.parent()['scroll' + pos](move * -1);\n                            } else {\n                                var css = {};\n                                css[pos.toLowerCase()] = move;\n                                img.css(css);\n                            }\n                        }\n                    }\n                },\n\n                // calculates mouse position after 50ms\n                calculate = function(e) {\n                    if (Utils.timestamp() - ts < 50) {\n                        return;\n                    }\n                    active = true;\n                    x = self.getMousePosition(e).x;\n                    y = self.getMousePosition(e).y;\n                },\n\n                // the main loop to check\n                loop = function(e) {\n\n                    if (!active) {\n                        return;\n                    }\n\n                    distX = img.width() - self._stageWidth;\n                    distY = img.height() - self._stageHeight;\n                    destX = x / self._stageWidth * distX * -1;\n                    destY = y / self._stageHeight * distY * -1;\n                    curX += (destX - curX) / self._options.imagePanSmoothness;\n                    curY += (destY - curY) / self._options.imagePanSmoothness;\n\n                    position(distY, curY, 'Top');\n                    position(distX, curX, 'Left');\n\n                };\n\n            // we need to use scroll in IE8 to speed things up\n            if (IE === 8) {\n\n                img.parent().scrollTop(curY * -1).scrollLeft(curX * -1);\n                img.css({\n                    top: 0,\n                    left: 0\n                });\n\n            }\n\n            // unbind and bind event\n            this.$('stage').off('mousemove', calculate).on('mousemove', calculate);\n\n            // loop the loop\n            this.addTimer('pan' + self._id, loop, 50, true);\n\n            return this;\n        },\n\n        /**\n            Brings the scope into any callback\n\n            @param fn The callback to bring the scope into\n            @param [scope] Optional scope to bring\n\n            @example $('#fullscreen').click( this.proxy(function() { this.enterFullscreen(); }) )\n\n            @returns {Function} Return the callback with the gallery scope\n        */\n\n        proxy: function(fn, scope) {\n            if (typeof fn !== 'function') {\n                return F;\n            }\n            scope = scope || this;\n            return function() {\n                return fn.apply(scope, Utils.array(arguments));\n            };\n        },\n\n        /**\n            Tells you the theme name of the gallery\n\n            @returns {String} theme name\n        */\n\n        getThemeName: function() {\n            return this.theme.name;\n        },\n\n        /**\n            Removes the panning effect set by addPan()\n\n            @returns Instance\n        */\n\n        removePan: function() {\n\n            // todo: doublecheck IE8\n\n            this.$('stage').off('mousemove');\n\n            this.clearTimer('pan' + this._id);\n\n            return this;\n        },\n\n        /**\n            Adds an element to the Galleria DOM array.\n            When you add an element here, you can access it using element ID in many API calls\n\n            @param {string} id The element ID you wish to use. You can add many elements by adding more arguments.\n\n            @example addElement('mybutton');\n            @example addElement('mybutton','mylink');\n\n            @returns Instance\n        */\n\n        addElement: function(id) {\n\n            var dom = this._dom;\n\n            $.each(Utils.array(arguments), function(i, blueprint) {\n                dom[blueprint] = Utils.create('galleria-' + blueprint);\n            });\n\n            return this;\n        },\n\n        /**\n        Attach keyboard events to Galleria\n\n        @param {Object} map The map object of events.\n        Possible keys are 'UP', 'DOWN', 'LEFT', 'RIGHT', 'RETURN', 'ESCAPE', 'BACKSPACE', and 'SPACE'.\n\n        @example\n\nthis.attachKeyboard({\n    right: this.next,\n    left: this.prev,\n    up: function() {\n        console.log( 'up key pressed' )\n    }\n});\n\n        @returns Instance\n    */\n\n        attachKeyboard: function(map) {\n            this._keyboard.attach.apply(this._keyboard, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Detach all keyboard events to Galleria\n\n            @returns Instance\n        */\n\n        detachKeyboard: function() {\n            this._keyboard.detach.apply(this._keyboard, Utils.array(arguments));\n            return this;\n        },\n\n        /**\n            Fast helper for appending galleria elements that you added using addElement()\n\n            @param {string} parentID The parent element ID where the element will be appended\n            @param {string} childID the element ID that should be appended\n\n            @example this.addElement('myElement');\n            this.appendChild( 'info', 'myElement' );\n\n            @returns Instance\n        */\n\n        appendChild: function(parentID, childID) {\n            this.$(parentID).append(this.get(childID) || childID);\n            return this;\n        },\n\n        /**\n        Fast helper for prepending galleria elements that you added using addElement()\n\n        @param {string} parentID The parent element ID where the element will be prepended\n        @param {string} childID the element ID that should be prepended\n\n        @example\n\nthis.addElement('myElement');\nthis.prependChild( 'info', 'myElement' );\n\n        @returns Instance\n    */\n\n        prependChild: function(parentID, childID) {\n            this.$(parentID).prepend(this.get(childID) || childID);\n            return this;\n        },\n\n        /**\n            Remove an element by blueprint\n\n            @param {string} elemID The element to be removed.\n            You can remove multiple elements by adding arguments.\n\n            @returns Instance\n        */\n\n        remove: function(elemID) {\n            this.$(Utils.array(arguments).join(',')).remove();\n            return this;\n        },\n\n        // a fast helper for building dom structures\n        // leave this out of the API for now\n\n        append: function(data) {\n            var i, j;\n            for (i in data) {\n                if (data.hasOwnProperty(i)) {\n                    if (data[i].constructor === Array) {\n                        for (j = 0; data[i][j]; j++) {\n                            this.appendChild(i, data[i][j]);\n                        }\n                    } else {\n                        this.appendChild(i, data[i]);\n                    }\n                }\n            }\n            return this;\n        },\n\n        // an internal helper for scaling according to options\n        _scaleImage: function(image, options) {\n\n            image = image || this._controls.getActive();\n\n            // janpub (JH) fix:\n            // image might be unselected yet\n            // e.g. when external logics rescales the gallery on window resize events\n            if (!image) {\n                return;\n            }\n\n            var complete,\n\n                scaleLayer = function(img) {\n                    $(img.container).children(':first').css({\n                        top: M.max(0, Utils.parseValue(img.image.style.top)),\n                        left: M.max(0, Utils.parseValue(img.image.style.left)),\n                        width: Utils.parseValue(img.image.width),\n                        height: Utils.parseValue(img.image.height)\n                    });\n                };\n\n            options = $.extend({\n                width: this._stageWidth,\n                height: this._stageHeight,\n                crop: this._options.imageCrop,\n                max: this._options.maxScaleRatio,\n                min: this._options.minScaleRatio,\n                margin: this._options.imageMargin,\n                position: this._options.imagePosition,\n                iframelimit: this._options.maxVideoSize\n            }, options);\n\n            if (this._options.layerFollow && this._options.imageCrop !== true) {\n\n                if (typeof options.complete == 'function') {\n                    complete = options.complete;\n                    options.complete = function() {\n                        complete.call(image, image);\n                        scaleLayer(image);\n                    };\n                } else {\n                    options.complete = scaleLayer;\n                }\n\n            } else {\n                $(image.container).children(':first').css({ top: 0, left: 0 });\n            }\n\n            image.scale(options);\n            return this;\n        },\n\n        /**\n            Updates the carousel,\n            useful if you resize the gallery and want to re-check if the carousel nav is needed.\n\n            @returns Instance\n        */\n\n        updateCarousel: function() {\n            this._carousel.update();\n            return this;\n        },\n\n        /**\n            Resize the entire gallery container\n\n            @param {Object} [measures] Optional object with width/height specified\n            @param {Function} [complete] The callback to be called when the scaling is complete\n\n            @returns Instance\n        */\n\n        resize: function(measures, complete) {\n\n            if (typeof measures == 'function') {\n                complete = measures;\n                measures = undef;\n            }\n\n            measures = $.extend({ width: 0, height: 0 }, measures);\n\n            var self = this,\n                $container = this.$('container');\n\n            $.each(measures, function(m, val) {\n                if (!val) {\n                    $container[m]('auto');\n                    measures[m] = self._getWH()[m];\n                }\n            });\n\n            $.each(measures, function(m, val) {\n                $container[m](val);\n            });\n\n            return this.rescale(complete);\n\n        },\n\n        /**\n            Rescales the gallery\n\n            @param {number} width The target width\n            @param {number} height The target height\n            @param {Function} complete The callback to be called when the scaling is complete\n\n            @returns Instance\n        */\n\n        rescale: function(width, height, complete) {\n\n            var self = this;\n\n            // allow rescale(fn)\n            if (typeof width === 'function') {\n                complete = width;\n                width = undef;\n            }\n\n            var scale = function() {\n\n                // set stagewidth\n                self._stageWidth = width || self.$('stage').width();\n                self._stageHeight = height || self.$('stage').height();\n\n                if (self._options.swipe) {\n                    $.each(self._controls.slides, function(i, img) {\n                        self._scaleImage(img);\n                        $(img.container).css('left', self._stageWidth * i);\n                    });\n                    self.$('images').css('width', self._stageWidth * self.getDataLength());\n                } else {\n                    // scale the active image\n                    self._scaleImage();\n                }\n\n                if (self._options.carousel) {\n                    self.updateCarousel();\n                }\n\n                var frame = self._controls.frames[self._controls.active];\n\n                if (frame) {\n                    self._controls.frames[self._controls.active].scale({\n                        width: self._stageWidth,\n                        height: self._stageHeight,\n                        iframelimit: self._options.maxVideoSize\n                    });\n                }\n\n                self.trigger(Galleria.RESCALE);\n\n                if (typeof complete === 'function') {\n                    complete.call(self);\n                }\n            };\n\n            scale.call(self);\n\n            return this;\n        },\n\n        /**\n            Refreshes the gallery.\n            Useful if you change image options at runtime and want to apply the changes to the active image.\n\n            @returns Instance\n        */\n\n        refreshImage: function() {\n            this._scaleImage();\n            if (this._options.imagePan) {\n                this.addPan();\n            }\n            return this;\n        },\n\n        _preload: function() {\n            if (this._options.preload) {\n                var p, i,\n                    n = this.getNext(),\n                    ndata;\n                try {\n                    for (i = this._options.preload; i > 0; i--) {\n                        p = new Galleria.Picture();\n                        ndata = this.getData(n);\n                        p.preload(this.isFullscreen() && ndata.big ? ndata.big : ndata.image);\n                        n = this.getNext(n);\n                    }\n                } catch (e) {}\n            }\n        },\n\n        /**\n            Shows an image by index\n\n            @param {number|boolean} index The index to show\n            @param {Boolean} rewind A boolean that should be true if you want the transition to go back\n\n            @returns Instance\n        */\n\n        show: function(index, rewind, _history) {\n\n            var swipe = this._options.swipe;\n\n            // do nothing queue is long || index is false || queue is false and transition is in progress\n            if (!swipe &&\n                (this._queue.length > 3 || index === false || (!this._options.queue && this._queue.stalled))) {\n                return;\n            }\n\n            index = M.max(0, M.min(parseInt(index, 10), this.getDataLength() - 1));\n\n            rewind = typeof rewind !== 'undefined' ? !!rewind : index < this.getIndex();\n\n            _history = _history || false;\n\n            // do the history thing and return\n            if (!_history && Galleria.History) {\n                Galleria.History.set(index.toString());\n                return;\n            }\n\n            if (this.finger && index !== this._active) {\n                this.finger.to = -(index * this.finger.width);\n                this.finger.index = index;\n            }\n            this._active = index;\n\n            // we do things a bit simpler in swipe:\n            if (swipe) {\n\n                var data = this.getData(index),\n                    self = this;\n                if (!data) {\n                    return;\n                }\n\n                var src = this.isFullscreen() && data.big ? data.big : (data.image || data.iframe),\n                    image = this._controls.slides[index],\n                    cached = image.isCached(src),\n                    thumb = this._thumbnails[index];\n\n                var evObj = {\n                    cached: cached,\n                    index: index,\n                    rewind: rewind,\n                    imageTarget: image.image,\n                    thumbTarget: thumb.image,\n                    galleriaData: data\n                };\n\n                this.trigger($.extend(evObj, {\n                    type: Galleria.LOADSTART\n                }));\n\n                self.$('container').removeClass('videoplay');\n\n                var complete = function() {\n\n                    self._layers[index].innerHTML = self.getData().layer || '';\n\n                    self.trigger($.extend(evObj, {\n                        type: Galleria.LOADFINISH\n                    }));\n                    self._playCheck();\n                };\n\n                self._preload();\n\n                window.setTimeout(function() {\n\n                    // load if not ready\n                    if (!image.ready || $(image.image).attr('src') != src) {\n                        if (data.iframe && !data.image) {\n                            image.isIframe = true;\n                        }\n                        image.load(src, function(image) {\n                            evObj.imageTarget = image.image;\n                            self._scaleImage(image, complete).trigger($.extend(evObj, {\n                                type: Galleria.IMAGE\n                            }));\n                            complete();\n                        });\n                    } else {\n                        self.trigger($.extend(evObj, {\n                            type: Galleria.IMAGE\n                        }));\n                        complete();\n                    }\n                }, 100);\n\n            } else {\n                protoArray.push.call(this._queue, {\n                    index: index,\n                    rewind: rewind\n                });\n                if (!this._queue.stalled) {\n                    this._show();\n                }\n            }\n\n            return this;\n        },\n\n        // the internal _show method does the actual showing\n        _show: function() {\n\n            // shortcuts\n            var self = this,\n                queue = this._queue[0],\n                data = this.getData(queue.index);\n\n            if (!data) {\n                return;\n            }\n\n            var src = this.isFullscreen() && data.big ? data.big : (data.image || data.iframe),\n                active = this._controls.getActive(),\n                next = this._controls.getNext(),\n                cached = next.isCached(src),\n                thumb = this._thumbnails[queue.index],\n                mousetrigger = function() {\n                    $(next.image).trigger('mouseup');\n                };\n\n            self.$('container').toggleClass('iframe', !!data.isIframe).removeClass('videoplay');\n\n            // to be fired when loading & transition is complete:\n            var complete = (function(data, next, active, queue, thumb) {\n\n                return function() {\n\n                    var win;\n\n                    _transitions.active = false;\n\n                    // optimize quality\n                    Utils.toggleQuality(next.image, self._options.imageQuality);\n\n                    // remove old layer\n                    self._layers[self._controls.active].innerHTML = '';\n\n                    // swap\n                    $(active.container).css({\n                        zIndex: 0,\n                        opacity: 0\n                    }).show();\n\n                    $(active.container).find('iframe, .galleria-videoicon').remove();\n                    $(self._controls.frames[self._controls.active].container).hide();\n\n                    $(next.container).css({\n                        zIndex: 1,\n                        left: 0,\n                        top: 0\n                    }).show();\n\n                    self._controls.swap();\n\n                    // add pan according to option\n                    if (self._options.imagePan) {\n                        self.addPan(next.image);\n                    }\n\n                    // make the image clickable\n                    // order of precedence: iframe, link, lightbox, clicknext\n                    if ((data.iframe && data.image) || data.link || self._options.lightbox || self._options.clicknext) {\n\n                        $(next.image).css({\n                            cursor: 'pointer'\n                        }).on('mouseup', function(e) {\n\n                            // non-left click\n                            if (typeof e.which == 'number' && e.which > 1) {\n                                return;\n                            }\n\n                            // iframe / video\n                            if (data.iframe) {\n\n                                if (self.isPlaying()) {\n                                    self.pause();\n                                }\n                                var frame = self._controls.frames[self._controls.active],\n                                    w = self._stageWidth,\n                                    h = self._stageHeight;\n\n                                $(frame.container).css({\n                                    width: w,\n                                    height: h,\n                                    opacity: 0\n                                }).show().animate({\n                                    opacity: 1\n                                }, 200);\n\n                                window.setTimeout(function() {\n                                    frame.load(data.iframe + (data.video ? '&autoplay=1' : ''), {\n                                        width: w,\n                                        height: h\n                                    }, function(frame) {\n                                        self.$('container').addClass('videoplay');\n                                        frame.scale({\n                                            width: self._stageWidth,\n                                            height: self._stageHeight,\n                                            iframelimit: data.video ? self._options.maxVideoSize : undef\n                                        });\n                                    });\n                                }, 100);\n\n                                return;\n                            }\n\n                            // clicknext\n                            if (self._options.clicknext && !Galleria.TOUCH) {\n                                if (self._options.pauseOnInteraction) {\n                                    self.pause();\n                                }\n                                self.next();\n                                return;\n                            }\n\n                            // popup link\n                            if (data.link) {\n                                if (self._options.popupLinks) {\n                                    win = window.open(data.link, '_blank');\n                                } else {\n                                    window.location.href = data.link;\n                                }\n                                return;\n                            }\n\n                            if (self._options.lightbox) {\n                                self.openLightbox();\n                            }\n\n                        });\n                    }\n\n                    // check if we are playing\n                    self._playCheck();\n\n                    // trigger IMAGE event\n                    self.trigger({\n                        type: Galleria.IMAGE,\n                        index: queue.index,\n                        imageTarget: next.image,\n                        thumbTarget: thumb.image,\n                        galleriaData: data\n                    });\n\n                    // remove the queued image\n                    protoArray.shift.call(self._queue);\n\n                    // remove stalled\n                    self._queue.stalled = false;\n\n                    // if we still have images in the queue, show it\n                    if (self._queue.length) {\n                        self._show();\n                    }\n\n                };\n            }(data, next, active, queue, thumb));\n\n            // let the carousel follow\n            if (this._options.carousel && this._options.carouselFollow) {\n                this._carousel.follow(queue.index);\n            }\n\n            // preload images\n            self._preload();\n\n            // show the next image, just in case\n            Utils.show(next.container);\n\n            next.isIframe = data.iframe && !data.image;\n\n            // add active classes\n            $(self._thumbnails[queue.index].container)\n                .addClass('active')\n                .siblings('.active')\n                .removeClass('active');\n\n            // trigger the LOADSTART event\n            self.trigger({\n                type: Galleria.LOADSTART,\n                cached: cached,\n                index: queue.index,\n                rewind: queue.rewind,\n                imageTarget: next.image,\n                thumbTarget: thumb.image,\n                galleriaData: data\n            });\n\n            // stall the queue\n            self._queue.stalled = true;\n\n            // begin loading the next image\n            next.load(src, function(next) {\n\n                // add layer HTML\n                var layer = $(self._layers[1 - self._controls.active]).html(data.layer || '').hide();\n\n                self._scaleImage(next, {\n\n                    complete: function(next) {\n\n                        // toggle low quality for IE\n                        if ('image' in active) {\n                            Utils.toggleQuality(active.image, false);\n                        }\n                        Utils.toggleQuality(next.image, false);\n\n                        // remove the image panning, if applied\n                        // TODO: rethink if this is necessary\n                        self.removePan();\n\n                        // set the captions and counter\n                        self.setInfo(queue.index);\n                        self.setCounter(queue.index);\n\n                        // show the layer now\n                        if (data.layer) {\n                            layer.show();\n                            // inherit click events set on image\n                            if ((data.iframe && data.image) || data.link || self._options.lightbox || self._options.clicknext) {\n                                layer.css('cursor', 'pointer').off('mouseup').mouseup(mousetrigger);\n                            }\n                        }\n\n                        // add play icon\n                        if (data.video && data.image) {\n                            _playIcon(next.container);\n                        }\n\n                        var transition = self._options.transition;\n\n                        // can JavaScript loop through objects in order? yes.\n                        $.each({\n                            initial: active.image === null,\n                            touch: Galleria.TOUCH,\n                            fullscreen: self.isFullscreen()\n                        }, function(type, arg) {\n                            if (arg && self._options[type + 'Transition'] !== undef) {\n                                transition = self._options[type + 'Transition'];\n                                return false;\n                            }\n                        });\n\n                        // validate the transition\n                        if (transition in _transitions.effects === false) {\n                            complete();\n                        } else {\n                            var params = {\n                                prev: active.container,\n                                next: next.container,\n                                rewind: queue.rewind,\n                                speed: self._options.transitionSpeed || 400\n                            };\n\n                            _transitions.active = true;\n\n                            // call the transition function and send some stuff\n                            _transitions.init.call(self, transition, params, complete);\n\n                        }\n\n                        // trigger the LOADFINISH event\n                        self.trigger({\n                            type: Galleria.LOADFINISH,\n                            cached: cached,\n                            index: queue.index,\n                            rewind: queue.rewind,\n                            imageTarget: next.image,\n                            thumbTarget: self._thumbnails[queue.index].image,\n                            galleriaData: self.getData(queue.index)\n                        });\n                    }\n                });\n            });\n        },\n\n        /**\n            Gets the next index\n\n            @param {number} [base] Optional starting point\n\n            @returns {number} the next index, or the first if you are at the first (looping)\n        */\n\n        getNext: function(base) {\n            base = typeof base === 'number' ? base : this.getIndex();\n            return base === this.getDataLength() - 1 ? 0 : base + 1;\n        },\n\n        /**\n            Gets the previous index\n\n            @param {number} [base] Optional starting point\n\n            @returns {number} the previous index, or the last if you are at the first (looping)\n        */\n\n        getPrev: function(base) {\n            base = typeof base === 'number' ? base : this.getIndex();\n            return base === 0 ? this.getDataLength() - 1 : base - 1;\n        },\n\n        /**\n            Shows the next image in line\n\n            @returns Instance\n        */\n\n        next: function() {\n            if (this.getDataLength() > 1) {\n                this.show(this.getNext(), false);\n            }\n            return this;\n        },\n\n        /**\n            Shows the previous image in line\n\n            @returns Instance\n        */\n\n        prev: function() {\n            if (this.getDataLength() > 1) {\n                this.show(this.getPrev(), true);\n            }\n            return this;\n        },\n\n        /**\n            Retrieve a DOM element by element ID\n\n            @param {string} elemId The delement ID to fetch\n\n            @returns {HTMLElement} The elements DOM node or null if not found.\n        */\n\n        get: function(elemId) {\n            return elemId in this._dom ? this._dom[elemId] : null;\n        },\n\n        /**\n            Retrieve a data object\n\n            @param {number} index The data index to retrieve.\n            If no index specified it will take the currently active image\n\n            @returns {Object} The data object\n        */\n\n        getData: function(index) {\n            return index in this._data ?\n                this._data[index] : this._data[this._active];\n        },\n\n        /**\n            Retrieve the number of data items\n\n            @returns {number} The data length\n        */\n        getDataLength: function() {\n            return this._data.length;\n        },\n\n        /**\n            Retrieve the currently active index\n\n            @returns {number|boolean} The active index or false if none found\n        */\n\n        getIndex: function() {\n            return typeof this._active === 'number' ? this._active : false;\n        },\n\n        /**\n            Retrieve the stage height\n\n            @returns {number} The stage height\n        */\n\n        getStageHeight: function() {\n            return this._stageHeight;\n        },\n\n        /**\n            Retrieve the stage width\n\n            @returns {number} The stage width\n        */\n\n        getStageWidth: function() {\n            return this._stageWidth;\n        },\n\n        /**\n            Retrieve the option\n\n            @param {string} key The option key to retrieve. If no key specified it will return all options in an object.\n\n            @returns option or options\n        */\n\n        getOptions: function(key) {\n            return typeof key === 'undefined' ? this._options : this._options[key];\n        },\n\n        /**\n            Set options to the instance.\n            You can set options using a key & value argument or a single object argument (see examples)\n\n            @param {string} key The option key\n            @param {string} value the the options value\n\n            @example setOptions( 'autoplay', true )\n            @example setOptions({ autoplay: true });\n\n            @returns Instance\n        */\n\n        setOptions: function(key, value) {\n            if (typeof key === 'object') {\n                $.extend(this._options, key);\n            } else {\n                this._options[key] = value;\n            }\n            return this;\n        },\n\n        /**\n            Starts playing the slideshow\n\n            @param {number} delay Sets the slideshow interval in milliseconds.\n            If you set it once, you can just call play() and get the same interval the next time.\n\n            @returns Instance\n        */\n\n        play: function(delay) {\n\n            this._playing = true;\n\n            this._playtime = delay || this._playtime;\n\n            this._playCheck();\n\n            this.trigger(Galleria.PLAY);\n\n            return this;\n        },\n\n        /**\n            Stops the slideshow if currently playing\n\n            @returns Instance\n        */\n\n        pause: function() {\n\n            this._playing = false;\n\n            this.trigger(Galleria.PAUSE);\n\n            return this;\n        },\n\n        /**\n            Toggle between play and pause events.\n\n            @param {number} delay Sets the slideshow interval in milliseconds.\n\n            @returns Instance\n        */\n\n        playToggle: function(delay) {\n            return (this._playing) ? this.pause() : this.play(delay);\n        },\n\n        /**\n            Checks if the gallery is currently playing\n\n            @returns {Boolean}\n        */\n\n        isPlaying: function() {\n            return this._playing;\n        },\n\n        /**\n            Checks if the gallery is currently in fullscreen mode\n\n            @returns {Boolean}\n        */\n\n        isFullscreen: function() {\n            return this._fullscreen.active;\n        },\n\n        _playCheck: function() {\n            var self = this,\n                played = 0,\n                interval = 20,\n                now = Utils.timestamp(),\n                timer_id = 'play' + this._id;\n\n            if (this._playing) {\n\n                this.clearTimer(timer_id);\n\n                var fn = function() {\n\n                    played = Utils.timestamp() - now;\n                    if (played >= self._playtime && self._playing) {\n                        self.clearTimer(timer_id);\n                        self.next();\n                        return;\n                    }\n                    if (self._playing) {\n\n                        // trigger the PROGRESS event\n                        self.trigger({\n                            type: Galleria.PROGRESS,\n                            percent: M.ceil(played / self._playtime * 100),\n                            seconds: M.floor(played / 1000),\n                            milliseconds: played\n                        });\n\n                        self.addTimer(timer_id, fn, interval);\n                    }\n                };\n                self.addTimer(timer_id, fn, interval);\n            }\n        },\n\n        /**\n            Modify the slideshow delay\n\n            @param {number} delay the number of milliseconds between slides,\n\n            @returns Instance\n        */\n\n        setPlaytime: function(delay) {\n            this._playtime = delay;\n            return this;\n        },\n\n        setIndex: function(val) {\n            this._active = val;\n            return this;\n        },\n\n        /**\n            Manually modify the counter\n\n            @param {number} [index] Optional data index to fectch,\n            if no index found it assumes the currently active index\n\n            @returns Instance\n        */\n\n        setCounter: function(index) {\n\n            if (typeof index === 'number') {\n                index++;\n            } else if (typeof index === 'undefined') {\n                index = this.getIndex() + 1;\n            }\n\n            this.get('current').innerHTML = index;\n\n            if (IE) { // weird IE bug\n\n                var count = this.$('counter'),\n                    opacity = count.css('opacity');\n\n                if (parseInt(opacity, 10) === 1) {\n                    Utils.removeAlpha(count[0]);\n                } else {\n                    this.$('counter').css('opacity', opacity);\n                }\n\n            }\n\n            return this;\n        },\n\n        /**\n            Manually set captions\n\n            @param {number} [index] Optional data index to fectch and apply as caption,\n            if no index found it assumes the currently active index\n\n            @returns Instance\n        */\n\n        setInfo: function(index) {\n\n            var self = this,\n                data = this.getData(index);\n\n            $.each(['title', 'description'], function(i, type) {\n\n                var elem = self.$('info-' + type);\n\n                if (!!data[type]) {\n                    elem[data[type].length ? 'show' : 'hide']().html(data[type]);\n                } else {\n                    elem.empty().hide();\n                }\n            });\n\n            return this;\n        },\n\n        /**\n            Checks if the data contains any captions\n\n            @param {number} [index] Optional data index to fectch,\n            if no index found it assumes the currently active index.\n\n            @returns {boolean}\n        */\n\n        hasInfo: function(index) {\n\n            var check = 'title description'.split(' '),\n                i;\n\n            for (i = 0; check[i]; i++) {\n                if (!!this.getData(index)[check[i]]) {\n                    return true;\n                }\n            }\n            return false;\n\n        },\n\n        jQuery: function(str) {\n\n            var self = this,\n                ret = [];\n\n            $.each(str.split(','), function(i, elemId) {\n                elemId = $.trim(elemId);\n\n                if (self.get(elemId)) {\n                    ret.push(elemId);\n                }\n            });\n\n            var jQ = $(self.get(ret.shift()));\n\n            $.each(ret, function(i, elemId) {\n                jQ = jQ.add(self.get(elemId));\n            });\n\n            return jQ;\n\n        },\n\n        /**\n            Converts element IDs into a jQuery collection\n            You can call for multiple IDs separated with commas.\n\n            @param {string} str One or more element IDs (comma-separated)\n\n            @returns jQuery\n\n            @example this.$('info,container').hide();\n        */\n\n        $: function(str) {\n            return this.jQuery.apply(this, Utils.array(arguments));\n        }\n\n    };\n\n    // End of Galleria prototype\n\n    // Add events as static variables\n    $.each(_events, function(i, ev) {\n\n        // legacy events\n        var type = /_/.test(ev) ? ev.replace(/_/g, '') : ev;\n\n        Galleria[ev.toUpperCase()] = 'galleria.' + type;\n\n    });\n\n    $.extend(Galleria, {\n\n        // Browser helpers\n        IE9: IE === 9,\n        IE8: IE === 8,\n        IE7: IE === 7,\n        IE6: IE === 6,\n        IE: IE,\n        WEBKIT: /webkit/.test(NAV),\n        CHROME: /chrome/.test(NAV),\n        SAFARI: /safari/.test(NAV) && !(/chrome/.test(NAV)),\n        QUIRK: (IE && doc.compatMode && doc.compatMode === \"BackCompat\"),\n        MAC: /mac/.test(navigator.platform.toLowerCase()),\n        OPERA: !!window.opera,\n        IPHONE: /iphone/.test(NAV),\n        IPAD: /ipad/.test(NAV),\n        ANDROID: /android/.test(NAV),\n        TOUCH: ('ontouchstart' in doc)\n\n    });\n\n    // Galleria static methods\n\n    /**\n        Adds a theme that you can use for your Gallery\n\n        @param {Object} theme Object that should contain all your theme settings.\n        <ul>\n            <li>name - name of the theme</li>\n            <li>author - name of the author</li>\n            <li>css - css file name (not path)</li>\n            <li>defaults - default options to apply, including theme-specific options</li>\n            <li>init - the init function</li>\n        </ul>\n\n        @returns {Object} theme\n    */\n\n    Galleria.addTheme = function(theme) {\n\n        // make sure we have a name\n        if (!theme.name) {\n            Galleria.raise('No theme name specified');\n        }\n\n        if (typeof theme.defaults !== 'object') {\n            theme.defaults = {};\n        } else {\n            theme.defaults = _legacyOptions(theme.defaults);\n        }\n\n        var css = false,\n            reg;\n\n        if (typeof theme.css === 'string') {\n\n            // look for manually added CSS\n            $('link').each(function(i, link) {\n                reg = new RegExp(theme.css);\n                if (reg.test(link.href)) {\n\n                    // we found the css\n                    css = true;\n\n                    // the themeload trigger\n                    _themeLoad(theme);\n\n                    return false;\n                }\n            });\n\n            // else look for the absolute path and load the CSS dynamic\n            if (!css) {\n\n\n                $(function() {\n                    // Try to determine the css-path from the theme script.\n                    // In IE8/9, the script-dom-element seems to be not present\n                    // at once, if galleria itself is inserted into the dom\n                    // dynamically. We therefore try multiple times before raising\n                    // an error.\n                    var retryCount = 0;\n                    var tryLoadCss = function() {\n                        $('script').each(function(i, script) {\n                            // look for the theme script\n                            reg = new RegExp('galleria\\\\.' + theme.name.toLowerCase() + '\\\\.');\n                            if (reg.test(script.src)) {\n\n                                // we have a match\n                                css = script.src.replace(/[^\\/]*$/, '') + theme.css;\n\n                                window.setTimeout(function() {\n                                    Utils.loadCSS(css, 'galleria-theme-' + theme.name, function() {\n\n                                        // run galleries with this theme\n                                        _themeLoad(theme);\n\n                                    });\n                                }, 1);\n                            }\n                        });\n                        if (!css) {\n                            if (retryCount++ > 5) {\n                                Galleria.raise('No theme CSS loaded');\n                            } else {\n                                window.setTimeout(tryLoadCss, 500);\n                            }\n                        }\n                    };\n                    tryLoadCss();\n                });\n            }\n\n        } else {\n\n            // pass\n            _themeLoad(theme);\n        }\n        return theme;\n    };\n\n    /**\n        loadTheme loads a theme js file and attaches a load event to Galleria\n\n        @param {string} src The relative path to the theme source file\n\n        @param {Object} [options] Optional options you want to apply\n\n        @returns Galleria\n    */\n\n    Galleria.loadTheme = function(src, options) {\n\n        // Don't load if theme is already loaded\n        if ($('script').filter(function() {\n                return $(this).attr('src') == src; }).length) {\n            return;\n        }\n\n        var loaded = false,\n            err;\n\n        // start listening for the timeout onload\n        $(window).load(function() {\n            if (!loaded) {\n                // give it another 20 seconds\n                err = window.setTimeout(function() {\n                    if (!loaded) {\n                        Galleria.raise(\"Galleria had problems loading theme at \" + src + \". Please check theme path or load manually.\", true);\n                    }\n                }, 20000);\n            }\n        });\n\n        // load the theme\n        Utils.loadScript(src, function() {\n            loaded = true;\n            window.clearTimeout(err);\n        });\n\n        return Galleria;\n    };\n\n    /**\n        Retrieves a Galleria instance.\n\n        @param {number} [index] Optional index to retrieve.\n        If no index is supplied, the method will return all instances in an array.\n\n        @returns Instance or Array of instances\n    */\n\n    Galleria.get = function(index) {\n        if (!!_instances[index]) {\n            return _instances[index];\n        } else if (typeof index !== 'number') {\n            return _instances;\n        } else {\n            Galleria.raise('Gallery index ' + index + ' not found');\n        }\n    };\n\n    /**\n\n        Configure Galleria options via a static function.\n        The options will be applied to all instances\n\n        @param {string|object} key The options to apply or a key\n\n        @param [value] If key is a string, this is the value\n\n        @returns Galleria\n\n    */\n\n    Galleria.configure = function(key, value) {\n\n        var opts = {};\n\n        if (typeof key == 'string' && value) {\n            opts[key] = value;\n            key = opts;\n        } else {\n            $.extend(opts, key);\n        }\n\n        Galleria.configure.options = opts;\n\n        $.each(Galleria.get(), function(i, instance) {\n            instance.setOptions(opts);\n        });\n\n        return Galleria;\n    };\n\n    Galleria.configure.options = {};\n\n    /**\n\n        Bind a Galleria event to the gallery\n\n        @param {string} type A string representing the galleria event\n\n        @param {function} callback The function that should run when the event is triggered\n\n        @returns Galleria\n\n    */\n\n    Galleria.on = function(type, callback) {\n        if (!type) {\n            return;\n        }\n\n        callback = callback || F;\n\n        // hash the bind\n        var hash = type + callback.toString().replace(/\\s/g, '') + Utils.timestamp();\n\n        // for existing instances\n        $.each(Galleria.get(), function(i, instance) {\n            instance._binds.push(hash);\n            instance.bind(type, callback);\n        });\n\n        // for future instances\n        Galleria.on.binds.push({\n            type: type,\n            callback: callback,\n            hash: hash\n        });\n\n        return Galleria;\n    };\n\n    Galleria.on.binds = [];\n\n    /**\n\n        Run Galleria\n        Alias for $(selector).galleria(options)\n\n        @param {string} selector A selector of element(s) to intialize galleria to\n\n        @param {object} options The options to apply\n\n        @returns Galleria\n\n    */\n\n    Galleria.run = function(selector, options) {\n        if ($.isFunction(options)) {\n            options = { extend: options };\n        }\n        $(selector || '#galleria').galleria(options);\n        return Galleria;\n    };\n\n    /**\n        Creates a transition to be used in your gallery\n\n        @param {string} name The name of the transition that you will use as an option\n\n        @param {Function} fn The function to be executed in the transition.\n        The function contains two arguments, params and complete.\n        Use the params Object to integrate the transition, and then call complete when you are done.\n\n        @returns Galleria\n\n    */\n\n    Galleria.addTransition = function(name, fn) {\n        _transitions.effects[name] = fn;\n        return Galleria;\n    };\n\n    /**\n        The Galleria utilites\n    */\n\n    Galleria.utils = Utils;\n\n    /**\n        A helper metod for cross-browser logging.\n        It uses the console log if available otherwise it falls back to alert\n\n        @example Galleria.log(\"hello\", document.body, [1,2,3]);\n    */\n\n    Galleria.log = function() {\n        var args = Utils.array(arguments);\n        if ('console' in window && 'log' in window.console) {\n            try {\n                return window.console.log.apply(window.console, args);\n            } catch (e) {\n                $.each(args, function() {\n                    window.console.log(this);\n                });\n            }\n        } else {\n            return window.alert(args.join('<br>'));\n        }\n    };\n\n    /**\n        A ready method for adding callbacks when a gallery is ready\n        Each method is call before the extend option for every instance\n\n        @param {function} callback The function to call\n\n        @returns Galleria\n    */\n\n    Galleria.ready = function(fn) {\n        if (typeof fn != 'function') {\n            return Galleria;\n        }\n        $.each(_galleries, function(i, gallery) {\n            fn.call(gallery, gallery._options);\n        });\n        Galleria.ready.callbacks.push(fn);\n        return Galleria;\n    };\n\n    Galleria.ready.callbacks = [];\n\n    /**\n        Method for raising errors\n\n        @param {string} msg The message to throw\n\n        @param {boolean} [fatal] Set this to true to override debug settings and display a fatal error\n    */\n\n    Galleria.raise = function(msg, fatal) {\n\n        var type = fatal ? 'Fatal error' : 'Error',\n\n            css = {\n                color: '#fff',\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                zIndex: 100000\n            },\n\n            echo = function(msg) {\n\n                var html = '<div style=\"padding:4px;margin:0 0 2px;background:#' +\n                    (fatal ? '811' : '222') + ';\">' +\n                    (fatal ? '<strong>' + type + ': </strong>' : '') +\n                    msg + '</div>';\n\n                $.each(_instances, function() {\n\n                    var cont = this.$('errors'),\n                        target = this.$('target');\n\n                    if (!cont.length) {\n\n                        target.css('position', 'relative');\n\n                        cont = this.addElement('errors').appendChild('target', 'errors').$('errors').css(css);\n                    }\n                    cont.append(html);\n\n                });\n\n                if (!_instances.length) {\n                    $('<div>').css($.extend(css, { position: 'fixed' })).append(html).appendTo(DOM().body);\n                }\n            };\n\n        // if debug is on, display errors and throw exception if fatal\n        if (DEBUG) {\n            echo(msg);\n            if (fatal) {\n                throw new Error(type + ': ' + msg);\n            }\n\n            // else just echo a silent generic error if fatal\n        } else if (fatal) {\n            if (_hasError) {\n                return;\n            }\n            _hasError = true;\n            fatal = false;\n            echo('Gallery could not load.');\n        }\n    };\n\n    // Add the version\n    Galleria.version = VERSION;\n\n    Galleria.getLoadedThemes = function() {\n        return $.map(_loadedThemes, function(theme) {\n            return theme.name;\n        });\n    };\n\n    /**\n        A method for checking what version of Galleria the user has installed and throws a readable error if the user needs to upgrade.\n        Useful when building plugins that requires a certain version to function.\n\n        @param {number} version The minimum version required\n\n        @param {string} [msg] Optional message to display. If not specified, Galleria will throw a generic error.\n\n        @returns Galleria\n    */\n\n    Galleria.requires = function(version, msg) {\n        msg = msg || 'You need to upgrade Galleria to version ' + version + ' to use one or more components.';\n        if (Galleria.version < version) {\n            Galleria.raise(msg, true);\n        }\n        return Galleria;\n    };\n\n    /**\n        Adds preload, cache, scale and crop functionality\n\n        @constructor\n\n        @requires jQuery\n\n        @param {number} [id] Optional id to keep track of instances\n    */\n\n    Galleria.Picture = function(id) {\n\n        // save the id\n        this.id = id || null;\n\n        // the image should be null until loaded\n        this.image = null;\n\n        // Create a new container\n        this.container = Utils.create('galleria-image');\n\n        // add container styles\n        $(this.container).css({\n            overflow: 'hidden',\n            position: 'relative' // for IE Standards mode\n        });\n\n        // saves the original measurements\n        this.original = {\n            width: 0,\n            height: 0\n        };\n\n        // flag when the image is ready\n        this.ready = false;\n\n        // flag for iframe Picture\n        this.isIframe = false;\n\n    };\n\n    Galleria.Picture.prototype = {\n\n        // the inherited cache object\n        cache: {},\n\n        // show the image on stage\n        show: function() {\n            Utils.show(this.image);\n        },\n\n        // hide the image\n        hide: function() {\n            Utils.moveOut(this.image);\n        },\n\n        clear: function() {\n            this.image = null;\n        },\n\n        /**\n            Checks if an image is in cache\n\n            @param {string} src The image source path, ex '/path/to/img.jpg'\n\n            @returns {boolean}\n        */\n\n        isCached: function(src) {\n            return !!this.cache[src];\n        },\n\n        /**\n            Preloads an image into the cache\n\n            @param {string} src The image source path, ex '/path/to/img.jpg'\n\n            @returns Galleria.Picture\n        */\n\n        preload: function(src) {\n            $(new Image()).load((function(src, cache) {\n                return function() {\n                    cache[src] = src;\n                };\n            }(src, this.cache))).attr('src', src);\n        },\n\n        /**\n            Loads an image and call the callback when ready.\n            Will also add the image to cache.\n\n            @param {string} src The image source path, ex '/path/to/img.jpg'\n            @param {Object} [size] The forced size of the image, defined as an object { width: xx, height:xx }\n            @param {Function} callback The function to be executed when the image is loaded & scaled\n\n            @returns The image container (jQuery object)\n        */\n\n        load: function(src, size, callback) {\n\n            if (typeof size == 'function') {\n                callback = size;\n                size = null;\n            }\n\n            if (this.isIframe) {\n                var id = 'if' + new Date().getTime();\n\n                var iframe = this.image = $('<iframe>', {\n                    src: src,\n                    frameborder: 0,\n                    id: id,\n                    allowfullscreen: true,\n                    css: { visibility: 'hidden' }\n                })[0];\n\n                if (size) {\n                    $(iframe).css(size);\n                }\n\n                $(this.container).find('iframe,img').remove();\n\n                this.container.appendChild(this.image);\n\n                $('#' + id).load((function(self, callback) {\n                    return function() {\n                        window.setTimeout(function() {\n                            $(self.image).css('visibility', 'visible');\n                            if (typeof callback == 'function') {\n                                callback.call(self, self);\n                            }\n                        }, 10);\n                    };\n                }(this, callback)));\n\n                return this.container;\n            }\n\n            this.image = new Image();\n\n            // IE8 opacity inherit bug\n            if (Galleria.IE8) {\n                $(this.image).css('filter', 'inherit');\n            }\n\n            // FF shaking images bug:\n            // http://support.galleria.io/discussions/problems/12245-shaking-photos\n            if (!Galleria.IE && !Galleria.CHROME && !Galleria.SAFARI) {\n                $(this.image).css('image-rendering', 'optimizequality');\n            }\n\n            var reload = false,\n                resort = false,\n\n                // some jquery cache\n                $container = $(this.container),\n                $image = $(this.image),\n\n                onerror = function() {\n                    if (!reload) {\n                        reload = true;\n                        // reload the image with a timestamp\n                        window.setTimeout((function(image, src) {\n                            return function() {\n                                image.attr('src', src + (src.indexOf('?') > -1 ? '&' : '?') + Utils.timestamp());\n                            };\n                        }($(this), src)), 50);\n                    } else {\n                        // apply the dummy image if it exists\n                        if (DUMMY) {\n                            $(this).attr('src', DUMMY);\n                        } else {\n                            Galleria.raise('Image not found: ' + src);\n                        }\n                    }\n                },\n\n                // the onload method\n                onload = (function(self, callback, src) {\n\n                    return function() {\n\n                        var complete = function() {\n\n                            $(this).off('load');\n\n                            // save the original size\n                            self.original = size || {\n                                height: this.height,\n                                width: this.width\n                            };\n\n                            // translate3d if needed\n                            if (Galleria.HAS3D) {\n                                this.style.MozTransform = this.style.webkitTransform = 'translate3d(0,0,0)';\n                            }\n\n                            $container.append(this);\n\n                            self.cache[src] = src; // will override old cache\n\n                            if (typeof callback == 'function') {\n                                window.setTimeout(function() {\n                                    callback.call(self, self);\n                                }, 1);\n                            }\n                        };\n\n                        // Delay the callback to \"fix\" the Adblock Bug\n                        // http://code.google.com/p/adblockforchrome/issues/detail?id=3701\n                        if ((!this.width || !this.height)) {\n                            (function(img) {\n                                Utils.wait({\n                                    until: function() {\n                                        return img.width && img.height;\n                                    },\n                                    success: function() {\n                                        complete.call(img);\n                                    },\n                                    error: function() {\n                                        if (!resort) {\n                                            $(new Image()).load(onload).attr('src', img.src);\n                                            resort = true;\n                                        } else {\n                                            Galleria.raise('Could not extract width/height from image: ' + img.src +\n                                                '. Traced measures: width:' + img.width + 'px, height: ' + img.height + 'px.');\n                                        }\n                                    },\n                                    timeout: 100\n                                });\n                            }(this));\n                        } else {\n                            complete.call(this);\n                        }\n                    };\n                }(this, callback, src));\n\n            // remove any previous images\n            $container.find('iframe,img').remove();\n\n            // append the image\n            $image.css('display', 'block');\n\n            // hide it for now\n            Utils.hide(this.image);\n\n            // remove any max/min scaling\n            $.each('minWidth minHeight maxWidth maxHeight'.split(' '), function(i, prop) {\n                $image.css(prop, (/min/.test(prop) ? '0' : 'none'));\n            });\n\n            // begin load and insert in cache when done\n            $image.load(onload).on('error', onerror).attr('src', src);\n\n            // return the container\n            return this.container;\n        },\n\n        /**\n            Scales and crops the image\n\n            @param {Object} options The method takes an object with a number of options:\n\n            <ul>\n                <li>width - width of the container</li>\n                <li>height - height of the container</li>\n                <li>min - minimum scale ratio</li>\n                <li>max - maximum scale ratio</li>\n                <li>margin - distance in pixels from the image border to the container</li>\n                <li>complete - a callback that fires when scaling is complete</li>\n                <li>position - positions the image, works like the css background-image property.</li>\n                <li>crop - defines how to crop. Can be true, false, 'width' or 'height'</li>\n                <li>canvas - set to true to try a canvas-based rescale</li>\n            </ul>\n\n            @returns The image container object (jQuery)\n        */\n\n        scale: function(options) {\n\n            var self = this;\n\n            // extend some defaults\n            options = $.extend({\n                width: 0,\n                height: 0,\n                min: undef,\n                max: undef,\n                margin: 0,\n                complete: F,\n                position: 'center',\n                crop: false,\n                canvas: false,\n                iframelimit: undef\n            }, options);\n\n            if (this.isIframe) {\n\n                var cw = options.width,\n                    ch = options.height,\n                    nw, nh;\n                if (options.iframelimit) {\n                    var r = M.min(options.iframelimit / cw, options.iframelimit / ch);\n                    if (r < 1) {\n                        nw = cw * r;\n                        nh = ch * r;\n\n                        $(this.image).css({\n                            top: ch / 2 - nh / 2,\n                            left: cw / 2 - nw / 2,\n                            position: 'absolute'\n                        });\n                    } else {\n                        $(this.image).css({\n                            top: 0,\n                            left: 0\n                        });\n                    }\n                }\n                $(this.image).width(nw || cw).height(nh || ch).removeAttr('width').removeAttr('height');\n                $(this.container).width(cw).height(ch);\n                options.complete.call(self, self);\n                try {\n                    if (this.image.contentWindow) {\n                        $(this.image.contentWindow).trigger('resize');\n                    }\n                } catch (e) {}\n                return this.container;\n\n            }\n\n            // return the element if no image found\n            if (!this.image) {\n                return this.container;\n            }\n\n            // store locale variables\n            var width,\n                height,\n                $container = $(self.container),\n                data;\n\n            // wait for the width/height\n            Utils.wait({\n                until: function() {\n                    width = options.width ||\n                        $container.width() ||\n                        Utils.parseValue($container.css('width'));\n\n                    height = options.height ||\n                        $container.height() ||\n                        Utils.parseValue($container.css('height'));\n\n                    return width && height;\n                },\n                success: function() {\n\n                    // calculate some cropping\n                    var newWidth = (width - options.margin * 2) / self.original.width,\n                        newHeight = (height - options.margin * 2) / self.original.height,\n                        min = M.min(newWidth, newHeight),\n                        max = M.max(newWidth, newHeight),\n                        cropMap = {\n                            'true': max,\n                            'width': newWidth,\n                            'height': newHeight,\n                            'false': min,\n                            'landscape': self.original.width > self.original.height ? max : min,\n                            'portrait': self.original.width < self.original.height ? max : min\n                        },\n                        ratio = cropMap[options.crop.toString()],\n                        canvasKey = '';\n\n                    // allow maxScaleRatio\n                    if (options.max) {\n                        ratio = M.min(options.max, ratio);\n                    }\n\n                    // allow minScaleRatio\n                    if (options.min) {\n                        ratio = M.max(options.min, ratio);\n                    }\n\n                    $.each(['width', 'height'], function(i, m) {\n                        $(self.image)[m](self[m] = self.image[m] = M.round(self.original[m] * ratio));\n                    });\n\n                    $(self.container).width(width).height(height);\n\n                    if (options.canvas && _canvas) {\n\n                        _canvas.elem.width = self.width;\n                        _canvas.elem.height = self.height;\n\n                        canvasKey = self.image.src + ':' + self.width + 'x' + self.height;\n\n                        self.image.src = _canvas.cache[canvasKey] || (function(key) {\n\n                            _canvas.context.drawImage(self.image, 0, 0, self.original.width * ratio, self.original.height * ratio);\n\n                            try {\n\n                                data = _canvas.elem.toDataURL();\n                                _canvas.length += data.length;\n                                _canvas.cache[key] = data;\n                                return data;\n\n                            } catch (e) {\n                                return self.image.src;\n                            }\n\n                        }(canvasKey));\n\n                    }\n\n                    // calculate image_position\n                    var pos = {},\n                        mix = {},\n                        getPosition = function(value, measure, margin) {\n                            var result = 0;\n                            if (/\\%/.test(value)) {\n                                var flt = parseInt(value, 10) / 100,\n                                    m = self.image[measure] || $(self.image)[measure]();\n\n                                result = M.ceil(m * -1 * flt + margin * flt);\n                            } else {\n                                result = Utils.parseValue(value);\n                            }\n                            return result;\n                        },\n                        positionMap = {\n                            'top': { top: 0 },\n                            'left': { left: 0 },\n                            'right': { left: '100%' },\n                            'bottom': { top: '100%' }\n                        };\n\n                    $.each(options.position.toLowerCase().split(' '), function(i, value) {\n                        if (value === 'center') {\n                            value = '50%';\n                        }\n                        pos[i ? 'top' : 'left'] = value;\n                    });\n\n                    $.each(pos, function(i, value) {\n                        if (positionMap.hasOwnProperty(value)) {\n                            $.extend(mix, positionMap[value]);\n                        }\n                    });\n\n                    pos = pos.top ? $.extend(pos, mix) : mix;\n\n                    pos = $.extend({\n                        top: '50%',\n                        left: '50%'\n                    }, pos);\n\n                    // apply position\n                    $(self.image).css({\n                        position: 'absolute',\n                        top: getPosition(pos.top, 'height', height),\n                        left: getPosition(pos.left, 'width', width)\n                    });\n\n                    // show the image\n                    self.show();\n\n                    // flag ready and call the callback\n                    self.ready = true;\n                    options.complete.call(self, self);\n\n                },\n                error: function() {\n                    Galleria.raise('Could not scale image: ' + self.image.src);\n                },\n                timeout: 1000\n            });\n            return this;\n        }\n    };\n\n    // our own easings\n    $.extend($.easing, {\n\n        galleria: function(_, t, b, c, d) {\n            if ((t /= d / 2) < 1) {\n                return c / 2 * t * t * t + b;\n            }\n            return c / 2 * ((t -= 2) * t * t + 2) + b;\n        },\n\n        galleriaIn: function(_, t, b, c, d) {\n            return c * (t /= d) * t + b;\n        },\n\n        galleriaOut: function(_, t, b, c, d) {\n            return -c * (t /= d) * (t - 2) + b;\n        }\n\n    });\n\n\n    // Forked version of Ainos Finger.js for native-style touch\n\n    Galleria.Finger = (function() {\n\n        var abs = M.abs;\n\n        // test for translate3d support\n        var has3d = Galleria.HAS3D = (function() {\n\n            var el = doc.createElement('p'),\n                has3d,\n                t = ['webkit', 'O', 'ms', 'Moz', ''],\n                s,\n                i = 0,\n                a = 'transform';\n\n            DOM().html.insertBefore(el, null);\n\n            for (; t[i]; i++) {\n                s = t[i] ? t[i] + 'Transform' : a;\n                if (el.style[s] !== undefined) {\n                    el.style[s] = \"translate3d(1px,1px,1px)\";\n                    has3d = $(el).css(t[i] ? '-' + t[i].toLowerCase() + '-' + a : a);\n                }\n            }\n\n            DOM().html.removeChild(el);\n            return (has3d !== undefined && has3d.length > 0 && has3d !== \"none\");\n        }());\n\n        // request animation shim\n        var requestFrame = (function() {\n            var r = 'RequestAnimationFrame';\n            return window.requestAnimationFrame ||\n                window['webkit' + r] ||\n                window['moz' + r] ||\n                window['o' + r] ||\n                window['ms' + r] ||\n                function(callback) {\n                    window.setTimeout(callback, 1000 / 60);\n                };\n        }());\n\n        var Finger = function(elem, options) {\n\n            // default options\n            this.config = {\n                start: 0,\n                duration: 500,\n                onchange: function() {},\n                oncomplete: function() {},\n                easing: function(x, t, b, c, d) {\n                    return -c * ((t = t / d - 1) * t * t * t - 1) + b; // easeOutQuart\n                }\n            };\n\n            this.easeout = function(x, t, b, c, d) {\n                return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n            };\n\n            if (!elem.children.length) {\n                return;\n            }\n\n            var self = this;\n\n            // extend options\n            $.extend(this.config, options);\n\n            this.elem = elem;\n            this.child = elem.children[0];\n            this.to = this.pos = 0;\n            this.touching = false;\n            this.start = {};\n            this.index = this.config.start;\n            this.anim = 0;\n            this.easing = this.config.easing;\n\n            if (!has3d) {\n                this.child.style.position = 'absolute';\n                this.elem.style.position = 'relative';\n            }\n\n            // Bind event handlers to context\n            $.each(['ontouchstart', 'ontouchmove', 'ontouchend', 'setup'], function(i, fn) {\n                self[fn] = (function(caller) {\n                    return function() {\n                        caller.apply(self, arguments);\n                    };\n                }(self[fn]));\n            });\n\n            // the physical animator\n            this.setX = function() {\n\n                var style = self.child.style;\n\n                if (!has3d) {\n                    // this is actually faster than CSS3 translate\n                    style.left = self.pos + 'px';\n                    return;\n                }\n                style.MozTransform = style.webkitTransform = style.transform = 'translate3d(' + self.pos + 'px,0,0)';\n                return;\n            };\n\n            // bind events\n            $(elem).on('touchstart', this.ontouchstart);\n            $(window).on('resize', this.setup);\n            $(window).on('orientationchange', this.setup);\n\n            // set up width\n            this.setup();\n\n            // start the animations\n            (function animloop() {\n                requestFrame(animloop);\n                self.loop.call(self);\n            }());\n\n        };\n\n        Finger.prototype = {\n\n            constructor: Finger,\n\n            setup: function() {\n                this.width = $(this.elem).width();\n                this.length = M.ceil($(this.child).width() / this.width);\n                if (this.index !== 0) {\n                    this.index = M.max(0, M.min(this.index, this.length - 1));\n                    this.pos = this.to = -this.width * this.index;\n                }\n            },\n\n            setPosition: function(pos) {\n                this.pos = pos;\n                this.to = pos;\n            },\n\n            ontouchstart: function(e) {\n\n                var touch = e.originalEvent.touches;\n\n                this.start = {\n                    pageX: touch[0].pageX,\n                    pageY: touch[0].pageY,\n                    time: +new Date()\n                };\n\n                this.isScrolling = null;\n                this.touching = true;\n                this.deltaX = 0;\n\n                $doc.on('touchmove', this.ontouchmove);\n                $doc.on('touchend', this.ontouchend);\n            },\n\n            ontouchmove: function(e) {\n\n                var touch = e.originalEvent.touches;\n\n                // ensure swiping with one touch and not pinching\n                if (touch && touch.length > 1 || e.scale && e.scale !== 1) {\n                    return;\n                }\n\n                this.deltaX = touch[0].pageX - this.start.pageX;\n\n                // determine if scrolling test has run - one time test\n                if (this.isScrolling === null) {\n                    this.isScrolling = !!(\n                        this.isScrolling ||\n                        M.abs(this.deltaX) < M.abs(touch[0].pageY - this.start.pageY)\n                    );\n                }\n\n                // if user is not trying to scroll vertically\n                if (!this.isScrolling) {\n\n                    // prevent native scrolling\n                    e.preventDefault();\n\n                    // increase resistance if first or last slide\n                    this.deltaX /= ((!this.index && this.deltaX > 0 || this.index == this.length - 1 && this.deltaX < 0) ?\n                        (M.abs(this.deltaX) / this.width + 1.8) : 1);\n                    this.to = this.deltaX - this.index * this.width;\n                }\n                e.stopPropagation();\n            },\n\n            ontouchend: function(e) {\n\n                this.touching = false;\n\n                // determine if slide attempt triggers next/prev slide\n                var isValidSlide = +new Date() - this.start.time < 250 &&\n                    M.abs(this.deltaX) > 40 ||\n                    M.abs(this.deltaX) > this.width / 2,\n\n                    isPastBounds = !this.index && this.deltaX > 0 ||\n                    this.index == this.length - 1 && this.deltaX < 0;\n\n                // if not scrolling vertically\n                if (!this.isScrolling) {\n                    this.show(this.index + (isValidSlide && !isPastBounds ? (this.deltaX < 0 ? 1 : -1) : 0));\n                }\n\n                $doc.off('touchmove', this.ontouchmove);\n                $doc.off('touchend', this.ontouchend);\n            },\n\n            show: function(index) {\n                if (index != this.index) {\n                    this.config.onchange.call(this, index);\n                } else {\n                    this.to = -(index * this.width);\n                }\n            },\n\n            moveTo: function(index) {\n                if (index != this.index) {\n                    this.pos = this.to = -(index * this.width);\n                    this.index = index;\n                }\n            },\n\n            loop: function() {\n\n                var distance = this.to - this.pos,\n                    factor = 1;\n\n                if (this.width && distance) {\n                    factor = M.max(0.5, M.min(1.5, M.abs(distance / this.width)));\n                }\n\n                // if distance is short or the user is touching, do a 1-1 animation\n                if (this.touching || M.abs(distance) <= 1)=\"\" {=\"\" this.pos=\"this.to;\" distance=\"0;\" if=\"\" (this.anim=\"\" &&=\"\" !this.touching)=\"\" this.config.oncomplete(this.index);=\"\" }=\"\" this.anim=\"0;\" this.easing=\"this.config.easing;\" else=\"\" (!this.anim)=\"\" save=\"\" animation=\"\" parameters=\"\" start:=\"\" this.pos,=\"\" time:=\"\" +new=\"\" date(),=\"\" distance:=\"\" distance,=\"\" factor:=\"\" factor,=\"\" destination:=\"\" this.to=\"\" };=\"\" check=\"\" to=\"\" has=\"\" changed=\"\" or=\"\" time=\"\" run=\"\" out=\"\" var=\"\" elapsed=\"+new\" date()=\"\" -=\"\" this.anim.time;=\"\" duration=\"this.config.duration\" *=\"\" this.anim.factor;=\"\" (elapsed=\"\"> duration || this.anim.destination != this.to) {\n                        this.anim = 0;\n                        this.easing = this.easeout;\n                        return;\n                    }\n                    // apply easing\n                    this.pos = this.easing(\n                        null,\n                        elapsed,\n                        this.anim.start,\n                        this.anim.distance,\n                        duration\n                    );\n                }\n                this.setX();\n            }\n        };\n\n        return Finger;\n\n    }());\n\n    // the plugin initializer\n    $.fn.galleria = function(options) {\n\n        var selector = this.selector;\n\n        // try domReady if element not found\n        if (!$(this).length) {\n\n            $(function() {\n                if ($(selector).length) {\n\n                    // if found on domReady, go ahead\n                    $(selector).galleria(options);\n\n                } else {\n\n                    // if not, try fetching the element for 5 secs, then raise a warning.\n                    Galleria.utils.wait({\n                        until: function() {\n                            return $(selector).length;\n                        },\n                        success: function() {\n                            $(selector).galleria(options);\n                        },\n                        error: function() {\n                            Galleria.raise('Init failed: Galleria could not find the element \"' + selector + '\".');\n                        },\n                        timeout: 5000\n                    });\n\n                }\n            });\n            return this;\n        }\n\n        return this.each(function() {\n\n            // destroy previous instance and prepare for new load\n            if ($.data(this, 'galleria')) {\n                $.data(this, 'galleria').destroy();\n                $(this).find('*').hide();\n            }\n\n            // load the new gallery\n            $.data(this, 'galleria', new Galleria().init(this, options));\n        });\n\n    };\n\n    // export as AMD or CommonJS\n    if (typeof module === \"object\" && module && typeof module.exports === \"object\") {\n        module.exports = Galleria;\n    } else {\n        window.Galleria = Galleria;\n        if (typeof define === \"function\" && define.amd) {\n            define(\"galleria\", ['jquery'], function() {\n                return Galleria; });\n        }\n    }\n\n    // phew\n\n}(jQuery, this));\n</=></iframe></div></=></s></scr'>"},{"_content":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <title>Galleria Flickr Plugin</title>\n        <style>\n\n            /* Demo styles */\n            html,body{background:#222;margin:0;}\n            body{border-top:4px solid #000;}\n            .content{color:#777;font:12px/1.4 \"helvetica neue\",arial,sans-serif;width:620px;margin:20px auto;}\n            h1{font-size:12px;font-weight:normal;color:#ddd;margin:0;}\n            p{margin:0 0 20px}\n            a {color:#22BCB9;text-decoration:none;}\n            .cred{margin-top:20px;font-size:11px;}\n\n            /* This rule is read by Galleria to define the gallery height: */\n            #galleria{height:320px;}\n\n        </style>\n\n        <!-- load jQuery -->\n        <script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js\"></script>\n\n        <!-- load Galleria -->\n        <script src=\"../../galleria-1.4.5.min.js\"></script>\n\n        <!-- load flickr plugin -->\n        <script src=\"galleria.flickr.min.js\"></script>\n\n    </head>\n<body>\n    <div class=\"content\">\n        <h1>Galleria Flickr Plugin Demo</h1>\n        <p>Demonstrating a basic gallery example with a Flickr search.</p>\n\n        <!-- Adding gallery images. This is just a container for the dynamic flickr images -->\n\n        <div id=\"galleria\"></div>\n\n        <p class=\"cred\">Made by <a href=\"http://galleria.io\">Galleria</a>.</p>\n        <a href=\"#\" id=\"close\">cloase</a>\n    </div>\n    <script>\n    $(function() {\n        // Load the classic theme\n        Galleria.loadTheme('../../themes/classic/galleria.classic.min.js');\n\n        // Initialize Galleria\n        Galleria.run('#galleria', {\n\n            // search flickr for \"galleria\"\n            flickr: 'search:galleria',\n\n            flickrOptions: {\n                // sort by interestingness\n                sort: 'interestingness-desc'\n            }\n        });\n    });\n    </script>\n    </body>\n</html>","source":"galleria/plugins/flickr/flickr-demo.html","raw":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <title>Galleria Flickr Plugin</title>\n        <style>\n\n            /* Demo styles */\n            html,body{background:#222;margin:0;}\n            body{border-top:4px solid #000;}\n            .content{color:#777;font:12px/1.4 \"helvetica neue\",arial,sans-serif;width:620px;margin:20px auto;}\n            h1{font-size:12px;font-weight:normal;color:#ddd;margin:0;}\n            p{margin:0 0 20px}\n            a {color:#22BCB9;text-decoration:none;}\n            .cred{margin-top:20px;font-size:11px;}\n\n            /* This rule is read by Galleria to define the gallery height: */\n            #galleria{height:320px;}\n\n        </style>\n\n        <!-- load jQuery -->\n        <script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js\"></script>\n\n        <!-- load Galleria -->\n        <script src=\"../../galleria-1.4.5.min.js\"></script>\n\n        <!-- load flickr plugin -->\n        <script src=\"galleria.flickr.min.js\"></script>\n\n    </head>\n<body>\n    <div class=\"content\">\n        <h1>Galleria Flickr Plugin Demo</h1>\n        <p>Demonstrating a basic gallery example with a Flickr search.</p>\n\n        <!-- Adding gallery images. This is just a container for the dynamic flickr images -->\n\n        <div id=\"galleria\"></div>\n\n        <p class=\"cred\">Made by <a href=\"http://galleria.io\">Galleria</a>.</p>\n        <a href=\"#\" id=\"close\">cloase</a>\n    </div>\n    <script>\n    $(function() {\n        // Load the classic theme\n        Galleria.loadTheme('../../themes/classic/galleria.classic.min.js');\n\n        // Initialize Galleria\n        Galleria.run('#galleria', {\n\n            // search flickr for \"galleria\"\n            flickr: 'search:galleria',\n\n            flickrOptions: {\n                // sort by interestingness\n                sort: 'interestingness-desc'\n            }\n        });\n    });\n    </script>\n    </body>\n</html>","date":"2017-06-24T13:46:41.000Z","updated":"2016-09-15T15:53:15.000Z","path":"galleria/plugins/flickr/flickr-demo.html","title":"","comments":1,"layout":"page","_id":"cj5o1vdp6000crtwytb252hyu","content":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <title>Galleria Flickr Plugin</title>\n        <style>\n\n            /* Demo styles */\n            html,body{background:#222;margin:0;}\n            body{border-top:4px solid #000;}\n            .content{color:#777;font:12px/1.4 \"helvetica neue\",arial,sans-serif;width:620px;margin:20px auto;}\n            h1{font-size:12px;font-weight:normal;color:#ddd;margin:0;}\n            p{margin:0 0 20px}\n            a {color:#22BCB9;text-decoration:none;}\n            .cred{margin-top:20px;font-size:11px;}\n\n            /* This rule is read by Galleria to define the gallery height: */\n            #galleria{height:320px;}\n\n        </style>\n\n        <!-- load jQuery -->\n        <script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js\"></script>\n\n        <!-- load Galleria -->\n        <script src=\"../../galleria-1.4.5.min.js\"></script>\n\n        <!-- load flickr plugin -->\n        <script src=\"galleria.flickr.min.js\"></script>\n\n    </head>\n<body>\n    <div class=\"content\">\n        <h1>Galleria Flickr Plugin Demo</h1>\n        <p>Demonstrating a basic gallery example with a Flickr search.</p>\n\n        <!-- Adding gallery images. This is just a container for the dynamic flickr images -->\n\n        <div id=\"galleria\"></div>\n\n        <p class=\"cred\">Made by <a href=\"http://galleria.io\" target=\"_blank\" rel=\"external\">Galleria</a>.</p>\n        <a href=\"#\" id=\"close\">cloase</a>\n    </div>\n    <script>\n    $(function() {\n        // Load the classic theme\n        Galleria.loadTheme('../../themes/classic/galleria.classic.min.js');\n\n        // Initialize Galleria\n        Galleria.run('#galleria', {\n\n            // search flickr for \"galleria\"\n            flickr: 'search:galleria',\n\n            flickrOptions: {\n                // sort by interestingness\n                sort: 'interestingness-desc'\n            }\n        });\n    });\n    </script>\n    </body>\n</html>","site":{"data":{}},"excerpt":"","more":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <title>Galleria Flickr Plugin</title>\n        <style>\n\n            /* Demo styles */\n            html,body{background:#222;margin:0;}\n            body{border-top:4px solid #000;}\n            .content{color:#777;font:12px/1.4 \"helvetica neue\",arial,sans-serif;width:620px;margin:20px auto;}\n            h1{font-size:12px;font-weight:normal;color:#ddd;margin:0;}\n            p{margin:0 0 20px}\n            a {color:#22BCB9;text-decoration:none;}\n            .cred{margin-top:20px;font-size:11px;}\n\n            /* This rule is read by Galleria to define the gallery height: */\n            #galleria{height:320px;}\n\n        </style>\n\n        <!-- load jQuery -->\n        <script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js\"></script>\n\n        <!-- load Galleria -->\n        <script src=\"../../galleria-1.4.5.min.js\"></script>\n\n        <!-- load flickr plugin -->\n        <script src=\"galleria.flickr.min.js\"></script>\n\n    </head>\n<body>\n    <div class=\"content\">\n        <h1>Galleria Flickr Plugin Demo</h1>\n        <p>Demonstrating a basic gallery example with a Flickr search.</p>\n\n        <!-- Adding gallery images. This is just a container for the dynamic flickr images -->\n\n        <div id=\"galleria\"></div>\n\n        <p class=\"cred\">Made by <a href=\"http://galleria.io\" target=\"_blank\" rel=\"external\">Galleria</a>.</p>\n        <a href=\"#\" id=\"close\">cloase</a>\n    </div>\n    <script>\n    $(function() {\n        // Load the classic theme\n        Galleria.loadTheme('../../themes/classic/galleria.classic.min.js');\n\n        // Initialize Galleria\n        Galleria.run('#galleria', {\n\n            // search flickr for \"galleria\"\n            flickr: 'search:galleria',\n\n            flickrOptions: {\n                // sort by interestingness\n                sort: 'interestingness-desc'\n            }\n        });\n    });\n    </script>\n    </body>\n</html>"},{"_content":"(function($){Galleria.requires(1.25,\"The Flickr Plugin requires Galleria version 1.2.5 or later.\");var PATH=Galleria.utils.getScriptPath();Galleria.Flickr=function(api_key){this.api_key=api_key||\"2a2ce06c15780ebeb0b706650fc890b2\";this.options={max:30,imageSize:\"medium\",thumbSize:\"thumb\",sort:\"interestingness-desc\",description:false,complete:function(){},backlink:false}};Galleria.Flickr.prototype={constructor:Galleria.Flickr,search:function(phrase,callback){return this._find({text:phrase},callback)},tags:function(tag,callback){return this._find({tags:tag},callback)},user:function(username,callback){return this._call({method:\"flickr.urls.lookupUser\",url:\"flickr.com/photos/\"+username},function(data){this._find({user_id:data.user.id,method:\"flickr.people.getPublicPhotos\"},callback)})},set:function(photoset_id,callback){return this._find({photoset_id:photoset_id,method:\"flickr.photosets.getPhotos\"},callback)},gallery:function(gallery_id,callback){return this._find({gallery_id:gallery_id,method:\"flickr.galleries.getPhotos\"},callback)},groupsearch:function(group,callback){return this._call({text:group,method:\"flickr.groups.search\"},function(data){this.group(data.groups.group[0].nsid,callback)})},group:function(group_id,callback){return this._find({group_id:group_id,method:\"flickr.groups.pools.getPhotos\"},callback)},setOptions:function(options){$.extend(this.options,options);return this},_call:function(params,callback){var url=\"https://api.flickr.com/services/rest/?\";var scope=this;params=$.extend({format:\"json\",jsoncallback:\"?\",api_key:this.api_key},params);$.each(params,function(key,value){url+=\"&\"+key+\"=\"+value});$.getJSON(url,function(data){if(data.stat===\"ok\"){callback.call(scope,data)}else{Galleria.raise(data.code.toString()+\" \"+data.stat+\": \"+data.message,true)}});return scope},_getBig:function(photo){if(photo.url_l){return photo.url_l}else if(parseInt(photo.width_o,10)>1280){return\"https://farm\"+photo.farm+\".static.flickr.com/\"+photo.server+\"/\"+photo.id+\"_\"+photo.secret+\"_b.jpg\"}return photo.url_o||photo.url_z||photo.url_m},_getSize:function(photo,size){var img;switch(size){case\"thumb\":img=photo.url_t;break;case\"small\":img=photo.url_s;break;case\"big\":img=this._getBig(photo);break;case\"original\":img=photo.url_o?photo.url_o:this._getBig(photo);break;default:img=photo.url_z||photo.url_m;break}return img},_find:function(params,callback){params=$.extend({method:\"flickr.photos.search\",extras:\"url_t,url_m,url_o,url_s,url_l,url_z,description\",sort:this.options.sort,per_page:Math.min(this.options.max,500)},params);return this._call(params,function(data){var gallery=[],photos=data.photos?data.photos.photo:data.photoset.photo,len=photos.length,photo,i;for(i=0;i<len;i++){photo=photos[i];gallery.push({thumb:this._getSize(photo,this.options.thumbSize),image:this._getSize(photo,this.options.imageSize),big:this._getBig(photo),title:photos[i].title,description:this.options.description&&photos[i].description?photos[i].description._content:\"\",link:this.options.backlink?\"https://flickr.com/photos/\"+photo.owner+\"/\"+photo.id:\"\"})}callback.call(this,gallery)})}};var load=Galleria.prototype.load;Galleria.prototype.load=function(){if(arguments.length||typeof this._options.flickr!==\"string\"){load.apply(this,Galleria.utils.array(arguments));return}var self=this,args=Galleria.utils.array(arguments),flickr=this._options.flickr.split(\":\"),f,opts=$.extend({},self._options.flickrOptions),loader=typeof opts.loader!==\"undefined\"?opts.loader:$(\"<div>\").css({width:48,height:48,opacity:.7,background:\"#000 url(\"+PATH+\"loader.gif) no-repeat 50% 50%\"});if(flickr.length){if(typeof Galleria.Flickr.prototype[flickr[0]]!==\"function\"){Galleria.raise(flickr[0]+\" method not found in Flickr plugin\");return load.apply(this,args)}if(!flickr[1]){Galleria.raise(\"No flickr argument found\");return load.apply(this,args)}window.setTimeout(function(){self.$(\"target\").append(loader)},100);f=new Galleria.Flickr;if(typeof self._options.flickrOptions===\"object\"){f.setOptions(self._options.flickrOptions)}f[flickr[0]](flickr[1],function(data){self._data=data;loader.remove();self.trigger(Galleria.DATA);f.options.complete.call(f,data)})}else{load.apply(this,args)}}})(jQuery);","source":"galleria/plugins/flickr/galleria.flickr.min.js","raw":"(function($){Galleria.requires(1.25,\"The Flickr Plugin requires Galleria version 1.2.5 or later.\");var PATH=Galleria.utils.getScriptPath();Galleria.Flickr=function(api_key){this.api_key=api_key||\"2a2ce06c15780ebeb0b706650fc890b2\";this.options={max:30,imageSize:\"medium\",thumbSize:\"thumb\",sort:\"interestingness-desc\",description:false,complete:function(){},backlink:false}};Galleria.Flickr.prototype={constructor:Galleria.Flickr,search:function(phrase,callback){return this._find({text:phrase},callback)},tags:function(tag,callback){return this._find({tags:tag},callback)},user:function(username,callback){return this._call({method:\"flickr.urls.lookupUser\",url:\"flickr.com/photos/\"+username},function(data){this._find({user_id:data.user.id,method:\"flickr.people.getPublicPhotos\"},callback)})},set:function(photoset_id,callback){return this._find({photoset_id:photoset_id,method:\"flickr.photosets.getPhotos\"},callback)},gallery:function(gallery_id,callback){return this._find({gallery_id:gallery_id,method:\"flickr.galleries.getPhotos\"},callback)},groupsearch:function(group,callback){return this._call({text:group,method:\"flickr.groups.search\"},function(data){this.group(data.groups.group[0].nsid,callback)})},group:function(group_id,callback){return this._find({group_id:group_id,method:\"flickr.groups.pools.getPhotos\"},callback)},setOptions:function(options){$.extend(this.options,options);return this},_call:function(params,callback){var url=\"https://api.flickr.com/services/rest/?\";var scope=this;params=$.extend({format:\"json\",jsoncallback:\"?\",api_key:this.api_key},params);$.each(params,function(key,value){url+=\"&\"+key+\"=\"+value});$.getJSON(url,function(data){if(data.stat===\"ok\"){callback.call(scope,data)}else{Galleria.raise(data.code.toString()+\" \"+data.stat+\": \"+data.message,true)}});return scope},_getBig:function(photo){if(photo.url_l){return photo.url_l}else if(parseInt(photo.width_o,10)>1280){return\"https://farm\"+photo.farm+\".static.flickr.com/\"+photo.server+\"/\"+photo.id+\"_\"+photo.secret+\"_b.jpg\"}return photo.url_o||photo.url_z||photo.url_m},_getSize:function(photo,size){var img;switch(size){case\"thumb\":img=photo.url_t;break;case\"small\":img=photo.url_s;break;case\"big\":img=this._getBig(photo);break;case\"original\":img=photo.url_o?photo.url_o:this._getBig(photo);break;default:img=photo.url_z||photo.url_m;break}return img},_find:function(params,callback){params=$.extend({method:\"flickr.photos.search\",extras:\"url_t,url_m,url_o,url_s,url_l,url_z,description\",sort:this.options.sort,per_page:Math.min(this.options.max,500)},params);return this._call(params,function(data){var gallery=[],photos=data.photos?data.photos.photo:data.photoset.photo,len=photos.length,photo,i;for(i=0;i<len;i++){photo=photos[i];gallery.push({thumb:this._getSize(photo,this.options.thumbSize),image:this._getSize(photo,this.options.imageSize),big:this._getBig(photo),title:photos[i].title,description:this.options.description&&photos[i].description?photos[i].description._content:\"\",link:this.options.backlink?\"https://flickr.com/photos/\"+photo.owner+\"/\"+photo.id:\"\"})}callback.call(this,gallery)})}};var load=Galleria.prototype.load;Galleria.prototype.load=function(){if(arguments.length||typeof this._options.flickr!==\"string\"){load.apply(this,Galleria.utils.array(arguments));return}var self=this,args=Galleria.utils.array(arguments),flickr=this._options.flickr.split(\":\"),f,opts=$.extend({},self._options.flickrOptions),loader=typeof opts.loader!==\"undefined\"?opts.loader:$(\"<div>\").css({width:48,height:48,opacity:.7,background:\"#000 url(\"+PATH+\"loader.gif) no-repeat 50% 50%\"});if(flickr.length){if(typeof Galleria.Flickr.prototype[flickr[0]]!==\"function\"){Galleria.raise(flickr[0]+\" method not found in Flickr plugin\");return load.apply(this,args)}if(!flickr[1]){Galleria.raise(\"No flickr argument found\");return load.apply(this,args)}window.setTimeout(function(){self.$(\"target\").append(loader)},100);f=new Galleria.Flickr;if(typeof self._options.flickrOptions===\"object\"){f.setOptions(self._options.flickrOptions)}f[flickr[0]](flickr[1],function(data){self._data=data;loader.remove();self.trigger(Galleria.DATA);f.options.complete.call(f,data)})}else{load.apply(this,args)}}})(jQuery);","date":"2017-06-24T13:46:41.000Z","updated":"2016-09-15T15:53:15.000Z","path":"galleria/plugins/flickr/galleria.flickr.min.js","layout":"false","title":"","comments":1,"_id":"cj5o1vdp7000drtwyutobal7f","content":"(function($){Galleria.requires(1.25,\"The Flickr Plugin requires Galleria version 1.2.5 or later.\");var PATH=Galleria.utils.getScriptPath();Galleria.Flickr=function(api_key){this.api_key=api_key||\"2a2ce06c15780ebeb0b706650fc890b2\";this.options={max:30,imageSize:\"medium\",thumbSize:\"thumb\",sort:\"interestingness-desc\",description:false,complete:function(){},backlink:false}};Galleria.Flickr.prototype={constructor:Galleria.Flickr,search:function(phrase,callback){return this._find({text:phrase},callback)},tags:function(tag,callback){return this._find({tags:tag},callback)},user:function(username,callback){return this._call({method:\"flickr.urls.lookupUser\",url:\"flickr.com/photos/\"+username},function(data){this._find({user_id:data.user.id,method:\"flickr.people.getPublicPhotos\"},callback)})},set:function(photoset_id,callback){return this._find({photoset_id:photoset_id,method:\"flickr.photosets.getPhotos\"},callback)},gallery:function(gallery_id,callback){return this._find({gallery_id:gallery_id,method:\"flickr.galleries.getPhotos\"},callback)},groupsearch:function(group,callback){return this._call({text:group,method:\"flickr.groups.search\"},function(data){this.group(data.groups.group[0].nsid,callback)})},group:function(group_id,callback){return this._find({group_id:group_id,method:\"flickr.groups.pools.getPhotos\"},callback)},setOptions:function(options){$.extend(this.options,options);return this},_call:function(params,callback){var url=\"https://api.flickr.com/services/rest/?\";var scope=this;params=$.extend({format:\"json\",jsoncallback:\"?\",api_key:this.api_key},params);$.each(params,function(key,value){url+=\"&\"+key+\"=\"+value});$.getJSON(url,function(data){if(data.stat===\"ok\"){callback.call(scope,data)}else{Galleria.raise(data.code.toString()+\" \"+data.stat+\": \"+data.message,true)}});return scope},_getBig:function(photo){if(photo.url_l){return photo.url_l}else if(parseInt(photo.width_o,10)>1280){return\"https://farm\"+photo.farm+\".static.flickr.com/\"+photo.server+\"/\"+photo.id+\"_\"+photo.secret+\"_b.jpg\"}return photo.url_o||photo.url_z||photo.url_m},_getSize:function(photo,size){var img;switch(size){case\"thumb\":img=photo.url_t;break;case\"small\":img=photo.url_s;break;case\"big\":img=this._getBig(photo);break;case\"original\":img=photo.url_o?photo.url_o:this._getBig(photo);break;default:img=photo.url_z||photo.url_m;break}return img},_find:function(params,callback){params=$.extend({method:\"flickr.photos.search\",extras:\"url_t,url_m,url_o,url_s,url_l,url_z,description\",sort:this.options.sort,per_page:Math.min(this.options.max,500)},params);return this._call(params,function(data){var gallery=[],photos=data.photos?data.photos.photo:data.photoset.photo,len=photos.length,photo,i;for(i=0;i<len;i++){photo=photos[i];gallery.push({thumb:this._getsize(photo,this.options.thumbsize),image:this._getsize(photo,this.options.imagesize),big:this._getbig(photo),title:photos[i].title,description:this.options.description&&photos[i].description?photos[i].description._content:\"\",link:this.options.backlink?\"https: flickr.com=\"\" photos=\"\" \"+photo.owner+\"=\"\" \"+photo.id:\"\"})}callback.call(this,gallery)})}};var=\"\" load=\"Galleria.prototype.load;Galleria.prototype.load=function(){if(arguments.length||typeof\" this._options.flickr!=\"=\"string\"){load.apply(this,Galleria.utils.array(arguments));return}var\" self=\"this,args=Galleria.utils.array(arguments),flickr=this._options.flickr.split(\":\"),f,opts=$.extend({},self._options.flickrOptions),loader=typeof\" opts.loader!=\"=\"undefined\"?opts.loader:$(\"<div\">\").css({width:48,height:48,opacity:.7,background:\"#000 url(\"+PATH+\"loader.gif) no-repeat 50% 50%\"});if(flickr.length){if(typeof Galleria.Flickr.prototype[flickr[0]]!==\"function\"){Galleria.raise(flickr[0]+\" method not found in Flickr plugin\");return load.apply(this,args)}if(!flickr[1]){Galleria.raise(\"No flickr argument found\");return load.apply(this,args)}window.setTimeout(function(){self.$(\"target\").append(loader)},100);f=new Galleria.Flickr;if(typeof self._options.flickrOptions===\"object\"){f.setOptions(self._options.flickrOptions)}f[flickr[0]](flickr[1],function(data){self._data=data;loader.remove();self.trigger(Galleria.DATA);f.options.complete.call(f,data)})}else{load.apply(this,args)}}})(jQuery);</len;i++){photo=photos[i];gallery.push({thumb:this._getsize(photo,this.options.thumbsize),image:this._getsize(photo,this.options.imagesize),big:this._getbig(photo),title:photos[i].title,description:this.options.description&&photos[i].description?photos[i].description._content:\"\",link:this.options.backlink?\"https:>","site":{"data":{}},"excerpt":"","more":"(function($){Galleria.requires(1.25,\"The Flickr Plugin requires Galleria version 1.2.5 or later.\");var PATH=Galleria.utils.getScriptPath();Galleria.Flickr=function(api_key){this.api_key=api_key||\"2a2ce06c15780ebeb0b706650fc890b2\";this.options={max:30,imageSize:\"medium\",thumbSize:\"thumb\",sort:\"interestingness-desc\",description:false,complete:function(){},backlink:false}};Galleria.Flickr.prototype={constructor:Galleria.Flickr,search:function(phrase,callback){return this._find({text:phrase},callback)},tags:function(tag,callback){return this._find({tags:tag},callback)},user:function(username,callback){return this._call({method:\"flickr.urls.lookupUser\",url:\"flickr.com/photos/\"+username},function(data){this._find({user_id:data.user.id,method:\"flickr.people.getPublicPhotos\"},callback)})},set:function(photoset_id,callback){return this._find({photoset_id:photoset_id,method:\"flickr.photosets.getPhotos\"},callback)},gallery:function(gallery_id,callback){return this._find({gallery_id:gallery_id,method:\"flickr.galleries.getPhotos\"},callback)},groupsearch:function(group,callback){return this._call({text:group,method:\"flickr.groups.search\"},function(data){this.group(data.groups.group[0].nsid,callback)})},group:function(group_id,callback){return this._find({group_id:group_id,method:\"flickr.groups.pools.getPhotos\"},callback)},setOptions:function(options){$.extend(this.options,options);return this},_call:function(params,callback){var url=\"https://api.flickr.com/services/rest/?\";var scope=this;params=$.extend({format:\"json\",jsoncallback:\"?\",api_key:this.api_key},params);$.each(params,function(key,value){url+=\"&\"+key+\"=\"+value});$.getJSON(url,function(data){if(data.stat===\"ok\"){callback.call(scope,data)}else{Galleria.raise(data.code.toString()+\" \"+data.stat+\": \"+data.message,true)}});return scope},_getBig:function(photo){if(photo.url_l){return photo.url_l}else if(parseInt(photo.width_o,10)>1280){return\"https://farm\"+photo.farm+\".static.flickr.com/\"+photo.server+\"/\"+photo.id+\"_\"+photo.secret+\"_b.jpg\"}return photo.url_o||photo.url_z||photo.url_m},_getSize:function(photo,size){var img;switch(size){case\"thumb\":img=photo.url_t;break;case\"small\":img=photo.url_s;break;case\"big\":img=this._getBig(photo);break;case\"original\":img=photo.url_o?photo.url_o:this._getBig(photo);break;default:img=photo.url_z||photo.url_m;break}return img},_find:function(params,callback){params=$.extend({method:\"flickr.photos.search\",extras:\"url_t,url_m,url_o,url_s,url_l,url_z,description\",sort:this.options.sort,per_page:Math.min(this.options.max,500)},params);return this._call(params,function(data){var gallery=[],photos=data.photos?data.photos.photo:data.photoset.photo,len=photos.length,photo,i;for(i=0;i<len;i++){photo=photos[i];gallery.push({thumb:this._getsize(photo,this.options.thumbsize),image:this._getsize(photo,this.options.imagesize),big:this._getbig(photo),title:photos[i].title,description:this.options.description&&photos[i].description?photos[i].description._content:\"\",link:this.options.backlink?\"https: flickr.com=\"\" photos=\"\" \"+photo.owner+\"=\"\" \"+photo.id:\"\"})}callback.call(this,gallery)})}};var=\"\" load=\"Galleria.prototype.load;Galleria.prototype.load=function(){if(arguments.length||typeof\" this._options.flickr!=\"=\"string\"){load.apply(this,Galleria.utils.array(arguments));return}var\" self=\"this,args=Galleria.utils.array(arguments),flickr=this._options.flickr.split(\":\"),f,opts=$.extend({},self._options.flickrOptions),loader=typeof\" opts.loader!=\"=\"undefined\"?opts.loader:$(\"<div\">\").css({width:48,height:48,opacity:.7,background:\"#000 url(\"+PATH+\"loader.gif) no-repeat 50% 50%\"});if(flickr.length){if(typeof Galleria.Flickr.prototype[flickr[0]]!==\"function\"){Galleria.raise(flickr[0]+\" method not found in Flickr plugin\");return load.apply(this,args)}if(!flickr[1]){Galleria.raise(\"No flickr argument found\");return load.apply(this,args)}window.setTimeout(function(){self.$(\"target\").append(loader)},100);f=new Galleria.Flickr;if(typeof self._options.flickrOptions===\"object\"){f.setOptions(self._options.flickrOptions)}f[flickr[0]](flickr[1],function(data){self._data=data;loader.remove();self.trigger(Galleria.DATA);f.options.complete.call(f,data)})}else{load.apply(this,args)}}})(jQuery);</len;i++){photo=photos[i];gallery.push({thumb:this._getsize(photo,this.options.thumbsize),image:this._getsize(photo,this.options.imagesize),big:this._getbig(photo),title:photos[i].title,description:this.options.description&&photos[i].description?photos[i].description._content:\"\",link:this.options.backlink?\"https:>"},{"_content":"/**\n * Galleria Flickr Plugin 2016-09-03\n * http://galleria.io\n *\n * Licensed under the MIT license\n * https://raw.github.com/worseisbetter/galleria/master/LICENSE\n *\n */\n\n(function($) {\n\n/*global jQuery, Galleria, window */\n\nGalleria.requires(1.25, 'The Flickr Plugin requires Galleria version 1.2.5 or later.');\n\n// The script path\nvar PATH = Galleria.utils.getScriptPath();\n\n/**\n\n    @class\n    @constructor\n\n    @example var flickr = new Galleria.Flickr();\n\n    @author http://galleria.io\n\n    @requires jQuery\n    @requires Galleria\n\n    @param {String} [api_key] Flickr API key to be used, defaults to the Galleria key\n\n    @returns Instance\n*/\n\nGalleria.Flickr = function( api_key ) {\n\n    this.api_key = api_key || '2a2ce06c15780ebeb0b706650fc890b2';\n\n    this.options = {\n        max: 30,                       // photos to return\n        imageSize: 'medium',           // photo size ( thumb,small,medium,big,original )\n        thumbSize: 'thumb',            // thumbnail size ( thumb,small,medium,big,original )\n        sort: 'interestingness-desc',  // sort option ( date-posted-asc, date-posted-desc, date-taken-asc, date-taken-desc, interestingness-desc, interestingness-asc, relevance )\n        description: false,            // set this to true to get description as caption\n        complete: function(){},        // callback to be called inside the Galleria.prototype.load\n        backlink: false                // set this to true if you want to pass a link back to the original image\n    };\n};\n\nGalleria.Flickr.prototype = {\n\n    // bring back the constructor reference\n\n    constructor: Galleria.Flickr,\n\n    /**\n        Search for anything at Flickr\n\n        @param {String} phrase The string to search for\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    search: function( phrase, callback ) {\n        return this._find({\n            text: phrase\n        }, callback );\n    },\n\n    /**\n        Search for anything at Flickr by tag\n\n        @param {String} tag The tag(s) to search for\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    tags: function( tag, callback ) {\n        return this._find({\n            tags: tag\n        }, callback);\n    },\n\n    /**\n        Get a user's public photos\n\n        @param {String} username The username as shown in the URL to fetch\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    user: function( username, callback ) {\n        return this._call({\n            method: 'flickr.urls.lookupUser',\n            url: 'flickr.com/photos/' + username\n        }, function( data ) {\n            this._find({\n                user_id: data.user.id,\n                method: 'flickr.people.getPublicPhotos'\n            }, callback);\n        });\n    },\n\n    /**\n        Get photos from a photoset by ID\n\n        @param {String|Number} photoset_id The photoset id to fetch\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    set: function( photoset_id, callback ) {\n        return this._find({\n            photoset_id: photoset_id,\n            method: 'flickr.photosets.getPhotos'\n        }, callback);\n    },\n\n    /**\n        Get photos from a gallery by ID\n\n        @param {String|Number} gallery_id The gallery id to fetch\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    gallery: function( gallery_id, callback ) {\n        return this._find({\n            gallery_id: gallery_id,\n            method: 'flickr.galleries.getPhotos'\n        }, callback);\n    },\n\n    /**\n        Search groups and fetch photos from the first group found\n        Useful if you know the exact name of a group and want to show the groups photos.\n\n        @param {String} group The group name to search for\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    groupsearch: function( group, callback ) {\n        return this._call({\n            text: group,\n            method: 'flickr.groups.search'\n        }, function( data ) {\n            this.group( data.groups.group[0].nsid, callback );\n        });\n    },\n\n    /**\n        Get photos from a group by ID\n\n        @param {String} group_id The group id to fetch\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    group: function ( group_id, callback ) {\n        return this._find({\n            group_id: group_id,\n            method: 'flickr.groups.pools.getPhotos'\n        }, callback );\n    },\n\n    /**\n        Set flickr options\n\n        @param {Object} options The options object to blend\n\n        @returns Instance\n    */\n\n    setOptions: function( options ) {\n        $.extend(this.options, options);\n        return this;\n    },\n\n\n    // call Flickr and raise errors\n\n    _call: function( params, callback ) {\n\n        var url = 'https://api.flickr.com/services/rest/?';\n\n        var scope = this;\n\n        params = $.extend({\n            format : 'json',\n            jsoncallback : '?',\n            api_key: this.api_key\n        }, params );\n\n        $.each(params, function( key, value ) {\n            url += '&' + key + '=' + value;\n        });\n\n        $.getJSON(url, function(data) {\n            if ( data.stat === 'ok' ) {\n                callback.call(scope, data);\n            } else {\n                Galleria.raise( data.code.toString() + ' ' + data.stat + ': ' + data.message, true );\n            }\n        });\n        return scope;\n    },\n\n\n    // \"hidden\" way of getting a big image (~1024) from flickr\n\n    _getBig: function( photo ) {\n\n        if ( photo.url_l ) {\n            return photo.url_l;\n        } else if ( parseInt( photo.width_o, 10 ) > 1280 ) {\n\n            return 'https://farm'+photo.farm + '.static.flickr.com/'+photo.server +\n                '/' + photo.id + '_' + photo.secret + '_b.jpg';\n        }\n\n        return photo.url_o || photo.url_z || photo.url_m;\n\n    },\n\n\n    // get image size by option name\n\n    _getSize: function( photo, size ) {\n\n        var img;\n\n        switch(size) {\n\n            case 'thumb':\n                img = photo.url_t;\n                break;\n\n            case 'small':\n                img = photo.url_s;\n                break;\n\n            case 'big':\n                img = this._getBig( photo );\n                break;\n\n            case 'original':\n                img = photo.url_o ? photo.url_o : this._getBig( photo );\n                break;\n\n            default:\n                img = photo.url_z || photo.url_m;\n                break;\n        }\n        return img;\n    },\n\n\n    // ask flickr for photos, parse the result and call the callback with the galleria-ready data array\n\n    _find: function( params, callback ) {\n\n        params = $.extend({\n            method: 'flickr.photos.search',\n            extras: 'url_t,url_m,url_o,url_s,url_l,url_z,description',\n            sort: this.options.sort,\n            per_page: Math.min( this.options.max, 500 )\n        }, params );\n\n        return this._call( params, function(data) {\n\n            var gallery = [],\n                photos = data.photos ? data.photos.photo : data.photoset.photo,\n                len = photos.length,\n                photo,\n                i;\n\n            for ( i=0; i<len; i++ ) {\n\n                photo = photos[i];\n\n                gallery.push({\n                    thumb: this._getSize( photo, this.options.thumbSize ),\n                    image: this._getSize( photo, this.options.imageSize ),\n                    big: this._getBig( photo ),\n                    title: photos[i].title,\n                    description: this.options.description && photos[i].description ? photos[i].description._content : '',\n                    link: this.options.backlink ? 'https://flickr.com/photos/' + photo.owner + '/' + photo.id : ''\n                });\n            }\n            callback.call( this, gallery );\n        });\n    }\n};\n\n\n/**\n    Galleria modifications\n    We fake-extend the load prototype to make Flickr integration as simple as possible\n*/\n\n\n// save the old prototype in a local variable\n\nvar load = Galleria.prototype.load;\n\n\n// fake-extend the load prototype using the flickr data\n\nGalleria.prototype.load = function() {\n\n    // pass if no data is provided or flickr option not found\n    if ( arguments.length || typeof this._options.flickr !== 'string' ) {\n        load.apply( this, Galleria.utils.array( arguments ) );\n        return;\n    }\n\n    // define some local vars\n    var self = this,\n        args = Galleria.utils.array( arguments ),\n        flickr = this._options.flickr.split(':'),\n        f,\n        opts = $.extend({}, self._options.flickrOptions),\n        loader = typeof opts.loader !== 'undefined' ?\n            opts.loader : $('<div>').css({\n                width: 48,\n                height: 48,\n                opacity: 0.7,\n                background:'#000 url('+PATH+'loader.gif) no-repeat 50% 50%'\n            });\n\n    if ( flickr.length ) {\n\n        // validate the method\n        if ( typeof Galleria.Flickr.prototype[ flickr[0] ] !== 'function' ) {\n            Galleria.raise( flickr[0] + ' method not found in Flickr plugin' );\n            return load.apply( this, args );\n        }\n\n        // validate the argument\n        if ( !flickr[1] ) {\n            Galleria.raise( 'No flickr argument found' );\n            return load.apply( this, args );\n        }\n\n        // apply the preloader\n        window.setTimeout(function() {\n            self.$( 'target' ).append( loader );\n        },100);\n\n        // create the instance\n        f = new Galleria.Flickr();\n\n        // apply Flickr options\n        if ( typeof self._options.flickrOptions === 'object' ) {\n            f.setOptions( self._options.flickrOptions );\n        }\n\n        // call the flickr method and trigger the DATA event\n        f[ flickr[0] ]( flickr[1], function( data ) {\n\n            self._data = data;\n            loader.remove();\n            self.trigger( Galleria.DATA );\n            f.options.complete.call(f, data);\n\n        });\n    } else {\n\n        // if flickr array not found, pass\n        load.apply( this, args );\n    }\n};\n\n}( jQuery ) );","source":"galleria/plugins/flickr/galleria.flickr.js","raw":"/**\n * Galleria Flickr Plugin 2016-09-03\n * http://galleria.io\n *\n * Licensed under the MIT license\n * https://raw.github.com/worseisbetter/galleria/master/LICENSE\n *\n */\n\n(function($) {\n\n/*global jQuery, Galleria, window */\n\nGalleria.requires(1.25, 'The Flickr Plugin requires Galleria version 1.2.5 or later.');\n\n// The script path\nvar PATH = Galleria.utils.getScriptPath();\n\n/**\n\n    @class\n    @constructor\n\n    @example var flickr = new Galleria.Flickr();\n\n    @author http://galleria.io\n\n    @requires jQuery\n    @requires Galleria\n\n    @param {String} [api_key] Flickr API key to be used, defaults to the Galleria key\n\n    @returns Instance\n*/\n\nGalleria.Flickr = function( api_key ) {\n\n    this.api_key = api_key || '2a2ce06c15780ebeb0b706650fc890b2';\n\n    this.options = {\n        max: 30,                       // photos to return\n        imageSize: 'medium',           // photo size ( thumb,small,medium,big,original )\n        thumbSize: 'thumb',            // thumbnail size ( thumb,small,medium,big,original )\n        sort: 'interestingness-desc',  // sort option ( date-posted-asc, date-posted-desc, date-taken-asc, date-taken-desc, interestingness-desc, interestingness-asc, relevance )\n        description: false,            // set this to true to get description as caption\n        complete: function(){},        // callback to be called inside the Galleria.prototype.load\n        backlink: false                // set this to true if you want to pass a link back to the original image\n    };\n};\n\nGalleria.Flickr.prototype = {\n\n    // bring back the constructor reference\n\n    constructor: Galleria.Flickr,\n\n    /**\n        Search for anything at Flickr\n\n        @param {String} phrase The string to search for\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    search: function( phrase, callback ) {\n        return this._find({\n            text: phrase\n        }, callback );\n    },\n\n    /**\n        Search for anything at Flickr by tag\n\n        @param {String} tag The tag(s) to search for\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    tags: function( tag, callback ) {\n        return this._find({\n            tags: tag\n        }, callback);\n    },\n\n    /**\n        Get a user's public photos\n\n        @param {String} username The username as shown in the URL to fetch\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    user: function( username, callback ) {\n        return this._call({\n            method: 'flickr.urls.lookupUser',\n            url: 'flickr.com/photos/' + username\n        }, function( data ) {\n            this._find({\n                user_id: data.user.id,\n                method: 'flickr.people.getPublicPhotos'\n            }, callback);\n        });\n    },\n\n    /**\n        Get photos from a photoset by ID\n\n        @param {String|Number} photoset_id The photoset id to fetch\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    set: function( photoset_id, callback ) {\n        return this._find({\n            photoset_id: photoset_id,\n            method: 'flickr.photosets.getPhotos'\n        }, callback);\n    },\n\n    /**\n        Get photos from a gallery by ID\n\n        @param {String|Number} gallery_id The gallery id to fetch\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    gallery: function( gallery_id, callback ) {\n        return this._find({\n            gallery_id: gallery_id,\n            method: 'flickr.galleries.getPhotos'\n        }, callback);\n    },\n\n    /**\n        Search groups and fetch photos from the first group found\n        Useful if you know the exact name of a group and want to show the groups photos.\n\n        @param {String} group The group name to search for\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    groupsearch: function( group, callback ) {\n        return this._call({\n            text: group,\n            method: 'flickr.groups.search'\n        }, function( data ) {\n            this.group( data.groups.group[0].nsid, callback );\n        });\n    },\n\n    /**\n        Get photos from a group by ID\n\n        @param {String} group_id The group id to fetch\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    group: function ( group_id, callback ) {\n        return this._find({\n            group_id: group_id,\n            method: 'flickr.groups.pools.getPhotos'\n        }, callback );\n    },\n\n    /**\n        Set flickr options\n\n        @param {Object} options The options object to blend\n\n        @returns Instance\n    */\n\n    setOptions: function( options ) {\n        $.extend(this.options, options);\n        return this;\n    },\n\n\n    // call Flickr and raise errors\n\n    _call: function( params, callback ) {\n\n        var url = 'https://api.flickr.com/services/rest/?';\n\n        var scope = this;\n\n        params = $.extend({\n            format : 'json',\n            jsoncallback : '?',\n            api_key: this.api_key\n        }, params );\n\n        $.each(params, function( key, value ) {\n            url += '&' + key + '=' + value;\n        });\n\n        $.getJSON(url, function(data) {\n            if ( data.stat === 'ok' ) {\n                callback.call(scope, data);\n            } else {\n                Galleria.raise( data.code.toString() + ' ' + data.stat + ': ' + data.message, true );\n            }\n        });\n        return scope;\n    },\n\n\n    // \"hidden\" way of getting a big image (~1024) from flickr\n\n    _getBig: function( photo ) {\n\n        if ( photo.url_l ) {\n            return photo.url_l;\n        } else if ( parseInt( photo.width_o, 10 ) > 1280 ) {\n\n            return 'https://farm'+photo.farm + '.static.flickr.com/'+photo.server +\n                '/' + photo.id + '_' + photo.secret + '_b.jpg';\n        }\n\n        return photo.url_o || photo.url_z || photo.url_m;\n\n    },\n\n\n    // get image size by option name\n\n    _getSize: function( photo, size ) {\n\n        var img;\n\n        switch(size) {\n\n            case 'thumb':\n                img = photo.url_t;\n                break;\n\n            case 'small':\n                img = photo.url_s;\n                break;\n\n            case 'big':\n                img = this._getBig( photo );\n                break;\n\n            case 'original':\n                img = photo.url_o ? photo.url_o : this._getBig( photo );\n                break;\n\n            default:\n                img = photo.url_z || photo.url_m;\n                break;\n        }\n        return img;\n    },\n\n\n    // ask flickr for photos, parse the result and call the callback with the galleria-ready data array\n\n    _find: function( params, callback ) {\n\n        params = $.extend({\n            method: 'flickr.photos.search',\n            extras: 'url_t,url_m,url_o,url_s,url_l,url_z,description',\n            sort: this.options.sort,\n            per_page: Math.min( this.options.max, 500 )\n        }, params );\n\n        return this._call( params, function(data) {\n\n            var gallery = [],\n                photos = data.photos ? data.photos.photo : data.photoset.photo,\n                len = photos.length,\n                photo,\n                i;\n\n            for ( i=0; i<len; i++ ) {\n\n                photo = photos[i];\n\n                gallery.push({\n                    thumb: this._getSize( photo, this.options.thumbSize ),\n                    image: this._getSize( photo, this.options.imageSize ),\n                    big: this._getBig( photo ),\n                    title: photos[i].title,\n                    description: this.options.description && photos[i].description ? photos[i].description._content : '',\n                    link: this.options.backlink ? 'https://flickr.com/photos/' + photo.owner + '/' + photo.id : ''\n                });\n            }\n            callback.call( this, gallery );\n        });\n    }\n};\n\n\n/**\n    Galleria modifications\n    We fake-extend the load prototype to make Flickr integration as simple as possible\n*/\n\n\n// save the old prototype in a local variable\n\nvar load = Galleria.prototype.load;\n\n\n// fake-extend the load prototype using the flickr data\n\nGalleria.prototype.load = function() {\n\n    // pass if no data is provided or flickr option not found\n    if ( arguments.length || typeof this._options.flickr !== 'string' ) {\n        load.apply( this, Galleria.utils.array( arguments ) );\n        return;\n    }\n\n    // define some local vars\n    var self = this,\n        args = Galleria.utils.array( arguments ),\n        flickr = this._options.flickr.split(':'),\n        f,\n        opts = $.extend({}, self._options.flickrOptions),\n        loader = typeof opts.loader !== 'undefined' ?\n            opts.loader : $('<div>').css({\n                width: 48,\n                height: 48,\n                opacity: 0.7,\n                background:'#000 url('+PATH+'loader.gif) no-repeat 50% 50%'\n            });\n\n    if ( flickr.length ) {\n\n        // validate the method\n        if ( typeof Galleria.Flickr.prototype[ flickr[0] ] !== 'function' ) {\n            Galleria.raise( flickr[0] + ' method not found in Flickr plugin' );\n            return load.apply( this, args );\n        }\n\n        // validate the argument\n        if ( !flickr[1] ) {\n            Galleria.raise( 'No flickr argument found' );\n            return load.apply( this, args );\n        }\n\n        // apply the preloader\n        window.setTimeout(function() {\n            self.$( 'target' ).append( loader );\n        },100);\n\n        // create the instance\n        f = new Galleria.Flickr();\n\n        // apply Flickr options\n        if ( typeof self._options.flickrOptions === 'object' ) {\n            f.setOptions( self._options.flickrOptions );\n        }\n\n        // call the flickr method and trigger the DATA event\n        f[ flickr[0] ]( flickr[1], function( data ) {\n\n            self._data = data;\n            loader.remove();\n            self.trigger( Galleria.DATA );\n            f.options.complete.call(f, data);\n\n        });\n    } else {\n\n        // if flickr array not found, pass\n        load.apply( this, args );\n    }\n};\n\n}( jQuery ) );","date":"2017-06-24T13:46:41.000Z","updated":"2016-09-15T15:53:15.000Z","path":"galleria/plugins/flickr/galleria.flickr.js","layout":"false","title":"","comments":1,"_id":"cj5o1vdp8000ertwyjb26u6bw","content":"/**\n * Galleria Flickr Plugin 2016-09-03\n * http://galleria.io\n *\n * Licensed under the MIT license\n * https://raw.github.com/worseisbetter/galleria/master/LICENSE\n *\n */\n\n(function($) {\n\n/*global jQuery, Galleria, window */\n\nGalleria.requires(1.25, 'The Flickr Plugin requires Galleria version 1.2.5 or later.');\n\n// The script path\nvar PATH = Galleria.utils.getScriptPath();\n\n/**\n\n    @class\n    @constructor\n\n    @example var flickr = new Galleria.Flickr();\n\n    @author http://galleria.io\n\n    @requires jQuery\n    @requires Galleria\n\n    @param {String} [api_key] Flickr API key to be used, defaults to the Galleria key\n\n    @returns Instance\n*/\n\nGalleria.Flickr = function( api_key ) {\n\n    this.api_key = api_key || '2a2ce06c15780ebeb0b706650fc890b2';\n\n    this.options = {\n        max: 30,                       // photos to return\n        imageSize: 'medium',           // photo size ( thumb,small,medium,big,original )\n        thumbSize: 'thumb',            // thumbnail size ( thumb,small,medium,big,original )\n        sort: 'interestingness-desc',  // sort option ( date-posted-asc, date-posted-desc, date-taken-asc, date-taken-desc, interestingness-desc, interestingness-asc, relevance )\n        description: false,            // set this to true to get description as caption\n        complete: function(){},        // callback to be called inside the Galleria.prototype.load\n        backlink: false                // set this to true if you want to pass a link back to the original image\n    };\n};\n\nGalleria.Flickr.prototype = {\n\n    // bring back the constructor reference\n\n    constructor: Galleria.Flickr,\n\n    /**\n        Search for anything at Flickr\n\n        @param {String} phrase The string to search for\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    search: function( phrase, callback ) {\n        return this._find({\n            text: phrase\n        }, callback );\n    },\n\n    /**\n        Search for anything at Flickr by tag\n\n        @param {String} tag The tag(s) to search for\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    tags: function( tag, callback ) {\n        return this._find({\n            tags: tag\n        }, callback);\n    },\n\n    /**\n        Get a user's public photos\n\n        @param {String} username The username as shown in the URL to fetch\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    user: function( username, callback ) {\n        return this._call({\n            method: 'flickr.urls.lookupUser',\n            url: 'flickr.com/photos/' + username\n        }, function( data ) {\n            this._find({\n                user_id: data.user.id,\n                method: 'flickr.people.getPublicPhotos'\n            }, callback);\n        });\n    },\n\n    /**\n        Get photos from a photoset by ID\n\n        @param {String|Number} photoset_id The photoset id to fetch\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    set: function( photoset_id, callback ) {\n        return this._find({\n            photoset_id: photoset_id,\n            method: 'flickr.photosets.getPhotos'\n        }, callback);\n    },\n\n    /**\n        Get photos from a gallery by ID\n\n        @param {String|Number} gallery_id The gallery id to fetch\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    gallery: function( gallery_id, callback ) {\n        return this._find({\n            gallery_id: gallery_id,\n            method: 'flickr.galleries.getPhotos'\n        }, callback);\n    },\n\n    /**\n        Search groups and fetch photos from the first group found\n        Useful if you know the exact name of a group and want to show the groups photos.\n\n        @param {String} group The group name to search for\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    groupsearch: function( group, callback ) {\n        return this._call({\n            text: group,\n            method: 'flickr.groups.search'\n        }, function( data ) {\n            this.group( data.groups.group[0].nsid, callback );\n        });\n    },\n\n    /**\n        Get photos from a group by ID\n\n        @param {String} group_id The group id to fetch\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    group: function ( group_id, callback ) {\n        return this._find({\n            group_id: group_id,\n            method: 'flickr.groups.pools.getPhotos'\n        }, callback );\n    },\n\n    /**\n        Set flickr options\n\n        @param {Object} options The options object to blend\n\n        @returns Instance\n    */\n\n    setOptions: function( options ) {\n        $.extend(this.options, options);\n        return this;\n    },\n\n\n    // call Flickr and raise errors\n\n    _call: function( params, callback ) {\n\n        var url = 'https://api.flickr.com/services/rest/?';\n\n        var scope = this;\n\n        params = $.extend({\n            format : 'json',\n            jsoncallback : '?',\n            api_key: this.api_key\n        }, params );\n\n        $.each(params, function( key, value ) {\n            url += '&' + key + '=' + value;\n        });\n\n        $.getJSON(url, function(data) {\n            if ( data.stat === 'ok' ) {\n                callback.call(scope, data);\n            } else {\n                Galleria.raise( data.code.toString() + ' ' + data.stat + ': ' + data.message, true );\n            }\n        });\n        return scope;\n    },\n\n\n    // \"hidden\" way of getting a big image (~1024) from flickr\n\n    _getBig: function( photo ) {\n\n        if ( photo.url_l ) {\n            return photo.url_l;\n        } else if ( parseInt( photo.width_o, 10 ) > 1280 ) {\n\n            return 'https://farm'+photo.farm + '.static.flickr.com/'+photo.server +\n                '/' + photo.id + '_' + photo.secret + '_b.jpg';\n        }\n\n        return photo.url_o || photo.url_z || photo.url_m;\n\n    },\n\n\n    // get image size by option name\n\n    _getSize: function( photo, size ) {\n\n        var img;\n\n        switch(size) {\n\n            case 'thumb':\n                img = photo.url_t;\n                break;\n\n            case 'small':\n                img = photo.url_s;\n                break;\n\n            case 'big':\n                img = this._getBig( photo );\n                break;\n\n            case 'original':\n                img = photo.url_o ? photo.url_o : this._getBig( photo );\n                break;\n\n            default:\n                img = photo.url_z || photo.url_m;\n                break;\n        }\n        return img;\n    },\n\n\n    // ask flickr for photos, parse the result and call the callback with the galleria-ready data array\n\n    _find: function( params, callback ) {\n\n        params = $.extend({\n            method: 'flickr.photos.search',\n            extras: 'url_t,url_m,url_o,url_s,url_l,url_z,description',\n            sort: this.options.sort,\n            per_page: Math.min( this.options.max, 500 )\n        }, params );\n\n        return this._call( params, function(data) {\n\n            var gallery = [],\n                photos = data.photos ? data.photos.photo : data.photoset.photo,\n                len = photos.length,\n                photo,\n                i;\n\n            for ( i=0; i<len; i++=\"\" )=\"\" {=\"\" photo=\"photos[i];\" gallery.push({=\"\" thumb:=\"\" this._getsize(=\"\" photo,=\"\" this.options.thumbsize=\"\" ),=\"\" image:=\"\" this.options.imagesize=\"\" big:=\"\" this._getbig(=\"\" title:=\"\" photos[i].title,=\"\" description:=\"\" this.options.description=\"\" &&=\"\" photos[i].description=\"\" ?=\"\" photos[i].description._content=\"\" :=\"\" '',=\"\" link:=\"\" this.options.backlink=\"\" 'https:=\"\" flickr.com=\"\" photos=\"\" '=\"\" +=\"\" photo.owner=\"\" photo.id=\"\" ''=\"\" });=\"\" }=\"\" callback.call(=\"\" this,=\"\" gallery=\"\" );=\"\" };=\"\" **=\"\" galleria=\"\" modifications=\"\" we=\"\" fake-extend=\"\" the=\"\" load=\"\" prototype=\"\" to=\"\" make=\"\" flickr=\"\" integration=\"\" as=\"\" simple=\"\" possible=\"\" *=\"\" save=\"\" old=\"\" in=\"\" a=\"\" local=\"\" variable=\"\" var=\"\" using=\"\" data=\"\" galleria.prototype.load=\"function()\" pass=\"\" if=\"\" no=\"\" is=\"\" provided=\"\" or=\"\" option=\"\" not=\"\" found=\"\" (=\"\" arguments.length=\"\" ||=\"\" typeof=\"\" this._options.flickr=\"\" !=\"=\" 'string'=\"\" load.apply(=\"\" galleria.utils.array(=\"\" arguments=\"\" return;=\"\" define=\"\" some=\"\" vars=\"\" self=\"this,\" args=\"Galleria.utils.array(\" f,=\"\" opts=\"$.extend({},\" self._options.flickroptions),=\"\" loader=\"typeof\" opts.loader=\"\" 'undefined'=\"\" $('<div=\"\">').css({\n                width: 48,\n                height: 48,\n                opacity: 0.7,\n                background:'#000 url('+PATH+'loader.gif) no-repeat 50% 50%'\n            });\n\n    if ( flickr.length ) {\n\n        // validate the method\n        if ( typeof Galleria.Flickr.prototype[ flickr[0] ] !== 'function' ) {\n            Galleria.raise( flickr[0] + ' method not found in Flickr plugin' );\n            return load.apply( this, args );\n        }\n\n        // validate the argument\n        if ( !flickr[1] ) {\n            Galleria.raise( 'No flickr argument found' );\n            return load.apply( this, args );\n        }\n\n        // apply the preloader\n        window.setTimeout(function() {\n            self.$( 'target' ).append( loader );\n        },100);\n\n        // create the instance\n        f = new Galleria.Flickr();\n\n        // apply Flickr options\n        if ( typeof self._options.flickrOptions === 'object' ) {\n            f.setOptions( self._options.flickrOptions );\n        }\n\n        // call the flickr method and trigger the DATA event\n        f[ flickr[0] ]( flickr[1], function( data ) {\n\n            self._data = data;\n            loader.remove();\n            self.trigger( Galleria.DATA );\n            f.options.complete.call(f, data);\n\n        });\n    } else {\n\n        // if flickr array not found, pass\n        load.apply( this, args );\n    }\n};\n\n}( jQuery ) );</len;>","site":{"data":{}},"excerpt":"","more":"/**\n * Galleria Flickr Plugin 2016-09-03\n * http://galleria.io\n *\n * Licensed under the MIT license\n * https://raw.github.com/worseisbetter/galleria/master/LICENSE\n *\n */\n\n(function($) {\n\n/*global jQuery, Galleria, window */\n\nGalleria.requires(1.25, 'The Flickr Plugin requires Galleria version 1.2.5 or later.');\n\n// The script path\nvar PATH = Galleria.utils.getScriptPath();\n\n/**\n\n    @class\n    @constructor\n\n    @example var flickr = new Galleria.Flickr();\n\n    @author http://galleria.io\n\n    @requires jQuery\n    @requires Galleria\n\n    @param {String} [api_key] Flickr API key to be used, defaults to the Galleria key\n\n    @returns Instance\n*/\n\nGalleria.Flickr = function( api_key ) {\n\n    this.api_key = api_key || '2a2ce06c15780ebeb0b706650fc890b2';\n\n    this.options = {\n        max: 30,                       // photos to return\n        imageSize: 'medium',           // photo size ( thumb,small,medium,big,original )\n        thumbSize: 'thumb',            // thumbnail size ( thumb,small,medium,big,original )\n        sort: 'interestingness-desc',  // sort option ( date-posted-asc, date-posted-desc, date-taken-asc, date-taken-desc, interestingness-desc, interestingness-asc, relevance )\n        description: false,            // set this to true to get description as caption\n        complete: function(){},        // callback to be called inside the Galleria.prototype.load\n        backlink: false                // set this to true if you want to pass a link back to the original image\n    };\n};\n\nGalleria.Flickr.prototype = {\n\n    // bring back the constructor reference\n\n    constructor: Galleria.Flickr,\n\n    /**\n        Search for anything at Flickr\n\n        @param {String} phrase The string to search for\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    search: function( phrase, callback ) {\n        return this._find({\n            text: phrase\n        }, callback );\n    },\n\n    /**\n        Search for anything at Flickr by tag\n\n        @param {String} tag The tag(s) to search for\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    tags: function( tag, callback ) {\n        return this._find({\n            tags: tag\n        }, callback);\n    },\n\n    /**\n        Get a user's public photos\n\n        @param {String} username The username as shown in the URL to fetch\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    user: function( username, callback ) {\n        return this._call({\n            method: 'flickr.urls.lookupUser',\n            url: 'flickr.com/photos/' + username\n        }, function( data ) {\n            this._find({\n                user_id: data.user.id,\n                method: 'flickr.people.getPublicPhotos'\n            }, callback);\n        });\n    },\n\n    /**\n        Get photos from a photoset by ID\n\n        @param {String|Number} photoset_id The photoset id to fetch\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    set: function( photoset_id, callback ) {\n        return this._find({\n            photoset_id: photoset_id,\n            method: 'flickr.photosets.getPhotos'\n        }, callback);\n    },\n\n    /**\n        Get photos from a gallery by ID\n\n        @param {String|Number} gallery_id The gallery id to fetch\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    gallery: function( gallery_id, callback ) {\n        return this._find({\n            gallery_id: gallery_id,\n            method: 'flickr.galleries.getPhotos'\n        }, callback);\n    },\n\n    /**\n        Search groups and fetch photos from the first group found\n        Useful if you know the exact name of a group and want to show the groups photos.\n\n        @param {String} group The group name to search for\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    groupsearch: function( group, callback ) {\n        return this._call({\n            text: group,\n            method: 'flickr.groups.search'\n        }, function( data ) {\n            this.group( data.groups.group[0].nsid, callback );\n        });\n    },\n\n    /**\n        Get photos from a group by ID\n\n        @param {String} group_id The group id to fetch\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    group: function ( group_id, callback ) {\n        return this._find({\n            group_id: group_id,\n            method: 'flickr.groups.pools.getPhotos'\n        }, callback );\n    },\n\n    /**\n        Set flickr options\n\n        @param {Object} options The options object to blend\n\n        @returns Instance\n    */\n\n    setOptions: function( options ) {\n        $.extend(this.options, options);\n        return this;\n    },\n\n\n    // call Flickr and raise errors\n\n    _call: function( params, callback ) {\n\n        var url = 'https://api.flickr.com/services/rest/?';\n\n        var scope = this;\n\n        params = $.extend({\n            format : 'json',\n            jsoncallback : '?',\n            api_key: this.api_key\n        }, params );\n\n        $.each(params, function( key, value ) {\n            url += '&' + key + '=' + value;\n        });\n\n        $.getJSON(url, function(data) {\n            if ( data.stat === 'ok' ) {\n                callback.call(scope, data);\n            } else {\n                Galleria.raise( data.code.toString() + ' ' + data.stat + ': ' + data.message, true );\n            }\n        });\n        return scope;\n    },\n\n\n    // \"hidden\" way of getting a big image (~1024) from flickr\n\n    _getBig: function( photo ) {\n\n        if ( photo.url_l ) {\n            return photo.url_l;\n        } else if ( parseInt( photo.width_o, 10 ) > 1280 ) {\n\n            return 'https://farm'+photo.farm + '.static.flickr.com/'+photo.server +\n                '/' + photo.id + '_' + photo.secret + '_b.jpg';\n        }\n\n        return photo.url_o || photo.url_z || photo.url_m;\n\n    },\n\n\n    // get image size by option name\n\n    _getSize: function( photo, size ) {\n\n        var img;\n\n        switch(size) {\n\n            case 'thumb':\n                img = photo.url_t;\n                break;\n\n            case 'small':\n                img = photo.url_s;\n                break;\n\n            case 'big':\n                img = this._getBig( photo );\n                break;\n\n            case 'original':\n                img = photo.url_o ? photo.url_o : this._getBig( photo );\n                break;\n\n            default:\n                img = photo.url_z || photo.url_m;\n                break;\n        }\n        return img;\n    },\n\n\n    // ask flickr for photos, parse the result and call the callback with the galleria-ready data array\n\n    _find: function( params, callback ) {\n\n        params = $.extend({\n            method: 'flickr.photos.search',\n            extras: 'url_t,url_m,url_o,url_s,url_l,url_z,description',\n            sort: this.options.sort,\n            per_page: Math.min( this.options.max, 500 )\n        }, params );\n\n        return this._call( params, function(data) {\n\n            var gallery = [],\n                photos = data.photos ? data.photos.photo : data.photoset.photo,\n                len = photos.length,\n                photo,\n                i;\n\n            for ( i=0; i<len; i++=\"\" )=\"\" {=\"\" photo=\"photos[i];\" gallery.push({=\"\" thumb:=\"\" this._getsize(=\"\" photo,=\"\" this.options.thumbsize=\"\" ),=\"\" image:=\"\" this.options.imagesize=\"\" big:=\"\" this._getbig(=\"\" title:=\"\" photos[i].title,=\"\" description:=\"\" this.options.description=\"\" &&=\"\" photos[i].description=\"\" ?=\"\" photos[i].description._content=\"\" :=\"\" '',=\"\" link:=\"\" this.options.backlink=\"\" 'https:=\"\" flickr.com=\"\" photos=\"\" '=\"\" +=\"\" photo.owner=\"\" photo.id=\"\" ''=\"\" });=\"\" }=\"\" callback.call(=\"\" this,=\"\" gallery=\"\" );=\"\" };=\"\" **=\"\" galleria=\"\" modifications=\"\" we=\"\" fake-extend=\"\" the=\"\" load=\"\" prototype=\"\" to=\"\" make=\"\" flickr=\"\" integration=\"\" as=\"\" simple=\"\" possible=\"\" *=\"\" save=\"\" old=\"\" in=\"\" a=\"\" local=\"\" variable=\"\" var=\"\" using=\"\" data=\"\" galleria.prototype.load=\"function()\" pass=\"\" if=\"\" no=\"\" is=\"\" provided=\"\" or=\"\" option=\"\" not=\"\" found=\"\" (=\"\" arguments.length=\"\" ||=\"\" typeof=\"\" this._options.flickr=\"\" !=\"=\" 'string'=\"\" load.apply(=\"\" galleria.utils.array(=\"\" arguments=\"\" return;=\"\" define=\"\" some=\"\" vars=\"\" self=\"this,\" args=\"Galleria.utils.array(\" f,=\"\" opts=\"$.extend({},\" self._options.flickroptions),=\"\" loader=\"typeof\" opts.loader=\"\" 'undefined'=\"\" $('<div=\"\">').css({\n                width: 48,\n                height: 48,\n                opacity: 0.7,\n                background:'#000 url('+PATH+'loader.gif) no-repeat 50% 50%'\n            });\n\n    if ( flickr.length ) {\n\n        // validate the method\n        if ( typeof Galleria.Flickr.prototype[ flickr[0] ] !== 'function' ) {\n            Galleria.raise( flickr[0] + ' method not found in Flickr plugin' );\n            return load.apply( this, args );\n        }\n\n        // validate the argument\n        if ( !flickr[1] ) {\n            Galleria.raise( 'No flickr argument found' );\n            return load.apply( this, args );\n        }\n\n        // apply the preloader\n        window.setTimeout(function() {\n            self.$( 'target' ).append( loader );\n        },100);\n\n        // create the instance\n        f = new Galleria.Flickr();\n\n        // apply Flickr options\n        if ( typeof self._options.flickrOptions === 'object' ) {\n            f.setOptions( self._options.flickrOptions );\n        }\n\n        // call the flickr method and trigger the DATA event\n        f[ flickr[0] ]( flickr[1], function( data ) {\n\n            self._data = data;\n            loader.remove();\n            self.trigger( Galleria.DATA );\n            f.options.complete.call(f, data);\n\n        });\n    } else {\n\n        // if flickr array not found, pass\n        load.apply( this, args );\n    }\n};\n\n}( jQuery ) );</len;>"},{"_content":"(function($,window){Galleria.requires(1.25,\"The History Plugin requires Galleria version 1.2.5 or later.\");Galleria.History=function(){var onloads=[],init=false,loc=window.location,doc=window.document,ie=Galleria.IE,support=\"onhashchange\"in window&&(doc.mode===undefined||doc.mode>7),iframe,get=function(winloc){if(iframe&&!support&&Galleria.IE){winloc=winloc||iframe.location}else{winloc=loc}return parseInt(winloc.hash.substr(2),10)},saved=get(loc),callbacks=[],onchange=function(){$.each(callbacks,function(i,fn){fn.call(window,get())})},ready=function(){$.each(onloads,function(i,fn){fn()});init=true},setHash=function(val){return\"/\"+val};if(support&&ie<8){support=false}if(!support){$(function(){var interval=window.setInterval(function(){var hash=get();if(!isNaN(hash)&&hash!=saved){saved=hash;loc.hash=setHash(hash);onchange()}},50);if(ie){$('<iframe tabindex=\"-1\" title=\"empty\">').hide().attr(\"src\",\"about:blank\").one(\"load\",function(){iframe=this.contentWindow;ready()}).insertAfter(doc.body)}else{ready()}})}else{ready()}return{change:function(fn){callbacks.push(fn);if(support){window.onhashchange=onchange}},set:function(val){if(isNaN(val)){return}if(!support&&ie){this.ready(function(){var idoc=iframe.document;idoc.open();idoc.close();iframe.location.hash=setHash(val)})}loc.hash=setHash(val)},ready:function(fn){if(!init){onloads.push(fn)}else{fn()}}}}()})(jQuery,this);","source":"galleria/plugins/history/galleria.history.min.js","raw":"(function($,window){Galleria.requires(1.25,\"The History Plugin requires Galleria version 1.2.5 or later.\");Galleria.History=function(){var onloads=[],init=false,loc=window.location,doc=window.document,ie=Galleria.IE,support=\"onhashchange\"in window&&(doc.mode===undefined||doc.mode>7),iframe,get=function(winloc){if(iframe&&!support&&Galleria.IE){winloc=winloc||iframe.location}else{winloc=loc}return parseInt(winloc.hash.substr(2),10)},saved=get(loc),callbacks=[],onchange=function(){$.each(callbacks,function(i,fn){fn.call(window,get())})},ready=function(){$.each(onloads,function(i,fn){fn()});init=true},setHash=function(val){return\"/\"+val};if(support&&ie<8){support=false}if(!support){$(function(){var interval=window.setInterval(function(){var hash=get();if(!isNaN(hash)&&hash!=saved){saved=hash;loc.hash=setHash(hash);onchange()}},50);if(ie){$('<iframe tabindex=\"-1\" title=\"empty\">').hide().attr(\"src\",\"about:blank\").one(\"load\",function(){iframe=this.contentWindow;ready()}).insertAfter(doc.body)}else{ready()}})}else{ready()}return{change:function(fn){callbacks.push(fn);if(support){window.onhashchange=onchange}},set:function(val){if(isNaN(val)){return}if(!support&&ie){this.ready(function(){var idoc=iframe.document;idoc.open();idoc.close();iframe.location.hash=setHash(val)})}loc.hash=setHash(val)},ready:function(fn){if(!init){onloads.push(fn)}else{fn()}}}}()})(jQuery,this);","date":"2017-06-24T13:46:41.000Z","updated":"2016-09-15T15:53:15.000Z","path":"galleria/plugins/history/galleria.history.min.js","layout":"false","title":"","comments":1,"_id":"cj5o1vdpi000frtwyd964bbal","content":"(function($,window){Galleria.requires(1.25,\"The History Plugin requires Galleria version 1.2.5 or later.\");Galleria.History=function(){var onloads=[],init=false,loc=window.location,doc=window.document,ie=Galleria.IE,support=\"onhashchange\"in window&&(doc.mode===undefined||doc.mode>7),iframe,get=function(winloc){if(iframe&&!support&&Galleria.IE){winloc=winloc||iframe.location}else{winloc=loc}return parseInt(winloc.hash.substr(2),10)},saved=get(loc),callbacks=[],onchange=function(){$.each(callbacks,function(i,fn){fn.call(window,get())})},ready=function(){$.each(onloads,function(i,fn){fn()});init=true},setHash=function(val){return\"/\"+val};if(support&&ie<8){support=false}if(!support){$(function(){var interval=\"window.setInterval(function(){var\" hash=\"get();if(!isNaN(hash)&&hash!=saved){saved=hash;loc.hash=setHash(hash);onchange()}},50);if(ie){$('<iframe\" tabindex=\"-1\" title=\"empty\">').hide().attr(\"src\",\"about:blank\").one(\"load\",function(){iframe=this.contentWindow;ready()}).insertAfter(doc.body)}else{ready()}})}else{ready()}return{change:function(fn){callbacks.push(fn);if(support){window.onhashchange=onchange}},set:function(val){if(isNaN(val)){return}if(!support&&ie){this.ready(function(){var idoc=iframe.document;idoc.open();idoc.close();iframe.location.hash=setHash(val)})}loc.hash=setHash(val)},ready:function(fn){if(!init){onloads.push(fn)}else{fn()}}}}()})(jQuery,this);</8){support=false}if(!support){$(function(){var>","site":{"data":{}},"excerpt":"","more":"(function($,window){Galleria.requires(1.25,\"The History Plugin requires Galleria version 1.2.5 or later.\");Galleria.History=function(){var onloads=[],init=false,loc=window.location,doc=window.document,ie=Galleria.IE,support=\"onhashchange\"in window&&(doc.mode===undefined||doc.mode>7),iframe,get=function(winloc){if(iframe&&!support&&Galleria.IE){winloc=winloc||iframe.location}else{winloc=loc}return parseInt(winloc.hash.substr(2),10)},saved=get(loc),callbacks=[],onchange=function(){$.each(callbacks,function(i,fn){fn.call(window,get())})},ready=function(){$.each(onloads,function(i,fn){fn()});init=true},setHash=function(val){return\"/\"+val};if(support&&ie<8){support=false}if(!support){$(function(){var interval=\"window.setInterval(function(){var\" hash=\"get();if(!isNaN(hash)&&hash!=saved){saved=hash;loc.hash=setHash(hash);onchange()}},50);if(ie){$('<iframe\" tabindex=\"-1\" title=\"empty\">').hide().attr(\"src\",\"about:blank\").one(\"load\",function(){iframe=this.contentWindow;ready()}).insertAfter(doc.body)}else{ready()}})}else{ready()}return{change:function(fn){callbacks.push(fn);if(support){window.onhashchange=onchange}},set:function(val){if(isNaN(val)){return}if(!support&&ie){this.ready(function(){var idoc=iframe.document;idoc.open();idoc.close();iframe.location.hash=setHash(val)})}loc.hash=setHash(val)},ready:function(fn){if(!init){onloads.push(fn)}else{fn()}}}}()})(jQuery,this);</8){support=false}if(!support){$(function(){var>"},{"_content":"/**\n * Galleria History Plugin 2016-09-03\n * http://galleria.io\n *\n * Licensed under the MIT license\n * https://raw.github.com/worseisbetter/galleria/master/LICENSE\n *\n */\n\n(function( $, window ) {\n\n/*global jQuery, Galleria, window */\n\nGalleria.requires(1.25, 'The History Plugin requires Galleria version 1.2.5 or later.');\n\nGalleria.History = (function() {\n\n    var onloads = [],\n\n        init = false,\n\n        loc = window.location,\n\n        doc = window.document,\n\n        ie = Galleria.IE,\n\n        support = 'onhashchange' in window && ( doc.mode === undefined || doc.mode > 7 ),\n\n        iframe,\n\n        get = function( winloc ) {\n            if( iframe && !support && Galleria.IE ) {\n                winloc = winloc || iframe.location;\n            }  else {\n                winloc = loc;\n            }\n            return parseInt( winloc.hash.substr(2), 10 );\n        },\n\n        saved = get( loc ),\n\n        callbacks = [],\n\n        onchange = function() {\n            $.each( callbacks, function( i, fn ) {\n                fn.call( window, get() );\n            });\n        },\n\n        ready = function() {\n            $.each( onloads, function(i, fn) {\n                fn();\n            });\n\n            init = true;\n        },\n\n        setHash = function( val ) {\n            return '/' + val;\n        };\n\n    // always remove support if IE < 8\n    if ( support && ie < 8 ) {\n        support = false;\n    }\n\n    if ( !support ) {\n\n        $(function() {\n\n            var interval = window.setInterval(function() {\n\n                var hash = get();\n\n                if ( !isNaN( hash ) && hash != saved ) {\n                    saved = hash;\n                    loc.hash = setHash( hash );\n                    onchange();\n                }\n\n            }, 50);\n\n            if ( ie ) {\n\n                $('<iframe tabindex=\"-1\" title=\"empty\">').hide().attr( 'src', 'about:blank' ).one('load', function() {\n\n                    iframe = this.contentWindow;\n\n                    ready();\n\n                }).insertAfter(doc.body);\n\n            } else {\n                ready();\n            }\n        });\n    } else {\n        ready();\n    }\n\n    return {\n\n        change: function( fn ) {\n\n            callbacks.push( fn );\n\n            if( support ) {\n                window.onhashchange = onchange;\n            }\n        },\n\n        set: function( val ) {\n\n            if ( isNaN( val ) ) {\n                return;\n            }\n\n            if ( !support && ie ) {\n\n                this.ready(function() {\n\n                    var idoc = iframe.document;\n                    idoc.open();\n                    idoc.close();\n\n                    iframe.location.hash = setHash( val );\n\n                });\n            }\n\n            loc.hash = setHash( val );\n        },\n\n        ready: function(fn) {\n            if (!init) {\n                onloads.push(fn);\n            } else {\n                fn();\n            }\n        }\n    };\n}());\n\n}( jQuery, this ));\n\n","source":"galleria/plugins/history/galleria.history.js","raw":"/**\n * Galleria History Plugin 2016-09-03\n * http://galleria.io\n *\n * Licensed under the MIT license\n * https://raw.github.com/worseisbetter/galleria/master/LICENSE\n *\n */\n\n(function( $, window ) {\n\n/*global jQuery, Galleria, window */\n\nGalleria.requires(1.25, 'The History Plugin requires Galleria version 1.2.5 or later.');\n\nGalleria.History = (function() {\n\n    var onloads = [],\n\n        init = false,\n\n        loc = window.location,\n\n        doc = window.document,\n\n        ie = Galleria.IE,\n\n        support = 'onhashchange' in window && ( doc.mode === undefined || doc.mode > 7 ),\n\n        iframe,\n\n        get = function( winloc ) {\n            if( iframe && !support && Galleria.IE ) {\n                winloc = winloc || iframe.location;\n            }  else {\n                winloc = loc;\n            }\n            return parseInt( winloc.hash.substr(2), 10 );\n        },\n\n        saved = get( loc ),\n\n        callbacks = [],\n\n        onchange = function() {\n            $.each( callbacks, function( i, fn ) {\n                fn.call( window, get() );\n            });\n        },\n\n        ready = function() {\n            $.each( onloads, function(i, fn) {\n                fn();\n            });\n\n            init = true;\n        },\n\n        setHash = function( val ) {\n            return '/' + val;\n        };\n\n    // always remove support if IE < 8\n    if ( support && ie < 8 ) {\n        support = false;\n    }\n\n    if ( !support ) {\n\n        $(function() {\n\n            var interval = window.setInterval(function() {\n\n                var hash = get();\n\n                if ( !isNaN( hash ) && hash != saved ) {\n                    saved = hash;\n                    loc.hash = setHash( hash );\n                    onchange();\n                }\n\n            }, 50);\n\n            if ( ie ) {\n\n                $('<iframe tabindex=\"-1\" title=\"empty\">').hide().attr( 'src', 'about:blank' ).one('load', function() {\n\n                    iframe = this.contentWindow;\n\n                    ready();\n\n                }).insertAfter(doc.body);\n\n            } else {\n                ready();\n            }\n        });\n    } else {\n        ready();\n    }\n\n    return {\n\n        change: function( fn ) {\n\n            callbacks.push( fn );\n\n            if( support ) {\n                window.onhashchange = onchange;\n            }\n        },\n\n        set: function( val ) {\n\n            if ( isNaN( val ) ) {\n                return;\n            }\n\n            if ( !support && ie ) {\n\n                this.ready(function() {\n\n                    var idoc = iframe.document;\n                    idoc.open();\n                    idoc.close();\n\n                    iframe.location.hash = setHash( val );\n\n                });\n            }\n\n            loc.hash = setHash( val );\n        },\n\n        ready: function(fn) {\n            if (!init) {\n                onloads.push(fn);\n            } else {\n                fn();\n            }\n        }\n    };\n}());\n\n}( jQuery, this ));\n\n","date":"2017-06-24T13:46:41.000Z","updated":"2016-09-15T15:53:15.000Z","path":"galleria/plugins/history/galleria.history.js","layout":"false","title":"","comments":1,"_id":"cj5o1vdpk000grtwyr56tq3wm","content":"/**\n * Galleria History Plugin 2016-09-03\n * http://galleria.io\n *\n * Licensed under the MIT license\n * https://raw.github.com/worseisbetter/galleria/master/LICENSE\n *\n */\n\n(function( $, window ) {\n\n/*global jQuery, Galleria, window */\n\nGalleria.requires(1.25, 'The History Plugin requires Galleria version 1.2.5 or later.');\n\nGalleria.History = (function() {\n\n    var onloads = [],\n\n        init = false,\n\n        loc = window.location,\n\n        doc = window.document,\n\n        ie = Galleria.IE,\n\n        support = 'onhashchange' in window && ( doc.mode === undefined || doc.mode > 7 ),\n\n        iframe,\n\n        get = function( winloc ) {\n            if( iframe && !support && Galleria.IE ) {\n                winloc = winloc || iframe.location;\n            }  else {\n                winloc = loc;\n            }\n            return parseInt( winloc.hash.substr(2), 10 );\n        },\n\n        saved = get( loc ),\n\n        callbacks = [],\n\n        onchange = function() {\n            $.each( callbacks, function( i, fn ) {\n                fn.call( window, get() );\n            });\n        },\n\n        ready = function() {\n            $.each( onloads, function(i, fn) {\n                fn();\n            });\n\n            init = true;\n        },\n\n        setHash = function( val ) {\n            return '/' + val;\n        };\n\n    // always remove support if IE < 8\n    if ( support && ie < 8 ) {\n        support = false;\n    }\n\n    if ( !support ) {\n\n        $(function() {\n\n            var interval = window.setInterval(function() {\n\n                var hash = get();\n\n                if ( !isNaN( hash ) && hash != saved ) {\n                    saved = hash;\n                    loc.hash = setHash( hash );\n                    onchange();\n                }\n\n            }, 50);\n\n            if ( ie ) {\n\n                $('<iframe tabindex=\"-1\" title=\"empty\">').hide().attr( 'src', 'about:blank' ).one('load', function() {\n\n                    iframe = this.contentWindow;\n\n                    ready();\n\n                }).insertAfter(doc.body);\n\n            } else {\n                ready();\n            }\n        });\n    } else {\n        ready();\n    }\n\n    return {\n\n        change: function( fn ) {\n\n            callbacks.push( fn );\n\n            if( support ) {\n                window.onhashchange = onchange;\n            }\n        },\n\n        set: function( val ) {\n\n            if ( isNaN( val ) ) {\n                return;\n            }\n\n            if ( !support && ie ) {\n\n                this.ready(function() {\n\n                    var idoc = iframe.document;\n                    idoc.open();\n                    idoc.close();\n\n                    iframe.location.hash = setHash( val );\n\n                });\n            }\n\n            loc.hash = setHash( val );\n        },\n\n        ready: function(fn) {\n            if (!init) {\n                onloads.push(fn);\n            } else {\n                fn();\n            }\n        }\n    };\n}());\n\n}( jQuery, this ));\n\n</iframe>","site":{"data":{}},"excerpt":"","more":"/**\n * Galleria History Plugin 2016-09-03\n * http://galleria.io\n *\n * Licensed under the MIT license\n * https://raw.github.com/worseisbetter/galleria/master/LICENSE\n *\n */\n\n(function( $, window ) {\n\n/*global jQuery, Galleria, window */\n\nGalleria.requires(1.25, 'The History Plugin requires Galleria version 1.2.5 or later.');\n\nGalleria.History = (function() {\n\n    var onloads = [],\n\n        init = false,\n\n        loc = window.location,\n\n        doc = window.document,\n\n        ie = Galleria.IE,\n\n        support = 'onhashchange' in window && ( doc.mode === undefined || doc.mode > 7 ),\n\n        iframe,\n\n        get = function( winloc ) {\n            if( iframe && !support && Galleria.IE ) {\n                winloc = winloc || iframe.location;\n            }  else {\n                winloc = loc;\n            }\n            return parseInt( winloc.hash.substr(2), 10 );\n        },\n\n        saved = get( loc ),\n\n        callbacks = [],\n\n        onchange = function() {\n            $.each( callbacks, function( i, fn ) {\n                fn.call( window, get() );\n            });\n        },\n\n        ready = function() {\n            $.each( onloads, function(i, fn) {\n                fn();\n            });\n\n            init = true;\n        },\n\n        setHash = function( val ) {\n            return '/' + val;\n        };\n\n    // always remove support if IE < 8\n    if ( support && ie < 8 ) {\n        support = false;\n    }\n\n    if ( !support ) {\n\n        $(function() {\n\n            var interval = window.setInterval(function() {\n\n                var hash = get();\n\n                if ( !isNaN( hash ) && hash != saved ) {\n                    saved = hash;\n                    loc.hash = setHash( hash );\n                    onchange();\n                }\n\n            }, 50);\n\n            if ( ie ) {\n\n                $('<iframe tabindex=\"-1\" title=\"empty\">').hide().attr( 'src', 'about:blank' ).one('load', function() {\n\n                    iframe = this.contentWindow;\n\n                    ready();\n\n                }).insertAfter(doc.body);\n\n            } else {\n                ready();\n            }\n        });\n    } else {\n        ready();\n    }\n\n    return {\n\n        change: function( fn ) {\n\n            callbacks.push( fn );\n\n            if( support ) {\n                window.onhashchange = onchange;\n            }\n        },\n\n        set: function( val ) {\n\n            if ( isNaN( val ) ) {\n                return;\n            }\n\n            if ( !support && ie ) {\n\n                this.ready(function() {\n\n                    var idoc = iframe.document;\n                    idoc.open();\n                    idoc.close();\n\n                    iframe.location.hash = setHash( val );\n\n                });\n            }\n\n            loc.hash = setHash( val );\n        },\n\n        ready: function(fn) {\n            if (!init) {\n                onloads.push(fn);\n            } else {\n                fn();\n            }\n        }\n    };\n}());\n\n}( jQuery, this ));\n\n</iframe>"},{"_content":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <title>Galleria History Plugin</title>\n        <style>\n\n            /* Demo styles */\n            html,body{background:#222;margin:0;}\n            body{border-top:4px solid #000;}\n            .content{color:#777;font:12px/1.4 \"helvetica neue\",arial,sans-serif;width:620px;margin:20px auto;}\n            h1{font-size:12px;font-weight:normal;color:#ddd;margin:0;}\n            p{margin:0 0 20px}\n            a {color:#22BCB9;text-decoration:none;}\n            .cred{margin-top:20px;font-size:11px;}\n\n            /* This rule is read by Galleria to define the gallery height: */\n            #galleria{height:320px}\n\n        </style>\n\n        <!-- load jQuery -->\n        <script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js\"></script>\n\n        <!-- load Galleria -->\n        <script src=\"../../galleria-1.4.5.min.js\"></script>\n\n        <!-- load the History plugin, no need for further scripting -->\n        <script src=\"galleria.history.min.js\"></script>\n\n    </head>\n<body>\n    <div class=\"content\">\n        <h1>Galleria History Plugin</h1>\n        <p>Demonstrating a basic history example. Supports most browsers, including FF 3.0+ and IE 7+</p>\n\n        <!-- Adding gallery images. We use resized thumbnails here for better performance, but its not necessary -->\n\n        <div id=\"galleria\">\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/34/Locomotives-Roundhouse2.jpg/800px-Locomotives-Roundhouse2.jpg\">\n                <img title=\"Locomotives Roundhouse\"\n                     alt=\"Steam locomotives of the Chicago &amp; North Western Railway.\"\n                     src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/34/Locomotives-Roundhouse2.jpg/100px-Locomotives-Roundhouse2.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/36/Icebergs_in_the_High_Arctic_-_20050907.jpg/1000px-Icebergs_in_the_High_Arctic_-_20050907.jpg\">\n                <img title=\"Icebergs in the High Arctic\"\n                     alt=\"The debris loading isn't particularly extensive, but the color is usual.\"\n                     src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/36/Icebergs_in_the_High_Arctic_-_20050907.jpg/100px-Icebergs_in_the_High_Arctic_-_20050907.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/Ara%C3%B1a._A_Estrada%2C_Galiza._02.jpg/1000px-Ara%C3%B1a._A_Estrada%2C_Galiza._02.jpg\">\n                <img title=\"Araa\"\n                     alt=\"Xysticus cristatus, A Estrada, Galicia, Spain\"\n                     src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/Ara%C3%B1a._A_Estrada%2C_Galiza._02.jpg/100px-Ara%C3%B1a._A_Estrada%2C_Galiza._02.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/9104_-_Milano_-_Museo_storia_naturale_-_Fluorite_-_Foto_Giovanni_Dall%27Orto_22-Apr-2007.jpg/1000px-9104_-_Milano_-_Museo_storia_naturale_-_Fluorite_-_Foto_Giovanni_Dall%27Orto_22-Apr-2007.jpg\">\n                <img title=\"Museo storia naturale\"\n                     src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/9104_-_Milano_-_Museo_storia_naturale_-_Fluorite_-_Foto_Giovanni_Dall%27Orto_22-Apr-2007.jpg/100px-9104_-_Milano_-_Museo_storia_naturale_-_Fluorite_-_Foto_Giovanni_Dall%27Orto_22-Apr-2007.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Grj%C3%B3tagj%C3%A1_caves_in_summer_2009_%282%29.jpg/1000px-Grj%C3%B3tagj%C3%A1_caves_in_summer_2009_%282%29.jpg\">\n                <img title=\"Grjtagj caves in summer 2009\"\n                     src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Grj%C3%B3tagj%C3%A1_caves_in_summer_2009_%282%29.jpg/100px-Grj%C3%B3tagj%C3%A1_caves_in_summer_2009_%282%29.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/9/90/20091128_Loutra_Thermes_Xanthi_Thrace_Greece_2.jpg/1000px-20091128_Loutra_Thermes_Xanthi_Thrace_Greece_2.jpg\">\n                <img title=\"Thermes\"\n                     alt=\"Xanthi hot-spa springs, Xanthi Prefecture, Greece\"\n                     src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/9/90/20091128_Loutra_Thermes_Xanthi_Thrace_Greece_2.jpg/100px-20091128_Loutra_Thermes_Xanthi_Thrace_Greece_2.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/5/58/Polish_Army_Ko%C5%82obrzeg_077.JPG/1024px-Polish_Army_Ko%C5%82obrzeg_077.JPG\">\n                <img title=\"Polish Army Koobrzeg\"\n                     alt=\"A display of the Polish Army. Both the soldier, and the vehicle belong to the 7th Pomeranian Coastal Defence Brigade, a part of the Szczecin-based 12th Mechanized Division Bolesaw Krzywousty\"\n                     src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/5/58/Polish_Army_Ko%C5%82obrzeg_077.JPG/100px-Polish_Army_Ko%C5%82obrzeg_077.JPG\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/20100213_Zlatograd_Bulgaria_3.jpg/1024px-20100213_Zlatograd_Bulgaria_3.jpg\">\n                <img title=\"Zlatograd Bulgaria\"\n                     src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/20100213_Zlatograd_Bulgaria_3.jpg/100px-20100213_Zlatograd_Bulgaria_3.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/FEMA_-_5399_-_Photograph_by_Andrea_Booher_taken_on_09-28-2001_in_New_York.jpg/1024px-FEMA_-_5399_-_Photograph_by_Andrea_Booher_taken_on_09-28-2001_in_New_York.jpg\">\n                <img title=\"09-28-2001 in New York City\"\n                     alt=\"New York, NY, September 28, 2001 -- Debris on surrounding roofs at the site of the World Trade Center. Photo by Andrea Booher/ FEMA News Photo\"\n                     src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/FEMA_-_5399_-_Photograph_by_Andrea_Booher_taken_on_09-28-2001_in_New_York.jpg/100px-FEMA_-_5399_-_Photograph_by_Andrea_Booher_taken_on_09-28-2001_in_New_York.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/Antennae%2C_Hubble_images.jpg/1024px-Antennae%2C_Hubble_images.jpg\">\n                <img src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/Antennae%2C_Hubble_images.jpg/100px-Antennae%2C_Hubble_images.jpg\">\n            </a>\n        </div>\n\n        <p class=\"cred\">Made by <a href=\"http://galleria.io\">Galleria</a>.</p>\n    </div>\n\n    <script>\n    $(function() {\n        // Load the classic theme\n        Galleria.loadTheme('../../themes/classic/galleria.classic.min.js');\n\n        // Initialize Galleria\n        Galleria.run('#galleria');\n    });\n    </script>\n    </body>\n</html>","source":"galleria/plugins/history/history-demo.html","raw":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <title>Galleria History Plugin</title>\n        <style>\n\n            /* Demo styles */\n            html,body{background:#222;margin:0;}\n            body{border-top:4px solid #000;}\n            .content{color:#777;font:12px/1.4 \"helvetica neue\",arial,sans-serif;width:620px;margin:20px auto;}\n            h1{font-size:12px;font-weight:normal;color:#ddd;margin:0;}\n            p{margin:0 0 20px}\n            a {color:#22BCB9;text-decoration:none;}\n            .cred{margin-top:20px;font-size:11px;}\n\n            /* This rule is read by Galleria to define the gallery height: */\n            #galleria{height:320px}\n\n        </style>\n\n        <!-- load jQuery -->\n        <script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js\"></script>\n\n        <!-- load Galleria -->\n        <script src=\"../../galleria-1.4.5.min.js\"></script>\n\n        <!-- load the History plugin, no need for further scripting -->\n        <script src=\"galleria.history.min.js\"></script>\n\n    </head>\n<body>\n    <div class=\"content\">\n        <h1>Galleria History Plugin</h1>\n        <p>Demonstrating a basic history example. Supports most browsers, including FF 3.0+ and IE 7+</p>\n\n        <!-- Adding gallery images. We use resized thumbnails here for better performance, but its not necessary -->\n\n        <div id=\"galleria\">\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/34/Locomotives-Roundhouse2.jpg/800px-Locomotives-Roundhouse2.jpg\">\n                <img title=\"Locomotives Roundhouse\"\n                     alt=\"Steam locomotives of the Chicago &amp; North Western Railway.\"\n                     src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/34/Locomotives-Roundhouse2.jpg/100px-Locomotives-Roundhouse2.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/36/Icebergs_in_the_High_Arctic_-_20050907.jpg/1000px-Icebergs_in_the_High_Arctic_-_20050907.jpg\">\n                <img title=\"Icebergs in the High Arctic\"\n                     alt=\"The debris loading isn't particularly extensive, but the color is usual.\"\n                     src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/36/Icebergs_in_the_High_Arctic_-_20050907.jpg/100px-Icebergs_in_the_High_Arctic_-_20050907.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/Ara%C3%B1a._A_Estrada%2C_Galiza._02.jpg/1000px-Ara%C3%B1a._A_Estrada%2C_Galiza._02.jpg\">\n                <img title=\"Araa\"\n                     alt=\"Xysticus cristatus, A Estrada, Galicia, Spain\"\n                     src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/Ara%C3%B1a._A_Estrada%2C_Galiza._02.jpg/100px-Ara%C3%B1a._A_Estrada%2C_Galiza._02.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/9104_-_Milano_-_Museo_storia_naturale_-_Fluorite_-_Foto_Giovanni_Dall%27Orto_22-Apr-2007.jpg/1000px-9104_-_Milano_-_Museo_storia_naturale_-_Fluorite_-_Foto_Giovanni_Dall%27Orto_22-Apr-2007.jpg\">\n                <img title=\"Museo storia naturale\"\n                     src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/9104_-_Milano_-_Museo_storia_naturale_-_Fluorite_-_Foto_Giovanni_Dall%27Orto_22-Apr-2007.jpg/100px-9104_-_Milano_-_Museo_storia_naturale_-_Fluorite_-_Foto_Giovanni_Dall%27Orto_22-Apr-2007.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Grj%C3%B3tagj%C3%A1_caves_in_summer_2009_%282%29.jpg/1000px-Grj%C3%B3tagj%C3%A1_caves_in_summer_2009_%282%29.jpg\">\n                <img title=\"Grjtagj caves in summer 2009\"\n                     src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Grj%C3%B3tagj%C3%A1_caves_in_summer_2009_%282%29.jpg/100px-Grj%C3%B3tagj%C3%A1_caves_in_summer_2009_%282%29.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/9/90/20091128_Loutra_Thermes_Xanthi_Thrace_Greece_2.jpg/1000px-20091128_Loutra_Thermes_Xanthi_Thrace_Greece_2.jpg\">\n                <img title=\"Thermes\"\n                     alt=\"Xanthi hot-spa springs, Xanthi Prefecture, Greece\"\n                     src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/9/90/20091128_Loutra_Thermes_Xanthi_Thrace_Greece_2.jpg/100px-20091128_Loutra_Thermes_Xanthi_Thrace_Greece_2.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/5/58/Polish_Army_Ko%C5%82obrzeg_077.JPG/1024px-Polish_Army_Ko%C5%82obrzeg_077.JPG\">\n                <img title=\"Polish Army Koobrzeg\"\n                     alt=\"A display of the Polish Army. Both the soldier, and the vehicle belong to the 7th Pomeranian Coastal Defence Brigade, a part of the Szczecin-based 12th Mechanized Division Bolesaw Krzywousty\"\n                     src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/5/58/Polish_Army_Ko%C5%82obrzeg_077.JPG/100px-Polish_Army_Ko%C5%82obrzeg_077.JPG\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/20100213_Zlatograd_Bulgaria_3.jpg/1024px-20100213_Zlatograd_Bulgaria_3.jpg\">\n                <img title=\"Zlatograd Bulgaria\"\n                     src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/20100213_Zlatograd_Bulgaria_3.jpg/100px-20100213_Zlatograd_Bulgaria_3.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/FEMA_-_5399_-_Photograph_by_Andrea_Booher_taken_on_09-28-2001_in_New_York.jpg/1024px-FEMA_-_5399_-_Photograph_by_Andrea_Booher_taken_on_09-28-2001_in_New_York.jpg\">\n                <img title=\"09-28-2001 in New York City\"\n                     alt=\"New York, NY, September 28, 2001 -- Debris on surrounding roofs at the site of the World Trade Center. Photo by Andrea Booher/ FEMA News Photo\"\n                     src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/FEMA_-_5399_-_Photograph_by_Andrea_Booher_taken_on_09-28-2001_in_New_York.jpg/100px-FEMA_-_5399_-_Photograph_by_Andrea_Booher_taken_on_09-28-2001_in_New_York.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/Antennae%2C_Hubble_images.jpg/1024px-Antennae%2C_Hubble_images.jpg\">\n                <img src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/Antennae%2C_Hubble_images.jpg/100px-Antennae%2C_Hubble_images.jpg\">\n            </a>\n        </div>\n\n        <p class=\"cred\">Made by <a href=\"http://galleria.io\">Galleria</a>.</p>\n    </div>\n\n    <script>\n    $(function() {\n        // Load the classic theme\n        Galleria.loadTheme('../../themes/classic/galleria.classic.min.js');\n\n        // Initialize Galleria\n        Galleria.run('#galleria');\n    });\n    </script>\n    </body>\n</html>","date":"2017-06-24T13:46:41.000Z","updated":"2016-09-15T15:53:15.000Z","path":"galleria/plugins/history/history-demo.html","title":"","comments":1,"layout":"page","_id":"cj5o1vdpk000hrtwyps5x63hl","content":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <title>Galleria History Plugin</title>\n        <style>\n\n            /* Demo styles */\n            html,body{background:#222;margin:0;}\n            body{border-top:4px solid #000;}\n            .content{color:#777;font:12px/1.4 \"helvetica neue\",arial,sans-serif;width:620px;margin:20px auto;}\n            h1{font-size:12px;font-weight:normal;color:#ddd;margin:0;}\n            p{margin:0 0 20px}\n            a {color:#22BCB9;text-decoration:none;}\n            .cred{margin-top:20px;font-size:11px;}\n\n            /* This rule is read by Galleria to define the gallery height: */\n            #galleria{height:320px}\n\n        </style>\n\n        <!-- load jQuery -->\n        <script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js\"></script>\n\n        <!-- load Galleria -->\n        <script src=\"../../galleria-1.4.5.min.js\"></script>\n\n        <!-- load the History plugin, no need for further scripting -->\n        <script src=\"galleria.history.min.js\"></script>\n\n    </head>\n<body>\n    <div class=\"content\">\n        <h1>Galleria History Plugin</h1>\n        <p>Demonstrating a basic history example. Supports most browsers, including FF 3.0+ and IE 7+</p>\n\n        <!-- Adding gallery images. We use resized thumbnails here for better performance, but its not necessary -->\n\n        <div id=\"galleria\">\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/34/Locomotives-Roundhouse2.jpg/800px-Locomotives-Roundhouse2.jpg\" target=\"_blank\" rel=\"external\">\n                <img title=\"Locomotives Roundhouse\" alt=\"Steam locomotives of the Chicago &amp; North Western Railway.\" src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/34/Locomotives-Roundhouse2.jpg/100px-Locomotives-Roundhouse2.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/36/Icebergs_in_the_High_Arctic_-_20050907.jpg/1000px-Icebergs_in_the_High_Arctic_-_20050907.jpg\" target=\"_blank\" rel=\"external\">\n                <img title=\"Icebergs in the High Arctic\" alt=\"The debris loading isn't particularly extensive, but the color is usual.\" src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/36/Icebergs_in_the_High_Arctic_-_20050907.jpg/100px-Icebergs_in_the_High_Arctic_-_20050907.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/Ara%C3%B1a._A_Estrada%2C_Galiza._02.jpg/1000px-Ara%C3%B1a._A_Estrada%2C_Galiza._02.jpg\" target=\"_blank\" rel=\"external\">\n                <img title=\"Araa\" alt=\"Xysticus cristatus, A Estrada, Galicia, Spain\" src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/Ara%C3%B1a._A_Estrada%2C_Galiza._02.jpg/100px-Ara%C3%B1a._A_Estrada%2C_Galiza._02.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/9104_-_Milano_-_Museo_storia_naturale_-_Fluorite_-_Foto_Giovanni_Dall%27Orto_22-Apr-2007.jpg/1000px-9104_-_Milano_-_Museo_storia_naturale_-_Fluorite_-_Foto_Giovanni_Dall%27Orto_22-Apr-2007.jpg\" target=\"_blank\" rel=\"external\">\n                <img title=\"Museo storia naturale\" src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/9104_-_Milano_-_Museo_storia_naturale_-_Fluorite_-_Foto_Giovanni_Dall%27Orto_22-Apr-2007.jpg/100px-9104_-_Milano_-_Museo_storia_naturale_-_Fluorite_-_Foto_Giovanni_Dall%27Orto_22-Apr-2007.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Grj%C3%B3tagj%C3%A1_caves_in_summer_2009_%282%29.jpg/1000px-Grj%C3%B3tagj%C3%A1_caves_in_summer_2009_%282%29.jpg\" target=\"_blank\" rel=\"external\">\n                <img title=\"Grjtagj caves in summer 2009\" src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Grj%C3%B3tagj%C3%A1_caves_in_summer_2009_%282%29.jpg/100px-Grj%C3%B3tagj%C3%A1_caves_in_summer_2009_%282%29.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/9/90/20091128_Loutra_Thermes_Xanthi_Thrace_Greece_2.jpg/1000px-20091128_Loutra_Thermes_Xanthi_Thrace_Greece_2.jpg\" target=\"_blank\" rel=\"external\">\n                <img title=\"Thermes\" alt=\"Xanthi hot-spa springs, Xanthi Prefecture, Greece\" src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/9/90/20091128_Loutra_Thermes_Xanthi_Thrace_Greece_2.jpg/100px-20091128_Loutra_Thermes_Xanthi_Thrace_Greece_2.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/5/58/Polish_Army_Ko%C5%82obrzeg_077.JPG/1024px-Polish_Army_Ko%C5%82obrzeg_077.JPG\" target=\"_blank\" rel=\"external\">\n                <img title=\"Polish Army Koobrzeg\" alt=\"A display of the Polish Army. Both the soldier, and the vehicle belong to the 7th Pomeranian Coastal Defence Brigade, a part of the Szczecin-based 12th Mechanized Division Bolesaw Krzywousty\" src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/5/58/Polish_Army_Ko%C5%82obrzeg_077.JPG/100px-Polish_Army_Ko%C5%82obrzeg_077.JPG\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/20100213_Zlatograd_Bulgaria_3.jpg/1024px-20100213_Zlatograd_Bulgaria_3.jpg\" target=\"_blank\" rel=\"external\">\n                <img title=\"Zlatograd Bulgaria\" src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/20100213_Zlatograd_Bulgaria_3.jpg/100px-20100213_Zlatograd_Bulgaria_3.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/FEMA_-_5399_-_Photograph_by_Andrea_Booher_taken_on_09-28-2001_in_New_York.jpg/1024px-FEMA_-_5399_-_Photograph_by_Andrea_Booher_taken_on_09-28-2001_in_New_York.jpg\" target=\"_blank\" rel=\"external\">\n                <img title=\"09-28-2001 in New York City\" alt=\"New York, NY, September 28, 2001 -- Debris on surrounding roofs at the site of the World Trade Center. Photo by Andrea Booher/ FEMA News Photo\" src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/FEMA_-_5399_-_Photograph_by_Andrea_Booher_taken_on_09-28-2001_in_New_York.jpg/100px-FEMA_-_5399_-_Photograph_by_Andrea_Booher_taken_on_09-28-2001_in_New_York.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/Antennae%2C_Hubble_images.jpg/1024px-Antennae%2C_Hubble_images.jpg\" target=\"_blank\" rel=\"external\">\n                <img src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/Antennae%2C_Hubble_images.jpg/100px-Antennae%2C_Hubble_images.jpg\">\n            </a>\n        </div>\n\n        <p class=\"cred\">Made by <a href=\"http://galleria.io\" target=\"_blank\" rel=\"external\">Galleria</a>.</p>\n    </div>\n\n    <script>\n    $(function() {\n        // Load the classic theme\n        Galleria.loadTheme('../../themes/classic/galleria.classic.min.js');\n\n        // Initialize Galleria\n        Galleria.run('#galleria');\n    });\n    </script>\n    </body>\n</html>","site":{"data":{}},"excerpt":"","more":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <title>Galleria History Plugin</title>\n        <style>\n\n            /* Demo styles */\n            html,body{background:#222;margin:0;}\n            body{border-top:4px solid #000;}\n            .content{color:#777;font:12px/1.4 \"helvetica neue\",arial,sans-serif;width:620px;margin:20px auto;}\n            h1{font-size:12px;font-weight:normal;color:#ddd;margin:0;}\n            p{margin:0 0 20px}\n            a {color:#22BCB9;text-decoration:none;}\n            .cred{margin-top:20px;font-size:11px;}\n\n            /* This rule is read by Galleria to define the gallery height: */\n            #galleria{height:320px}\n\n        </style>\n\n        <!-- load jQuery -->\n        <script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js\"></script>\n\n        <!-- load Galleria -->\n        <script src=\"../../galleria-1.4.5.min.js\"></script>\n\n        <!-- load the History plugin, no need for further scripting -->\n        <script src=\"galleria.history.min.js\"></script>\n\n    </head>\n<body>\n    <div class=\"content\">\n        <h1>Galleria History Plugin</h1>\n        <p>Demonstrating a basic history example. Supports most browsers, including FF 3.0+ and IE 7+</p>\n\n        <!-- Adding gallery images. We use resized thumbnails here for better performance, but its not necessary -->\n\n        <div id=\"galleria\">\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/34/Locomotives-Roundhouse2.jpg/800px-Locomotives-Roundhouse2.jpg\" target=\"_blank\" rel=\"external\">\n                <img title=\"Locomotives Roundhouse\" alt=\"Steam locomotives of the Chicago &amp; North Western Railway.\" src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/34/Locomotives-Roundhouse2.jpg/100px-Locomotives-Roundhouse2.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/36/Icebergs_in_the_High_Arctic_-_20050907.jpg/1000px-Icebergs_in_the_High_Arctic_-_20050907.jpg\" target=\"_blank\" rel=\"external\">\n                <img title=\"Icebergs in the High Arctic\" alt=\"The debris loading isn't particularly extensive, but the color is usual.\" src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/36/Icebergs_in_the_High_Arctic_-_20050907.jpg/100px-Icebergs_in_the_High_Arctic_-_20050907.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/Ara%C3%B1a._A_Estrada%2C_Galiza._02.jpg/1000px-Ara%C3%B1a._A_Estrada%2C_Galiza._02.jpg\" target=\"_blank\" rel=\"external\">\n                <img title=\"Araa\" alt=\"Xysticus cristatus, A Estrada, Galicia, Spain\" src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/Ara%C3%B1a._A_Estrada%2C_Galiza._02.jpg/100px-Ara%C3%B1a._A_Estrada%2C_Galiza._02.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/9104_-_Milano_-_Museo_storia_naturale_-_Fluorite_-_Foto_Giovanni_Dall%27Orto_22-Apr-2007.jpg/1000px-9104_-_Milano_-_Museo_storia_naturale_-_Fluorite_-_Foto_Giovanni_Dall%27Orto_22-Apr-2007.jpg\" target=\"_blank\" rel=\"external\">\n                <img title=\"Museo storia naturale\" src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/9104_-_Milano_-_Museo_storia_naturale_-_Fluorite_-_Foto_Giovanni_Dall%27Orto_22-Apr-2007.jpg/100px-9104_-_Milano_-_Museo_storia_naturale_-_Fluorite_-_Foto_Giovanni_Dall%27Orto_22-Apr-2007.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Grj%C3%B3tagj%C3%A1_caves_in_summer_2009_%282%29.jpg/1000px-Grj%C3%B3tagj%C3%A1_caves_in_summer_2009_%282%29.jpg\" target=\"_blank\" rel=\"external\">\n                <img title=\"Grjtagj caves in summer 2009\" src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Grj%C3%B3tagj%C3%A1_caves_in_summer_2009_%282%29.jpg/100px-Grj%C3%B3tagj%C3%A1_caves_in_summer_2009_%282%29.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/9/90/20091128_Loutra_Thermes_Xanthi_Thrace_Greece_2.jpg/1000px-20091128_Loutra_Thermes_Xanthi_Thrace_Greece_2.jpg\" target=\"_blank\" rel=\"external\">\n                <img title=\"Thermes\" alt=\"Xanthi hot-spa springs, Xanthi Prefecture, Greece\" src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/9/90/20091128_Loutra_Thermes_Xanthi_Thrace_Greece_2.jpg/100px-20091128_Loutra_Thermes_Xanthi_Thrace_Greece_2.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/5/58/Polish_Army_Ko%C5%82obrzeg_077.JPG/1024px-Polish_Army_Ko%C5%82obrzeg_077.JPG\" target=\"_blank\" rel=\"external\">\n                <img title=\"Polish Army Koobrzeg\" alt=\"A display of the Polish Army. Both the soldier, and the vehicle belong to the 7th Pomeranian Coastal Defence Brigade, a part of the Szczecin-based 12th Mechanized Division Bolesaw Krzywousty\" src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/5/58/Polish_Army_Ko%C5%82obrzeg_077.JPG/100px-Polish_Army_Ko%C5%82obrzeg_077.JPG\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/20100213_Zlatograd_Bulgaria_3.jpg/1024px-20100213_Zlatograd_Bulgaria_3.jpg\" target=\"_blank\" rel=\"external\">\n                <img title=\"Zlatograd Bulgaria\" src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/20100213_Zlatograd_Bulgaria_3.jpg/100px-20100213_Zlatograd_Bulgaria_3.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/FEMA_-_5399_-_Photograph_by_Andrea_Booher_taken_on_09-28-2001_in_New_York.jpg/1024px-FEMA_-_5399_-_Photograph_by_Andrea_Booher_taken_on_09-28-2001_in_New_York.jpg\" target=\"_blank\" rel=\"external\">\n                <img title=\"09-28-2001 in New York City\" alt=\"New York, NY, September 28, 2001 -- Debris on surrounding roofs at the site of the World Trade Center. Photo by Andrea Booher/ FEMA News Photo\" src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/FEMA_-_5399_-_Photograph_by_Andrea_Booher_taken_on_09-28-2001_in_New_York.jpg/100px-FEMA_-_5399_-_Photograph_by_Andrea_Booher_taken_on_09-28-2001_in_New_York.jpg\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/Antennae%2C_Hubble_images.jpg/1024px-Antennae%2C_Hubble_images.jpg\" target=\"_blank\" rel=\"external\">\n                <img src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/Antennae%2C_Hubble_images.jpg/100px-Antennae%2C_Hubble_images.jpg\">\n            </a>\n        </div>\n\n        <p class=\"cred\">Made by <a href=\"http://galleria.io\" target=\"_blank\" rel=\"external\">Galleria</a>.</p>\n    </div>\n\n    <script>\n    $(function() {\n        // Load the classic theme\n        Galleria.loadTheme('../../themes/classic/galleria.classic.min.js');\n\n        // Initialize Galleria\n        Galleria.run('#galleria');\n    });\n    </script>\n    </body>\n</html>"},{"_content":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <title>Galleria Classic Theme</title>\n        <style>\n\n            /* Demo styles */\n            html,body{background:#222;margin:0;}\n            body{border-top:4px solid #000;}\n            .content{color:#777;font:12px/1.4 \"helvetica neue\",arial,sans-serif;width:620px;margin:20px auto;}\n            h1{font-size:12px;font-weight:normal;color:#ddd;margin:0;}\n            p{margin:0 0 20px}\n            a {color:#22BCB9;text-decoration:none;}\n            .cred{margin-top:20px;font-size:11px;}\n\n            /* This rule is read by Galleria to define the gallery height: */\n            #galleria{height:320px}\n\n        </style>\n\n        <!-- load jQuery -->\n        <script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js\"></script>\n\n        <!-- load Galleria -->\n        <script src=\"../../galleria-1.4.5.min.js\"></script>\n\n    </head>\n<body>\n    <div class=\"content\">\n        <h1>Galleria Classic Theme</h1>\n        <p>Demonstrating a basic gallery example.</p>\n\n        <!-- Adding gallery images. We use resized thumbnails here for better performance, but its not necessary -->\n\n        <div id=\"galleria\">\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Biandintz_eta_zaldiak_-_modified2.jpg/800px-Biandintz_eta_zaldiak_-_modified2.jpg\">\n                <img \n                    src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Biandintz_eta_zaldiak_-_modified2.jpg/100px-Biandintz_eta_zaldiak_-_modified2.jpg\",\n                    data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Biandintz_eta_zaldiak_-_modified2.jpg/1280px-Biandintz_eta_zaldiak_-_modified2.jpg\"\n                    data-title=\"Biandintz eta zaldiak\"\n                    data-description=\"Horses on Bianditz mountain, in Navarre, Spain.\"\n                >\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/Athabasca_Rail_at_Brule_Lake.jpg/800px-Athabasca_Rail_at_Brule_Lake.jpg\">\n                <img \n                    src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/Athabasca_Rail_at_Brule_Lake.jpg/100px-Athabasca_Rail_at_Brule_Lake.jpg\",\n                    data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/Athabasca_Rail_at_Brule_Lake.jpg/1280px-Athabasca_Rail_at_Brule_Lake.jpg\"\n                    data-title=\"Athabasca Rail\"\n                    data-description=\"The Athabasca River railroad track at the mouth of Brul Lake in Alberta, Canada.\"\n                >\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Back-scattering_crepuscular_rays_panorama_1.jpg/1280px-Back-scattering_crepuscular_rays_panorama_1.jpg\">\n                <img \n                    src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Back-scattering_crepuscular_rays_panorama_1.jpg/100px-Back-scattering_crepuscular_rays_panorama_1.jpg\",\n                    data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Back-scattering_crepuscular_rays_panorama_1.jpg/1400px-Back-scattering_crepuscular_rays_panorama_1.jpg\"\n                    data-title=\"Back-scattering crepuscular rays\"\n                    data-description=\"Picture of the day on Wikimedia Commons 26 September 2010.\"\n                >\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/7/75/Interior_convento_3.jpg/800px-Interior_convento_3.jpg\">\n                <img \n                    src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/7/75/Interior_convento_3.jpg/120px-Interior_convento_3.jpg\",\n                    data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/7/75/Interior_convento_3.jpg/1400px-Interior_convento_3.jpg\"\n                    data-title=\"Interior convento\"\n                    data-description=\"Interior view of Yuriria Convent, founded in 1550.\"\n                >\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg/800px-Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg\">\n                <img \n                    src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg/100px-Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg\",\n                    data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg/1280px-Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg\"\n                    data-title=\"Oxbow Bend outlook\"\n                    data-description=\"View over the Snake River to the Mount Moran with the Skillet Glacier.\"\n                >\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Hazy_blue_hour_in_Grand_Canyon.JPG/800px-Hazy_blue_hour_in_Grand_Canyon.JPG\">\n                <img \n                    src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Hazy_blue_hour_in_Grand_Canyon.JPG/100px-Hazy_blue_hour_in_Grand_Canyon.JPG\",\n                    data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Hazy_blue_hour_in_Grand_Canyon.JPG/1280px-Hazy_blue_hour_in_Grand_Canyon.JPG\"\n                    data-title=\"Hazy blue hour\"\n                    data-description=\"Hazy blue hour in Grand Canyon. View from the South Rim.\"\n                >\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/2909_vallon_moy_res.jpg/800px-2909_vallon_moy_res.jpg\">\n                <img \n                    src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/2909_vallon_moy_res.jpg/100px-2909_vallon_moy_res.jpg\",\n                    data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/2909_vallon_moy_res.jpg/1280px-2909_vallon_moy_res.jpg\"\n                    data-title=\"Haute Severaisse valley\"\n                    data-description=\"View of Haute Severaisse valley and surrounding summits from the slopes of Les Vernets.\"\n                >\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Bohinjsko_jezero_2.jpg/800px-Bohinjsko_jezero_2.jpg\">\n                <img \n                    src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Bohinjsko_jezero_2.jpg/100px-Bohinjsko_jezero_2.jpg\",\n                    data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Bohinjsko_jezero_2.jpg/1280px-Bohinjsko_jezero_2.jpg\"\n                    data-title=\"Bohinj lake\"\n                    data-description=\"Bohinj lake (Triglav National Park, Slovenia) in the morning.\"\n                >\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/32/Bowling_Balls_Beach_2_edit.jpg/800px-Bowling_Balls_Beach_2_edit.jpg\">\n                <img \n                    src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/32/Bowling_Balls_Beach_2_edit.jpg/100px-Bowling_Balls_Beach_2_edit.jpg\",\n                    data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/32/Bowling_Balls_Beach_2_edit.jpg/1280px-Bowling_Balls_Beach_2_edit.jpg\"\n                    data-title=\"Bowling Balls\"\n                    data-description=\"Mendocino county, California, USA.\"\n                >\n            </a>\n            <a href=\"https://vimeo.com/25750735\">\n                <span class=\"video\">Works for vimeo too.</span>\n            </a>\n            <a href=\"https://www.youtube.com/watch?v=gAeYCJZ_meY\">\n                <span class=\"video\">Works for youtube too.</span>\n            </a>\n\n        </div>\n        <p class=\"cred\">Made by <a href=\"http://galleria.io\">Galleria</a>.</p>\n    </div>\n\n    <script>\n    $(function() {\n        // Load the classic theme\n        Galleria.loadTheme('galleria.classic.min.js');\n\n        // Initialize Galleria\n        Galleria.run('#galleria');\n    });\n    </script>\n    </body>\n</html>","source":"galleria/themes/classic/classic-demo.html","raw":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <title>Galleria Classic Theme</title>\n        <style>\n\n            /* Demo styles */\n            html,body{background:#222;margin:0;}\n            body{border-top:4px solid #000;}\n            .content{color:#777;font:12px/1.4 \"helvetica neue\",arial,sans-serif;width:620px;margin:20px auto;}\n            h1{font-size:12px;font-weight:normal;color:#ddd;margin:0;}\n            p{margin:0 0 20px}\n            a {color:#22BCB9;text-decoration:none;}\n            .cred{margin-top:20px;font-size:11px;}\n\n            /* This rule is read by Galleria to define the gallery height: */\n            #galleria{height:320px}\n\n        </style>\n\n        <!-- load jQuery -->\n        <script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js\"></script>\n\n        <!-- load Galleria -->\n        <script src=\"../../galleria-1.4.5.min.js\"></script>\n\n    </head>\n<body>\n    <div class=\"content\">\n        <h1>Galleria Classic Theme</h1>\n        <p>Demonstrating a basic gallery example.</p>\n\n        <!-- Adding gallery images. We use resized thumbnails here for better performance, but its not necessary -->\n\n        <div id=\"galleria\">\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Biandintz_eta_zaldiak_-_modified2.jpg/800px-Biandintz_eta_zaldiak_-_modified2.jpg\">\n                <img \n                    src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Biandintz_eta_zaldiak_-_modified2.jpg/100px-Biandintz_eta_zaldiak_-_modified2.jpg\",\n                    data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Biandintz_eta_zaldiak_-_modified2.jpg/1280px-Biandintz_eta_zaldiak_-_modified2.jpg\"\n                    data-title=\"Biandintz eta zaldiak\"\n                    data-description=\"Horses on Bianditz mountain, in Navarre, Spain.\"\n                >\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/Athabasca_Rail_at_Brule_Lake.jpg/800px-Athabasca_Rail_at_Brule_Lake.jpg\">\n                <img \n                    src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/Athabasca_Rail_at_Brule_Lake.jpg/100px-Athabasca_Rail_at_Brule_Lake.jpg\",\n                    data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/Athabasca_Rail_at_Brule_Lake.jpg/1280px-Athabasca_Rail_at_Brule_Lake.jpg\"\n                    data-title=\"Athabasca Rail\"\n                    data-description=\"The Athabasca River railroad track at the mouth of Brul Lake in Alberta, Canada.\"\n                >\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Back-scattering_crepuscular_rays_panorama_1.jpg/1280px-Back-scattering_crepuscular_rays_panorama_1.jpg\">\n                <img \n                    src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Back-scattering_crepuscular_rays_panorama_1.jpg/100px-Back-scattering_crepuscular_rays_panorama_1.jpg\",\n                    data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Back-scattering_crepuscular_rays_panorama_1.jpg/1400px-Back-scattering_crepuscular_rays_panorama_1.jpg\"\n                    data-title=\"Back-scattering crepuscular rays\"\n                    data-description=\"Picture of the day on Wikimedia Commons 26 September 2010.\"\n                >\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/7/75/Interior_convento_3.jpg/800px-Interior_convento_3.jpg\">\n                <img \n                    src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/7/75/Interior_convento_3.jpg/120px-Interior_convento_3.jpg\",\n                    data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/7/75/Interior_convento_3.jpg/1400px-Interior_convento_3.jpg\"\n                    data-title=\"Interior convento\"\n                    data-description=\"Interior view of Yuriria Convent, founded in 1550.\"\n                >\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg/800px-Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg\">\n                <img \n                    src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg/100px-Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg\",\n                    data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg/1280px-Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg\"\n                    data-title=\"Oxbow Bend outlook\"\n                    data-description=\"View over the Snake River to the Mount Moran with the Skillet Glacier.\"\n                >\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Hazy_blue_hour_in_Grand_Canyon.JPG/800px-Hazy_blue_hour_in_Grand_Canyon.JPG\">\n                <img \n                    src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Hazy_blue_hour_in_Grand_Canyon.JPG/100px-Hazy_blue_hour_in_Grand_Canyon.JPG\",\n                    data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Hazy_blue_hour_in_Grand_Canyon.JPG/1280px-Hazy_blue_hour_in_Grand_Canyon.JPG\"\n                    data-title=\"Hazy blue hour\"\n                    data-description=\"Hazy blue hour in Grand Canyon. View from the South Rim.\"\n                >\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/2909_vallon_moy_res.jpg/800px-2909_vallon_moy_res.jpg\">\n                <img \n                    src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/2909_vallon_moy_res.jpg/100px-2909_vallon_moy_res.jpg\",\n                    data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/2909_vallon_moy_res.jpg/1280px-2909_vallon_moy_res.jpg\"\n                    data-title=\"Haute Severaisse valley\"\n                    data-description=\"View of Haute Severaisse valley and surrounding summits from the slopes of Les Vernets.\"\n                >\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Bohinjsko_jezero_2.jpg/800px-Bohinjsko_jezero_2.jpg\">\n                <img \n                    src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Bohinjsko_jezero_2.jpg/100px-Bohinjsko_jezero_2.jpg\",\n                    data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Bohinjsko_jezero_2.jpg/1280px-Bohinjsko_jezero_2.jpg\"\n                    data-title=\"Bohinj lake\"\n                    data-description=\"Bohinj lake (Triglav National Park, Slovenia) in the morning.\"\n                >\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/32/Bowling_Balls_Beach_2_edit.jpg/800px-Bowling_Balls_Beach_2_edit.jpg\">\n                <img \n                    src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/32/Bowling_Balls_Beach_2_edit.jpg/100px-Bowling_Balls_Beach_2_edit.jpg\",\n                    data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/32/Bowling_Balls_Beach_2_edit.jpg/1280px-Bowling_Balls_Beach_2_edit.jpg\"\n                    data-title=\"Bowling Balls\"\n                    data-description=\"Mendocino county, California, USA.\"\n                >\n            </a>\n            <a href=\"https://vimeo.com/25750735\">\n                <span class=\"video\">Works for vimeo too.</span>\n            </a>\n            <a href=\"https://www.youtube.com/watch?v=gAeYCJZ_meY\">\n                <span class=\"video\">Works for youtube too.</span>\n            </a>\n\n        </div>\n        <p class=\"cred\">Made by <a href=\"http://galleria.io\">Galleria</a>.</p>\n    </div>\n\n    <script>\n    $(function() {\n        // Load the classic theme\n        Galleria.loadTheme('galleria.classic.min.js');\n\n        // Initialize Galleria\n        Galleria.run('#galleria');\n    });\n    </script>\n    </body>\n</html>","date":"2017-06-24T13:46:41.000Z","updated":"2016-09-15T15:53:15.000Z","path":"galleria/themes/classic/classic-demo.html","title":"","comments":1,"layout":"page","_id":"cj5o1vdpl000irtwyrfqfelz1","content":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <title>Galleria Classic Theme</title>\n        <style>\n\n            /* Demo styles */\n            html,body{background:#222;margin:0;}\n            body{border-top:4px solid #000;}\n            .content{color:#777;font:12px/1.4 \"helvetica neue\",arial,sans-serif;width:620px;margin:20px auto;}\n            h1{font-size:12px;font-weight:normal;color:#ddd;margin:0;}\n            p{margin:0 0 20px}\n            a {color:#22BCB9;text-decoration:none;}\n            .cred{margin-top:20px;font-size:11px;}\n\n            /* This rule is read by Galleria to define the gallery height: */\n            #galleria{height:320px}\n\n        </style>\n\n        <!-- load jQuery -->\n        <script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js\"></script>\n\n        <!-- load Galleria -->\n        <script src=\"../../galleria-1.4.5.min.js\"></script>\n\n    </head>\n<body>\n    <div class=\"content\">\n        <h1>Galleria Classic Theme</h1>\n        <p>Demonstrating a basic gallery example.</p>\n\n        <!-- Adding gallery images. We use resized thumbnails here for better performance, but its not necessary -->\n\n        <div id=\"galleria\">\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Biandintz_eta_zaldiak_-_modified2.jpg/800px-Biandintz_eta_zaldiak_-_modified2.jpg\" target=\"_blank\" rel=\"external\">\n                <img src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Biandintz_eta_zaldiak_-_modified2.jpg/100px-Biandintz_eta_zaldiak_-_modified2.jpg\" ,=\"\" data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Biandintz_eta_zaldiak_-_modified2.jpg/1280px-Biandintz_eta_zaldiak_-_modified2.jpg\" data-title=\"Biandintz eta zaldiak\" data-description=\"Horses on Bianditz mountain, in Navarre, Spain.\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/Athabasca_Rail_at_Brule_Lake.jpg/800px-Athabasca_Rail_at_Brule_Lake.jpg\" target=\"_blank\" rel=\"external\">\n                <img src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/Athabasca_Rail_at_Brule_Lake.jpg/100px-Athabasca_Rail_at_Brule_Lake.jpg\" ,=\"\" data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/Athabasca_Rail_at_Brule_Lake.jpg/1280px-Athabasca_Rail_at_Brule_Lake.jpg\" data-title=\"Athabasca Rail\" data-description=\"The Athabasca River railroad track at the mouth of Brul Lake in Alberta, Canada.\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Back-scattering_crepuscular_rays_panorama_1.jpg/1280px-Back-scattering_crepuscular_rays_panorama_1.jpg\" target=\"_blank\" rel=\"external\">\n                <img src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Back-scattering_crepuscular_rays_panorama_1.jpg/100px-Back-scattering_crepuscular_rays_panorama_1.jpg\" ,=\"\" data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Back-scattering_crepuscular_rays_panorama_1.jpg/1400px-Back-scattering_crepuscular_rays_panorama_1.jpg\" data-title=\"Back-scattering crepuscular rays\" data-description=\"Picture of the day on Wikimedia Commons 26 September 2010.\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/7/75/Interior_convento_3.jpg/800px-Interior_convento_3.jpg\" target=\"_blank\" rel=\"external\">\n                <img src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/7/75/Interior_convento_3.jpg/120px-Interior_convento_3.jpg\" ,=\"\" data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/7/75/Interior_convento_3.jpg/1400px-Interior_convento_3.jpg\" data-title=\"Interior convento\" data-description=\"Interior view of Yuriria Convent, founded in 1550.\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg/800px-Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg\" target=\"_blank\" rel=\"external\">\n                <img src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg/100px-Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg\" ,=\"\" data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg/1280px-Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg\" data-title=\"Oxbow Bend outlook\" data-description=\"View over the Snake River to the Mount Moran with the Skillet Glacier.\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Hazy_blue_hour_in_Grand_Canyon.JPG/800px-Hazy_blue_hour_in_Grand_Canyon.JPG\" target=\"_blank\" rel=\"external\">\n                <img src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Hazy_blue_hour_in_Grand_Canyon.JPG/100px-Hazy_blue_hour_in_Grand_Canyon.JPG\" ,=\"\" data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Hazy_blue_hour_in_Grand_Canyon.JPG/1280px-Hazy_blue_hour_in_Grand_Canyon.JPG\" data-title=\"Hazy blue hour\" data-description=\"Hazy blue hour in Grand Canyon. View from the South Rim.\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/2909_vallon_moy_res.jpg/800px-2909_vallon_moy_res.jpg\" target=\"_blank\" rel=\"external\">\n                <img src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/2909_vallon_moy_res.jpg/100px-2909_vallon_moy_res.jpg\" ,=\"\" data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/2909_vallon_moy_res.jpg/1280px-2909_vallon_moy_res.jpg\" data-title=\"Haute Severaisse valley\" data-description=\"View of Haute Severaisse valley and surrounding summits from the slopes of Les Vernets.\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Bohinjsko_jezero_2.jpg/800px-Bohinjsko_jezero_2.jpg\" target=\"_blank\" rel=\"external\">\n                <img src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Bohinjsko_jezero_2.jpg/100px-Bohinjsko_jezero_2.jpg\" ,=\"\" data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Bohinjsko_jezero_2.jpg/1280px-Bohinjsko_jezero_2.jpg\" data-title=\"Bohinj lake\" data-description=\"Bohinj lake (Triglav National Park, Slovenia) in the morning.\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/32/Bowling_Balls_Beach_2_edit.jpg/800px-Bowling_Balls_Beach_2_edit.jpg\" target=\"_blank\" rel=\"external\">\n                <img src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/32/Bowling_Balls_Beach_2_edit.jpg/100px-Bowling_Balls_Beach_2_edit.jpg\" ,=\"\" data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/32/Bowling_Balls_Beach_2_edit.jpg/1280px-Bowling_Balls_Beach_2_edit.jpg\" data-title=\"Bowling Balls\" data-description=\"Mendocino county, California, USA.\">\n            </a>\n            <a href=\"https://vimeo.com/25750735\" target=\"_blank\" rel=\"external\">\n                <span class=\"video\">Works for vimeo too.</span>\n            </a>\n            <a href=\"https://www.youtube.com/watch?v=gAeYCJZ_meY\" target=\"_blank\" rel=\"external\">\n                <span class=\"video\">Works for youtube too.</span>\n            </a>\n\n        </div>\n        <p class=\"cred\">Made by <a href=\"http://galleria.io\" target=\"_blank\" rel=\"external\">Galleria</a>.</p>\n    </div>\n\n    <script>\n    $(function() {\n        // Load the classic theme\n        Galleria.loadTheme('galleria.classic.min.js');\n\n        // Initialize Galleria\n        Galleria.run('#galleria');\n    });\n    </script>\n    </body>\n</html>","site":{"data":{}},"excerpt":"","more":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <title>Galleria Classic Theme</title>\n        <style>\n\n            /* Demo styles */\n            html,body{background:#222;margin:0;}\n            body{border-top:4px solid #000;}\n            .content{color:#777;font:12px/1.4 \"helvetica neue\",arial,sans-serif;width:620px;margin:20px auto;}\n            h1{font-size:12px;font-weight:normal;color:#ddd;margin:0;}\n            p{margin:0 0 20px}\n            a {color:#22BCB9;text-decoration:none;}\n            .cred{margin-top:20px;font-size:11px;}\n\n            /* This rule is read by Galleria to define the gallery height: */\n            #galleria{height:320px}\n\n        </style>\n\n        <!-- load jQuery -->\n        <script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js\"></script>\n\n        <!-- load Galleria -->\n        <script src=\"../../galleria-1.4.5.min.js\"></script>\n\n    </head>\n<body>\n    <div class=\"content\">\n        <h1>Galleria Classic Theme</h1>\n        <p>Demonstrating a basic gallery example.</p>\n\n        <!-- Adding gallery images. We use resized thumbnails here for better performance, but its not necessary -->\n\n        <div id=\"galleria\">\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Biandintz_eta_zaldiak_-_modified2.jpg/800px-Biandintz_eta_zaldiak_-_modified2.jpg\" target=\"_blank\" rel=\"external\">\n                <img src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Biandintz_eta_zaldiak_-_modified2.jpg/100px-Biandintz_eta_zaldiak_-_modified2.jpg\" ,=\"\" data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Biandintz_eta_zaldiak_-_modified2.jpg/1280px-Biandintz_eta_zaldiak_-_modified2.jpg\" data-title=\"Biandintz eta zaldiak\" data-description=\"Horses on Bianditz mountain, in Navarre, Spain.\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/Athabasca_Rail_at_Brule_Lake.jpg/800px-Athabasca_Rail_at_Brule_Lake.jpg\" target=\"_blank\" rel=\"external\">\n                <img src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/Athabasca_Rail_at_Brule_Lake.jpg/100px-Athabasca_Rail_at_Brule_Lake.jpg\" ,=\"\" data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/Athabasca_Rail_at_Brule_Lake.jpg/1280px-Athabasca_Rail_at_Brule_Lake.jpg\" data-title=\"Athabasca Rail\" data-description=\"The Athabasca River railroad track at the mouth of Brul Lake in Alberta, Canada.\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Back-scattering_crepuscular_rays_panorama_1.jpg/1280px-Back-scattering_crepuscular_rays_panorama_1.jpg\" target=\"_blank\" rel=\"external\">\n                <img src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Back-scattering_crepuscular_rays_panorama_1.jpg/100px-Back-scattering_crepuscular_rays_panorama_1.jpg\" ,=\"\" data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Back-scattering_crepuscular_rays_panorama_1.jpg/1400px-Back-scattering_crepuscular_rays_panorama_1.jpg\" data-title=\"Back-scattering crepuscular rays\" data-description=\"Picture of the day on Wikimedia Commons 26 September 2010.\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/7/75/Interior_convento_3.jpg/800px-Interior_convento_3.jpg\" target=\"_blank\" rel=\"external\">\n                <img src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/7/75/Interior_convento_3.jpg/120px-Interior_convento_3.jpg\" ,=\"\" data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/7/75/Interior_convento_3.jpg/1400px-Interior_convento_3.jpg\" data-title=\"Interior convento\" data-description=\"Interior view of Yuriria Convent, founded in 1550.\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg/800px-Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg\" target=\"_blank\" rel=\"external\">\n                <img src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg/100px-Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg\" ,=\"\" data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg/1280px-Oxbow_Bend_outlook_in_the_Grand_Teton_National_Park.jpg\" data-title=\"Oxbow Bend outlook\" data-description=\"View over the Snake River to the Mount Moran with the Skillet Glacier.\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Hazy_blue_hour_in_Grand_Canyon.JPG/800px-Hazy_blue_hour_in_Grand_Canyon.JPG\" target=\"_blank\" rel=\"external\">\n                <img src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Hazy_blue_hour_in_Grand_Canyon.JPG/100px-Hazy_blue_hour_in_Grand_Canyon.JPG\" ,=\"\" data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Hazy_blue_hour_in_Grand_Canyon.JPG/1280px-Hazy_blue_hour_in_Grand_Canyon.JPG\" data-title=\"Hazy blue hour\" data-description=\"Hazy blue hour in Grand Canyon. View from the South Rim.\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/2909_vallon_moy_res.jpg/800px-2909_vallon_moy_res.jpg\" target=\"_blank\" rel=\"external\">\n                <img src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/2909_vallon_moy_res.jpg/100px-2909_vallon_moy_res.jpg\" ,=\"\" data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/2909_vallon_moy_res.jpg/1280px-2909_vallon_moy_res.jpg\" data-title=\"Haute Severaisse valley\" data-description=\"View of Haute Severaisse valley and surrounding summits from the slopes of Les Vernets.\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Bohinjsko_jezero_2.jpg/800px-Bohinjsko_jezero_2.jpg\" target=\"_blank\" rel=\"external\">\n                <img src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Bohinjsko_jezero_2.jpg/100px-Bohinjsko_jezero_2.jpg\" ,=\"\" data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Bohinjsko_jezero_2.jpg/1280px-Bohinjsko_jezero_2.jpg\" data-title=\"Bohinj lake\" data-description=\"Bohinj lake (Triglav National Park, Slovenia) in the morning.\">\n            </a>\n            <a href=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/32/Bowling_Balls_Beach_2_edit.jpg/800px-Bowling_Balls_Beach_2_edit.jpg\" target=\"_blank\" rel=\"external\">\n                <img src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/32/Bowling_Balls_Beach_2_edit.jpg/100px-Bowling_Balls_Beach_2_edit.jpg\" ,=\"\" data-big=\"http://upload.wikimedia.org/wikipedia/commons/thumb/3/32/Bowling_Balls_Beach_2_edit.jpg/1280px-Bowling_Balls_Beach_2_edit.jpg\" data-title=\"Bowling Balls\" data-description=\"Mendocino county, California, USA.\">\n            </a>\n            <a href=\"https://vimeo.com/25750735\" target=\"_blank\" rel=\"external\">\n                <span class=\"video\">Works for vimeo too.</span>\n            </a>\n            <a href=\"https://www.youtube.com/watch?v=gAeYCJZ_meY\" target=\"_blank\" rel=\"external\">\n                <span class=\"video\">Works for youtube too.</span>\n            </a>\n\n        </div>\n        <p class=\"cred\">Made by <a href=\"http://galleria.io\" target=\"_blank\" rel=\"external\">Galleria</a>.</p>\n    </div>\n\n    <script>\n    $(function() {\n        // Load the classic theme\n        Galleria.loadTheme('galleria.classic.min.js');\n\n        // Initialize Galleria\n        Galleria.run('#galleria');\n    });\n    </script>\n    </body>\n</html>"},{"_content":"/**\n * Galleria Picasa Plugin 2016-09-03\n * http://galleria.io\n *\n * Licensed under the MIT license\n * https://raw.github.com/worseisbetter/galleria/master/LICENSE\n *\n */\n\n(function($) {\n\n/*global jQuery, Galleria, window */\n\nGalleria.requires(1.25, 'The Picasa Plugin requires Galleria version 1.2.5 or later.');\n\n// The script path\nvar PATH = Galleria.utils.getScriptPath();\n\n/**\n\n    @class\n    @constructor\n\n    @example var picasa = new Galleria.Picasa();\n\n    @author http://wib.io\n\n    @requires jQuery\n    @requires Galleria\n\n    @returns Instance\n*/\n\nGalleria.Picasa = function() {\n\n    this.options = {\n        max: 30,                       // photos to return\n        imageSize: 'medium',           // photo size ( thumb,small,medium,big,original ) or a number\n        thumbSize: 'thumb',            // thumbnail size ( thumb,small,medium,big,original ) or a number\n        complete: function(){}         // callback to be called inside the Galleria.prototype.load\n    };\n\n};\n\nGalleria.Picasa.prototype = {\n\n    // bring back the constructor reference\n\n    constructor: Galleria.Picasa,\n\n    /**\n        Search for anything at Picasa\n\n        @param {String} phrase The string to search for\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    search: function( phrase, callback ) {\n        return this._call( 'search', 'all', {\n            q: phrase\n        }, callback );\n    },\n\n    /**\n        Get a user's public photos\n\n        @param {String} username The username to fetch photos from\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    user: function( username, callback ) {\n        return this._call( 'user', 'user/' + username, callback );\n    },\n\n    /**\n        Get photos from an album\n\n        @param {String} username The username that owns the album\n        @param {String} album The album ID\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    useralbum: function( username, album, callback ) {\n        return this._call( 'useralbum', 'user/' + username + '/album/' + album, callback );\n    },\n\n    /**\n        Set picasa options\n\n        @param {Object} options The options object to blend\n\n        @returns Instance\n    */\n\n    setOptions: function( options ) {\n        $.extend(this.options, options);\n        return this;\n    },\n\n\n    // call Picasa\n\n    _call: function( type, url, params, callback ) {\n\n        url = 'https://picasaweb.google.com/data/feed/api/' + url + '?';\n\n        if (typeof params == 'function') {\n            callback = params;\n            params = {};\n        }\n\n        var self = this;\n\n        params = $.extend({\n            'kind': 'photo',\n            'access': 'public',\n            'max-results': this.options.max,\n            'thumbsize': this._getSizes().join(','),\n            'alt': 'json-in-script',\n            'callback': '?'\n        }, params );\n\n        $.each(params, function( key, value ) {\n            url += '&' + key + '=' + value;\n        });\n\n        // since Picasa throws 404 when the call is malformed, we must set a timeout here:\n\n        var data = false;\n\n        Galleria.utils.wait({\n            until: function() {\n                return data;\n            },\n            success: function() {\n                self._parse.call( self, data.feed.entry, callback );\n            },\n            error: function() {\n                var msg = '';\n                if ( type == 'user' ) {\n                    msg = 'user not found.';\n                } else if ( type == 'useralbum' ) {\n                    msg = 'album or user not found.';\n                }\n                Galleria.raise('Picasa request failed' + (msg ? ': ' + msg : '.'));\n            },\n            timeout: 5000\n        });\n\n        $.getJSON( url, function( result ) {\n            data = result;\n        });\n\n        return self;\n    },\n\n\n    // parse image sizes and return an array of three\n\n    _getSizes: function() {\n\n        var self = this,\n            norm = {\n                small: '72c',\n                thumb: '104u',\n                medium: '640u',\n                big: '1024u',\n                original: '1600u'\n            },\n            op = self.options,\n            t = {},\n            n,\n            sz = [32,48,64,72,94,104,110,128,144,150,160,200,220,288,320,400,512,576,640,720,800,912,1024,1152,1280,1440,1600];\n\n        $(['thumbSize', 'imageSize']).each(function() {\n            if( op[this] in norm ) {\n                t[this] = norm[ op[this] ];\n            } else {\n                n = Galleria.utils.parseValue( op[this] );\n                if (n > 1600) {\n                    n = 1600;\n                } else {\n                    $.each( sz, function(i) {\n                        if ( n < this ) {\n                            n = sz[i-1];\n                            return false;\n                        }\n                    });\n                }\n                t[this] = n;\n            }\n        });\n\n        return [ t.thumbSize, t.imageSize, '1280u'];\n\n    },\n\n\n    // parse the result and call the callback with the galleria-ready data array\n\n    _parse: function( data, callback ) {\n\n        var self = this,\n            gallery = [],\n            img;\n\n        $.each( data, function() {\n\n            img = this.media$group.media$thumbnail;\n\n            gallery.push({\n                thumb: img[0].url,\n                image: img[1].url,\n                big: img[2].url,\n                title: this.summary.$t\n            });\n        });\n\n        callback.call( this, gallery );\n    }\n};\n\n\n/**\n    Galleria modifications\n    We fake-extend the load prototype to make Picasa integration as simple as possible\n*/\n\n\n// save the old prototype in a local variable\n\nvar load = Galleria.prototype.load;\n\n\n// fake-extend the load prototype using the picasa data\n\nGalleria.prototype.load = function() {\n\n    // pass if no data is provided or picasa option not found\n    if ( arguments.length || typeof this._options.picasa !== 'string' ) {\n        load.apply( this, Galleria.utils.array( arguments ) );\n        return;\n    }\n\n    // define some local vars\n    var self = this,\n        args = Galleria.utils.array( arguments ),\n        picasa = this._options.picasa.split(':'),\n        p,\n        opts = $.extend({}, self._options.picasaOptions),\n        loader = typeof opts.loader !== 'undefined' ?\n            opts.loader : $('<div>').css({\n                width: 48,\n                height: 48,\n                opacity: 0.7,\n                background:'#000 url('+PATH+'loader.gif) no-repeat 50% 50%'\n            });\n\n    if ( picasa.length ) {\n\n        // validate the method\n        if ( typeof Galleria.Picasa.prototype[ picasa[0] ] !== 'function' ) {\n            Galleria.raise( picasa[0] + ' method not found in Picasa plugin' );\n            return load.apply( this, args );\n        }\n\n        // validate the argument\n        if ( !picasa[1] ) {\n            Galleria.raise( 'No picasa argument found' );\n            return load.apply( this, args );\n        }\n\n        // apply the preloader\n        window.setTimeout(function() {\n            self.$( 'target' ).append( loader );\n        },100);\n\n        // create the instance\n        p = new Galleria.Picasa();\n\n        // apply Flickr options\n        if ( typeof self._options.picasaOptions === 'object' ) {\n            p.setOptions( self._options.picasaOptions );\n        }\n\n        // call the picasa method and trigger the DATA event\n        var arg = [];\n        if ( picasa[0] == 'useralbum' ) {\n            arg = picasa[1].split('/');\n            if (arg.length != 2) {\n                Galleria.raise( 'Picasa useralbum not correctly formatted (should be [user]/[album])');\n                return;\n            }\n        } else {\n            arg.push( picasa[1] );\n        }\n\n        arg.push(function(data) {\n            self._data = data;\n            loader.remove();\n            self.trigger( Galleria.DATA );\n            p.options.complete.call(p, data);\n        });\n\n        p[ picasa[0] ].apply( p, arg );\n\n    } else {\n\n        // if flickr array not found, pass\n        load.apply( this, args );\n    }\n};\n\n}( jQuery ) );","source":"galleria/plugins/picasa/galleria.picasa.js","raw":"/**\n * Galleria Picasa Plugin 2016-09-03\n * http://galleria.io\n *\n * Licensed under the MIT license\n * https://raw.github.com/worseisbetter/galleria/master/LICENSE\n *\n */\n\n(function($) {\n\n/*global jQuery, Galleria, window */\n\nGalleria.requires(1.25, 'The Picasa Plugin requires Galleria version 1.2.5 or later.');\n\n// The script path\nvar PATH = Galleria.utils.getScriptPath();\n\n/**\n\n    @class\n    @constructor\n\n    @example var picasa = new Galleria.Picasa();\n\n    @author http://wib.io\n\n    @requires jQuery\n    @requires Galleria\n\n    @returns Instance\n*/\n\nGalleria.Picasa = function() {\n\n    this.options = {\n        max: 30,                       // photos to return\n        imageSize: 'medium',           // photo size ( thumb,small,medium,big,original ) or a number\n        thumbSize: 'thumb',            // thumbnail size ( thumb,small,medium,big,original ) or a number\n        complete: function(){}         // callback to be called inside the Galleria.prototype.load\n    };\n\n};\n\nGalleria.Picasa.prototype = {\n\n    // bring back the constructor reference\n\n    constructor: Galleria.Picasa,\n\n    /**\n        Search for anything at Picasa\n\n        @param {String} phrase The string to search for\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    search: function( phrase, callback ) {\n        return this._call( 'search', 'all', {\n            q: phrase\n        }, callback );\n    },\n\n    /**\n        Get a user's public photos\n\n        @param {String} username The username to fetch photos from\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    user: function( username, callback ) {\n        return this._call( 'user', 'user/' + username, callback );\n    },\n\n    /**\n        Get photos from an album\n\n        @param {String} username The username that owns the album\n        @param {String} album The album ID\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    useralbum: function( username, album, callback ) {\n        return this._call( 'useralbum', 'user/' + username + '/album/' + album, callback );\n    },\n\n    /**\n        Set picasa options\n\n        @param {Object} options The options object to blend\n\n        @returns Instance\n    */\n\n    setOptions: function( options ) {\n        $.extend(this.options, options);\n        return this;\n    },\n\n\n    // call Picasa\n\n    _call: function( type, url, params, callback ) {\n\n        url = 'https://picasaweb.google.com/data/feed/api/' + url + '?';\n\n        if (typeof params == 'function') {\n            callback = params;\n            params = {};\n        }\n\n        var self = this;\n\n        params = $.extend({\n            'kind': 'photo',\n            'access': 'public',\n            'max-results': this.options.max,\n            'thumbsize': this._getSizes().join(','),\n            'alt': 'json-in-script',\n            'callback': '?'\n        }, params );\n\n        $.each(params, function( key, value ) {\n            url += '&' + key + '=' + value;\n        });\n\n        // since Picasa throws 404 when the call is malformed, we must set a timeout here:\n\n        var data = false;\n\n        Galleria.utils.wait({\n            until: function() {\n                return data;\n            },\n            success: function() {\n                self._parse.call( self, data.feed.entry, callback );\n            },\n            error: function() {\n                var msg = '';\n                if ( type == 'user' ) {\n                    msg = 'user not found.';\n                } else if ( type == 'useralbum' ) {\n                    msg = 'album or user not found.';\n                }\n                Galleria.raise('Picasa request failed' + (msg ? ': ' + msg : '.'));\n            },\n            timeout: 5000\n        });\n\n        $.getJSON( url, function( result ) {\n            data = result;\n        });\n\n        return self;\n    },\n\n\n    // parse image sizes and return an array of three\n\n    _getSizes: function() {\n\n        var self = this,\n            norm = {\n                small: '72c',\n                thumb: '104u',\n                medium: '640u',\n                big: '1024u',\n                original: '1600u'\n            },\n            op = self.options,\n            t = {},\n            n,\n            sz = [32,48,64,72,94,104,110,128,144,150,160,200,220,288,320,400,512,576,640,720,800,912,1024,1152,1280,1440,1600];\n\n        $(['thumbSize', 'imageSize']).each(function() {\n            if( op[this] in norm ) {\n                t[this] = norm[ op[this] ];\n            } else {\n                n = Galleria.utils.parseValue( op[this] );\n                if (n > 1600) {\n                    n = 1600;\n                } else {\n                    $.each( sz, function(i) {\n                        if ( n < this ) {\n                            n = sz[i-1];\n                            return false;\n                        }\n                    });\n                }\n                t[this] = n;\n            }\n        });\n\n        return [ t.thumbSize, t.imageSize, '1280u'];\n\n    },\n\n\n    // parse the result and call the callback with the galleria-ready data array\n\n    _parse: function( data, callback ) {\n\n        var self = this,\n            gallery = [],\n            img;\n\n        $.each( data, function() {\n\n            img = this.media$group.media$thumbnail;\n\n            gallery.push({\n                thumb: img[0].url,\n                image: img[1].url,\n                big: img[2].url,\n                title: this.summary.$t\n            });\n        });\n\n        callback.call( this, gallery );\n    }\n};\n\n\n/**\n    Galleria modifications\n    We fake-extend the load prototype to make Picasa integration as simple as possible\n*/\n\n\n// save the old prototype in a local variable\n\nvar load = Galleria.prototype.load;\n\n\n// fake-extend the load prototype using the picasa data\n\nGalleria.prototype.load = function() {\n\n    // pass if no data is provided or picasa option not found\n    if ( arguments.length || typeof this._options.picasa !== 'string' ) {\n        load.apply( this, Galleria.utils.array( arguments ) );\n        return;\n    }\n\n    // define some local vars\n    var self = this,\n        args = Galleria.utils.array( arguments ),\n        picasa = this._options.picasa.split(':'),\n        p,\n        opts = $.extend({}, self._options.picasaOptions),\n        loader = typeof opts.loader !== 'undefined' ?\n            opts.loader : $('<div>').css({\n                width: 48,\n                height: 48,\n                opacity: 0.7,\n                background:'#000 url('+PATH+'loader.gif) no-repeat 50% 50%'\n            });\n\n    if ( picasa.length ) {\n\n        // validate the method\n        if ( typeof Galleria.Picasa.prototype[ picasa[0] ] !== 'function' ) {\n            Galleria.raise( picasa[0] + ' method not found in Picasa plugin' );\n            return load.apply( this, args );\n        }\n\n        // validate the argument\n        if ( !picasa[1] ) {\n            Galleria.raise( 'No picasa argument found' );\n            return load.apply( this, args );\n        }\n\n        // apply the preloader\n        window.setTimeout(function() {\n            self.$( 'target' ).append( loader );\n        },100);\n\n        // create the instance\n        p = new Galleria.Picasa();\n\n        // apply Flickr options\n        if ( typeof self._options.picasaOptions === 'object' ) {\n            p.setOptions( self._options.picasaOptions );\n        }\n\n        // call the picasa method and trigger the DATA event\n        var arg = [];\n        if ( picasa[0] == 'useralbum' ) {\n            arg = picasa[1].split('/');\n            if (arg.length != 2) {\n                Galleria.raise( 'Picasa useralbum not correctly formatted (should be [user]/[album])');\n                return;\n            }\n        } else {\n            arg.push( picasa[1] );\n        }\n\n        arg.push(function(data) {\n            self._data = data;\n            loader.remove();\n            self.trigger( Galleria.DATA );\n            p.options.complete.call(p, data);\n        });\n\n        p[ picasa[0] ].apply( p, arg );\n\n    } else {\n\n        // if flickr array not found, pass\n        load.apply( this, args );\n    }\n};\n\n}( jQuery ) );","date":"2017-06-24T13:46:41.000Z","updated":"2016-09-15T15:53:15.000Z","path":"galleria/plugins/picasa/galleria.picasa.js","layout":"false","title":"","comments":1,"_id":"cj5o1vdpm000jrtwy2sas84k5","content":"/**\n * Galleria Picasa Plugin 2016-09-03\n * http://galleria.io\n *\n * Licensed under the MIT license\n * https://raw.github.com/worseisbetter/galleria/master/LICENSE\n *\n */\n\n(function($) {\n\n/*global jQuery, Galleria, window */\n\nGalleria.requires(1.25, 'The Picasa Plugin requires Galleria version 1.2.5 or later.');\n\n// The script path\nvar PATH = Galleria.utils.getScriptPath();\n\n/**\n\n    @class\n    @constructor\n\n    @example var picasa = new Galleria.Picasa();\n\n    @author http://wib.io\n\n    @requires jQuery\n    @requires Galleria\n\n    @returns Instance\n*/\n\nGalleria.Picasa = function() {\n\n    this.options = {\n        max: 30,                       // photos to return\n        imageSize: 'medium',           // photo size ( thumb,small,medium,big,original ) or a number\n        thumbSize: 'thumb',            // thumbnail size ( thumb,small,medium,big,original ) or a number\n        complete: function(){}         // callback to be called inside the Galleria.prototype.load\n    };\n\n};\n\nGalleria.Picasa.prototype = {\n\n    // bring back the constructor reference\n\n    constructor: Galleria.Picasa,\n\n    /**\n        Search for anything at Picasa\n\n        @param {String} phrase The string to search for\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    search: function( phrase, callback ) {\n        return this._call( 'search', 'all', {\n            q: phrase\n        }, callback );\n    },\n\n    /**\n        Get a user's public photos\n\n        @param {String} username The username to fetch photos from\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    user: function( username, callback ) {\n        return this._call( 'user', 'user/' + username, callback );\n    },\n\n    /**\n        Get photos from an album\n\n        @param {String} username The username that owns the album\n        @param {String} album The album ID\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    useralbum: function( username, album, callback ) {\n        return this._call( 'useralbum', 'user/' + username + '/album/' + album, callback );\n    },\n\n    /**\n        Set picasa options\n\n        @param {Object} options The options object to blend\n\n        @returns Instance\n    */\n\n    setOptions: function( options ) {\n        $.extend(this.options, options);\n        return this;\n    },\n\n\n    // call Picasa\n\n    _call: function( type, url, params, callback ) {\n\n        url = 'https://picasaweb.google.com/data/feed/api/' + url + '?';\n\n        if (typeof params == 'function') {\n            callback = params;\n            params = {};\n        }\n\n        var self = this;\n\n        params = $.extend({\n            'kind': 'photo',\n            'access': 'public',\n            'max-results': this.options.max,\n            'thumbsize': this._getSizes().join(','),\n            'alt': 'json-in-script',\n            'callback': '?'\n        }, params );\n\n        $.each(params, function( key, value ) {\n            url += '&' + key + '=' + value;\n        });\n\n        // since Picasa throws 404 when the call is malformed, we must set a timeout here:\n\n        var data = false;\n\n        Galleria.utils.wait({\n            until: function() {\n                return data;\n            },\n            success: function() {\n                self._parse.call( self, data.feed.entry, callback );\n            },\n            error: function() {\n                var msg = '';\n                if ( type == 'user' ) {\n                    msg = 'user not found.';\n                } else if ( type == 'useralbum' ) {\n                    msg = 'album or user not found.';\n                }\n                Galleria.raise('Picasa request failed' + (msg ? ': ' + msg : '.'));\n            },\n            timeout: 5000\n        });\n\n        $.getJSON( url, function( result ) {\n            data = result;\n        });\n\n        return self;\n    },\n\n\n    // parse image sizes and return an array of three\n\n    _getSizes: function() {\n\n        var self = this,\n            norm = {\n                small: '72c',\n                thumb: '104u',\n                medium: '640u',\n                big: '1024u',\n                original: '1600u'\n            },\n            op = self.options,\n            t = {},\n            n,\n            sz = [32,48,64,72,94,104,110,128,144,150,160,200,220,288,320,400,512,576,640,720,800,912,1024,1152,1280,1440,1600];\n\n        $(['thumbSize', 'imageSize']).each(function() {\n            if( op[this] in norm ) {\n                t[this] = norm[ op[this] ];\n            } else {\n                n = Galleria.utils.parseValue( op[this] );\n                if (n > 1600) {\n                    n = 1600;\n                } else {\n                    $.each( sz, function(i) {\n                        if ( n < this ) {\n                            n = sz[i-1];\n                            return false;\n                        }\n                    });\n                }\n                t[this] = n;\n            }\n        });\n\n        return [ t.thumbSize, t.imageSize, '1280u'];\n\n    },\n\n\n    // parse the result and call the callback with the galleria-ready data array\n\n    _parse: function( data, callback ) {\n\n        var self = this,\n            gallery = [],\n            img;\n\n        $.each( data, function() {\n\n            img = this.media$group.media$thumbnail;\n\n            gallery.push({\n                thumb: img[0].url,\n                image: img[1].url,\n                big: img[2].url,\n                title: this.summary.$t\n            });\n        });\n\n        callback.call( this, gallery );\n    }\n};\n\n\n/**\n    Galleria modifications\n    We fake-extend the load prototype to make Picasa integration as simple as possible\n*/\n\n\n// save the old prototype in a local variable\n\nvar load = Galleria.prototype.load;\n\n\n// fake-extend the load prototype using the picasa data\n\nGalleria.prototype.load = function() {\n\n    // pass if no data is provided or picasa option not found\n    if ( arguments.length || typeof this._options.picasa !== 'string' ) {\n        load.apply( this, Galleria.utils.array( arguments ) );\n        return;\n    }\n\n    // define some local vars\n    var self = this,\n        args = Galleria.utils.array( arguments ),\n        picasa = this._options.picasa.split(':'),\n        p,\n        opts = $.extend({}, self._options.picasaOptions),\n        loader = typeof opts.loader !== 'undefined' ?\n            opts.loader : $('<div>').css({\n                width: 48,\n                height: 48,\n                opacity: 0.7,\n                background:'#000 url('+PATH+'loader.gif) no-repeat 50% 50%'\n            });\n\n    if ( picasa.length ) {\n\n        // validate the method\n        if ( typeof Galleria.Picasa.prototype[ picasa[0] ] !== 'function' ) {\n            Galleria.raise( picasa[0] + ' method not found in Picasa plugin' );\n            return load.apply( this, args );\n        }\n\n        // validate the argument\n        if ( !picasa[1] ) {\n            Galleria.raise( 'No picasa argument found' );\n            return load.apply( this, args );\n        }\n\n        // apply the preloader\n        window.setTimeout(function() {\n            self.$( 'target' ).append( loader );\n        },100);\n\n        // create the instance\n        p = new Galleria.Picasa();\n\n        // apply Flickr options\n        if ( typeof self._options.picasaOptions === 'object' ) {\n            p.setOptions( self._options.picasaOptions );\n        }\n\n        // call the picasa method and trigger the DATA event\n        var arg = [];\n        if ( picasa[0] == 'useralbum' ) {\n            arg = picasa[1].split('/');\n            if (arg.length != 2) {\n                Galleria.raise( 'Picasa useralbum not correctly formatted (should be [user]/[album])');\n                return;\n            }\n        } else {\n            arg.push( picasa[1] );\n        }\n\n        arg.push(function(data) {\n            self._data = data;\n            loader.remove();\n            self.trigger( Galleria.DATA );\n            p.options.complete.call(p, data);\n        });\n\n        p[ picasa[0] ].apply( p, arg );\n\n    } else {\n\n        // if flickr array not found, pass\n        load.apply( this, args );\n    }\n};\n\n}( jQuery ) );</div>","site":{"data":{}},"excerpt":"","more":"/**\n * Galleria Picasa Plugin 2016-09-03\n * http://galleria.io\n *\n * Licensed under the MIT license\n * https://raw.github.com/worseisbetter/galleria/master/LICENSE\n *\n */\n\n(function($) {\n\n/*global jQuery, Galleria, window */\n\nGalleria.requires(1.25, 'The Picasa Plugin requires Galleria version 1.2.5 or later.');\n\n// The script path\nvar PATH = Galleria.utils.getScriptPath();\n\n/**\n\n    @class\n    @constructor\n\n    @example var picasa = new Galleria.Picasa();\n\n    @author http://wib.io\n\n    @requires jQuery\n    @requires Galleria\n\n    @returns Instance\n*/\n\nGalleria.Picasa = function() {\n\n    this.options = {\n        max: 30,                       // photos to return\n        imageSize: 'medium',           // photo size ( thumb,small,medium,big,original ) or a number\n        thumbSize: 'thumb',            // thumbnail size ( thumb,small,medium,big,original ) or a number\n        complete: function(){}         // callback to be called inside the Galleria.prototype.load\n    };\n\n};\n\nGalleria.Picasa.prototype = {\n\n    // bring back the constructor reference\n\n    constructor: Galleria.Picasa,\n\n    /**\n        Search for anything at Picasa\n\n        @param {String} phrase The string to search for\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    search: function( phrase, callback ) {\n        return this._call( 'search', 'all', {\n            q: phrase\n        }, callback );\n    },\n\n    /**\n        Get a user's public photos\n\n        @param {String} username The username to fetch photos from\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    user: function( username, callback ) {\n        return this._call( 'user', 'user/' + username, callback );\n    },\n\n    /**\n        Get photos from an album\n\n        @param {String} username The username that owns the album\n        @param {String} album The album ID\n        @param {Function} [callback] The callback to be called when the data is ready\n\n        @returns Instance\n    */\n\n    useralbum: function( username, album, callback ) {\n        return this._call( 'useralbum', 'user/' + username + '/album/' + album, callback );\n    },\n\n    /**\n        Set picasa options\n\n        @param {Object} options The options object to blend\n\n        @returns Instance\n    */\n\n    setOptions: function( options ) {\n        $.extend(this.options, options);\n        return this;\n    },\n\n\n    // call Picasa\n\n    _call: function( type, url, params, callback ) {\n\n        url = 'https://picasaweb.google.com/data/feed/api/' + url + '?';\n\n        if (typeof params == 'function') {\n            callback = params;\n            params = {};\n        }\n\n        var self = this;\n\n        params = $.extend({\n            'kind': 'photo',\n            'access': 'public',\n            'max-results': this.options.max,\n            'thumbsize': this._getSizes().join(','),\n            'alt': 'json-in-script',\n            'callback': '?'\n        }, params );\n\n        $.each(params, function( key, value ) {\n            url += '&' + key + '=' + value;\n        });\n\n        // since Picasa throws 404 when the call is malformed, we must set a timeout here:\n\n        var data = false;\n\n        Galleria.utils.wait({\n            until: function() {\n                return data;\n            },\n            success: function() {\n                self._parse.call( self, data.feed.entry, callback );\n            },\n            error: function() {\n                var msg = '';\n                if ( type == 'user' ) {\n                    msg = 'user not found.';\n                } else if ( type == 'useralbum' ) {\n                    msg = 'album or user not found.';\n                }\n                Galleria.raise('Picasa request failed' + (msg ? ': ' + msg : '.'));\n            },\n            timeout: 5000\n        });\n\n        $.getJSON( url, function( result ) {\n            data = result;\n        });\n\n        return self;\n    },\n\n\n    // parse image sizes and return an array of three\n\n    _getSizes: function() {\n\n        var self = this,\n            norm = {\n                small: '72c',\n                thumb: '104u',\n                medium: '640u',\n                big: '1024u',\n                original: '1600u'\n            },\n            op = self.options,\n            t = {},\n            n,\n            sz = [32,48,64,72,94,104,110,128,144,150,160,200,220,288,320,400,512,576,640,720,800,912,1024,1152,1280,1440,1600];\n\n        $(['thumbSize', 'imageSize']).each(function() {\n            if( op[this] in norm ) {\n                t[this] = norm[ op[this] ];\n            } else {\n                n = Galleria.utils.parseValue( op[this] );\n                if (n > 1600) {\n                    n = 1600;\n                } else {\n                    $.each( sz, function(i) {\n                        if ( n < this ) {\n                            n = sz[i-1];\n                            return false;\n                        }\n                    });\n                }\n                t[this] = n;\n            }\n        });\n\n        return [ t.thumbSize, t.imageSize, '1280u'];\n\n    },\n\n\n    // parse the result and call the callback with the galleria-ready data array\n\n    _parse: function( data, callback ) {\n\n        var self = this,\n            gallery = [],\n            img;\n\n        $.each( data, function() {\n\n            img = this.media$group.media$thumbnail;\n\n            gallery.push({\n                thumb: img[0].url,\n                image: img[1].url,\n                big: img[2].url,\n                title: this.summary.$t\n            });\n        });\n\n        callback.call( this, gallery );\n    }\n};\n\n\n/**\n    Galleria modifications\n    We fake-extend the load prototype to make Picasa integration as simple as possible\n*/\n\n\n// save the old prototype in a local variable\n\nvar load = Galleria.prototype.load;\n\n\n// fake-extend the load prototype using the picasa data\n\nGalleria.prototype.load = function() {\n\n    // pass if no data is provided or picasa option not found\n    if ( arguments.length || typeof this._options.picasa !== 'string' ) {\n        load.apply( this, Galleria.utils.array( arguments ) );\n        return;\n    }\n\n    // define some local vars\n    var self = this,\n        args = Galleria.utils.array( arguments ),\n        picasa = this._options.picasa.split(':'),\n        p,\n        opts = $.extend({}, self._options.picasaOptions),\n        loader = typeof opts.loader !== 'undefined' ?\n            opts.loader : $('<div>').css({\n                width: 48,\n                height: 48,\n                opacity: 0.7,\n                background:'#000 url('+PATH+'loader.gif) no-repeat 50% 50%'\n            });\n\n    if ( picasa.length ) {\n\n        // validate the method\n        if ( typeof Galleria.Picasa.prototype[ picasa[0] ] !== 'function' ) {\n            Galleria.raise( picasa[0] + ' method not found in Picasa plugin' );\n            return load.apply( this, args );\n        }\n\n        // validate the argument\n        if ( !picasa[1] ) {\n            Galleria.raise( 'No picasa argument found' );\n            return load.apply( this, args );\n        }\n\n        // apply the preloader\n        window.setTimeout(function() {\n            self.$( 'target' ).append( loader );\n        },100);\n\n        // create the instance\n        p = new Galleria.Picasa();\n\n        // apply Flickr options\n        if ( typeof self._options.picasaOptions === 'object' ) {\n            p.setOptions( self._options.picasaOptions );\n        }\n\n        // call the picasa method and trigger the DATA event\n        var arg = [];\n        if ( picasa[0] == 'useralbum' ) {\n            arg = picasa[1].split('/');\n            if (arg.length != 2) {\n                Galleria.raise( 'Picasa useralbum not correctly formatted (should be [user]/[album])');\n                return;\n            }\n        } else {\n            arg.push( picasa[1] );\n        }\n\n        arg.push(function(data) {\n            self._data = data;\n            loader.remove();\n            self.trigger( Galleria.DATA );\n            p.options.complete.call(p, data);\n        });\n\n        p[ picasa[0] ].apply( p, arg );\n\n    } else {\n\n        // if flickr array not found, pass\n        load.apply( this, args );\n    }\n};\n\n}( jQuery ) );</div>"},{"_content":"/**\n * Galleria Classic Theme 2016-09-03\n * http://galleria.io\n *\n * Licensed under the MIT license\n * https://raw.github.com/worseisbetter/galleria/master/LICENSE\n *\n */\n\n(function($) {\n\n/*global window, jQuery, Galleria */\n\nGalleria.addTheme({\n    name: 'classic',\n    author: 'Galleria',\n    css: 'galleria.classic.css',\n    defaults: {\n        transition: 'slide',\n        thumbCrop:  'height',\n\n        // set this to false if you want to show the caption all the time:\n        _toggleInfo: true\n    },\n    init: function(options) {\n\n        Galleria.requires(1.4, 'This version of Classic theme requires Galleria 1.4 or later');\n\n        // add some elements\n        this.addElement('info-link','info-close');\n        this.append({\n            'info' : ['info-link','info-close']\n        });\n\n        // cache some stuff\n        var info = this.$('info-link,info-close,info-text'),\n            touch = Galleria.TOUCH;\n\n        // show loader & counter with opacity\n        this.$('loader,counter').show().css('opacity', 0.4);\n\n        // some stuff for non-touch browsers\n        if (! touch ) {\n            this.addIdleState( this.get('image-nav-left'), { left:-50 });\n            this.addIdleState( this.get('image-nav-right'), { right:-50 });\n            this.addIdleState( this.get('counter'), { opacity:0 });\n        }\n\n        // toggle info\n        if ( options._toggleInfo === true ) {\n            info.bind( 'click:fast', function() {\n                info.toggle();\n            });\n        } else {\n            info.show();\n            this.$('info-link, info-close').hide();\n        }\n\n        // bind some stuff\n        this.bind('thumbnail', function(e) {\n\n            if (! touch ) {\n                // fade thumbnails\n                $(e.thumbTarget).css('opacity', 0.6).parent().hover(function() {\n                    $(this).not('.active').children().stop().fadeTo(100, 1);\n                }, function() {\n                    $(this).not('.active').children().stop().fadeTo(400, 0.6);\n                });\n\n                if ( e.index === this.getIndex() ) {\n                    $(e.thumbTarget).css('opacity',1);\n                }\n            } else {\n                $(e.thumbTarget).css('opacity', this.getIndex() ? 1 : 0.6).bind('click:fast', function() {\n                    $(this).css( 'opacity', 1 ).parent().siblings().children().css('opacity', 0.6);\n                });\n            }\n        });\n\n        var activate = function(e) {\n            $(e.thumbTarget).css('opacity',1).parent().siblings().children().css('opacity', 0.6);\n        };\n\n        this.bind('loadstart', function(e) {\n            if (!e.cached) {\n                this.$('loader').show().fadeTo(200, 0.4);\n            }\n            window.setTimeout(function() {\n                activate(e);\n            }, touch ? 300 : 0);\n            this.$('info').toggle( this.hasInfo() );\n        });\n\n        this.bind('loadfinish', function(e) {\n            this.$('loader').fadeOut(200);\n        });\n    }\n});\n\n}(jQuery));\n","source":"galleria/themes/classic/galleria.classic.js","raw":"/**\n * Galleria Classic Theme 2016-09-03\n * http://galleria.io\n *\n * Licensed under the MIT license\n * https://raw.github.com/worseisbetter/galleria/master/LICENSE\n *\n */\n\n(function($) {\n\n/*global window, jQuery, Galleria */\n\nGalleria.addTheme({\n    name: 'classic',\n    author: 'Galleria',\n    css: 'galleria.classic.css',\n    defaults: {\n        transition: 'slide',\n        thumbCrop:  'height',\n\n        // set this to false if you want to show the caption all the time:\n        _toggleInfo: true\n    },\n    init: function(options) {\n\n        Galleria.requires(1.4, 'This version of Classic theme requires Galleria 1.4 or later');\n\n        // add some elements\n        this.addElement('info-link','info-close');\n        this.append({\n            'info' : ['info-link','info-close']\n        });\n\n        // cache some stuff\n        var info = this.$('info-link,info-close,info-text'),\n            touch = Galleria.TOUCH;\n\n        // show loader & counter with opacity\n        this.$('loader,counter').show().css('opacity', 0.4);\n\n        // some stuff for non-touch browsers\n        if (! touch ) {\n            this.addIdleState( this.get('image-nav-left'), { left:-50 });\n            this.addIdleState( this.get('image-nav-right'), { right:-50 });\n            this.addIdleState( this.get('counter'), { opacity:0 });\n        }\n\n        // toggle info\n        if ( options._toggleInfo === true ) {\n            info.bind( 'click:fast', function() {\n                info.toggle();\n            });\n        } else {\n            info.show();\n            this.$('info-link, info-close').hide();\n        }\n\n        // bind some stuff\n        this.bind('thumbnail', function(e) {\n\n            if (! touch ) {\n                // fade thumbnails\n                $(e.thumbTarget).css('opacity', 0.6).parent().hover(function() {\n                    $(this).not('.active').children().stop().fadeTo(100, 1);\n                }, function() {\n                    $(this).not('.active').children().stop().fadeTo(400, 0.6);\n                });\n\n                if ( e.index === this.getIndex() ) {\n                    $(e.thumbTarget).css('opacity',1);\n                }\n            } else {\n                $(e.thumbTarget).css('opacity', this.getIndex() ? 1 : 0.6).bind('click:fast', function() {\n                    $(this).css( 'opacity', 1 ).parent().siblings().children().css('opacity', 0.6);\n                });\n            }\n        });\n\n        var activate = function(e) {\n            $(e.thumbTarget).css('opacity',1).parent().siblings().children().css('opacity', 0.6);\n        };\n\n        this.bind('loadstart', function(e) {\n            if (!e.cached) {\n                this.$('loader').show().fadeTo(200, 0.4);\n            }\n            window.setTimeout(function() {\n                activate(e);\n            }, touch ? 300 : 0);\n            this.$('info').toggle( this.hasInfo() );\n        });\n\n        this.bind('loadfinish', function(e) {\n            this.$('loader').fadeOut(200);\n        });\n    }\n});\n\n}(jQuery));\n","date":"2017-06-24T13:46:41.000Z","updated":"2016-09-15T15:53:15.000Z","path":"galleria/themes/classic/galleria.classic.js","layout":"false","title":"","comments":1,"_id":"cj5o1vdpm000krtwykmo0s2dc","content":"/**\n * Galleria Classic Theme 2016-09-03\n * http://galleria.io\n *\n * Licensed under the MIT license\n * https://raw.github.com/worseisbetter/galleria/master/LICENSE\n *\n */\n\n(function($) {\n\n/*global window, jQuery, Galleria */\n\nGalleria.addTheme({\n    name: 'classic',\n    author: 'Galleria',\n    css: 'galleria.classic.css',\n    defaults: {\n        transition: 'slide',\n        thumbCrop:  'height',\n\n        // set this to false if you want to show the caption all the time:\n        _toggleInfo: true\n    },\n    init: function(options) {\n\n        Galleria.requires(1.4, 'This version of Classic theme requires Galleria 1.4 or later');\n\n        // add some elements\n        this.addElement('info-link','info-close');\n        this.append({\n            'info' : ['info-link','info-close']\n        });\n\n        // cache some stuff\n        var info = this.$('info-link,info-close,info-text'),\n            touch = Galleria.TOUCH;\n\n        // show loader & counter with opacity\n        this.$('loader,counter').show().css('opacity', 0.4);\n\n        // some stuff for non-touch browsers\n        if (! touch ) {\n            this.addIdleState( this.get('image-nav-left'), { left:-50 });\n            this.addIdleState( this.get('image-nav-right'), { right:-50 });\n            this.addIdleState( this.get('counter'), { opacity:0 });\n        }\n\n        // toggle info\n        if ( options._toggleInfo === true ) {\n            info.bind( 'click:fast', function() {\n                info.toggle();\n            });\n        } else {\n            info.show();\n            this.$('info-link, info-close').hide();\n        }\n\n        // bind some stuff\n        this.bind('thumbnail', function(e) {\n\n            if (! touch ) {\n                // fade thumbnails\n                $(e.thumbTarget).css('opacity', 0.6).parent().hover(function() {\n                    $(this).not('.active').children().stop().fadeTo(100, 1);\n                }, function() {\n                    $(this).not('.active').children().stop().fadeTo(400, 0.6);\n                });\n\n                if ( e.index === this.getIndex() ) {\n                    $(e.thumbTarget).css('opacity',1);\n                }\n            } else {\n                $(e.thumbTarget).css('opacity', this.getIndex() ? 1 : 0.6).bind('click:fast', function() {\n                    $(this).css( 'opacity', 1 ).parent().siblings().children().css('opacity', 0.6);\n                });\n            }\n        });\n\n        var activate = function(e) {\n            $(e.thumbTarget).css('opacity',1).parent().siblings().children().css('opacity', 0.6);\n        };\n\n        this.bind('loadstart', function(e) {\n            if (!e.cached) {\n                this.$('loader').show().fadeTo(200, 0.4);\n            }\n            window.setTimeout(function() {\n                activate(e);\n            }, touch ? 300 : 0);\n            this.$('info').toggle( this.hasInfo() );\n        });\n\n        this.bind('loadfinish', function(e) {\n            this.$('loader').fadeOut(200);\n        });\n    }\n});\n\n}(jQuery));\n","site":{"data":{}},"excerpt":"","more":"/**\n * Galleria Classic Theme 2016-09-03\n * http://galleria.io\n *\n * Licensed under the MIT license\n * https://raw.github.com/worseisbetter/galleria/master/LICENSE\n *\n */\n\n(function($) {\n\n/*global window, jQuery, Galleria */\n\nGalleria.addTheme({\n    name: 'classic',\n    author: 'Galleria',\n    css: 'galleria.classic.css',\n    defaults: {\n        transition: 'slide',\n        thumbCrop:  'height',\n\n        // set this to false if you want to show the caption all the time:\n        _toggleInfo: true\n    },\n    init: function(options) {\n\n        Galleria.requires(1.4, 'This version of Classic theme requires Galleria 1.4 or later');\n\n        // add some elements\n        this.addElement('info-link','info-close');\n        this.append({\n            'info' : ['info-link','info-close']\n        });\n\n        // cache some stuff\n        var info = this.$('info-link,info-close,info-text'),\n            touch = Galleria.TOUCH;\n\n        // show loader & counter with opacity\n        this.$('loader,counter').show().css('opacity', 0.4);\n\n        // some stuff for non-touch browsers\n        if (! touch ) {\n            this.addIdleState( this.get('image-nav-left'), { left:-50 });\n            this.addIdleState( this.get('image-nav-right'), { right:-50 });\n            this.addIdleState( this.get('counter'), { opacity:0 });\n        }\n\n        // toggle info\n        if ( options._toggleInfo === true ) {\n            info.bind( 'click:fast', function() {\n                info.toggle();\n            });\n        } else {\n            info.show();\n            this.$('info-link, info-close').hide();\n        }\n\n        // bind some stuff\n        this.bind('thumbnail', function(e) {\n\n            if (! touch ) {\n                // fade thumbnails\n                $(e.thumbTarget).css('opacity', 0.6).parent().hover(function() {\n                    $(this).not('.active').children().stop().fadeTo(100, 1);\n                }, function() {\n                    $(this).not('.active').children().stop().fadeTo(400, 0.6);\n                });\n\n                if ( e.index === this.getIndex() ) {\n                    $(e.thumbTarget).css('opacity',1);\n                }\n            } else {\n                $(e.thumbTarget).css('opacity', this.getIndex() ? 1 : 0.6).bind('click:fast', function() {\n                    $(this).css( 'opacity', 1 ).parent().siblings().children().css('opacity', 0.6);\n                });\n            }\n        });\n\n        var activate = function(e) {\n            $(e.thumbTarget).css('opacity',1).parent().siblings().children().css('opacity', 0.6);\n        };\n\n        this.bind('loadstart', function(e) {\n            if (!e.cached) {\n                this.$('loader').show().fadeTo(200, 0.4);\n            }\n            window.setTimeout(function() {\n                activate(e);\n            }, touch ? 300 : 0);\n            this.$('info').toggle( this.hasInfo() );\n        });\n\n        this.bind('loadfinish', function(e) {\n            this.$('loader').fadeOut(200);\n        });\n    }\n});\n\n}(jQuery));\n"},{"_content":"(function($){Galleria.requires(1.25,\"The Picasa Plugin requires Galleria version 1.2.5 or later.\");var PATH=Galleria.utils.getScriptPath();Galleria.Picasa=function(){this.options={max:30,imageSize:\"medium\",thumbSize:\"thumb\",complete:function(){}}};Galleria.Picasa.prototype={constructor:Galleria.Picasa,search:function(phrase,callback){return this._call(\"search\",\"all\",{q:phrase},callback)},user:function(username,callback){return this._call(\"user\",\"user/\"+username,callback)},useralbum:function(username,album,callback){return this._call(\"useralbum\",\"user/\"+username+\"/album/\"+album,callback)},setOptions:function(options){$.extend(this.options,options);return this},_call:function(type,url,params,callback){url=\"https://picasaweb.google.com/data/feed/api/\"+url+\"?\";if(typeof params==\"function\"){callback=params;params={}}var self=this;params=$.extend({kind:\"photo\",access:\"public\",\"max-results\":this.options.max,thumbsize:this._getSizes().join(\",\"),alt:\"json-in-script\",callback:\"?\"},params);$.each(params,function(key,value){url+=\"&\"+key+\"=\"+value});var data=false;Galleria.utils.wait({until:function(){return data},success:function(){self._parse.call(self,data.feed.entry,callback)},error:function(){var msg=\"\";if(type==\"user\"){msg=\"user not found.\"}else if(type==\"useralbum\"){msg=\"album or user not found.\"}Galleria.raise(\"Picasa request failed\"+(msg?\": \"+msg:\".\"))},timeout:5e3});$.getJSON(url,function(result){data=result});return self},_getSizes:function(){var self=this,norm={small:\"72c\",thumb:\"104u\",medium:\"640u\",big:\"1024u\",original:\"1600u\"},op=self.options,t={},n,sz=[32,48,64,72,94,104,110,128,144,150,160,200,220,288,320,400,512,576,640,720,800,912,1024,1152,1280,1440,1600];$([\"thumbSize\",\"imageSize\"]).each(function(){if(op[this]in norm){t[this]=norm[op[this]]}else{n=Galleria.utils.parseValue(op[this]);if(n>1600){n=1600}else{$.each(sz,function(i){if(n<this){n=sz[i-1];return false}})}t[this]=n}});return[t.thumbSize,t.imageSize,\"1280u\"]},_parse:function(data,callback){var self=this,gallery=[],img;$.each(data,function(){img=this.media$group.media$thumbnail;gallery.push({thumb:img[0].url,image:img[1].url,big:img[2].url,title:this.summary.$t})});callback.call(this,gallery)}};var load=Galleria.prototype.load;Galleria.prototype.load=function(){if(arguments.length||typeof this._options.picasa!==\"string\"){load.apply(this,Galleria.utils.array(arguments));return}var self=this,args=Galleria.utils.array(arguments),picasa=this._options.picasa.split(\":\"),p,opts=$.extend({},self._options.picasaOptions),loader=typeof opts.loader!==\"undefined\"?opts.loader:$(\"<div>\").css({width:48,height:48,opacity:.7,background:\"#000 url(\"+PATH+\"loader.gif) no-repeat 50% 50%\"});if(picasa.length){if(typeof Galleria.Picasa.prototype[picasa[0]]!==\"function\"){Galleria.raise(picasa[0]+\" method not found in Picasa plugin\");return load.apply(this,args)}if(!picasa[1]){Galleria.raise(\"No picasa argument found\");return load.apply(this,args)}window.setTimeout(function(){self.$(\"target\").append(loader)},100);p=new Galleria.Picasa;if(typeof self._options.picasaOptions===\"object\"){p.setOptions(self._options.picasaOptions)}var arg=[];if(picasa[0]==\"useralbum\"){arg=picasa[1].split(\"/\");if(arg.length!=2){Galleria.raise(\"Picasa useralbum not correctly formatted (should be [user]/[album])\");return}}else{arg.push(picasa[1])}arg.push(function(data){self._data=data;loader.remove();self.trigger(Galleria.DATA);p.options.complete.call(p,data)});p[picasa[0]].apply(p,arg)}else{load.apply(this,args)}}})(jQuery);","source":"galleria/plugins/picasa/galleria.picasa.min.js","raw":"(function($){Galleria.requires(1.25,\"The Picasa Plugin requires Galleria version 1.2.5 or later.\");var PATH=Galleria.utils.getScriptPath();Galleria.Picasa=function(){this.options={max:30,imageSize:\"medium\",thumbSize:\"thumb\",complete:function(){}}};Galleria.Picasa.prototype={constructor:Galleria.Picasa,search:function(phrase,callback){return this._call(\"search\",\"all\",{q:phrase},callback)},user:function(username,callback){return this._call(\"user\",\"user/\"+username,callback)},useralbum:function(username,album,callback){return this._call(\"useralbum\",\"user/\"+username+\"/album/\"+album,callback)},setOptions:function(options){$.extend(this.options,options);return this},_call:function(type,url,params,callback){url=\"https://picasaweb.google.com/data/feed/api/\"+url+\"?\";if(typeof params==\"function\"){callback=params;params={}}var self=this;params=$.extend({kind:\"photo\",access:\"public\",\"max-results\":this.options.max,thumbsize:this._getSizes().join(\",\"),alt:\"json-in-script\",callback:\"?\"},params);$.each(params,function(key,value){url+=\"&\"+key+\"=\"+value});var data=false;Galleria.utils.wait({until:function(){return data},success:function(){self._parse.call(self,data.feed.entry,callback)},error:function(){var msg=\"\";if(type==\"user\"){msg=\"user not found.\"}else if(type==\"useralbum\"){msg=\"album or user not found.\"}Galleria.raise(\"Picasa request failed\"+(msg?\": \"+msg:\".\"))},timeout:5e3});$.getJSON(url,function(result){data=result});return self},_getSizes:function(){var self=this,norm={small:\"72c\",thumb:\"104u\",medium:\"640u\",big:\"1024u\",original:\"1600u\"},op=self.options,t={},n,sz=[32,48,64,72,94,104,110,128,144,150,160,200,220,288,320,400,512,576,640,720,800,912,1024,1152,1280,1440,1600];$([\"thumbSize\",\"imageSize\"]).each(function(){if(op[this]in norm){t[this]=norm[op[this]]}else{n=Galleria.utils.parseValue(op[this]);if(n>1600){n=1600}else{$.each(sz,function(i){if(n<this){n=sz[i-1];return false}})}t[this]=n}});return[t.thumbSize,t.imageSize,\"1280u\"]},_parse:function(data,callback){var self=this,gallery=[],img;$.each(data,function(){img=this.media$group.media$thumbnail;gallery.push({thumb:img[0].url,image:img[1].url,big:img[2].url,title:this.summary.$t})});callback.call(this,gallery)}};var load=Galleria.prototype.load;Galleria.prototype.load=function(){if(arguments.length||typeof this._options.picasa!==\"string\"){load.apply(this,Galleria.utils.array(arguments));return}var self=this,args=Galleria.utils.array(arguments),picasa=this._options.picasa.split(\":\"),p,opts=$.extend({},self._options.picasaOptions),loader=typeof opts.loader!==\"undefined\"?opts.loader:$(\"<div>\").css({width:48,height:48,opacity:.7,background:\"#000 url(\"+PATH+\"loader.gif) no-repeat 50% 50%\"});if(picasa.length){if(typeof Galleria.Picasa.prototype[picasa[0]]!==\"function\"){Galleria.raise(picasa[0]+\" method not found in Picasa plugin\");return load.apply(this,args)}if(!picasa[1]){Galleria.raise(\"No picasa argument found\");return load.apply(this,args)}window.setTimeout(function(){self.$(\"target\").append(loader)},100);p=new Galleria.Picasa;if(typeof self._options.picasaOptions===\"object\"){p.setOptions(self._options.picasaOptions)}var arg=[];if(picasa[0]==\"useralbum\"){arg=picasa[1].split(\"/\");if(arg.length!=2){Galleria.raise(\"Picasa useralbum not correctly formatted (should be [user]/[album])\");return}}else{arg.push(picasa[1])}arg.push(function(data){self._data=data;loader.remove();self.trigger(Galleria.DATA);p.options.complete.call(p,data)});p[picasa[0]].apply(p,arg)}else{load.apply(this,args)}}})(jQuery);","date":"2017-06-24T13:46:41.000Z","updated":"2016-09-15T15:53:15.000Z","path":"galleria/plugins/picasa/galleria.picasa.min.js","layout":"false","title":"","comments":1,"_id":"cj5o1vdpo000lrtwyfgoqyops","content":"(function($){Galleria.requires(1.25,\"The Picasa Plugin requires Galleria version 1.2.5 or later.\");var PATH=Galleria.utils.getScriptPath();Galleria.Picasa=function(){this.options={max:30,imageSize:\"medium\",thumbSize:\"thumb\",complete:function(){}}};Galleria.Picasa.prototype={constructor:Galleria.Picasa,search:function(phrase,callback){return this._call(\"search\",\"all\",{q:phrase},callback)},user:function(username,callback){return this._call(\"user\",\"user/\"+username,callback)},useralbum:function(username,album,callback){return this._call(\"useralbum\",\"user/\"+username+\"/album/\"+album,callback)},setOptions:function(options){$.extend(this.options,options);return this},_call:function(type,url,params,callback){url=\"https://picasaweb.google.com/data/feed/api/\"+url+\"?\";if(typeof params==\"function\"){callback=params;params={}}var self=this;params=$.extend({kind:\"photo\",access:\"public\",\"max-results\":this.options.max,thumbsize:this._getSizes().join(\",\"),alt:\"json-in-script\",callback:\"?\"},params);$.each(params,function(key,value){url+=\"&\"+key+\"=\"+value});var data=false;Galleria.utils.wait({until:function(){return data},success:function(){self._parse.call(self,data.feed.entry,callback)},error:function(){var msg=\"\";if(type==\"user\"){msg=\"user not found.\"}else if(type==\"useralbum\"){msg=\"album or user not found.\"}Galleria.raise(\"Picasa request failed\"+(msg?\": \"+msg:\".\"))},timeout:5e3});$.getJSON(url,function(result){data=result});return self},_getSizes:function(){var self=this,norm={small:\"72c\",thumb:\"104u\",medium:\"640u\",big:\"1024u\",original:\"1600u\"},op=self.options,t={},n,sz=[32,48,64,72,94,104,110,128,144,150,160,200,220,288,320,400,512,576,640,720,800,912,1024,1152,1280,1440,1600];$([\"thumbSize\",\"imageSize\"]).each(function(){if(op[this]in norm){t[this]=norm[op[this]]}else{n=Galleria.utils.parseValue(op[this]);if(n>1600){n=1600}else{$.each(sz,function(i){if(n<this){n=sz[i-1];return false}})}t[this]=\"n}});return[t.thumbSize,t.imageSize,\"1280u\"]},_parse:function(data,callback){var\" self=\"this,gallery=[],img;$.each(data,function(){img=this.media$group.media$thumbnail;gallery.push({thumb:img[0].url,image:img[1].url,big:img[2].url,title:this.summary.$t})});callback.call(this,gallery)}};var\" load=\"Galleria.prototype.load;Galleria.prototype.load=function(){if(arguments.length||typeof\" this._options.picasa!=\"=\"string\"){load.apply(this,Galleria.utils.array(arguments));return}var\" opts.loader!=\"=\"undefined\"?opts.loader:$(\"<div\">\").css({width:48,height:48,opacity:.7,background:\"#000 url(\"+PATH+\"loader.gif) no-repeat 50% 50%\"});if(picasa.length){if(typeof Galleria.Picasa.prototype[picasa[0]]!==\"function\"){Galleria.raise(picasa[0]+\" method not found in Picasa plugin\");return load.apply(this,args)}if(!picasa[1]){Galleria.raise(\"No picasa argument found\");return load.apply(this,args)}window.setTimeout(function(){self.$(\"target\").append(loader)},100);p=new Galleria.Picasa;if(typeof self._options.picasaOptions===\"object\"){p.setOptions(self._options.picasaOptions)}var arg=[];if(picasa[0]==\"useralbum\"){arg=picasa[1].split(\"/\");if(arg.length!=2){Galleria.raise(\"Picasa useralbum not correctly formatted (should be [user]/[album])\");return}}else{arg.push(picasa[1])}arg.push(function(data){self._data=data;loader.remove();self.trigger(Galleria.DATA);p.options.complete.call(p,data)});p[picasa[0]].apply(p,arg)}else{load.apply(this,args)}}})(jQuery);</this){n=sz[i-1];return>","site":{"data":{}},"excerpt":"","more":"(function($){Galleria.requires(1.25,\"The Picasa Plugin requires Galleria version 1.2.5 or later.\");var PATH=Galleria.utils.getScriptPath();Galleria.Picasa=function(){this.options={max:30,imageSize:\"medium\",thumbSize:\"thumb\",complete:function(){}}};Galleria.Picasa.prototype={constructor:Galleria.Picasa,search:function(phrase,callback){return this._call(\"search\",\"all\",{q:phrase},callback)},user:function(username,callback){return this._call(\"user\",\"user/\"+username,callback)},useralbum:function(username,album,callback){return this._call(\"useralbum\",\"user/\"+username+\"/album/\"+album,callback)},setOptions:function(options){$.extend(this.options,options);return this},_call:function(type,url,params,callback){url=\"https://picasaweb.google.com/data/feed/api/\"+url+\"?\";if(typeof params==\"function\"){callback=params;params={}}var self=this;params=$.extend({kind:\"photo\",access:\"public\",\"max-results\":this.options.max,thumbsize:this._getSizes().join(\",\"),alt:\"json-in-script\",callback:\"?\"},params);$.each(params,function(key,value){url+=\"&\"+key+\"=\"+value});var data=false;Galleria.utils.wait({until:function(){return data},success:function(){self._parse.call(self,data.feed.entry,callback)},error:function(){var msg=\"\";if(type==\"user\"){msg=\"user not found.\"}else if(type==\"useralbum\"){msg=\"album or user not found.\"}Galleria.raise(\"Picasa request failed\"+(msg?\": \"+msg:\".\"))},timeout:5e3});$.getJSON(url,function(result){data=result});return self},_getSizes:function(){var self=this,norm={small:\"72c\",thumb:\"104u\",medium:\"640u\",big:\"1024u\",original:\"1600u\"},op=self.options,t={},n,sz=[32,48,64,72,94,104,110,128,144,150,160,200,220,288,320,400,512,576,640,720,800,912,1024,1152,1280,1440,1600];$([\"thumbSize\",\"imageSize\"]).each(function(){if(op[this]in norm){t[this]=norm[op[this]]}else{n=Galleria.utils.parseValue(op[this]);if(n>1600){n=1600}else{$.each(sz,function(i){if(n<this){n=sz[i-1];return false}})}t[this]=\"n}});return[t.thumbSize,t.imageSize,\"1280u\"]},_parse:function(data,callback){var\" self=\"this,gallery=[],img;$.each(data,function(){img=this.media$group.media$thumbnail;gallery.push({thumb:img[0].url,image:img[1].url,big:img[2].url,title:this.summary.$t})});callback.call(this,gallery)}};var\" load=\"Galleria.prototype.load;Galleria.prototype.load=function(){if(arguments.length||typeof\" this._options.picasa!=\"=\"string\"){load.apply(this,Galleria.utils.array(arguments));return}var\" opts.loader!=\"=\"undefined\"?opts.loader:$(\"<div\">\").css({width:48,height:48,opacity:.7,background:\"#000 url(\"+PATH+\"loader.gif) no-repeat 50% 50%\"});if(picasa.length){if(typeof Galleria.Picasa.prototype[picasa[0]]!==\"function\"){Galleria.raise(picasa[0]+\" method not found in Picasa plugin\");return load.apply(this,args)}if(!picasa[1]){Galleria.raise(\"No picasa argument found\");return load.apply(this,args)}window.setTimeout(function(){self.$(\"target\").append(loader)},100);p=new Galleria.Picasa;if(typeof self._options.picasaOptions===\"object\"){p.setOptions(self._options.picasaOptions)}var arg=[];if(picasa[0]==\"useralbum\"){arg=picasa[1].split(\"/\");if(arg.length!=2){Galleria.raise(\"Picasa useralbum not correctly formatted (should be [user]/[album])\");return}}else{arg.push(picasa[1])}arg.push(function(data){self._data=data;loader.remove();self.trigger(Galleria.DATA);p.options.complete.call(p,data)});p[picasa[0]].apply(p,arg)}else{load.apply(this,args)}}})(jQuery);</this){n=sz[i-1];return>"},{"_content":"/* Galleria Classic Theme 2016-09-03 | https://raw.github.com/worseisbetter/galleria/master/LICENSE | (c) worse is better */\n\n#galleria-loader{height:1px!important}\n\n.galleria-theme-classic {\n    position: relative;\n    overflow: hidden;\n    background: #000;\n}\n.galleria-theme-classic img {\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n.galleria-theme-classic .galleria-stage {\n    position: absolute;\n    top: 10px;\n    bottom: 60px;\n    left: 10px;\n    right: 10px;\n    overflow:hidden;\n}\n.galleria-theme-classic .galleria-thumbnails-container {\n    height: 50px;\n    bottom: 0;\n    position: absolute;\n    left: 10px;\n    right: 10px;\n    z-index: 2;\n}\n.galleria-theme-classic .galleria-carousel .galleria-thumbnails-list {\n    margin-left: 30px;\n    margin-right: 30px;\n}\n.galleria-theme-classic .galleria-thumbnails .galleria-image {\n    height: 40px;\n    width: 60px;\n    background: #000;\n    margin: 0 5px 0 0;\n    border: 1px solid #000;\n    float: left;\n    cursor: pointer;\n}\n.galleria-theme-classic .galleria-counter {\n    position: absolute;\n    bottom: 10px;\n    left: 10px;\n    text-align: right;\n    color: #fff;\n    font: normal 11px/1 arial,sans-serif;\n    z-index: 1;\n}\n.galleria-theme-classic .galleria-loader {\n    background: #000;\n    width: 20px;\n    height: 20px;\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    z-index: 2;\n    display: none;\n    background: url(classic-loader.gif) no-repeat 2px 2px;\n}\n.galleria-theme-classic .galleria-info {\n    width: 50%;\n    top: 15px;\n    left: 15px;\n    z-index: 2;\n    position: absolute;\n}\n.galleria-theme-classic .galleria-info-text {\n    background-color: #000;\n    padding: 12px;\n    display: none;\n    /* IE7 */ zoom:1;\n}\n.galleria-theme-classic .galleria-info-title {\n    font: bold 12px/1.1 arial,sans-serif;\n    margin: 0;\n    color: #fff;\n    margin-bottom: 7px;\n}\n.galleria-theme-classic .galleria-info-description {\n    font: italic 12px/1.4 georgia,serif;\n    margin: 0;\n    color: #bbb;\n}\n.galleria-theme-classic .galleria-info-close {\n    width: 9px;\n    height: 9px;\n    position: absolute;\n    top: 5px;\n    right: 5px;\n    background-position: -753px -11px;\n    opacity: .5;\n    filter: alpha(opacity=50);\n    cursor: pointer;\n    display: none;\n}\n.galleria-theme-classic .notouch .galleria-info-close:hover{\n    opacity:1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic .touch .galleria-info-close:active{\n    opacity:1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic .galleria-info-link {\n    background-position: -669px -5px;\n    opacity: .7;\n    filter: alpha(opacity=70);\n    position: absolute;\n    width: 20px;\n    height: 20px;\n    cursor: pointer;\n    background-color: #000;\n}\n.galleria-theme-classic.notouch .galleria-info-link:hover {\n    opacity: 1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic.touch .galleria-info-link:active {\n    opacity: 1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic .galleria-image-nav {\n    position: absolute;\n    top: 50%;\n    margin-top: -62px;\n    width: 100%;\n    height: 62px;\n    left: 0;\n}\n.galleria-theme-classic .galleria-image-nav-left,\n.galleria-theme-classic .galleria-image-nav-right {\n    opacity: .3;\n    filter: alpha(opacity=30);\n    cursor: pointer;\n    width: 62px;\n    height: 124px;\n    position: absolute;\n    left: 10px;\n    z-index: 2;\n    background-position: 0 46px;\n}\n.galleria-theme-classic .galleria-image-nav-right {\n    left: auto;\n    right: 10px;\n    background-position: -254px 46px;\n    z-index: 2;\n}\n.galleria-theme-classic.notouch .galleria-image-nav-left:hover,\n.galleria-theme-classic.notouch .galleria-image-nav-right:hover {\n    opacity: 1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic.touch .galleria-image-nav-left:active,\n.galleria-theme-classic.touch .galleria-image-nav-right:active {\n    opacity: 1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic .galleria-thumb-nav-left,\n.galleria-theme-classic .galleria-thumb-nav-right {\n    cursor: pointer;\n    display: none;\n    background-position: -495px 5px;\n    position: absolute;\n    left: 0;\n    top: 0;\n    height: 40px;\n    width: 23px;\n    z-index: 3;\n    opacity: .8;\n    filter: alpha(opacity=80);\n}\n.galleria-theme-classic .galleria-thumb-nav-right {\n    background-position: -578px 5px;\n    border-right: none;\n    right: 0;\n    left: auto;\n}\n.galleria-theme-classic .galleria-thumbnails-container .disabled {\n    opacity: .2;\n    filter: alpha(opacity=20);\n    cursor: default;\n}\n.galleria-theme-classic.notouch .galleria-thumb-nav-left:hover,\n.galleria-theme-classic.notouch .galleria-thumb-nav-right:hover {\n    opacity: 1;\n    filter: alpha(opacity=100);\n    background-color: #111;\n}\n.galleria-theme-classic.touch .galleria-thumb-nav-left:active,\n.galleria-theme-classic.touch .galleria-thumb-nav-right:active {\n    opacity: 1;\n    filter: alpha(opacity=100);\n    background-color: #111;\n}\n.galleria-theme-classic.notouch .galleria-thumbnails-container .disabled:hover {\n    opacity: .2;\n    filter: alpha(opacity=20);\n    background-color: transparent;\n}\n\n.galleria-theme-classic .galleria-carousel .galleria-thumb-nav-left,\n.galleria-theme-classic .galleria-carousel .galleria-thumb-nav-right {\n    display: block;\n}\n.galleria-theme-classic .galleria-thumb-nav-left,\n.galleria-theme-classic .galleria-thumb-nav-right,\n.galleria-theme-classic .galleria-info-link,\n.galleria-theme-classic .galleria-info-close,\n.galleria-theme-classic .galleria-image-nav-left,\n.galleria-theme-classic .galleria-image-nav-right {\n    background-image: url(classic-map.png);\n    background-repeat: no-repeat;\n}\n.galleria-theme-classic.galleria-container.videoplay .galleria-info,\n.galleria-theme-classic.galleria-container.videoplay .galleria-counter{ display:none!important; }\n","source":"galleria/themes/classic/galleria.classic.css","raw":"/* Galleria Classic Theme 2016-09-03 | https://raw.github.com/worseisbetter/galleria/master/LICENSE | (c) worse is better */\n\n#galleria-loader{height:1px!important}\n\n.galleria-theme-classic {\n    position: relative;\n    overflow: hidden;\n    background: #000;\n}\n.galleria-theme-classic img {\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n.galleria-theme-classic .galleria-stage {\n    position: absolute;\n    top: 10px;\n    bottom: 60px;\n    left: 10px;\n    right: 10px;\n    overflow:hidden;\n}\n.galleria-theme-classic .galleria-thumbnails-container {\n    height: 50px;\n    bottom: 0;\n    position: absolute;\n    left: 10px;\n    right: 10px;\n    z-index: 2;\n}\n.galleria-theme-classic .galleria-carousel .galleria-thumbnails-list {\n    margin-left: 30px;\n    margin-right: 30px;\n}\n.galleria-theme-classic .galleria-thumbnails .galleria-image {\n    height: 40px;\n    width: 60px;\n    background: #000;\n    margin: 0 5px 0 0;\n    border: 1px solid #000;\n    float: left;\n    cursor: pointer;\n}\n.galleria-theme-classic .galleria-counter {\n    position: absolute;\n    bottom: 10px;\n    left: 10px;\n    text-align: right;\n    color: #fff;\n    font: normal 11px/1 arial,sans-serif;\n    z-index: 1;\n}\n.galleria-theme-classic .galleria-loader {\n    background: #000;\n    width: 20px;\n    height: 20px;\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    z-index: 2;\n    display: none;\n    background: url(classic-loader.gif) no-repeat 2px 2px;\n}\n.galleria-theme-classic .galleria-info {\n    width: 50%;\n    top: 15px;\n    left: 15px;\n    z-index: 2;\n    position: absolute;\n}\n.galleria-theme-classic .galleria-info-text {\n    background-color: #000;\n    padding: 12px;\n    display: none;\n    /* IE7 */ zoom:1;\n}\n.galleria-theme-classic .galleria-info-title {\n    font: bold 12px/1.1 arial,sans-serif;\n    margin: 0;\n    color: #fff;\n    margin-bottom: 7px;\n}\n.galleria-theme-classic .galleria-info-description {\n    font: italic 12px/1.4 georgia,serif;\n    margin: 0;\n    color: #bbb;\n}\n.galleria-theme-classic .galleria-info-close {\n    width: 9px;\n    height: 9px;\n    position: absolute;\n    top: 5px;\n    right: 5px;\n    background-position: -753px -11px;\n    opacity: .5;\n    filter: alpha(opacity=50);\n    cursor: pointer;\n    display: none;\n}\n.galleria-theme-classic .notouch .galleria-info-close:hover{\n    opacity:1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic .touch .galleria-info-close:active{\n    opacity:1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic .galleria-info-link {\n    background-position: -669px -5px;\n    opacity: .7;\n    filter: alpha(opacity=70);\n    position: absolute;\n    width: 20px;\n    height: 20px;\n    cursor: pointer;\n    background-color: #000;\n}\n.galleria-theme-classic.notouch .galleria-info-link:hover {\n    opacity: 1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic.touch .galleria-info-link:active {\n    opacity: 1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic .galleria-image-nav {\n    position: absolute;\n    top: 50%;\n    margin-top: -62px;\n    width: 100%;\n    height: 62px;\n    left: 0;\n}\n.galleria-theme-classic .galleria-image-nav-left,\n.galleria-theme-classic .galleria-image-nav-right {\n    opacity: .3;\n    filter: alpha(opacity=30);\n    cursor: pointer;\n    width: 62px;\n    height: 124px;\n    position: absolute;\n    left: 10px;\n    z-index: 2;\n    background-position: 0 46px;\n}\n.galleria-theme-classic .galleria-image-nav-right {\n    left: auto;\n    right: 10px;\n    background-position: -254px 46px;\n    z-index: 2;\n}\n.galleria-theme-classic.notouch .galleria-image-nav-left:hover,\n.galleria-theme-classic.notouch .galleria-image-nav-right:hover {\n    opacity: 1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic.touch .galleria-image-nav-left:active,\n.galleria-theme-classic.touch .galleria-image-nav-right:active {\n    opacity: 1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic .galleria-thumb-nav-left,\n.galleria-theme-classic .galleria-thumb-nav-right {\n    cursor: pointer;\n    display: none;\n    background-position: -495px 5px;\n    position: absolute;\n    left: 0;\n    top: 0;\n    height: 40px;\n    width: 23px;\n    z-index: 3;\n    opacity: .8;\n    filter: alpha(opacity=80);\n}\n.galleria-theme-classic .galleria-thumb-nav-right {\n    background-position: -578px 5px;\n    border-right: none;\n    right: 0;\n    left: auto;\n}\n.galleria-theme-classic .galleria-thumbnails-container .disabled {\n    opacity: .2;\n    filter: alpha(opacity=20);\n    cursor: default;\n}\n.galleria-theme-classic.notouch .galleria-thumb-nav-left:hover,\n.galleria-theme-classic.notouch .galleria-thumb-nav-right:hover {\n    opacity: 1;\n    filter: alpha(opacity=100);\n    background-color: #111;\n}\n.galleria-theme-classic.touch .galleria-thumb-nav-left:active,\n.galleria-theme-classic.touch .galleria-thumb-nav-right:active {\n    opacity: 1;\n    filter: alpha(opacity=100);\n    background-color: #111;\n}\n.galleria-theme-classic.notouch .galleria-thumbnails-container .disabled:hover {\n    opacity: .2;\n    filter: alpha(opacity=20);\n    background-color: transparent;\n}\n\n.galleria-theme-classic .galleria-carousel .galleria-thumb-nav-left,\n.galleria-theme-classic .galleria-carousel .galleria-thumb-nav-right {\n    display: block;\n}\n.galleria-theme-classic .galleria-thumb-nav-left,\n.galleria-theme-classic .galleria-thumb-nav-right,\n.galleria-theme-classic .galleria-info-link,\n.galleria-theme-classic .galleria-info-close,\n.galleria-theme-classic .galleria-image-nav-left,\n.galleria-theme-classic .galleria-image-nav-right {\n    background-image: url(classic-map.png);\n    background-repeat: no-repeat;\n}\n.galleria-theme-classic.galleria-container.videoplay .galleria-info,\n.galleria-theme-classic.galleria-container.videoplay .galleria-counter{ display:none!important; }\n","date":"2017-06-24T13:46:41.000Z","updated":"2016-09-15T15:53:15.000Z","path":"galleria/themes/classic/galleria.classic.css","layout":"false","title":"","comments":1,"_id":"cj5o1vdpq000mrtwyer6bddsu","content":"/* Galleria Classic Theme 2016-09-03 | https://raw.github.com/worseisbetter/galleria/master/LICENSE | (c) worse is better */\n\n#galleria-loader{height:1px!important}\n\n.galleria-theme-classic {\n    position: relative;\n    overflow: hidden;\n    background: #000;\n}\n.galleria-theme-classic img {\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n.galleria-theme-classic .galleria-stage {\n    position: absolute;\n    top: 10px;\n    bottom: 60px;\n    left: 10px;\n    right: 10px;\n    overflow:hidden;\n}\n.galleria-theme-classic .galleria-thumbnails-container {\n    height: 50px;\n    bottom: 0;\n    position: absolute;\n    left: 10px;\n    right: 10px;\n    z-index: 2;\n}\n.galleria-theme-classic .galleria-carousel .galleria-thumbnails-list {\n    margin-left: 30px;\n    margin-right: 30px;\n}\n.galleria-theme-classic .galleria-thumbnails .galleria-image {\n    height: 40px;\n    width: 60px;\n    background: #000;\n    margin: 0 5px 0 0;\n    border: 1px solid #000;\n    float: left;\n    cursor: pointer;\n}\n.galleria-theme-classic .galleria-counter {\n    position: absolute;\n    bottom: 10px;\n    left: 10px;\n    text-align: right;\n    color: #fff;\n    font: normal 11px/1 arial,sans-serif;\n    z-index: 1;\n}\n.galleria-theme-classic .galleria-loader {\n    background: #000;\n    width: 20px;\n    height: 20px;\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    z-index: 2;\n    display: none;\n    background: url(classic-loader.gif) no-repeat 2px 2px;\n}\n.galleria-theme-classic .galleria-info {\n    width: 50%;\n    top: 15px;\n    left: 15px;\n    z-index: 2;\n    position: absolute;\n}\n.galleria-theme-classic .galleria-info-text {\n    background-color: #000;\n    padding: 12px;\n    display: none;\n    /* IE7 */ zoom:1;\n}\n.galleria-theme-classic .galleria-info-title {\n    font: bold 12px/1.1 arial,sans-serif;\n    margin: 0;\n    color: #fff;\n    margin-bottom: 7px;\n}\n.galleria-theme-classic .galleria-info-description {\n    font: italic 12px/1.4 georgia,serif;\n    margin: 0;\n    color: #bbb;\n}\n.galleria-theme-classic .galleria-info-close {\n    width: 9px;\n    height: 9px;\n    position: absolute;\n    top: 5px;\n    right: 5px;\n    background-position: -753px -11px;\n    opacity: .5;\n    filter: alpha(opacity=50);\n    cursor: pointer;\n    display: none;\n}\n.galleria-theme-classic .notouch .galleria-info-close:hover{\n    opacity:1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic .touch .galleria-info-close:active{\n    opacity:1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic .galleria-info-link {\n    background-position: -669px -5px;\n    opacity: .7;\n    filter: alpha(opacity=70);\n    position: absolute;\n    width: 20px;\n    height: 20px;\n    cursor: pointer;\n    background-color: #000;\n}\n.galleria-theme-classic.notouch .galleria-info-link:hover {\n    opacity: 1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic.touch .galleria-info-link:active {\n    opacity: 1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic .galleria-image-nav {\n    position: absolute;\n    top: 50%;\n    margin-top: -62px;\n    width: 100%;\n    height: 62px;\n    left: 0;\n}\n.galleria-theme-classic .galleria-image-nav-left,\n.galleria-theme-classic .galleria-image-nav-right {\n    opacity: .3;\n    filter: alpha(opacity=30);\n    cursor: pointer;\n    width: 62px;\n    height: 124px;\n    position: absolute;\n    left: 10px;\n    z-index: 2;\n    background-position: 0 46px;\n}\n.galleria-theme-classic .galleria-image-nav-right {\n    left: auto;\n    right: 10px;\n    background-position: -254px 46px;\n    z-index: 2;\n}\n.galleria-theme-classic.notouch .galleria-image-nav-left:hover,\n.galleria-theme-classic.notouch .galleria-image-nav-right:hover {\n    opacity: 1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic.touch .galleria-image-nav-left:active,\n.galleria-theme-classic.touch .galleria-image-nav-right:active {\n    opacity: 1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic .galleria-thumb-nav-left,\n.galleria-theme-classic .galleria-thumb-nav-right {\n    cursor: pointer;\n    display: none;\n    background-position: -495px 5px;\n    position: absolute;\n    left: 0;\n    top: 0;\n    height: 40px;\n    width: 23px;\n    z-index: 3;\n    opacity: .8;\n    filter: alpha(opacity=80);\n}\n.galleria-theme-classic .galleria-thumb-nav-right {\n    background-position: -578px 5px;\n    border-right: none;\n    right: 0;\n    left: auto;\n}\n.galleria-theme-classic .galleria-thumbnails-container .disabled {\n    opacity: .2;\n    filter: alpha(opacity=20);\n    cursor: default;\n}\n.galleria-theme-classic.notouch .galleria-thumb-nav-left:hover,\n.galleria-theme-classic.notouch .galleria-thumb-nav-right:hover {\n    opacity: 1;\n    filter: alpha(opacity=100);\n    background-color: #111;\n}\n.galleria-theme-classic.touch .galleria-thumb-nav-left:active,\n.galleria-theme-classic.touch .galleria-thumb-nav-right:active {\n    opacity: 1;\n    filter: alpha(opacity=100);\n    background-color: #111;\n}\n.galleria-theme-classic.notouch .galleria-thumbnails-container .disabled:hover {\n    opacity: .2;\n    filter: alpha(opacity=20);\n    background-color: transparent;\n}\n\n.galleria-theme-classic .galleria-carousel .galleria-thumb-nav-left,\n.galleria-theme-classic .galleria-carousel .galleria-thumb-nav-right {\n    display: block;\n}\n.galleria-theme-classic .galleria-thumb-nav-left,\n.galleria-theme-classic .galleria-thumb-nav-right,\n.galleria-theme-classic .galleria-info-link,\n.galleria-theme-classic .galleria-info-close,\n.galleria-theme-classic .galleria-image-nav-left,\n.galleria-theme-classic .galleria-image-nav-right {\n    background-image: url(classic-map.png);\n    background-repeat: no-repeat;\n}\n.galleria-theme-classic.galleria-container.videoplay .galleria-info,\n.galleria-theme-classic.galleria-container.videoplay .galleria-counter{ display:none!important; }\n","site":{"data":{}},"excerpt":"","more":"/* Galleria Classic Theme 2016-09-03 | https://raw.github.com/worseisbetter/galleria/master/LICENSE | (c) worse is better */\n\n#galleria-loader{height:1px!important}\n\n.galleria-theme-classic {\n    position: relative;\n    overflow: hidden;\n    background: #000;\n}\n.galleria-theme-classic img {\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n.galleria-theme-classic .galleria-stage {\n    position: absolute;\n    top: 10px;\n    bottom: 60px;\n    left: 10px;\n    right: 10px;\n    overflow:hidden;\n}\n.galleria-theme-classic .galleria-thumbnails-container {\n    height: 50px;\n    bottom: 0;\n    position: absolute;\n    left: 10px;\n    right: 10px;\n    z-index: 2;\n}\n.galleria-theme-classic .galleria-carousel .galleria-thumbnails-list {\n    margin-left: 30px;\n    margin-right: 30px;\n}\n.galleria-theme-classic .galleria-thumbnails .galleria-image {\n    height: 40px;\n    width: 60px;\n    background: #000;\n    margin: 0 5px 0 0;\n    border: 1px solid #000;\n    float: left;\n    cursor: pointer;\n}\n.galleria-theme-classic .galleria-counter {\n    position: absolute;\n    bottom: 10px;\n    left: 10px;\n    text-align: right;\n    color: #fff;\n    font: normal 11px/1 arial,sans-serif;\n    z-index: 1;\n}\n.galleria-theme-classic .galleria-loader {\n    background: #000;\n    width: 20px;\n    height: 20px;\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    z-index: 2;\n    display: none;\n    background: url(classic-loader.gif) no-repeat 2px 2px;\n}\n.galleria-theme-classic .galleria-info {\n    width: 50%;\n    top: 15px;\n    left: 15px;\n    z-index: 2;\n    position: absolute;\n}\n.galleria-theme-classic .galleria-info-text {\n    background-color: #000;\n    padding: 12px;\n    display: none;\n    /* IE7 */ zoom:1;\n}\n.galleria-theme-classic .galleria-info-title {\n    font: bold 12px/1.1 arial,sans-serif;\n    margin: 0;\n    color: #fff;\n    margin-bottom: 7px;\n}\n.galleria-theme-classic .galleria-info-description {\n    font: italic 12px/1.4 georgia,serif;\n    margin: 0;\n    color: #bbb;\n}\n.galleria-theme-classic .galleria-info-close {\n    width: 9px;\n    height: 9px;\n    position: absolute;\n    top: 5px;\n    right: 5px;\n    background-position: -753px -11px;\n    opacity: .5;\n    filter: alpha(opacity=50);\n    cursor: pointer;\n    display: none;\n}\n.galleria-theme-classic .notouch .galleria-info-close:hover{\n    opacity:1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic .touch .galleria-info-close:active{\n    opacity:1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic .galleria-info-link {\n    background-position: -669px -5px;\n    opacity: .7;\n    filter: alpha(opacity=70);\n    position: absolute;\n    width: 20px;\n    height: 20px;\n    cursor: pointer;\n    background-color: #000;\n}\n.galleria-theme-classic.notouch .galleria-info-link:hover {\n    opacity: 1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic.touch .galleria-info-link:active {\n    opacity: 1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic .galleria-image-nav {\n    position: absolute;\n    top: 50%;\n    margin-top: -62px;\n    width: 100%;\n    height: 62px;\n    left: 0;\n}\n.galleria-theme-classic .galleria-image-nav-left,\n.galleria-theme-classic .galleria-image-nav-right {\n    opacity: .3;\n    filter: alpha(opacity=30);\n    cursor: pointer;\n    width: 62px;\n    height: 124px;\n    position: absolute;\n    left: 10px;\n    z-index: 2;\n    background-position: 0 46px;\n}\n.galleria-theme-classic .galleria-image-nav-right {\n    left: auto;\n    right: 10px;\n    background-position: -254px 46px;\n    z-index: 2;\n}\n.galleria-theme-classic.notouch .galleria-image-nav-left:hover,\n.galleria-theme-classic.notouch .galleria-image-nav-right:hover {\n    opacity: 1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic.touch .galleria-image-nav-left:active,\n.galleria-theme-classic.touch .galleria-image-nav-right:active {\n    opacity: 1;\n    filter: alpha(opacity=100);\n}\n.galleria-theme-classic .galleria-thumb-nav-left,\n.galleria-theme-classic .galleria-thumb-nav-right {\n    cursor: pointer;\n    display: none;\n    background-position: -495px 5px;\n    position: absolute;\n    left: 0;\n    top: 0;\n    height: 40px;\n    width: 23px;\n    z-index: 3;\n    opacity: .8;\n    filter: alpha(opacity=80);\n}\n.galleria-theme-classic .galleria-thumb-nav-right {\n    background-position: -578px 5px;\n    border-right: none;\n    right: 0;\n    left: auto;\n}\n.galleria-theme-classic .galleria-thumbnails-container .disabled {\n    opacity: .2;\n    filter: alpha(opacity=20);\n    cursor: default;\n}\n.galleria-theme-classic.notouch .galleria-thumb-nav-left:hover,\n.galleria-theme-classic.notouch .galleria-thumb-nav-right:hover {\n    opacity: 1;\n    filter: alpha(opacity=100);\n    background-color: #111;\n}\n.galleria-theme-classic.touch .galleria-thumb-nav-left:active,\n.galleria-theme-classic.touch .galleria-thumb-nav-right:active {\n    opacity: 1;\n    filter: alpha(opacity=100);\n    background-color: #111;\n}\n.galleria-theme-classic.notouch .galleria-thumbnails-container .disabled:hover {\n    opacity: .2;\n    filter: alpha(opacity=20);\n    background-color: transparent;\n}\n\n.galleria-theme-classic .galleria-carousel .galleria-thumb-nav-left,\n.galleria-theme-classic .galleria-carousel .galleria-thumb-nav-right {\n    display: block;\n}\n.galleria-theme-classic .galleria-thumb-nav-left,\n.galleria-theme-classic .galleria-thumb-nav-right,\n.galleria-theme-classic .galleria-info-link,\n.galleria-theme-classic .galleria-info-close,\n.galleria-theme-classic .galleria-image-nav-left,\n.galleria-theme-classic .galleria-image-nav-right {\n    background-image: url(classic-map.png);\n    background-repeat: no-repeat;\n}\n.galleria-theme-classic.galleria-container.videoplay .galleria-info,\n.galleria-theme-classic.galleria-container.videoplay .galleria-counter{ display:none!important; }\n"},{"_content":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <title>Galleria Flickr Plugin</title>\n        <style>\n\n            /* Demo styles */\n            html,body{background:#222;margin:0;}\n            body{border-top:4px solid #000;}\n            .content{color:#777;font:12px/1.4 \"helvetica neue\",arial,sans-serif;width:620px;margin:20px auto;}\n            h1{font-size:12px;font-weight:normal;color:#ddd;margin:0;}\n            p{margin:0 0 20px}\n            a {color:#22BCB9;text-decoration:none;}\n            .cred{margin-top:20px;font-size:11px;}\n\n            /* This rule is read by Galleria to define the gallery height: */\n            #galleria{height:320px;}\n\n        </style>\n\n        <!-- load jQuery -->\n        <script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js\"></script>\n\n        <!-- load Galleria -->\n        <script src=\"../../galleria-1.4.5.min.js\"></script>\n\n        <!-- load picasa plugin -->\n        <script src=\"galleria.picasa.min.js\"></script>\n\n    </head>\n<body>\n    <div class=\"content\">\n        <h1>Galleria Picasa Plugin Demo</h1>\n        <p>Demonstrating a basic gallery example with photos from a Picasa album.</p>\n\n        <!-- Adding gallery images. This is just a container for the dynamic picasa images -->\n\n        <div id=\"galleria\"></div>\n\n        <p class=\"cred\">Made by <a href=\"http://galleria.io\">Galleria</a>.</p>\n    </div>\n    <script>\n    $(function() {\n        // Load the classic theme\n        Galleria.loadTheme('../../themes/classic/galleria.classic.min.js');\n\n        Galleria.run('#galleria', {\n            // The user & album. This example fetches the album \"Demo\" from the user \"galleriajs\"\n            picasa: 'useralbum:galleriajs/Demo'\n        });\n    });\n    </script>\n    </body>\n</html>","source":"galleria/plugins/picasa/picasa-demo.html","raw":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <title>Galleria Flickr Plugin</title>\n        <style>\n\n            /* Demo styles */\n            html,body{background:#222;margin:0;}\n            body{border-top:4px solid #000;}\n            .content{color:#777;font:12px/1.4 \"helvetica neue\",arial,sans-serif;width:620px;margin:20px auto;}\n            h1{font-size:12px;font-weight:normal;color:#ddd;margin:0;}\n            p{margin:0 0 20px}\n            a {color:#22BCB9;text-decoration:none;}\n            .cred{margin-top:20px;font-size:11px;}\n\n            /* This rule is read by Galleria to define the gallery height: */\n            #galleria{height:320px;}\n\n        </style>\n\n        <!-- load jQuery -->\n        <script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js\"></script>\n\n        <!-- load Galleria -->\n        <script src=\"../../galleria-1.4.5.min.js\"></script>\n\n        <!-- load picasa plugin -->\n        <script src=\"galleria.picasa.min.js\"></script>\n\n    </head>\n<body>\n    <div class=\"content\">\n        <h1>Galleria Picasa Plugin Demo</h1>\n        <p>Demonstrating a basic gallery example with photos from a Picasa album.</p>\n\n        <!-- Adding gallery images. This is just a container for the dynamic picasa images -->\n\n        <div id=\"galleria\"></div>\n\n        <p class=\"cred\">Made by <a href=\"http://galleria.io\">Galleria</a>.</p>\n    </div>\n    <script>\n    $(function() {\n        // Load the classic theme\n        Galleria.loadTheme('../../themes/classic/galleria.classic.min.js');\n\n        Galleria.run('#galleria', {\n            // The user & album. This example fetches the album \"Demo\" from the user \"galleriajs\"\n            picasa: 'useralbum:galleriajs/Demo'\n        });\n    });\n    </script>\n    </body>\n</html>","date":"2017-06-24T13:46:41.000Z","updated":"2016-09-15T15:53:15.000Z","path":"galleria/plugins/picasa/picasa-demo.html","title":"","comments":1,"layout":"page","_id":"cj5o1vdpq000nrtwyunhxvqj8","content":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <title>Galleria Flickr Plugin</title>\n        <style>\n\n            /* Demo styles */\n            html,body{background:#222;margin:0;}\n            body{border-top:4px solid #000;}\n            .content{color:#777;font:12px/1.4 \"helvetica neue\",arial,sans-serif;width:620px;margin:20px auto;}\n            h1{font-size:12px;font-weight:normal;color:#ddd;margin:0;}\n            p{margin:0 0 20px}\n            a {color:#22BCB9;text-decoration:none;}\n            .cred{margin-top:20px;font-size:11px;}\n\n            /* This rule is read by Galleria to define the gallery height: */\n            #galleria{height:320px;}\n\n        </style>\n\n        <!-- load jQuery -->\n        <script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js\"></script>\n\n        <!-- load Galleria -->\n        <script src=\"../../galleria-1.4.5.min.js\"></script>\n\n        <!-- load picasa plugin -->\n        <script src=\"galleria.picasa.min.js\"></script>\n\n    </head>\n<body>\n    <div class=\"content\">\n        <h1>Galleria Picasa Plugin Demo</h1>\n        <p>Demonstrating a basic gallery example with photos from a Picasa album.</p>\n\n        <!-- Adding gallery images. This is just a container for the dynamic picasa images -->\n\n        <div id=\"galleria\"></div>\n\n        <p class=\"cred\">Made by <a href=\"http://galleria.io\" target=\"_blank\" rel=\"external\">Galleria</a>.</p>\n    </div>\n    <script>\n    $(function() {\n        // Load the classic theme\n        Galleria.loadTheme('../../themes/classic/galleria.classic.min.js');\n\n        Galleria.run('#galleria', {\n            // The user & album. This example fetches the album \"Demo\" from the user \"galleriajs\"\n            picasa: 'useralbum:galleriajs/Demo'\n        });\n    });\n    </script>\n    </body>\n</html>","site":{"data":{}},"excerpt":"","more":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <title>Galleria Flickr Plugin</title>\n        <style>\n\n            /* Demo styles */\n            html,body{background:#222;margin:0;}\n            body{border-top:4px solid #000;}\n            .content{color:#777;font:12px/1.4 \"helvetica neue\",arial,sans-serif;width:620px;margin:20px auto;}\n            h1{font-size:12px;font-weight:normal;color:#ddd;margin:0;}\n            p{margin:0 0 20px}\n            a {color:#22BCB9;text-decoration:none;}\n            .cred{margin-top:20px;font-size:11px;}\n\n            /* This rule is read by Galleria to define the gallery height: */\n            #galleria{height:320px;}\n\n        </style>\n\n        <!-- load jQuery -->\n        <script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js\"></script>\n\n        <!-- load Galleria -->\n        <script src=\"../../galleria-1.4.5.min.js\"></script>\n\n        <!-- load picasa plugin -->\n        <script src=\"galleria.picasa.min.js\"></script>\n\n    </head>\n<body>\n    <div class=\"content\">\n        <h1>Galleria Picasa Plugin Demo</h1>\n        <p>Demonstrating a basic gallery example with photos from a Picasa album.</p>\n\n        <!-- Adding gallery images. This is just a container for the dynamic picasa images -->\n\n        <div id=\"galleria\"></div>\n\n        <p class=\"cred\">Made by <a href=\"http://galleria.io\" target=\"_blank\" rel=\"external\">Galleria</a>.</p>\n    </div>\n    <script>\n    $(function() {\n        // Load the classic theme\n        Galleria.loadTheme('../../themes/classic/galleria.classic.min.js');\n\n        Galleria.run('#galleria', {\n            // The user & album. This example fetches the album \"Demo\" from the user \"galleriajs\"\n            picasa: 'useralbum:galleriajs/Demo'\n        });\n    });\n    </script>\n    </body>\n</html>"},{"_content":"(function($){Galleria.addTheme({name:\"classic\",author:\"Galleria\",css:\"galleria.classic.css\",defaults:{transition:\"slide\",thumbCrop:\"height\",_toggleInfo:true},init:function(options){Galleria.requires(1.4,\"This version of Classic theme requires Galleria 1.4 or later\");this.addElement(\"info-link\",\"info-close\");this.append({info:[\"info-link\",\"info-close\"]});var info=this.$(\"info-link,info-close,info-text\"),touch=Galleria.TOUCH;this.$(\"loader,counter\").show().css(\"opacity\",.4);if(!touch){this.addIdleState(this.get(\"image-nav-left\"),{left:-50});this.addIdleState(this.get(\"image-nav-right\"),{right:-50});this.addIdleState(this.get(\"counter\"),{opacity:0})}if(options._toggleInfo===true){info.bind(\"click:fast\",function(){info.toggle()})}else{info.show();this.$(\"info-link, info-close\").hide()}this.bind(\"thumbnail\",function(e){if(!touch){$(e.thumbTarget).css(\"opacity\",.6).parent().hover(function(){$(this).not(\".active\").children().stop().fadeTo(100,1)},function(){$(this).not(\".active\").children().stop().fadeTo(400,.6)});if(e.index===this.getIndex()){$(e.thumbTarget).css(\"opacity\",1)}}else{$(e.thumbTarget).css(\"opacity\",this.getIndex()?1:.6).bind(\"click:fast\",function(){$(this).css(\"opacity\",1).parent().siblings().children().css(\"opacity\",.6)})}});var activate=function(e){$(e.thumbTarget).css(\"opacity\",1).parent().siblings().children().css(\"opacity\",.6)};this.bind(\"loadstart\",function(e){if(!e.cached){this.$(\"loader\").show().fadeTo(200,.4)}window.setTimeout(function(){activate(e)},touch?300:0);this.$(\"info\").toggle(this.hasInfo())});this.bind(\"loadfinish\",function(e){this.$(\"loader\").fadeOut(200)})}})})(jQuery);","source":"galleria/themes/classic/galleria.classic.min.js","raw":"(function($){Galleria.addTheme({name:\"classic\",author:\"Galleria\",css:\"galleria.classic.css\",defaults:{transition:\"slide\",thumbCrop:\"height\",_toggleInfo:true},init:function(options){Galleria.requires(1.4,\"This version of Classic theme requires Galleria 1.4 or later\");this.addElement(\"info-link\",\"info-close\");this.append({info:[\"info-link\",\"info-close\"]});var info=this.$(\"info-link,info-close,info-text\"),touch=Galleria.TOUCH;this.$(\"loader,counter\").show().css(\"opacity\",.4);if(!touch){this.addIdleState(this.get(\"image-nav-left\"),{left:-50});this.addIdleState(this.get(\"image-nav-right\"),{right:-50});this.addIdleState(this.get(\"counter\"),{opacity:0})}if(options._toggleInfo===true){info.bind(\"click:fast\",function(){info.toggle()})}else{info.show();this.$(\"info-link, info-close\").hide()}this.bind(\"thumbnail\",function(e){if(!touch){$(e.thumbTarget).css(\"opacity\",.6).parent().hover(function(){$(this).not(\".active\").children().stop().fadeTo(100,1)},function(){$(this).not(\".active\").children().stop().fadeTo(400,.6)});if(e.index===this.getIndex()){$(e.thumbTarget).css(\"opacity\",1)}}else{$(e.thumbTarget).css(\"opacity\",this.getIndex()?1:.6).bind(\"click:fast\",function(){$(this).css(\"opacity\",1).parent().siblings().children().css(\"opacity\",.6)})}});var activate=function(e){$(e.thumbTarget).css(\"opacity\",1).parent().siblings().children().css(\"opacity\",.6)};this.bind(\"loadstart\",function(e){if(!e.cached){this.$(\"loader\").show().fadeTo(200,.4)}window.setTimeout(function(){activate(e)},touch?300:0);this.$(\"info\").toggle(this.hasInfo())});this.bind(\"loadfinish\",function(e){this.$(\"loader\").fadeOut(200)})}})})(jQuery);","date":"2017-06-24T13:46:41.000Z","updated":"2016-09-15T15:53:15.000Z","path":"galleria/themes/classic/galleria.classic.min.js","layout":"false","title":"","comments":1,"_id":"cj5o1vdps000ortwys888oa7q","content":"(function($){Galleria.addTheme({name:\"classic\",author:\"Galleria\",css:\"galleria.classic.css\",defaults:{transition:\"slide\",thumbCrop:\"height\",_toggleInfo:true},init:function(options){Galleria.requires(1.4,\"This version of Classic theme requires Galleria 1.4 or later\");this.addElement(\"info-link\",\"info-close\");this.append({info:[\"info-link\",\"info-close\"]});var info=this.$(\"info-link,info-close,info-text\"),touch=Galleria.TOUCH;this.$(\"loader,counter\").show().css(\"opacity\",.4);if(!touch){this.addIdleState(this.get(\"image-nav-left\"),{left:-50});this.addIdleState(this.get(\"image-nav-right\"),{right:-50});this.addIdleState(this.get(\"counter\"),{opacity:0})}if(options._toggleInfo===true){info.bind(\"click:fast\",function(){info.toggle()})}else{info.show();this.$(\"info-link, info-close\").hide()}this.bind(\"thumbnail\",function(e){if(!touch){$(e.thumbTarget).css(\"opacity\",.6).parent().hover(function(){$(this).not(\".active\").children().stop().fadeTo(100,1)},function(){$(this).not(\".active\").children().stop().fadeTo(400,.6)});if(e.index===this.getIndex()){$(e.thumbTarget).css(\"opacity\",1)}}else{$(e.thumbTarget).css(\"opacity\",this.getIndex()?1:.6).bind(\"click:fast\",function(){$(this).css(\"opacity\",1).parent().siblings().children().css(\"opacity\",.6)})}});var activate=function(e){$(e.thumbTarget).css(\"opacity\",1).parent().siblings().children().css(\"opacity\",.6)};this.bind(\"loadstart\",function(e){if(!e.cached){this.$(\"loader\").show().fadeTo(200,.4)}window.setTimeout(function(){activate(e)},touch?300:0);this.$(\"info\").toggle(this.hasInfo())});this.bind(\"loadfinish\",function(e){this.$(\"loader\").fadeOut(200)})}})})(jQuery);","site":{"data":{}},"excerpt":"","more":"(function($){Galleria.addTheme({name:\"classic\",author:\"Galleria\",css:\"galleria.classic.css\",defaults:{transition:\"slide\",thumbCrop:\"height\",_toggleInfo:true},init:function(options){Galleria.requires(1.4,\"This version of Classic theme requires Galleria 1.4 or later\");this.addElement(\"info-link\",\"info-close\");this.append({info:[\"info-link\",\"info-close\"]});var info=this.$(\"info-link,info-close,info-text\"),touch=Galleria.TOUCH;this.$(\"loader,counter\").show().css(\"opacity\",.4);if(!touch){this.addIdleState(this.get(\"image-nav-left\"),{left:-50});this.addIdleState(this.get(\"image-nav-right\"),{right:-50});this.addIdleState(this.get(\"counter\"),{opacity:0})}if(options._toggleInfo===true){info.bind(\"click:fast\",function(){info.toggle()})}else{info.show();this.$(\"info-link, info-close\").hide()}this.bind(\"thumbnail\",function(e){if(!touch){$(e.thumbTarget).css(\"opacity\",.6).parent().hover(function(){$(this).not(\".active\").children().stop().fadeTo(100,1)},function(){$(this).not(\".active\").children().stop().fadeTo(400,.6)});if(e.index===this.getIndex()){$(e.thumbTarget).css(\"opacity\",1)}}else{$(e.thumbTarget).css(\"opacity\",this.getIndex()?1:.6).bind(\"click:fast\",function(){$(this).css(\"opacity\",1).parent().siblings().children().css(\"opacity\",.6)})}});var activate=function(e){$(e.thumbTarget).css(\"opacity\",1).parent().siblings().children().css(\"opacity\",.6)};this.bind(\"loadstart\",function(e){if(!e.cached){this.$(\"loader\").show().fadeTo(200,.4)}window.setTimeout(function(){activate(e)},touch?300:0);this.$(\"info\").toggle(this.hasInfo())});this.bind(\"loadfinish\",function(e){this.$(\"loader\").fadeOut(200)})}})})(jQuery);"}],"Post":[{"title":"BetterButter","subtitle":"User Interface and User Experience Intern.","cover_index":"/images/posts/betterbutter_cover.jpg","live_preview":"http://www.betterbutter.in","project_duration":"June - July 2015.","date":"2016-04-30T12:19:32.000Z","cover_detail":"/images/betterbutter/cover_detail.png","_content":"\n## About BetterButter\nBetterButter is a social discovery platform for recipes. The New Delhi based startup allows users to share recipes from family classics to their own inventions and discover new recipes from households across India and also from celebrity chefs.\n\n## Idea\n\nThrough market research, the founders came to the conclusion that food and beverages is the second-most searched category by Indian women, with recipes topping the search. They also found that India is the world's largest consumer of 'recipe content' on YouTube. Up until now, the recipe space in India has remained fragmented across a variety of blogs, Facebook groups, and YouTube channels. BetterButter intends to change that and wants to become the 'home for recipes' in India.\n\n## Recommendation\n\n{% blockquote Niyaz Laiq, - Co-Founder at BetterButter.%}\nPrastut worked with BetterButter from 1 June 2015 to 31 July 2015. Prastut joined at a critical phase for us, five weeks before we were due to launch, at a time when our website was still under development. Whilst we had senior developers building our website, we lacked a dedicated UI/UX resource at the time of his joining. Initial feedback from early influencer's and bloggers in the Indian food community has been very positive, and Prastut has played an important role in this despite his young age. A startup environment requires original thinking and a self-starter attitude, to produce quality work with little guidance. Prastut embodies these qualities, which made our experience with him highly rewarding.\n{% endblockquote %}\n\n## My Role\nMy responsibilities included designing the current homepage of the website, a number of inner pages, as well as key launch marketing collaterals for social media and email distribution. The user experience (UX) was improved also.\n\n* Initially easy design work was assigned to me in order for me to get accustomed to BetterButter's design philosophy and the vision they are bringing through the product. \n* Design work started with lo-fidelity mockups which were converted to high-fidelity in Photoshop.\n* I was able to pick up frontend development while designing, so after approval the designers were HTML-ised. The Bootstrap framework was used to make the designs responsive. \n* Repeated design iterations were done using the insights from beta testing. \n* Finally most of my designs were accepted and merged into the actual product.  \n\n### Design recommendations\nI was asked to provide design recommendations for the beta. Recommendations covered overall viability and UX to even font selection. Since BetterButter lacked a UI/UX resource, the responsibility given me was enormous. Finally all these recommendations were accepted.\n\n![feedback](/images/betterbutter/designrec.jpg)\n\n### Redesigning the website\n\nAfter successfully integrating with BetterButter team's workflow, I was tasked to redesign the homepage. The team felt that UX felt clunky and had to simplified considering the major product user base was targeted at women aged between 25-45. I proposed to adopt mobile first design approach even in the website, which was accepted unanimously by the team. After a lot of discussion and debate, the team was able to group all the features into three categories to make the process of on-boarding as self explainable as possible. \n\n### Examples of redesign \n\nSince I had to design keeping in mind the existing platform, my freedom and imagination was restricted. I spoke to the founders about this and they supported my vision of incorporating material/flat design into BetterButter. Combining my efforts with the developers, we worked 24*7 to convert the platform to adapt to material design guidelines: card based UI was introduced, a strict design guideline was established and parts of the website were optimized like fonts and icon-set.  \n\n![redesign](/images/betterbutter/combined_improvements.jpg)\n\n### Rejected Designs\n\nI faced some setbacks related to the vision about design I was trying to bring to BetterButter. Since I was just joined college, my opinions were largely inspired from companies having crazy valuations. Through my mentor's supervision I was able to learn to take feedback gracefully. I needed to realize that designing for the targeted user base should be my top priority. When my internship finished and I looked back at these designs, I realized the complexity from the user's usability perspective. \n\n{% blockquote Ben Hunt, - Open Source Marketing. %}\nGraphic design is part of web design, but if a web page doesn't get traffic, it gets no conversions, and it fails. That means the design fails.\nIf a page gets traffic, looks cute, but doesn't have any real measurable impact on the visitor, it fails. The design fails.\n{% endblockquote %}\n\nAfter repeated rejections, I was able to understand the fine line that the above quote conveys. \n\n![rejected](/images/betterbutter/rejected.jpg)\n\n### Finalized Homepage Design\n\nAfter 20 days into the internship and repeated A/B testing we were able to finalize on the website's landing page as well as implement the same into production. Graphic designs were used to make the website's approach playful and approachable. We were also able to incorporate contextualized search thanks to the developer team so that the user friction in finding things gets reduced marginally. Tagging these recipes for search also lead to a better SEO. \n\nEarlier the website showed various recipes being uploaded onto the platform. This lead to a poor engagement model: people left as quickly as they came in. Since we wanted the users to stick to the platform as much as possible, the team came up with the concept of \"contests\": an engagement model tying new products of the sponsors to consumers. The consumers get validation by winning the contest and receiving goodies, thus strengthening the engagement loop. The sponsors were able to get crucial feedback of their products through this effective consumer channel. Through the simple use of a jumbotron we were able to catch the user's attention, and I was able to realize the power of effective design in business.       \n\n![recipe](/images/betterbutter/finalhomepage.jpg)\n\n### Add Recipe User Interface\n\n![recipe](/images/betterbutter/recipe.jpg)\n\n### Contest Page\n\n![contest](/images/betterbutter/contest.jpg)\n\n### Marketing and Promotional design work\n\nPosters for promoting BetterButter on hiring channels like LinkedIn, AngelList. \n\n![marketing](/images/betterbutter/hiring.jpg)\n\nPosters for promoting BetterButter on social media. \n\n![posters](/images/betterbutter/posters.jpg)\n\n\n## Conclusion\n\nBefore I joined BetterButter, I thought about myself as a design amateur. After I left BetterButter, I thought about myself as a more aware design amateur. I thank BetterButter for providing me the crucial foundation and validation for my interests in design. With the experience I gained here, I was able to smoothly transition to projects with increased level of complexity. It also helped me cover broad areas that product designers are likely to encounter in their professional careers.","source":"_posts/betterbutter.md","raw":"---\ntitle: BetterButter\nsubtitle: User Interface and User Experience Intern.\ncover_index: /images/posts/betterbutter_cover.jpg\nlive_preview: http://www.betterbutter.in \nproject_duration: June - July 2015.\ndate: 2016-04-30 17:49:32\ncover_detail: /images/betterbutter/cover_detail.png \n---\n\n## About BetterButter\nBetterButter is a social discovery platform for recipes. The New Delhi based startup allows users to share recipes from family classics to their own inventions and discover new recipes from households across India and also from celebrity chefs.\n\n## Idea\n\nThrough market research, the founders came to the conclusion that food and beverages is the second-most searched category by Indian women, with recipes topping the search. They also found that India is the world's largest consumer of 'recipe content' on YouTube. Up until now, the recipe space in India has remained fragmented across a variety of blogs, Facebook groups, and YouTube channels. BetterButter intends to change that and wants to become the 'home for recipes' in India.\n\n## Recommendation\n\n{% blockquote Niyaz Laiq, - Co-Founder at BetterButter.%}\nPrastut worked with BetterButter from 1 June 2015 to 31 July 2015. Prastut joined at a critical phase for us, five weeks before we were due to launch, at a time when our website was still under development. Whilst we had senior developers building our website, we lacked a dedicated UI/UX resource at the time of his joining. Initial feedback from early influencer's and bloggers in the Indian food community has been very positive, and Prastut has played an important role in this despite his young age. A startup environment requires original thinking and a self-starter attitude, to produce quality work with little guidance. Prastut embodies these qualities, which made our experience with him highly rewarding.\n{% endblockquote %}\n\n## My Role\nMy responsibilities included designing the current homepage of the website, a number of inner pages, as well as key launch marketing collaterals for social media and email distribution. The user experience (UX) was improved also.\n\n* Initially easy design work was assigned to me in order for me to get accustomed to BetterButter's design philosophy and the vision they are bringing through the product. \n* Design work started with lo-fidelity mockups which were converted to high-fidelity in Photoshop.\n* I was able to pick up frontend development while designing, so after approval the designers were HTML-ised. The Bootstrap framework was used to make the designs responsive. \n* Repeated design iterations were done using the insights from beta testing. \n* Finally most of my designs were accepted and merged into the actual product.  \n\n### Design recommendations\nI was asked to provide design recommendations for the beta. Recommendations covered overall viability and UX to even font selection. Since BetterButter lacked a UI/UX resource, the responsibility given me was enormous. Finally all these recommendations were accepted.\n\n![feedback](/images/betterbutter/designrec.jpg)\n\n### Redesigning the website\n\nAfter successfully integrating with BetterButter team's workflow, I was tasked to redesign the homepage. The team felt that UX felt clunky and had to simplified considering the major product user base was targeted at women aged between 25-45. I proposed to adopt mobile first design approach even in the website, which was accepted unanimously by the team. After a lot of discussion and debate, the team was able to group all the features into three categories to make the process of on-boarding as self explainable as possible. \n\n### Examples of redesign \n\nSince I had to design keeping in mind the existing platform, my freedom and imagination was restricted. I spoke to the founders about this and they supported my vision of incorporating material/flat design into BetterButter. Combining my efforts with the developers, we worked 24*7 to convert the platform to adapt to material design guidelines: card based UI was introduced, a strict design guideline was established and parts of the website were optimized like fonts and icon-set.  \n\n![redesign](/images/betterbutter/combined_improvements.jpg)\n\n### Rejected Designs\n\nI faced some setbacks related to the vision about design I was trying to bring to BetterButter. Since I was just joined college, my opinions were largely inspired from companies having crazy valuations. Through my mentor's supervision I was able to learn to take feedback gracefully. I needed to realize that designing for the targeted user base should be my top priority. When my internship finished and I looked back at these designs, I realized the complexity from the user's usability perspective. \n\n{% blockquote Ben Hunt, - Open Source Marketing. %}\nGraphic design is part of web design, but if a web page doesn't get traffic, it gets no conversions, and it fails. That means the design fails.\nIf a page gets traffic, looks cute, but doesn't have any real measurable impact on the visitor, it fails. The design fails.\n{% endblockquote %}\n\nAfter repeated rejections, I was able to understand the fine line that the above quote conveys. \n\n![rejected](/images/betterbutter/rejected.jpg)\n\n### Finalized Homepage Design\n\nAfter 20 days into the internship and repeated A/B testing we were able to finalize on the website's landing page as well as implement the same into production. Graphic designs were used to make the website's approach playful and approachable. We were also able to incorporate contextualized search thanks to the developer team so that the user friction in finding things gets reduced marginally. Tagging these recipes for search also lead to a better SEO. \n\nEarlier the website showed various recipes being uploaded onto the platform. This lead to a poor engagement model: people left as quickly as they came in. Since we wanted the users to stick to the platform as much as possible, the team came up with the concept of \"contests\": an engagement model tying new products of the sponsors to consumers. The consumers get validation by winning the contest and receiving goodies, thus strengthening the engagement loop. The sponsors were able to get crucial feedback of their products through this effective consumer channel. Through the simple use of a jumbotron we were able to catch the user's attention, and I was able to realize the power of effective design in business.       \n\n![recipe](/images/betterbutter/finalhomepage.jpg)\n\n### Add Recipe User Interface\n\n![recipe](/images/betterbutter/recipe.jpg)\n\n### Contest Page\n\n![contest](/images/betterbutter/contest.jpg)\n\n### Marketing and Promotional design work\n\nPosters for promoting BetterButter on hiring channels like LinkedIn, AngelList. \n\n![marketing](/images/betterbutter/hiring.jpg)\n\nPosters for promoting BetterButter on social media. \n\n![posters](/images/betterbutter/posters.jpg)\n\n\n## Conclusion\n\nBefore I joined BetterButter, I thought about myself as a design amateur. After I left BetterButter, I thought about myself as a more aware design amateur. I thank BetterButter for providing me the crucial foundation and validation for my interests in design. With the experience I gained here, I was able to smoothly transition to projects with increased level of complexity. It also helped me cover broad areas that product designers are likely to encounter in their professional careers.","slug":"betterbutter","published":1,"updated":"2017-07-29T11:37:38.000Z","_id":"cj5o1vdn10003rtwyewy7ji7k","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"About-BetterButter\"><a href=\"#About-BetterButter\" class=\"headerlink\" title=\"About BetterButter\"></a>About BetterButter</h2><p>BetterButter is a social discovery platform for recipes. The New Delhi based startup allows users to share recipes from family classics to their own inventions and discover new recipes from households across India and also from celebrity chefs.</p>\n<h2 id=\"Idea\"><a href=\"#Idea\" class=\"headerlink\" title=\"Idea\"></a>Idea</h2><p>Through market research, the founders came to the conclusion that food and beverages is the second-most searched category by Indian women, with recipes topping the search. They also found that India is the worlds largest consumer of recipe content on YouTube. Up until now, the recipe space in India has remained fragmented across a variety of blogs, Facebook groups, and YouTube channels. BetterButter intends to change that and wants to become the home for recipes in India.</p>\n<h2 id=\"Recommendation\"><a href=\"#Recommendation\" class=\"headerlink\" title=\"Recommendation\"></a>Recommendation</h2><blockquote><p>Prastut worked with BetterButter from 1 June 2015 to 31 July 2015. Prastut joined at a critical phase for us, five weeks before we were due to launch, at a time when our website was still under development. Whilst we had senior developers building our website, we lacked a dedicated UI/UX resource at the time of his joining. Initial feedback from early influencers and bloggers in the Indian food community has been very positive, and Prastut has played an important role in this despite his young age. A startup environment requires original thinking and a self-starter attitude, to produce quality work with little guidance. Prastut embodies these qualities, which made our experience with him highly rewarding.</p>\n<footer><strong>Niyaz Laiq</strong><cite>- Co-Founder at BetterButter.</cite></footer></blockquote>\n<h2 id=\"My-Role\"><a href=\"#My-Role\" class=\"headerlink\" title=\"My Role\"></a>My Role</h2><p>My responsibilities included designing the current homepage of the website, a number of inner pages, as well as key launch marketing collaterals for social media and email distribution. The user experience (UX) was improved also.</p>\n<ul>\n<li>Initially easy design work was assigned to me in order for me to get accustomed to BetterButters design philosophy and the vision they are bringing through the product. </li>\n<li>Design work started with lo-fidelity mockups which were converted to high-fidelity in Photoshop.</li>\n<li>I was able to pick up frontend development while designing, so after approval the designers were HTML-ised. The Bootstrap framework was used to make the designs responsive. </li>\n<li>Repeated design iterations were done using the insights from beta testing. </li>\n<li>Finally most of my designs were accepted and merged into the actual product.  </li>\n</ul>\n<h3 id=\"Design-recommendations\"><a href=\"#Design-recommendations\" class=\"headerlink\" title=\"Design recommendations\"></a>Design recommendations</h3><p>I was asked to provide design recommendations for the beta. Recommendations covered overall viability and UX to even font selection. Since BetterButter lacked a UI/UX resource, the responsibility given me was enormous. Finally all these recommendations were accepted.</p>\n<p><img src=\"/images/betterbutter/designrec.jpg\" alt=\"feedback\"></p>\n<h3 id=\"Redesigning-the-website\"><a href=\"#Redesigning-the-website\" class=\"headerlink\" title=\"Redesigning the website\"></a>Redesigning the website</h3><p>After successfully integrating with BetterButter teams workflow, I was tasked to redesign the homepage. The team felt that UX felt clunky and had to simplified considering the major product user base was targeted at women aged between 25-45. I proposed to adopt mobile first design approach even in the website, which was accepted unanimously by the team. After a lot of discussion and debate, the team was able to group all the features into three categories to make the process of on-boarding as self explainable as possible. </p>\n<h3 id=\"Examples-of-redesign\"><a href=\"#Examples-of-redesign\" class=\"headerlink\" title=\"Examples of redesign\"></a>Examples of redesign</h3><p>Since I had to design keeping in mind the existing platform, my freedom and imagination was restricted. I spoke to the founders about this and they supported my vision of incorporating material/flat design into BetterButter. Combining my efforts with the developers, we worked 24*7 to convert the platform to adapt to material design guidelines: card based UI was introduced, a strict design guideline was established and parts of the website were optimized like fonts and icon-set.  </p>\n<p><img src=\"/images/betterbutter/combined_improvements.jpg\" alt=\"redesign\"></p>\n<h3 id=\"Rejected-Designs\"><a href=\"#Rejected-Designs\" class=\"headerlink\" title=\"Rejected Designs\"></a>Rejected Designs</h3><p>I faced some setbacks related to the vision about design I was trying to bring to BetterButter. Since I was just joined college, my opinions were largely inspired from companies having crazy valuations. Through my mentors supervision I was able to learn to take feedback gracefully. I needed to realize that designing for the targeted user base should be my top priority. When my internship finished and I looked back at these designs, I realized the complexity from the users usability perspective. </p>\n<blockquote><p>Graphic design is part of web design, but if a web page doesnt get traffic, it gets no conversions, and it fails. That means the design fails.<br>If a page gets traffic, looks cute, but doesnt have any real measurable impact on the visitor, it fails. The design fails.</p>\n<footer><strong>Ben Hunt</strong><cite>- Open Source Marketing.</cite></footer></blockquote>\n<p>After repeated rejections, I was able to understand the fine line that the above quote conveys. </p>\n<p><img src=\"/images/betterbutter/rejected.jpg\" alt=\"rejected\"></p>\n<h3 id=\"Finalized-Homepage-Design\"><a href=\"#Finalized-Homepage-Design\" class=\"headerlink\" title=\"Finalized Homepage Design\"></a>Finalized Homepage Design</h3><p>After 20 days into the internship and repeated A/B testing we were able to finalize on the websites landing page as well as implement the same into production. Graphic designs were used to make the websites approach playful and approachable. We were also able to incorporate contextualized search thanks to the developer team so that the user friction in finding things gets reduced marginally. Tagging these recipes for search also lead to a better SEO. </p>\n<p>Earlier the website showed various recipes being uploaded onto the platform. This lead to a poor engagement model: people left as quickly as they came in. Since we wanted the users to stick to the platform as much as possible, the team came up with the concept of contests: an engagement model tying new products of the sponsors to consumers. The consumers get validation by winning the contest and receiving goodies, thus strengthening the engagement loop. The sponsors were able to get crucial feedback of their products through this effective consumer channel. Through the simple use of a jumbotron we were able to catch the users attention, and I was able to realize the power of effective design in business.       </p>\n<p><img src=\"/images/betterbutter/finalhomepage.jpg\" alt=\"recipe\"></p>\n<h3 id=\"Add-Recipe-User-Interface\"><a href=\"#Add-Recipe-User-Interface\" class=\"headerlink\" title=\"Add Recipe User Interface\"></a>Add Recipe User Interface</h3><p><img src=\"/images/betterbutter/recipe.jpg\" alt=\"recipe\"></p>\n<h3 id=\"Contest-Page\"><a href=\"#Contest-Page\" class=\"headerlink\" title=\"Contest Page\"></a>Contest Page</h3><p><img src=\"/images/betterbutter/contest.jpg\" alt=\"contest\"></p>\n<h3 id=\"Marketing-and-Promotional-design-work\"><a href=\"#Marketing-and-Promotional-design-work\" class=\"headerlink\" title=\"Marketing and Promotional design work\"></a>Marketing and Promotional design work</h3><p>Posters for promoting BetterButter on hiring channels like LinkedIn, AngelList. </p>\n<p><img src=\"/images/betterbutter/hiring.jpg\" alt=\"marketing\"></p>\n<p>Posters for promoting BetterButter on social media. </p>\n<p><img src=\"/images/betterbutter/posters.jpg\" alt=\"posters\"></p>\n<h2 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h2><p>Before I joined BetterButter, I thought about myself as a design amateur. After I left BetterButter, I thought about myself as a more aware design amateur. I thank BetterButter for providing me the crucial foundation and validation for my interests in design. With the experience I gained here, I was able to smoothly transition to projects with increased level of complexity. It also helped me cover broad areas that product designers are likely to encounter in their professional careers.</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"About-BetterButter\"><a href=\"#About-BetterButter\" class=\"headerlink\" title=\"About BetterButter\"></a>About BetterButter</h2><p>BetterButter is a social discovery platform for recipes. The New Delhi based startup allows users to share recipes from family classics to their own inventions and discover new recipes from households across India and also from celebrity chefs.</p>\n<h2 id=\"Idea\"><a href=\"#Idea\" class=\"headerlink\" title=\"Idea\"></a>Idea</h2><p>Through market research, the founders came to the conclusion that food and beverages is the second-most searched category by Indian women, with recipes topping the search. They also found that India is the worlds largest consumer of recipe content on YouTube. Up until now, the recipe space in India has remained fragmented across a variety of blogs, Facebook groups, and YouTube channels. BetterButter intends to change that and wants to become the home for recipes in India.</p>\n<h2 id=\"Recommendation\"><a href=\"#Recommendation\" class=\"headerlink\" title=\"Recommendation\"></a>Recommendation</h2><blockquote><p>Prastut worked with BetterButter from 1 June 2015 to 31 July 2015. Prastut joined at a critical phase for us, five weeks before we were due to launch, at a time when our website was still under development. Whilst we had senior developers building our website, we lacked a dedicated UI/UX resource at the time of his joining. Initial feedback from early influencers and bloggers in the Indian food community has been very positive, and Prastut has played an important role in this despite his young age. A startup environment requires original thinking and a self-starter attitude, to produce quality work with little guidance. Prastut embodies these qualities, which made our experience with him highly rewarding.</p>\n<footer><strong>Niyaz Laiq</strong><cite>- Co-Founder at BetterButter.</cite></footer></blockquote>\n<h2 id=\"My-Role\"><a href=\"#My-Role\" class=\"headerlink\" title=\"My Role\"></a>My Role</h2><p>My responsibilities included designing the current homepage of the website, a number of inner pages, as well as key launch marketing collaterals for social media and email distribution. The user experience (UX) was improved also.</p>\n<ul>\n<li>Initially easy design work was assigned to me in order for me to get accustomed to BetterButters design philosophy and the vision they are bringing through the product. </li>\n<li>Design work started with lo-fidelity mockups which were converted to high-fidelity in Photoshop.</li>\n<li>I was able to pick up frontend development while designing, so after approval the designers were HTML-ised. The Bootstrap framework was used to make the designs responsive. </li>\n<li>Repeated design iterations were done using the insights from beta testing. </li>\n<li>Finally most of my designs were accepted and merged into the actual product.  </li>\n</ul>\n<h3 id=\"Design-recommendations\"><a href=\"#Design-recommendations\" class=\"headerlink\" title=\"Design recommendations\"></a>Design recommendations</h3><p>I was asked to provide design recommendations for the beta. Recommendations covered overall viability and UX to even font selection. Since BetterButter lacked a UI/UX resource, the responsibility given me was enormous. Finally all these recommendations were accepted.</p>\n<p><img src=\"/images/betterbutter/designrec.jpg\" alt=\"feedback\"></p>\n<h3 id=\"Redesigning-the-website\"><a href=\"#Redesigning-the-website\" class=\"headerlink\" title=\"Redesigning the website\"></a>Redesigning the website</h3><p>After successfully integrating with BetterButter teams workflow, I was tasked to redesign the homepage. The team felt that UX felt clunky and had to simplified considering the major product user base was targeted at women aged between 25-45. I proposed to adopt mobile first design approach even in the website, which was accepted unanimously by the team. After a lot of discussion and debate, the team was able to group all the features into three categories to make the process of on-boarding as self explainable as possible. </p>\n<h3 id=\"Examples-of-redesign\"><a href=\"#Examples-of-redesign\" class=\"headerlink\" title=\"Examples of redesign\"></a>Examples of redesign</h3><p>Since I had to design keeping in mind the existing platform, my freedom and imagination was restricted. I spoke to the founders about this and they supported my vision of incorporating material/flat design into BetterButter. Combining my efforts with the developers, we worked 24*7 to convert the platform to adapt to material design guidelines: card based UI was introduced, a strict design guideline was established and parts of the website were optimized like fonts and icon-set.  </p>\n<p><img src=\"/images/betterbutter/combined_improvements.jpg\" alt=\"redesign\"></p>\n<h3 id=\"Rejected-Designs\"><a href=\"#Rejected-Designs\" class=\"headerlink\" title=\"Rejected Designs\"></a>Rejected Designs</h3><p>I faced some setbacks related to the vision about design I was trying to bring to BetterButter. Since I was just joined college, my opinions were largely inspired from companies having crazy valuations. Through my mentors supervision I was able to learn to take feedback gracefully. I needed to realize that designing for the targeted user base should be my top priority. When my internship finished and I looked back at these designs, I realized the complexity from the users usability perspective. </p>\n<blockquote><p>Graphic design is part of web design, but if a web page doesnt get traffic, it gets no conversions, and it fails. That means the design fails.<br>If a page gets traffic, looks cute, but doesnt have any real measurable impact on the visitor, it fails. The design fails.</p>\n<footer><strong>Ben Hunt</strong><cite>- Open Source Marketing.</cite></footer></blockquote>\n<p>After repeated rejections, I was able to understand the fine line that the above quote conveys. </p>\n<p><img src=\"/images/betterbutter/rejected.jpg\" alt=\"rejected\"></p>\n<h3 id=\"Finalized-Homepage-Design\"><a href=\"#Finalized-Homepage-Design\" class=\"headerlink\" title=\"Finalized Homepage Design\"></a>Finalized Homepage Design</h3><p>After 20 days into the internship and repeated A/B testing we were able to finalize on the websites landing page as well as implement the same into production. Graphic designs were used to make the websites approach playful and approachable. We were also able to incorporate contextualized search thanks to the developer team so that the user friction in finding things gets reduced marginally. Tagging these recipes for search also lead to a better SEO. </p>\n<p>Earlier the website showed various recipes being uploaded onto the platform. This lead to a poor engagement model: people left as quickly as they came in. Since we wanted the users to stick to the platform as much as possible, the team came up with the concept of contests: an engagement model tying new products of the sponsors to consumers. The consumers get validation by winning the contest and receiving goodies, thus strengthening the engagement loop. The sponsors were able to get crucial feedback of their products through this effective consumer channel. Through the simple use of a jumbotron we were able to catch the users attention, and I was able to realize the power of effective design in business.       </p>\n<p><img src=\"/images/betterbutter/finalhomepage.jpg\" alt=\"recipe\"></p>\n<h3 id=\"Add-Recipe-User-Interface\"><a href=\"#Add-Recipe-User-Interface\" class=\"headerlink\" title=\"Add Recipe User Interface\"></a>Add Recipe User Interface</h3><p><img src=\"/images/betterbutter/recipe.jpg\" alt=\"recipe\"></p>\n<h3 id=\"Contest-Page\"><a href=\"#Contest-Page\" class=\"headerlink\" title=\"Contest Page\"></a>Contest Page</h3><p><img src=\"/images/betterbutter/contest.jpg\" alt=\"contest\"></p>\n<h3 id=\"Marketing-and-Promotional-design-work\"><a href=\"#Marketing-and-Promotional-design-work\" class=\"headerlink\" title=\"Marketing and Promotional design work\"></a>Marketing and Promotional design work</h3><p>Posters for promoting BetterButter on hiring channels like LinkedIn, AngelList. </p>\n<p><img src=\"/images/betterbutter/hiring.jpg\" alt=\"marketing\"></p>\n<p>Posters for promoting BetterButter on social media. </p>\n<p><img src=\"/images/betterbutter/posters.jpg\" alt=\"posters\"></p>\n<h2 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h2><p>Before I joined BetterButter, I thought about myself as a design amateur. After I left BetterButter, I thought about myself as a more aware design amateur. I thank BetterButter for providing me the crucial foundation and validation for my interests in design. With the experience I gained here, I was able to smoothly transition to projects with increased level of complexity. It also helped me cover broad areas that product designers are likely to encounter in their professional careers.</p>\n"},{"title":"Cambuzz","subtitle":"An open source youth networking platform.","date":"2016-08-30T12:19:32.000Z","cover_index":"/images/posts/cambuzz_cover.jpg","live_preview":"http://cambuzz.me/","code":"https://github.com/Cambuzz/","team":9,"cover_detail":"/images/cambuzz/cambuzz_intro.jpg","gallery":["/images/cambuzz/gallery/party.jpg","/images/cambuzz/gallery/team.jpg","/images/cambuzz/gallery/1.jpg","/images/cambuzz/gallery/3.jpg"],"_content":"\nHeadquartered in Vellore Institute of Technology Chennai, Cambuzz began as a side project and is now a tiny, bootstrapped idea helping the VIT Chennai family to share their events and is trying to become a go-to resource for discovering and connecting with everyone in the campus. Since the problems students faced in our campus were generic in nature, we open sourced the platform to realize our team's vision of creating an equal playground for college students in terms of opportunities and exposure.  \n\n## Motivation\n\nIn my freshman year, I felt that I was at a disadvantage in terms of exposure compared to some of the more premier colleges in India. I realized that lot of complications in the existing education system in India are a manifestation of one core problem: effective communication. So I co-founded Cambuzz with [Prashant](http://prashantkbhardwaj.github.io/) and we brought together a team of like minded friends who supported the idea. \n\n![Problems](/images/cambuzz/problems.jpg)\n\n## Process\n\nSince we had literally no exposure to product building, we built Cambuzz solely on our instincts. Repeated user feedbacks helped in design iteration. All our team knew was:\n> Move fast and break things. Unless you are breaking stuff, you are not moving fast enough. - Mark Zuckerberg. \n\n## My Role\n\nArmed with the design critique and a little technical experience at [BetterButter](/betterbutter), I led most of our brainstorming sessions which happened in the night after classes, using whiteboards to conceptualize our product. Insights from the discussion included bringing the feature set from 8 to 3, changing the project workflow even it meant changing our operating system (Goodbye Windows, Hello Linux!), and learning about each member's strength and weaknesses.  \n\nCore responsibilities included:\n* Led the design and development process which included the webapp, android app and marketing and promotional material. \n* Hustling and troubleshooting whenever and wherever the team required: getting permissions, getting more team members, helping up setup server.   \n\nStarting in May 2015, Cambuzz has garnered 1000+ organic signups, mostly through word of mouth.   \n\n![process](/images/cambuzz/funnel.jpg)\n\nThe 3 main features:\n* Buzz: get to know about all the events happening in our campus.\n* Track Teacher: searchable database of teacher's details and probable free slot for interaction. \n* Q/A Forum: ask questions, get answers and network with your peers in our campus.   \n\n## Low fidelity prototyping\n\nInitial design ideation process:\n\n![lofi](/images/cambuzz/lo_fi_webapp.jpg)\n![lofimobile](/images/cambuzz/lo_fi_mobile.jpg)\n\n## Architecture\n\n\n![architecture](/images/cambuzz/architecture.jpg)\n\n\n## Webapp\n\n![webapp](/images/cambuzz/buzz.jpg)\n\n![webapp](/images/cambuzz/track_teacher.jpg)\n\n![webapp](/images/cambuzz/ask_question1.jpg)\n\n## Android App\n\n![androidapp](/images/cambuzz/mobile.jpg)\n\n## Marketing Posters\n\n![posters](/images/cambuzz/posters.jpg)\n\n## Conclusion \nI felt that the system set an example to fellow students - by solving the first set of problems of increasing communication through the use of Internet-related technologies, we were able to show students that if \"we could do it, you can too\", giving rise to multiple such entrepreneurial activities inside our college. After the initial success, people from other college started noticing and the more we spoke to our friends in other niche colleges, the more we felt that these problems are relevant and are not strictly limited to our own campus. So we open-sourced Cambuzz with the vision of starting a movement of networking and effective communication, without the friction of money and environment. One just needs motivation and little technical skills to deploy Cambuzz in their own university.\n\nImagine the outcome if every campus in India, (even in the poor areas) have one copy of Cambuzz which is connected to other nodes. A mesh of opportunities, exposure, skill-set and exchange of ideas will be on the rise. We will be able to tap into the very resources that generate the maximum revenue for any country: the youth and enrich them more so they stay in India and make in India. Concept validation: when student lacking brick and mortar schools become successful. \n\n![posters](/images/cambuzz/decentralisation.jpg)\n\n## If I could do it over? \n* Reduce user friction: After the launch I realized the users found a lot of friction in even signing up. Since it was student run, our friends had notions like \"Can the website be trusted with our privacy?\". User signups could have been much faster if we could have used Google or Facebook accounts for authentication.\n* Social Media Marketing: Consumer tech products breath through user generated content. Content being shared on social media is one such way to gather tremendous exposure and increasing word of mouth growth. I forgot to include a share feature in Cambuzz! People weren't able to share their content outside, which led to isolation of content and minimal consumer reach.          \n* Stop imagining all corner cases inside one room: I did conduct informal feedback sessions about Cambuzz. But I lacked breadth in terms of demographic since I had mostly interviewed students. Since the teachers also started taking interest, their insights were golden for Cambuzz.\n\n\n## Video pitch\n\n\n<div class=\"video-container\">\n\t<iframe src=\"https://www.youtube.com/embed/sEFhadlDvNo\" frameborder=\"0\" allowfullscreen></iframe>    \n</div>\n\n## Gallery\n\n\n","source":"_posts/cambuzz.md","raw":"---\ntitle: Cambuzz\nsubtitle: An open source youth networking platform. \ndate: 2016-08-30 17:49:32\ncover_index: /images/posts/cambuzz_cover.jpg\nlive_preview: http://cambuzz.me/ \ncode: https://github.com/Cambuzz/\nteam: 9\ncover_detail: /images/cambuzz/cambuzz_intro.jpg\ngallery:\n- /images/cambuzz/gallery/party.jpg\n- /images/cambuzz/gallery/team.jpg\n- /images/cambuzz/gallery/1.jpg\n- /images/cambuzz/gallery/3.jpg\n\n---\n\nHeadquartered in Vellore Institute of Technology Chennai, Cambuzz began as a side project and is now a tiny, bootstrapped idea helping the VIT Chennai family to share their events and is trying to become a go-to resource for discovering and connecting with everyone in the campus. Since the problems students faced in our campus were generic in nature, we open sourced the platform to realize our team's vision of creating an equal playground for college students in terms of opportunities and exposure.  \n\n## Motivation\n\nIn my freshman year, I felt that I was at a disadvantage in terms of exposure compared to some of the more premier colleges in India. I realized that lot of complications in the existing education system in India are a manifestation of one core problem: effective communication. So I co-founded Cambuzz with [Prashant](http://prashantkbhardwaj.github.io/) and we brought together a team of like minded friends who supported the idea. \n\n![Problems](/images/cambuzz/problems.jpg)\n\n## Process\n\nSince we had literally no exposure to product building, we built Cambuzz solely on our instincts. Repeated user feedbacks helped in design iteration. All our team knew was:\n> Move fast and break things. Unless you are breaking stuff, you are not moving fast enough. - Mark Zuckerberg. \n\n## My Role\n\nArmed with the design critique and a little technical experience at [BetterButter](/betterbutter), I led most of our brainstorming sessions which happened in the night after classes, using whiteboards to conceptualize our product. Insights from the discussion included bringing the feature set from 8 to 3, changing the project workflow even it meant changing our operating system (Goodbye Windows, Hello Linux!), and learning about each member's strength and weaknesses.  \n\nCore responsibilities included:\n* Led the design and development process which included the webapp, android app and marketing and promotional material. \n* Hustling and troubleshooting whenever and wherever the team required: getting permissions, getting more team members, helping up setup server.   \n\nStarting in May 2015, Cambuzz has garnered 1000+ organic signups, mostly through word of mouth.   \n\n![process](/images/cambuzz/funnel.jpg)\n\nThe 3 main features:\n* Buzz: get to know about all the events happening in our campus.\n* Track Teacher: searchable database of teacher's details and probable free slot for interaction. \n* Q/A Forum: ask questions, get answers and network with your peers in our campus.   \n\n## Low fidelity prototyping\n\nInitial design ideation process:\n\n![lofi](/images/cambuzz/lo_fi_webapp.jpg)\n![lofimobile](/images/cambuzz/lo_fi_mobile.jpg)\n\n## Architecture\n\n\n![architecture](/images/cambuzz/architecture.jpg)\n\n\n## Webapp\n\n![webapp](/images/cambuzz/buzz.jpg)\n\n![webapp](/images/cambuzz/track_teacher.jpg)\n\n![webapp](/images/cambuzz/ask_question1.jpg)\n\n## Android App\n\n![androidapp](/images/cambuzz/mobile.jpg)\n\n## Marketing Posters\n\n![posters](/images/cambuzz/posters.jpg)\n\n## Conclusion \nI felt that the system set an example to fellow students - by solving the first set of problems of increasing communication through the use of Internet-related technologies, we were able to show students that if \"we could do it, you can too\", giving rise to multiple such entrepreneurial activities inside our college. After the initial success, people from other college started noticing and the more we spoke to our friends in other niche colleges, the more we felt that these problems are relevant and are not strictly limited to our own campus. So we open-sourced Cambuzz with the vision of starting a movement of networking and effective communication, without the friction of money and environment. One just needs motivation and little technical skills to deploy Cambuzz in their own university.\n\nImagine the outcome if every campus in India, (even in the poor areas) have one copy of Cambuzz which is connected to other nodes. A mesh of opportunities, exposure, skill-set and exchange of ideas will be on the rise. We will be able to tap into the very resources that generate the maximum revenue for any country: the youth and enrich them more so they stay in India and make in India. Concept validation: when student lacking brick and mortar schools become successful. \n\n![posters](/images/cambuzz/decentralisation.jpg)\n\n## If I could do it over? \n* Reduce user friction: After the launch I realized the users found a lot of friction in even signing up. Since it was student run, our friends had notions like \"Can the website be trusted with our privacy?\". User signups could have been much faster if we could have used Google or Facebook accounts for authentication.\n* Social Media Marketing: Consumer tech products breath through user generated content. Content being shared on social media is one such way to gather tremendous exposure and increasing word of mouth growth. I forgot to include a share feature in Cambuzz! People weren't able to share their content outside, which led to isolation of content and minimal consumer reach.          \n* Stop imagining all corner cases inside one room: I did conduct informal feedback sessions about Cambuzz. But I lacked breadth in terms of demographic since I had mostly interviewed students. Since the teachers also started taking interest, their insights were golden for Cambuzz.\n\n\n## Video pitch\n\n\n<div class=\"video-container\">\n\t<iframe src=\"https://www.youtube.com/embed/sEFhadlDvNo\" frameborder=\"0\" allowfullscreen></iframe>    \n</div>\n\n## Gallery\n\n\n","slug":"cambuzz","published":1,"updated":"2017-07-30T04:17:43.000Z","_id":"cj5o1vdn50004rtwy3yws0vcf","comments":1,"layout":"post","photos":[],"link":"","content":"<p>Headquartered in Vellore Institute of Technology Chennai, Cambuzz began as a side project and is now a tiny, bootstrapped idea helping the VIT Chennai family to share their events and is trying to become a go-to resource for discovering and connecting with everyone in the campus. Since the problems students faced in our campus were generic in nature, we open sourced the platform to realize our teams vision of creating an equal playground for college students in terms of opportunities and exposure.  </p>\n<h2 id=\"Motivation\"><a href=\"#Motivation\" class=\"headerlink\" title=\"Motivation\"></a>Motivation</h2><p>In my freshman year, I felt that I was at a disadvantage in terms of exposure compared to some of the more premier colleges in India. I realized that lot of complications in the existing education system in India are a manifestation of one core problem: effective communication. So I co-founded Cambuzz with <a href=\"http://prashantkbhardwaj.github.io/\" target=\"_blank\" rel=\"external\">Prashant</a> and we brought together a team of like minded friends who supported the idea. </p>\n<p><img src=\"/images/cambuzz/problems.jpg\" alt=\"Problems\"></p>\n<h2 id=\"Process\"><a href=\"#Process\" class=\"headerlink\" title=\"Process\"></a>Process</h2><p>Since we had literally no exposure to product building, we built Cambuzz solely on our instincts. Repeated user feedbacks helped in design iteration. All our team knew was:</p>\n<blockquote>\n<p>Move fast and break things. Unless you are breaking stuff, you are not moving fast enough. - Mark Zuckerberg. </p>\n</blockquote>\n<h2 id=\"My-Role\"><a href=\"#My-Role\" class=\"headerlink\" title=\"My Role\"></a>My Role</h2><p>Armed with the design critique and a little technical experience at <a href=\"/betterbutter\">BetterButter</a>, I led most of our brainstorming sessions which happened in the night after classes, using whiteboards to conceptualize our product. Insights from the discussion included bringing the feature set from 8 to 3, changing the project workflow even it meant changing our operating system (Goodbye Windows, Hello Linux!), and learning about each members strength and weaknesses.  </p>\n<p>Core responsibilities included:</p>\n<ul>\n<li>Led the design and development process which included the webapp, android app and marketing and promotional material. </li>\n<li>Hustling and troubleshooting whenever and wherever the team required: getting permissions, getting more team members, helping up setup server.   </li>\n</ul>\n<p>Starting in May 2015, Cambuzz has garnered 1000+ organic signups, mostly through word of mouth.   </p>\n<p><img src=\"/images/cambuzz/funnel.jpg\" alt=\"process\"></p>\n<p>The 3 main features:</p>\n<ul>\n<li>Buzz: get to know about all the events happening in our campus.</li>\n<li>Track Teacher: searchable database of teachers details and probable free slot for interaction. </li>\n<li>Q/A Forum: ask questions, get answers and network with your peers in our campus.   </li>\n</ul>\n<h2 id=\"Low-fidelity-prototyping\"><a href=\"#Low-fidelity-prototyping\" class=\"headerlink\" title=\"Low fidelity prototyping\"></a>Low fidelity prototyping</h2><p>Initial design ideation process:</p>\n<p><img src=\"/images/cambuzz/lo_fi_webapp.jpg\" alt=\"lofi\"><br><img src=\"/images/cambuzz/lo_fi_mobile.jpg\" alt=\"lofimobile\"></p>\n<h2 id=\"Architecture\"><a href=\"#Architecture\" class=\"headerlink\" title=\"Architecture\"></a>Architecture</h2><p><img src=\"/images/cambuzz/architecture.jpg\" alt=\"architecture\"></p>\n<h2 id=\"Webapp\"><a href=\"#Webapp\" class=\"headerlink\" title=\"Webapp\"></a>Webapp</h2><p><img src=\"/images/cambuzz/buzz.jpg\" alt=\"webapp\"></p>\n<p><img src=\"/images/cambuzz/track_teacher.jpg\" alt=\"webapp\"></p>\n<p><img src=\"/images/cambuzz/ask_question1.jpg\" alt=\"webapp\"></p>\n<h2 id=\"Android-App\"><a href=\"#Android-App\" class=\"headerlink\" title=\"Android App\"></a>Android App</h2><p><img src=\"/images/cambuzz/mobile.jpg\" alt=\"androidapp\"></p>\n<h2 id=\"Marketing-Posters\"><a href=\"#Marketing-Posters\" class=\"headerlink\" title=\"Marketing Posters\"></a>Marketing Posters</h2><p><img src=\"/images/cambuzz/posters.jpg\" alt=\"posters\"></p>\n<h2 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h2><p>I felt that the system set an example to fellow students - by solving the first set of problems of increasing communication through the use of Internet-related technologies, we were able to show students that if we could do it, you can too, giving rise to multiple such entrepreneurial activities inside our college. After the initial success, people from other college started noticing and the more we spoke to our friends in other niche colleges, the more we felt that these problems are relevant and are not strictly limited to our own campus. So we open-sourced Cambuzz with the vision of starting a movement of networking and effective communication, without the friction of money and environment. One just needs motivation and little technical skills to deploy Cambuzz in their own university.</p>\n<p>Imagine the outcome if every campus in India, (even in the poor areas) have one copy of Cambuzz which is connected to other nodes. A mesh of opportunities, exposure, skill-set and exchange of ideas will be on the rise. We will be able to tap into the very resources that generate the maximum revenue for any country: the youth and enrich them more so they stay in India and make in India. Concept validation: when student lacking brick and mortar schools become successful. </p>\n<p><img src=\"/images/cambuzz/decentralisation.jpg\" alt=\"posters\"></p>\n<h2 id=\"If-I-could-do-it-over\"><a href=\"#If-I-could-do-it-over\" class=\"headerlink\" title=\"If I could do it over?\"></a>If I could do it over?</h2><ul>\n<li>Reduce user friction: After the launch I realized the users found a lot of friction in even signing up. Since it was student run, our friends had notions like Can the website be trusted with our privacy?. User signups could have been much faster if we could have used Google or Facebook accounts for authentication.</li>\n<li>Social Media Marketing: Consumer tech products breath through user generated content. Content being shared on social media is one such way to gather tremendous exposure and increasing word of mouth growth. I forgot to include a share feature in Cambuzz! People werent able to share their content outside, which led to isolation of content and minimal consumer reach.          </li>\n<li>Stop imagining all corner cases inside one room: I did conduct informal feedback sessions about Cambuzz. But I lacked breadth in terms of demographic since I had mostly interviewed students. Since the teachers also started taking interest, their insights were golden for Cambuzz.</li>\n</ul>\n<h2 id=\"Video-pitch\"><a href=\"#Video-pitch\" class=\"headerlink\" title=\"Video pitch\"></a>Video pitch</h2><div class=\"video-container\"><br>    <iframe src=\"https://www.youtube.com/embed/sEFhadlDvNo\" frameborder=\"0\" allowfullscreen></iframe><br></div>\n\n<h2 id=\"Gallery\"><a href=\"#Gallery\" class=\"headerlink\" title=\"Gallery\"></a>Gallery</h2>","site":{"data":{}},"excerpt":"","more":"<p>Headquartered in Vellore Institute of Technology Chennai, Cambuzz began as a side project and is now a tiny, bootstrapped idea helping the VIT Chennai family to share their events and is trying to become a go-to resource for discovering and connecting with everyone in the campus. Since the problems students faced in our campus were generic in nature, we open sourced the platform to realize our teams vision of creating an equal playground for college students in terms of opportunities and exposure.  </p>\n<h2 id=\"Motivation\"><a href=\"#Motivation\" class=\"headerlink\" title=\"Motivation\"></a>Motivation</h2><p>In my freshman year, I felt that I was at a disadvantage in terms of exposure compared to some of the more premier colleges in India. I realized that lot of complications in the existing education system in India are a manifestation of one core problem: effective communication. So I co-founded Cambuzz with <a href=\"http://prashantkbhardwaj.github.io/\" target=\"_blank\" rel=\"external\">Prashant</a> and we brought together a team of like minded friends who supported the idea. </p>\n<p><img src=\"/images/cambuzz/problems.jpg\" alt=\"Problems\"></p>\n<h2 id=\"Process\"><a href=\"#Process\" class=\"headerlink\" title=\"Process\"></a>Process</h2><p>Since we had literally no exposure to product building, we built Cambuzz solely on our instincts. Repeated user feedbacks helped in design iteration. All our team knew was:</p>\n<blockquote>\n<p>Move fast and break things. Unless you are breaking stuff, you are not moving fast enough. - Mark Zuckerberg. </p>\n</blockquote>\n<h2 id=\"My-Role\"><a href=\"#My-Role\" class=\"headerlink\" title=\"My Role\"></a>My Role</h2><p>Armed with the design critique and a little technical experience at <a href=\"/betterbutter\">BetterButter</a>, I led most of our brainstorming sessions which happened in the night after classes, using whiteboards to conceptualize our product. Insights from the discussion included bringing the feature set from 8 to 3, changing the project workflow even it meant changing our operating system (Goodbye Windows, Hello Linux!), and learning about each members strength and weaknesses.  </p>\n<p>Core responsibilities included:</p>\n<ul>\n<li>Led the design and development process which included the webapp, android app and marketing and promotional material. </li>\n<li>Hustling and troubleshooting whenever and wherever the team required: getting permissions, getting more team members, helping up setup server.   </li>\n</ul>\n<p>Starting in May 2015, Cambuzz has garnered 1000+ organic signups, mostly through word of mouth.   </p>\n<p><img src=\"/images/cambuzz/funnel.jpg\" alt=\"process\"></p>\n<p>The 3 main features:</p>\n<ul>\n<li>Buzz: get to know about all the events happening in our campus.</li>\n<li>Track Teacher: searchable database of teachers details and probable free slot for interaction. </li>\n<li>Q/A Forum: ask questions, get answers and network with your peers in our campus.   </li>\n</ul>\n<h2 id=\"Low-fidelity-prototyping\"><a href=\"#Low-fidelity-prototyping\" class=\"headerlink\" title=\"Low fidelity prototyping\"></a>Low fidelity prototyping</h2><p>Initial design ideation process:</p>\n<p><img src=\"/images/cambuzz/lo_fi_webapp.jpg\" alt=\"lofi\"><br><img src=\"/images/cambuzz/lo_fi_mobile.jpg\" alt=\"lofimobile\"></p>\n<h2 id=\"Architecture\"><a href=\"#Architecture\" class=\"headerlink\" title=\"Architecture\"></a>Architecture</h2><p><img src=\"/images/cambuzz/architecture.jpg\" alt=\"architecture\"></p>\n<h2 id=\"Webapp\"><a href=\"#Webapp\" class=\"headerlink\" title=\"Webapp\"></a>Webapp</h2><p><img src=\"/images/cambuzz/buzz.jpg\" alt=\"webapp\"></p>\n<p><img src=\"/images/cambuzz/track_teacher.jpg\" alt=\"webapp\"></p>\n<p><img src=\"/images/cambuzz/ask_question1.jpg\" alt=\"webapp\"></p>\n<h2 id=\"Android-App\"><a href=\"#Android-App\" class=\"headerlink\" title=\"Android App\"></a>Android App</h2><p><img src=\"/images/cambuzz/mobile.jpg\" alt=\"androidapp\"></p>\n<h2 id=\"Marketing-Posters\"><a href=\"#Marketing-Posters\" class=\"headerlink\" title=\"Marketing Posters\"></a>Marketing Posters</h2><p><img src=\"/images/cambuzz/posters.jpg\" alt=\"posters\"></p>\n<h2 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h2><p>I felt that the system set an example to fellow students - by solving the first set of problems of increasing communication through the use of Internet-related technologies, we were able to show students that if we could do it, you can too, giving rise to multiple such entrepreneurial activities inside our college. After the initial success, people from other college started noticing and the more we spoke to our friends in other niche colleges, the more we felt that these problems are relevant and are not strictly limited to our own campus. So we open-sourced Cambuzz with the vision of starting a movement of networking and effective communication, without the friction of money and environment. One just needs motivation and little technical skills to deploy Cambuzz in their own university.</p>\n<p>Imagine the outcome if every campus in India, (even in the poor areas) have one copy of Cambuzz which is connected to other nodes. A mesh of opportunities, exposure, skill-set and exchange of ideas will be on the rise. We will be able to tap into the very resources that generate the maximum revenue for any country: the youth and enrich them more so they stay in India and make in India. Concept validation: when student lacking brick and mortar schools become successful. </p>\n<p><img src=\"/images/cambuzz/decentralisation.jpg\" alt=\"posters\"></p>\n<h2 id=\"If-I-could-do-it-over\"><a href=\"#If-I-could-do-it-over\" class=\"headerlink\" title=\"If I could do it over?\"></a>If I could do it over?</h2><ul>\n<li>Reduce user friction: After the launch I realized the users found a lot of friction in even signing up. Since it was student run, our friends had notions like Can the website be trusted with our privacy?. User signups could have been much faster if we could have used Google or Facebook accounts for authentication.</li>\n<li>Social Media Marketing: Consumer tech products breath through user generated content. Content being shared on social media is one such way to gather tremendous exposure and increasing word of mouth growth. I forgot to include a share feature in Cambuzz! People werent able to share their content outside, which led to isolation of content and minimal consumer reach.          </li>\n<li>Stop imagining all corner cases inside one room: I did conduct informal feedback sessions about Cambuzz. But I lacked breadth in terms of demographic since I had mostly interviewed students. Since the teachers also started taking interest, their insights were golden for Cambuzz.</li>\n</ul>\n<h2 id=\"Video-pitch\"><a href=\"#Video-pitch\" class=\"headerlink\" title=\"Video pitch\"></a>Video pitch</h2><div class=\"video-container\"><br>    <iframe src=\"https://www.youtube.com/embed/sEFhadlDvNo\" frameborder=\"0\" allowfullscreen></iframe><br></div>\n\n<h2 id=\"Gallery\"><a href=\"#Gallery\" class=\"headerlink\" title=\"Gallery\"></a>Gallery</h2>"},{"title":"Visual Designing","subtitle":"This post chronicles my work in visual design.","cover_index":"/images/posts/film_cover.jpg","live_preview":"https://www.youtube.com/user/PrastutKumar","date":"2015-04-30T12:19:32.000Z","_content":"\n\nI did my high schooling from Sardar Patel Vidyalaya. The school focused on overall development of a child rather than just concentrating on studying. My venture with visual design started when I was assigned to make a trailer/introductory video for the annual sportz quiz in our school. Following post details some of my best work in this field.\n\n## Imbroglio: Sportz Quiz\nIf you have come across a SPV alumuni, ask him/her about the sports quiz. The annual quiz is a much awaited tradition of our school. I led a team of 4 students to conceptualize, animate, edit and post process the trailer for the sports quiz of 2012. This video was my last project as a visual design artist.\n\n<div class=\"video-container\">\n\t<iframe src=\"https://www.youtube.com/embed/osNKFO73ugk\" frameborder=\"0\" allowfullscreen></iframe>    \n</div>\n\n## The Jump\nI experimented with visual effects for the first time while conceptualizing the following video. Setup and work included a green screen, post processing, color correction and background score.  \n\n<div class=\"video-container\">\n\t<iframe src=\"https://www.youtube.com/embed/hVNj2KPr6co\" frameborder=\"0\" allowfullscreen></iframe>    \n</div>\n\n## General Body Meeting\nOur school had an executive student council to organize events and look after student welfare. Following video documents the work of the 2012-2013 council. \n\n<div class=\"video-container\">\n\t<iframe src=\"https://www.youtube.com/embed/HZAHjIUjxRU\" frameborder=\"0\" allowfullscreen></iframe>    \n</div>\n\n## Conserve Water\nThis was my first venture with visual design. As an environmental science project, I didn't want to present boring power point presentations. Hence I chose a more visual narrative. \n\n<div class=\"video-container\">\n\t<iframe src=\"https://www.youtube.com/embed/xapdaRIog44\" frameborder=\"0\" allowfullscreen></iframe>    \n</div>\n\n<br>\n\nRest of the videos can be found on my [YouTube Channel](https://www.youtube.com/user/). ","source":"_posts/film.md","raw":"---\ntitle: Visual Designing\nsubtitle: This post chronicles my work in visual design.\ncover_index: /images/posts/film_cover.jpg\nlive_preview: https://www.youtube.com/user/PrastutKumar \ndate: 2015-04-30 17:49:32\n---\n\n\nI did my high schooling from Sardar Patel Vidyalaya. The school focused on overall development of a child rather than just concentrating on studying. My venture with visual design started when I was assigned to make a trailer/introductory video for the annual sportz quiz in our school. Following post details some of my best work in this field.\n\n## Imbroglio: Sportz Quiz\nIf you have come across a SPV alumuni, ask him/her about the sports quiz. The annual quiz is a much awaited tradition of our school. I led a team of 4 students to conceptualize, animate, edit and post process the trailer for the sports quiz of 2012. This video was my last project as a visual design artist.\n\n<div class=\"video-container\">\n\t<iframe src=\"https://www.youtube.com/embed/osNKFO73ugk\" frameborder=\"0\" allowfullscreen></iframe>    \n</div>\n\n## The Jump\nI experimented with visual effects for the first time while conceptualizing the following video. Setup and work included a green screen, post processing, color correction and background score.  \n\n<div class=\"video-container\">\n\t<iframe src=\"https://www.youtube.com/embed/hVNj2KPr6co\" frameborder=\"0\" allowfullscreen></iframe>    \n</div>\n\n## General Body Meeting\nOur school had an executive student council to organize events and look after student welfare. Following video documents the work of the 2012-2013 council. \n\n<div class=\"video-container\">\n\t<iframe src=\"https://www.youtube.com/embed/HZAHjIUjxRU\" frameborder=\"0\" allowfullscreen></iframe>    \n</div>\n\n## Conserve Water\nThis was my first venture with visual design. As an environmental science project, I didn't want to present boring power point presentations. Hence I chose a more visual narrative. \n\n<div class=\"video-container\">\n\t<iframe src=\"https://www.youtube.com/embed/xapdaRIog44\" frameborder=\"0\" allowfullscreen></iframe>    \n</div>\n\n<br>\n\nRest of the videos can be found on my [YouTube Channel](https://www.youtube.com/user/). ","slug":"film","published":1,"updated":"2016-10-10T15:05:53.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj5o1vdn80005rtwy7aofhhdr","content":"<p>I did my high schooling from Sardar Patel Vidyalaya. The school focused on overall development of a child rather than just concentrating on studying. My venture with visual design started when I was assigned to make a trailer/introductory video for the annual sportz quiz in our school. Following post details some of my best work in this field.</p>\n<h2 id=\"Imbroglio-Sportz-Quiz\"><a href=\"#Imbroglio-Sportz-Quiz\" class=\"headerlink\" title=\"Imbroglio: Sportz Quiz\"></a>Imbroglio: Sportz Quiz</h2><p>If you have come across a SPV alumuni, ask him/her about the sports quiz. The annual quiz is a much awaited tradition of our school. I led a team of 4 students to conceptualize, animate, edit and post process the trailer for the sports quiz of 2012. This video was my last project as a visual design artist.</p>\n<div class=\"video-container\"><br>    <iframe src=\"https://www.youtube.com/embed/osNKFO73ugk\" frameborder=\"0\" allowfullscreen></iframe><br></div>\n\n<h2 id=\"The-Jump\"><a href=\"#The-Jump\" class=\"headerlink\" title=\"The Jump\"></a>The Jump</h2><p>I experimented with visual effects for the first time while conceptualizing the following video. Setup and work included a green screen, post processing, color correction and background score.  </p>\n<div class=\"video-container\"><br>    <iframe src=\"https://www.youtube.com/embed/hVNj2KPr6co\" frameborder=\"0\" allowfullscreen></iframe><br></div>\n\n<h2 id=\"General-Body-Meeting\"><a href=\"#General-Body-Meeting\" class=\"headerlink\" title=\"General Body Meeting\"></a>General Body Meeting</h2><p>Our school had an executive student council to organize events and look after student welfare. Following video documents the work of the 2012-2013 council. </p>\n<div class=\"video-container\"><br>    <iframe src=\"https://www.youtube.com/embed/HZAHjIUjxRU\" frameborder=\"0\" allowfullscreen></iframe><br></div>\n\n<h2 id=\"Conserve-Water\"><a href=\"#Conserve-Water\" class=\"headerlink\" title=\"Conserve Water\"></a>Conserve Water</h2><p>This was my first venture with visual design. As an environmental science project, I didnt want to present boring power point presentations. Hence I chose a more visual narrative. </p>\n<div class=\"video-container\"><br>    <iframe src=\"https://www.youtube.com/embed/xapdaRIog44\" frameborder=\"0\" allowfullscreen></iframe><br></div>\n\n<p><br></p>\n<p>Rest of the videos can be found on my <a href=\"https://www.youtube.com/user/\" target=\"_blank\" rel=\"external\">YouTube Channel</a>. </p>\n","site":{"data":{}},"excerpt":"","more":"<p>I did my high schooling from Sardar Patel Vidyalaya. The school focused on overall development of a child rather than just concentrating on studying. My venture with visual design started when I was assigned to make a trailer/introductory video for the annual sportz quiz in our school. Following post details some of my best work in this field.</p>\n<h2 id=\"Imbroglio-Sportz-Quiz\"><a href=\"#Imbroglio-Sportz-Quiz\" class=\"headerlink\" title=\"Imbroglio: Sportz Quiz\"></a>Imbroglio: Sportz Quiz</h2><p>If you have come across a SPV alumuni, ask him/her about the sports quiz. The annual quiz is a much awaited tradition of our school. I led a team of 4 students to conceptualize, animate, edit and post process the trailer for the sports quiz of 2012. This video was my last project as a visual design artist.</p>\n<div class=\"video-container\"><br>    <iframe src=\"https://www.youtube.com/embed/osNKFO73ugk\" frameborder=\"0\" allowfullscreen></iframe><br></div>\n\n<h2 id=\"The-Jump\"><a href=\"#The-Jump\" class=\"headerlink\" title=\"The Jump\"></a>The Jump</h2><p>I experimented with visual effects for the first time while conceptualizing the following video. Setup and work included a green screen, post processing, color correction and background score.  </p>\n<div class=\"video-container\"><br>    <iframe src=\"https://www.youtube.com/embed/hVNj2KPr6co\" frameborder=\"0\" allowfullscreen></iframe><br></div>\n\n<h2 id=\"General-Body-Meeting\"><a href=\"#General-Body-Meeting\" class=\"headerlink\" title=\"General Body Meeting\"></a>General Body Meeting</h2><p>Our school had an executive student council to organize events and look after student welfare. Following video documents the work of the 2012-2013 council. </p>\n<div class=\"video-container\"><br>    <iframe src=\"https://www.youtube.com/embed/HZAHjIUjxRU\" frameborder=\"0\" allowfullscreen></iframe><br></div>\n\n<h2 id=\"Conserve-Water\"><a href=\"#Conserve-Water\" class=\"headerlink\" title=\"Conserve Water\"></a>Conserve Water</h2><p>This was my first venture with visual design. As an environmental science project, I didnt want to present boring power point presentations. Hence I chose a more visual narrative. </p>\n<div class=\"video-container\"><br>    <iframe src=\"https://www.youtube.com/embed/xapdaRIog44\" frameborder=\"0\" allowfullscreen></iframe><br></div>\n\n<p><br></p>\n<p>Rest of the videos can be found on my <a href=\"https://www.youtube.com/user/\" target=\"_blank\" rel=\"external\">YouTube Channel</a>. </p>\n"},{"title":"Matchmaking Module for Teem","subtitle":"Under Google Summer of Code program, 2016.","cover_index":"/images/posts/gsoc_cover.jpg","live_preview":"https://teem.works/","code":"https://github.com/P2Pvalue/teem-tag/tree/master","date":"2016-07-30T07:19:32.000Z","project_duration":"March - August 2016.","cover_detail":"/images/gsoc/intro.jpg","googleslides":"10qUKU-s42dNnkpIa4DrUmlhs7TyneeZeOT4i01StzVo","_content":"\n\nI am pleased to announce that I got selected for the prestigious Google Summer of Code '16 with [Berkman Klein Center for Internet and Society](https://cyber.law.harvard.edu/), Harvard University. Amongst the various open source projects by Berkman Center, I was selected for [Teem: a P2PValue collaboration app](https://teem.works/). This blog post details my work throughout the 5 months that I have been working with Teem members. \n\n## About Teem\n\nTeem is an app focused on increasing the participation and sustainability of commons-based peer production communities (e.g. Wikipedia, free software, Arduino). The model can also be applied to other open online communities (networks, open organizations) or even social movements (social centers, collectives). The 1-9-90 rule states that the collaboration on projects like Wikipedia, 90% of the participants of a community only view content, 9% of the participants edit content, and 1% of the participants actively create new content. After doing intensive social research and prototype testing, the main needs of the different roles within a community and the tools they typically lack (related to management and internal organization, listing the subprojects available and the needs of each) have been recognized. \n\n![About Teem](/images/gsoc/about_teem.jpg)\n\n\n\nThe app is grounded on these findings to reduce the frustrations of all participants and increase participation (90s=>9, 9s=>1), while providing a kind-of project management tool for communities (but informal/liquid/open to fit the context) together with a work-space with collaborative edition (like google-docs) and a group chat (like a whatsapp/telegram group). \n\n![Teem USP](/images/gsoc/collabview.jpg)\n\nLinks:\n\n* Current web-app: http://teem.works. \n* Android app encapsulating the web-app: http://tiny.cc/teemapp \n* Code: https://github.com/P2Pvalue/teem\n\n## My role \n\n* Problem Statement:\nWhen people start using a tool such as Teem, they come with a set of skills and interests. On the other hand, community projects have needs to fulfill, i.e. they have gaps or missing skills that are slowing down their development. I wanted to ease this very challenge of matching them, connecting newcomers with communities appealing to them. \nMy initial proposal : [GSoC Teem Matchmaking Proposal](https://docs.google.com/document/d/1DwtxhYupN_e8bX13vntU7csiP4hrbZq4MftBJGhE6v0/edit?usp=sharing). \n\n* Discussion (Community Bonding Period): \nDuring the community bonding period, the Teem project members and I got down on Hangouts to discuss the proposed solutions. Every member had to have an open mind and throw around crazy ideas. We were simultaneously collaborating on Google Docs, and jotting down our ideas. This type of planning was new to me, and I followed up by integrating such workflow in my college projects too. Links to our discussion: \n\t* [Matchmaking Creative Session](https://docs.google.com/document/d/1CXg_3Mpr87PD6t4ThH-zJiDy3XIqxgm_dCZNtXiK-FQ/edit?usp=sharing).\n\t* [Updated Matchmaking Proposal](https://docs.google.com/document/d/1LvVBdYovyf2vtXEOzq3OtNOdbfOCml6tqJxyG4ZhKe4/edit?usp=sharing).\n\n* Miscellaneous:\n   * [Small Bugfixes](https://github.com/P2Pvalue/teem/commits?author=prastut) were made during the bonding period to get acquainted with Teem's codebase. \n   * Our internal communication was shifted to Gitter. Most of our discussions can be found here: [Teem Matchmaking Gitter Channel](https://gitter.im/P2Pvalue/teem-matchmaking).\n\n\n## Final Solution\n\n![Solution](/images/gsoc/matchmaking.jpg)\n\nThrough the various discussions above, we formalized a matchmaking module. The proposed task flow was:\n\n * Introduce a new route for exploration called interests. Users without even signing up can click on this. \n * They would be presented with interests: tiles with categories like music, technology, culture etc.  \n * Once they select some of their interests, they would be taken to matchmaking screen. Here the user will be presented with the list of communities that correspond to user interests. \n * The communities will also be tagged through their content, and the users can also further make their search specific by clicking on the tags.\n\nMockup of the above workflow:\n![Workflow](/images/gsoc/matchmaking_mocks.jpg)\n\n\nThrough the above feature-set, the friction the user feels in terms of exploration on their own will drastically get reduced. Usability studies were also conducted to validate our design hypothesis: \n* [Mobile Prototype](https://popapp.in/w/projects/573c352f5dadb3423eba1c7f/preview/573d807cefecdecb057c2a50?transition=none&t=1471383993798).\n* [Usability Experiment conducted with 2 college friends](https://docs.google.com/document/d/1DfvKFUM0av9GngK-hunPttGycYIui95A2wMsnJa-bjE/edit?usp=sharing).\n\n\n## Let the coding begin!\n\nThe above solution was broken down into 2 parts:\n\n### Developing an automatic keyphrase extraction system:\n\n**Objective:**\nAutomatic analysis of the textual content of communities and teams in the platform to get valid and important tokens. By analyzing the data from the communities, we can generate a map of interests. The user can be onboarded more easily through the idea of having to select their interests and then being directed to relevant communities. Future goals of this module is to become a full fledged Machine Learning + Natural Language Processing tasks related to the project.\n\n**Architecture:**\nThe module is written in [Python](https://www.python.org/) and makes extensive use of [NLTK](http://www.nltk.org/). [Flask](http://flask.pocoo.org/) is added on top to provide webserver support. This entire module is dockerised into [Teem-Tag image](https://hub.docker.com/r/p2pvalue/teem-tag/). The image is used in a docker container which integrates with the [SwellRT](https://github.com/P2Pvalue/swellrt), the full-stack backend framework for Teem. SwellRT makes a HTTP dispatch to Teem-tag Daemon server which receives the text, processes it, and makes a POST request containing the tags back to SwellRT to update the teem/community object. Following is a schematic diagram for the same: \n\n![Architecture](/images/image07.png)\n\nCode for this module: https://github.com/p2pvalue/teem-tag. \n\nThis module received the following mentions in various contests apart from GSoC:\n* I presented this module as a speaker in Pycon, India's Annual Python Conference. [Pycon'16 Slides](https://docs.google.com/presentation/d/1VLjU2MQnB3GUw7p4z_Q6olFdYoW2q-LTsE8OUFZqrgI/edit?usp=sharing).\n* This module was extended to incorporate image processing support using Tensorflow. It was awarded the first and the second prize in [SwellRT's free software contest](https://swellrt.org/contest).\n\n### Developing the Matchmaking screens:\n\n**Objective**\nThe screens had to be integrated with the current design philosophy of Teem. I took some time to read and get used to the design thinking behind the platform. Worked extensively with Elena to finalize the screens so that they can get implemented. We used [Zeplin](https://zpl.io/11GBjj) to convert low fidelity mockups to high fidelity prototypes to make the process of converting design to working code easier:\n\n![Prototypes Demo](/images/image10.png)  \n\n\n**Progress**\n\n\nInterests Screen:\n![Interests_Screen](/images/image08.png)\n\n\nMatchmaking Screen:\n![Matchmaking_Screen](/images/image09.png)  \n\nCommmits for this module: [Matchmaking Commits](https://github.com/P2Pvalue/teem/commits/staging?author=prastut)\n\n## Mentors and Teem Project Members\n\nI thank all of the following members for patiently listening to every doubt, motivating me when I was initially failing, and helping me become a more mature person:  \n\n* [Samer Hassan](http://samer.hassan.name/), researcher at Berkman Klein Center, Harvard University. UCM Principal Investigator in the P2Pvalue. Leads research at Teem.\n* [Antonio Tapiador](http://singularities.org/atd/), developer, sysops, researcher at UCM. \n* [Pablo Ojanguren](http://p2pvalue.eu/author/pojanguren/), lead developer of SwellRT, the Teem backend. \n* [Elena Martinez](http://p2pvalue.eu/author/emartinez/), lead designer at Teem. \n\n## If I could do it over? \n* Speed up design process by A/B testing: Since I wanted pixel perfection in my designs, I spent a lot of time on thinking about them, which I could have spent on evaluating my hypothesis in the open and then pivoting from there based on the insights from the data collected. \n* Hustle more myself: Initially I thought the role of mentors was to guide me at each and every step. I was stopping a lot of times, in the fear of doing something wrong. It would have surely reduced the counts of reiteration.    \n* Get into the boots of the team: When you join another team, you start from scratch. Whereas the team members have been breathing in the project space for months! Asking more questions about the vision of the project and what it is trying to accomplish, leads your designs to be sensitive. Because a lighter shade of green doesn't matter in the large scheme of things.\n* Work life balance: I would have spent some more time with my family and my friends, who were given a \"not available\" status in the GSoC period. Balance leads to less burnouts and sometimes change does wonder for that frustrating creative block.\n\n## Conclusion\n\nParticipating in Google Summer of Code has brought me closer to the Teem's project members which comprises of an amazing group of developers and designers. The experience in working with them taught me essential soft skills like effective communication, designing for users and much more, than just writing code. I will be forever indebted to them for providing such a nurturing environment. \n\nLast but not the least, I thank Google for conducting Google Summer of Code. If it weren't for GSoC, I would have never learnt Python in depth, couldn't have been selected as a speaker at Pycon, wouldn't have the opportunity to present my work to Harvard \"Geeks\"!  \n\n> \"You can't connect the dots looking forward; you can only connect them looking backwards. So you have to trust that the dots will somehow connect in your future\" - Steve Jobs.\n\nI have been a fond believer of Google's vision through their products, and an avid follower of Google's design philosophy. Through GSoC, my belief in it's ethos becomes more stronger, of being a value driven company. I got to experience what it feels like to work in an organization which led me to gain more respect for Google because of the scale it operates on.","source":"_posts/gsoc.md","raw":"---\ntitle: Matchmaking Module for Teem\nsubtitle: Under Google Summer of Code program, 2016.\ncover_index: /images/posts/gsoc_cover.jpg\nlive_preview: https://teem.works/\ncode: https://github.com/P2Pvalue/teem-tag/tree/master\ndate: 2016-07-30 12:49:32\nproject_duration: March - August 2016.\ncover_detail: /images/gsoc/intro.jpg\ngoogleslides: 10qUKU-s42dNnkpIa4DrUmlhs7TyneeZeOT4i01StzVo\n---\n\n\nI am pleased to announce that I got selected for the prestigious Google Summer of Code '16 with [Berkman Klein Center for Internet and Society](https://cyber.law.harvard.edu/), Harvard University. Amongst the various open source projects by Berkman Center, I was selected for [Teem: a P2PValue collaboration app](https://teem.works/). This blog post details my work throughout the 5 months that I have been working with Teem members. \n\n## About Teem\n\nTeem is an app focused on increasing the participation and sustainability of commons-based peer production communities (e.g. Wikipedia, free software, Arduino). The model can also be applied to other open online communities (networks, open organizations) or even social movements (social centers, collectives). The 1-9-90 rule states that the collaboration on projects like Wikipedia, 90% of the participants of a community only view content, 9% of the participants edit content, and 1% of the participants actively create new content. After doing intensive social research and prototype testing, the main needs of the different roles within a community and the tools they typically lack (related to management and internal organization, listing the subprojects available and the needs of each) have been recognized. \n\n![About Teem](/images/gsoc/about_teem.jpg)\n\n\n\nThe app is grounded on these findings to reduce the frustrations of all participants and increase participation (90s=>9, 9s=>1), while providing a kind-of project management tool for communities (but informal/liquid/open to fit the context) together with a work-space with collaborative edition (like google-docs) and a group chat (like a whatsapp/telegram group). \n\n![Teem USP](/images/gsoc/collabview.jpg)\n\nLinks:\n\n* Current web-app: http://teem.works. \n* Android app encapsulating the web-app: http://tiny.cc/teemapp \n* Code: https://github.com/P2Pvalue/teem\n\n## My role \n\n* Problem Statement:\nWhen people start using a tool such as Teem, they come with a set of skills and interests. On the other hand, community projects have needs to fulfill, i.e. they have gaps or missing skills that are slowing down their development. I wanted to ease this very challenge of matching them, connecting newcomers with communities appealing to them. \nMy initial proposal : [GSoC Teem Matchmaking Proposal](https://docs.google.com/document/d/1DwtxhYupN_e8bX13vntU7csiP4hrbZq4MftBJGhE6v0/edit?usp=sharing). \n\n* Discussion (Community Bonding Period): \nDuring the community bonding period, the Teem project members and I got down on Hangouts to discuss the proposed solutions. Every member had to have an open mind and throw around crazy ideas. We were simultaneously collaborating on Google Docs, and jotting down our ideas. This type of planning was new to me, and I followed up by integrating such workflow in my college projects too. Links to our discussion: \n\t* [Matchmaking Creative Session](https://docs.google.com/document/d/1CXg_3Mpr87PD6t4ThH-zJiDy3XIqxgm_dCZNtXiK-FQ/edit?usp=sharing).\n\t* [Updated Matchmaking Proposal](https://docs.google.com/document/d/1LvVBdYovyf2vtXEOzq3OtNOdbfOCml6tqJxyG4ZhKe4/edit?usp=sharing).\n\n* Miscellaneous:\n   * [Small Bugfixes](https://github.com/P2Pvalue/teem/commits?author=prastut) were made during the bonding period to get acquainted with Teem's codebase. \n   * Our internal communication was shifted to Gitter. Most of our discussions can be found here: [Teem Matchmaking Gitter Channel](https://gitter.im/P2Pvalue/teem-matchmaking).\n\n\n## Final Solution\n\n![Solution](/images/gsoc/matchmaking.jpg)\n\nThrough the various discussions above, we formalized a matchmaking module. The proposed task flow was:\n\n * Introduce a new route for exploration called interests. Users without even signing up can click on this. \n * They would be presented with interests: tiles with categories like music, technology, culture etc.  \n * Once they select some of their interests, they would be taken to matchmaking screen. Here the user will be presented with the list of communities that correspond to user interests. \n * The communities will also be tagged through their content, and the users can also further make their search specific by clicking on the tags.\n\nMockup of the above workflow:\n![Workflow](/images/gsoc/matchmaking_mocks.jpg)\n\n\nThrough the above feature-set, the friction the user feels in terms of exploration on their own will drastically get reduced. Usability studies were also conducted to validate our design hypothesis: \n* [Mobile Prototype](https://popapp.in/w/projects/573c352f5dadb3423eba1c7f/preview/573d807cefecdecb057c2a50?transition=none&t=1471383993798).\n* [Usability Experiment conducted with 2 college friends](https://docs.google.com/document/d/1DfvKFUM0av9GngK-hunPttGycYIui95A2wMsnJa-bjE/edit?usp=sharing).\n\n\n## Let the coding begin!\n\nThe above solution was broken down into 2 parts:\n\n### Developing an automatic keyphrase extraction system:\n\n**Objective:**\nAutomatic analysis of the textual content of communities and teams in the platform to get valid and important tokens. By analyzing the data from the communities, we can generate a map of interests. The user can be onboarded more easily through the idea of having to select their interests and then being directed to relevant communities. Future goals of this module is to become a full fledged Machine Learning + Natural Language Processing tasks related to the project.\n\n**Architecture:**\nThe module is written in [Python](https://www.python.org/) and makes extensive use of [NLTK](http://www.nltk.org/). [Flask](http://flask.pocoo.org/) is added on top to provide webserver support. This entire module is dockerised into [Teem-Tag image](https://hub.docker.com/r/p2pvalue/teem-tag/). The image is used in a docker container which integrates with the [SwellRT](https://github.com/P2Pvalue/swellrt), the full-stack backend framework for Teem. SwellRT makes a HTTP dispatch to Teem-tag Daemon server which receives the text, processes it, and makes a POST request containing the tags back to SwellRT to update the teem/community object. Following is a schematic diagram for the same: \n\n![Architecture](/images/image07.png)\n\nCode for this module: https://github.com/p2pvalue/teem-tag. \n\nThis module received the following mentions in various contests apart from GSoC:\n* I presented this module as a speaker in Pycon, India's Annual Python Conference. [Pycon'16 Slides](https://docs.google.com/presentation/d/1VLjU2MQnB3GUw7p4z_Q6olFdYoW2q-LTsE8OUFZqrgI/edit?usp=sharing).\n* This module was extended to incorporate image processing support using Tensorflow. It was awarded the first and the second prize in [SwellRT's free software contest](https://swellrt.org/contest).\n\n### Developing the Matchmaking screens:\n\n**Objective**\nThe screens had to be integrated with the current design philosophy of Teem. I took some time to read and get used to the design thinking behind the platform. Worked extensively with Elena to finalize the screens so that they can get implemented. We used [Zeplin](https://zpl.io/11GBjj) to convert low fidelity mockups to high fidelity prototypes to make the process of converting design to working code easier:\n\n![Prototypes Demo](/images/image10.png)  \n\n\n**Progress**\n\n\nInterests Screen:\n![Interests_Screen](/images/image08.png)\n\n\nMatchmaking Screen:\n![Matchmaking_Screen](/images/image09.png)  \n\nCommmits for this module: [Matchmaking Commits](https://github.com/P2Pvalue/teem/commits/staging?author=prastut)\n\n## Mentors and Teem Project Members\n\nI thank all of the following members for patiently listening to every doubt, motivating me when I was initially failing, and helping me become a more mature person:  \n\n* [Samer Hassan](http://samer.hassan.name/), researcher at Berkman Klein Center, Harvard University. UCM Principal Investigator in the P2Pvalue. Leads research at Teem.\n* [Antonio Tapiador](http://singularities.org/atd/), developer, sysops, researcher at UCM. \n* [Pablo Ojanguren](http://p2pvalue.eu/author/pojanguren/), lead developer of SwellRT, the Teem backend. \n* [Elena Martinez](http://p2pvalue.eu/author/emartinez/), lead designer at Teem. \n\n## If I could do it over? \n* Speed up design process by A/B testing: Since I wanted pixel perfection in my designs, I spent a lot of time on thinking about them, which I could have spent on evaluating my hypothesis in the open and then pivoting from there based on the insights from the data collected. \n* Hustle more myself: Initially I thought the role of mentors was to guide me at each and every step. I was stopping a lot of times, in the fear of doing something wrong. It would have surely reduced the counts of reiteration.    \n* Get into the boots of the team: When you join another team, you start from scratch. Whereas the team members have been breathing in the project space for months! Asking more questions about the vision of the project and what it is trying to accomplish, leads your designs to be sensitive. Because a lighter shade of green doesn't matter in the large scheme of things.\n* Work life balance: I would have spent some more time with my family and my friends, who were given a \"not available\" status in the GSoC period. Balance leads to less burnouts and sometimes change does wonder for that frustrating creative block.\n\n## Conclusion\n\nParticipating in Google Summer of Code has brought me closer to the Teem's project members which comprises of an amazing group of developers and designers. The experience in working with them taught me essential soft skills like effective communication, designing for users and much more, than just writing code. I will be forever indebted to them for providing such a nurturing environment. \n\nLast but not the least, I thank Google for conducting Google Summer of Code. If it weren't for GSoC, I would have never learnt Python in depth, couldn't have been selected as a speaker at Pycon, wouldn't have the opportunity to present my work to Harvard \"Geeks\"!  \n\n> \"You can't connect the dots looking forward; you can only connect them looking backwards. So you have to trust that the dots will somehow connect in your future\" - Steve Jobs.\n\nI have been a fond believer of Google's vision through their products, and an avid follower of Google's design philosophy. Through GSoC, my belief in it's ethos becomes more stronger, of being a value driven company. I got to experience what it feels like to work in an organization which led me to gain more respect for Google because of the scale it operates on.","slug":"gsoc","published":1,"updated":"2017-01-16T13:41:43.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj5o1vdn90006rtwyi9my5zip","content":"<p>I am pleased to announce that I got selected for the prestigious Google Summer of Code 16 with <a href=\"https://cyber.law.harvard.edu/\" target=\"_blank\" rel=\"external\">Berkman Klein Center for Internet and Society</a>, Harvard University. Amongst the various open source projects by Berkman Center, I was selected for <a href=\"https://teem.works/\" target=\"_blank\" rel=\"external\">Teem: a P2PValue collaboration app</a>. This blog post details my work throughout the 5 months that I have been working with Teem members. </p>\n<h2 id=\"About-Teem\"><a href=\"#About-Teem\" class=\"headerlink\" title=\"About Teem\"></a>About Teem</h2><p>Teem is an app focused on increasing the participation and sustainability of commons-based peer production communities (e.g. Wikipedia, free software, Arduino). The model can also be applied to other open online communities (networks, open organizations) or even social movements (social centers, collectives). The 1-9-90 rule states that the collaboration on projects like Wikipedia, 90% of the participants of a community only view content, 9% of the participants edit content, and 1% of the participants actively create new content. After doing intensive social research and prototype testing, the main needs of the different roles within a community and the tools they typically lack (related to management and internal organization, listing the subprojects available and the needs of each) have been recognized. </p>\n<p><img src=\"/images/gsoc/about_teem.jpg\" alt=\"About Teem\"></p>\n<p>The app is grounded on these findings to reduce the frustrations of all participants and increase participation (90s=&gt;9, 9s=&gt;1), while providing a kind-of project management tool for communities (but informal/liquid/open to fit the context) together with a work-space with collaborative edition (like google-docs) and a group chat (like a whatsapp/telegram group). </p>\n<p><img src=\"/images/gsoc/collabview.jpg\" alt=\"Teem USP\"></p>\n<p>Links:</p>\n<ul>\n<li>Current web-app: <a href=\"http://teem.works\" target=\"_blank\" rel=\"external\">http://teem.works</a>. </li>\n<li>Android app encapsulating the web-app: <a href=\"http://tiny.cc/teemapp\" target=\"_blank\" rel=\"external\">http://tiny.cc/teemapp</a> </li>\n<li>Code: <a href=\"https://github.com/P2Pvalue/teem\" target=\"_blank\" rel=\"external\">https://github.com/P2Pvalue/teem</a></li>\n</ul>\n<h2 id=\"My-role\"><a href=\"#My-role\" class=\"headerlink\" title=\"My role\"></a>My role</h2><ul>\n<li><p>Problem Statement:<br>When people start using a tool such as Teem, they come with a set of skills and interests. On the other hand, community projects have needs to fulfill, i.e. they have gaps or missing skills that are slowing down their development. I wanted to ease this very challenge of matching them, connecting newcomers with communities appealing to them.<br>My initial proposal : <a href=\"https://docs.google.com/document/d/1DwtxhYupN_e8bX13vntU7csiP4hrbZq4MftBJGhE6v0/edit?usp=sharing\" target=\"_blank\" rel=\"external\">GSoC Teem Matchmaking Proposal</a>. </p>\n</li>\n<li><p>Discussion (Community Bonding Period):<br>During the community bonding period, the Teem project members and I got down on Hangouts to discuss the proposed solutions. Every member had to have an open mind and throw around crazy ideas. We were simultaneously collaborating on Google Docs, and jotting down our ideas. This type of planning was new to me, and I followed up by integrating such workflow in my college projects too. Links to our discussion: </p>\n<ul>\n<li><a href=\"https://docs.google.com/document/d/1CXg_3Mpr87PD6t4ThH-zJiDy3XIqxgm_dCZNtXiK-FQ/edit?usp=sharing\" target=\"_blank\" rel=\"external\">Matchmaking Creative Session</a>.</li>\n<li><a href=\"https://docs.google.com/document/d/1LvVBdYovyf2vtXEOzq3OtNOdbfOCml6tqJxyG4ZhKe4/edit?usp=sharing\" target=\"_blank\" rel=\"external\">Updated Matchmaking Proposal</a>.</li>\n</ul>\n</li>\n<li><p>Miscellaneous:</p>\n<ul>\n<li><a href=\"https://github.com/P2Pvalue/teem/commits?author=prastut\" target=\"_blank\" rel=\"external\">Small Bugfixes</a> were made during the bonding period to get acquainted with Teems codebase. </li>\n<li>Our internal communication was shifted to Gitter. Most of our discussions can be found here: <a href=\"https://gitter.im/P2Pvalue/teem-matchmaking\" target=\"_blank\" rel=\"external\">Teem Matchmaking Gitter Channel</a>.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Final-Solution\"><a href=\"#Final-Solution\" class=\"headerlink\" title=\"Final Solution\"></a>Final Solution</h2><p><img src=\"/images/gsoc/matchmaking.jpg\" alt=\"Solution\"></p>\n<p>Through the various discussions above, we formalized a matchmaking module. The proposed task flow was:</p>\n<ul>\n<li>Introduce a new route for exploration called interests. Users without even signing up can click on this. </li>\n<li>They would be presented with interests: tiles with categories like music, technology, culture etc.  </li>\n<li>Once they select some of their interests, they would be taken to matchmaking screen. Here the user will be presented with the list of communities that correspond to user interests. </li>\n<li>The communities will also be tagged through their content, and the users can also further make their search specific by clicking on the tags.</li>\n</ul>\n<p>Mockup of the above workflow:<br><img src=\"/images/gsoc/matchmaking_mocks.jpg\" alt=\"Workflow\"></p>\n<p>Through the above feature-set, the friction the user feels in terms of exploration on their own will drastically get reduced. Usability studies were also conducted to validate our design hypothesis: </p>\n<ul>\n<li><a href=\"https://popapp.in/w/projects/573c352f5dadb3423eba1c7f/preview/573d807cefecdecb057c2a50?transition=none&amp;t=1471383993798\" target=\"_blank\" rel=\"external\">Mobile Prototype</a>.</li>\n<li><a href=\"https://docs.google.com/document/d/1DfvKFUM0av9GngK-hunPttGycYIui95A2wMsnJa-bjE/edit?usp=sharing\" target=\"_blank\" rel=\"external\">Usability Experiment conducted with 2 college friends</a>.</li>\n</ul>\n<h2 id=\"Let-the-coding-begin\"><a href=\"#Let-the-coding-begin\" class=\"headerlink\" title=\"Let the coding begin!\"></a>Let the coding begin!</h2><p>The above solution was broken down into 2 parts:</p>\n<h3 id=\"Developing-an-automatic-keyphrase-extraction-system\"><a href=\"#Developing-an-automatic-keyphrase-extraction-system\" class=\"headerlink\" title=\"Developing an automatic keyphrase extraction system:\"></a>Developing an automatic keyphrase extraction system:</h3><p><strong>Objective:</strong><br>Automatic analysis of the textual content of communities and teams in the platform to get valid and important tokens. By analyzing the data from the communities, we can generate a map of interests. The user can be onboarded more easily through the idea of having to select their interests and then being directed to relevant communities. Future goals of this module is to become a full fledged Machine Learning + Natural Language Processing tasks related to the project.</p>\n<p><strong>Architecture:</strong><br>The module is written in <a href=\"https://www.python.org/\" target=\"_blank\" rel=\"external\">Python</a> and makes extensive use of <a href=\"http://www.nltk.org/\" target=\"_blank\" rel=\"external\">NLTK</a>. <a href=\"http://flask.pocoo.org/\" target=\"_blank\" rel=\"external\">Flask</a> is added on top to provide webserver support. This entire module is dockerised into <a href=\"https://hub.docker.com/r/p2pvalue/teem-tag/\" target=\"_blank\" rel=\"external\">Teem-Tag image</a>. The image is used in a docker container which integrates with the <a href=\"https://github.com/P2Pvalue/swellrt\" target=\"_blank\" rel=\"external\">SwellRT</a>, the full-stack backend framework for Teem. SwellRT makes a HTTP dispatch to Teem-tag Daemon server which receives the text, processes it, and makes a POST request containing the tags back to SwellRT to update the teem/community object. Following is a schematic diagram for the same: </p>\n<p><img src=\"/images/image07.png\" alt=\"Architecture\"></p>\n<p>Code for this module: <a href=\"https://github.com/p2pvalue/teem-tag\" target=\"_blank\" rel=\"external\">https://github.com/p2pvalue/teem-tag</a>. </p>\n<p>This module received the following mentions in various contests apart from GSoC:</p>\n<ul>\n<li>I presented this module as a speaker in Pycon, Indias Annual Python Conference. <a href=\"https://docs.google.com/presentation/d/1VLjU2MQnB3GUw7p4z_Q6olFdYoW2q-LTsE8OUFZqrgI/edit?usp=sharing\" target=\"_blank\" rel=\"external\">Pycon16 Slides</a>.</li>\n<li>This module was extended to incorporate image processing support using Tensorflow. It was awarded the first and the second prize in <a href=\"https://swellrt.org/contest\" target=\"_blank\" rel=\"external\">SwellRTs free software contest</a>.</li>\n</ul>\n<h3 id=\"Developing-the-Matchmaking-screens\"><a href=\"#Developing-the-Matchmaking-screens\" class=\"headerlink\" title=\"Developing the Matchmaking screens:\"></a>Developing the Matchmaking screens:</h3><p><strong>Objective</strong><br>The screens had to be integrated with the current design philosophy of Teem. I took some time to read and get used to the design thinking behind the platform. Worked extensively with Elena to finalize the screens so that they can get implemented. We used <a href=\"https://zpl.io/11GBjj\" target=\"_blank\" rel=\"external\">Zeplin</a> to convert low fidelity mockups to high fidelity prototypes to make the process of converting design to working code easier:</p>\n<p><img src=\"/images/image10.png\" alt=\"Prototypes Demo\">  </p>\n<p><strong>Progress</strong></p>\n<p>Interests Screen:<br><img src=\"/images/image08.png\" alt=\"Interests_Screen\"></p>\n<p>Matchmaking Screen:<br><img src=\"/images/image09.png\" alt=\"Matchmaking_Screen\">  </p>\n<p>Commmits for this module: <a href=\"https://github.com/P2Pvalue/teem/commits/staging?author=prastut\" target=\"_blank\" rel=\"external\">Matchmaking Commits</a></p>\n<h2 id=\"Mentors-and-Teem-Project-Members\"><a href=\"#Mentors-and-Teem-Project-Members\" class=\"headerlink\" title=\"Mentors and Teem Project Members\"></a>Mentors and Teem Project Members</h2><p>I thank all of the following members for patiently listening to every doubt, motivating me when I was initially failing, and helping me become a more mature person:  </p>\n<ul>\n<li><a href=\"http://samer.hassan.name/\" target=\"_blank\" rel=\"external\">Samer Hassan</a>, researcher at Berkman Klein Center, Harvard University. UCM Principal Investigator in the P2Pvalue. Leads research at Teem.</li>\n<li><a href=\"http://singularities.org/atd/\" target=\"_blank\" rel=\"external\">Antonio Tapiador</a>, developer, sysops, researcher at UCM. </li>\n<li><a href=\"http://p2pvalue.eu/author/pojanguren/\" target=\"_blank\" rel=\"external\">Pablo Ojanguren</a>, lead developer of SwellRT, the Teem backend. </li>\n<li><a href=\"http://p2pvalue.eu/author/emartinez/\" target=\"_blank\" rel=\"external\">Elena Martinez</a>, lead designer at Teem. </li>\n</ul>\n<h2 id=\"If-I-could-do-it-over\"><a href=\"#If-I-could-do-it-over\" class=\"headerlink\" title=\"If I could do it over?\"></a>If I could do it over?</h2><ul>\n<li>Speed up design process by A/B testing: Since I wanted pixel perfection in my designs, I spent a lot of time on thinking about them, which I could have spent on evaluating my hypothesis in the open and then pivoting from there based on the insights from the data collected. </li>\n<li>Hustle more myself: Initially I thought the role of mentors was to guide me at each and every step. I was stopping a lot of times, in the fear of doing something wrong. It would have surely reduced the counts of reiteration.    </li>\n<li>Get into the boots of the team: When you join another team, you start from scratch. Whereas the team members have been breathing in the project space for months! Asking more questions about the vision of the project and what it is trying to accomplish, leads your designs to be sensitive. Because a lighter shade of green doesnt matter in the large scheme of things.</li>\n<li>Work life balance: I would have spent some more time with my family and my friends, who were given a not available status in the GSoC period. Balance leads to less burnouts and sometimes change does wonder for that frustrating creative block.</li>\n</ul>\n<h2 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h2><p>Participating in Google Summer of Code has brought me closer to the Teems project members which comprises of an amazing group of developers and designers. The experience in working with them taught me essential soft skills like effective communication, designing for users and much more, than just writing code. I will be forever indebted to them for providing such a nurturing environment. </p>\n<p>Last but not the least, I thank Google for conducting Google Summer of Code. If it werent for GSoC, I would have never learnt Python in depth, couldnt have been selected as a speaker at Pycon, wouldnt have the opportunity to present my work to Harvard Geeks!  </p>\n<blockquote>\n<p>You cant connect the dots looking forward; you can only connect them looking backwards. So you have to trust that the dots will somehow connect in your future - Steve Jobs.</p>\n</blockquote>\n<p>I have been a fond believer of Googles vision through their products, and an avid follower of Googles design philosophy. Through GSoC, my belief in its ethos becomes more stronger, of being a value driven company. I got to experience what it feels like to work in an organization which led me to gain more respect for Google because of the scale it operates on.</p>\n","site":{"data":{}},"excerpt":"","more":"<p>I am pleased to announce that I got selected for the prestigious Google Summer of Code 16 with <a href=\"https://cyber.law.harvard.edu/\" target=\"_blank\" rel=\"external\">Berkman Klein Center for Internet and Society</a>, Harvard University. Amongst the various open source projects by Berkman Center, I was selected for <a href=\"https://teem.works/\" target=\"_blank\" rel=\"external\">Teem: a P2PValue collaboration app</a>. This blog post details my work throughout the 5 months that I have been working with Teem members. </p>\n<h2 id=\"About-Teem\"><a href=\"#About-Teem\" class=\"headerlink\" title=\"About Teem\"></a>About Teem</h2><p>Teem is an app focused on increasing the participation and sustainability of commons-based peer production communities (e.g. Wikipedia, free software, Arduino). The model can also be applied to other open online communities (networks, open organizations) or even social movements (social centers, collectives). The 1-9-90 rule states that the collaboration on projects like Wikipedia, 90% of the participants of a community only view content, 9% of the participants edit content, and 1% of the participants actively create new content. After doing intensive social research and prototype testing, the main needs of the different roles within a community and the tools they typically lack (related to management and internal organization, listing the subprojects available and the needs of each) have been recognized. </p>\n<p><img src=\"/images/gsoc/about_teem.jpg\" alt=\"About Teem\"></p>\n<p>The app is grounded on these findings to reduce the frustrations of all participants and increase participation (90s=&gt;9, 9s=&gt;1), while providing a kind-of project management tool for communities (but informal/liquid/open to fit the context) together with a work-space with collaborative edition (like google-docs) and a group chat (like a whatsapp/telegram group). </p>\n<p><img src=\"/images/gsoc/collabview.jpg\" alt=\"Teem USP\"></p>\n<p>Links:</p>\n<ul>\n<li>Current web-app: <a href=\"http://teem.works\" target=\"_blank\" rel=\"external\">http://teem.works</a>. </li>\n<li>Android app encapsulating the web-app: <a href=\"http://tiny.cc/teemapp\" target=\"_blank\" rel=\"external\">http://tiny.cc/teemapp</a> </li>\n<li>Code: <a href=\"https://github.com/P2Pvalue/teem\" target=\"_blank\" rel=\"external\">https://github.com/P2Pvalue/teem</a></li>\n</ul>\n<h2 id=\"My-role\"><a href=\"#My-role\" class=\"headerlink\" title=\"My role\"></a>My role</h2><ul>\n<li><p>Problem Statement:<br>When people start using a tool such as Teem, they come with a set of skills and interests. On the other hand, community projects have needs to fulfill, i.e. they have gaps or missing skills that are slowing down their development. I wanted to ease this very challenge of matching them, connecting newcomers with communities appealing to them.<br>My initial proposal : <a href=\"https://docs.google.com/document/d/1DwtxhYupN_e8bX13vntU7csiP4hrbZq4MftBJGhE6v0/edit?usp=sharing\" target=\"_blank\" rel=\"external\">GSoC Teem Matchmaking Proposal</a>. </p>\n</li>\n<li><p>Discussion (Community Bonding Period):<br>During the community bonding period, the Teem project members and I got down on Hangouts to discuss the proposed solutions. Every member had to have an open mind and throw around crazy ideas. We were simultaneously collaborating on Google Docs, and jotting down our ideas. This type of planning was new to me, and I followed up by integrating such workflow in my college projects too. Links to our discussion: </p>\n<ul>\n<li><a href=\"https://docs.google.com/document/d/1CXg_3Mpr87PD6t4ThH-zJiDy3XIqxgm_dCZNtXiK-FQ/edit?usp=sharing\" target=\"_blank\" rel=\"external\">Matchmaking Creative Session</a>.</li>\n<li><a href=\"https://docs.google.com/document/d/1LvVBdYovyf2vtXEOzq3OtNOdbfOCml6tqJxyG4ZhKe4/edit?usp=sharing\" target=\"_blank\" rel=\"external\">Updated Matchmaking Proposal</a>.</li>\n</ul>\n</li>\n<li><p>Miscellaneous:</p>\n<ul>\n<li><a href=\"https://github.com/P2Pvalue/teem/commits?author=prastut\" target=\"_blank\" rel=\"external\">Small Bugfixes</a> were made during the bonding period to get acquainted with Teems codebase. </li>\n<li>Our internal communication was shifted to Gitter. Most of our discussions can be found here: <a href=\"https://gitter.im/P2Pvalue/teem-matchmaking\" target=\"_blank\" rel=\"external\">Teem Matchmaking Gitter Channel</a>.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Final-Solution\"><a href=\"#Final-Solution\" class=\"headerlink\" title=\"Final Solution\"></a>Final Solution</h2><p><img src=\"/images/gsoc/matchmaking.jpg\" alt=\"Solution\"></p>\n<p>Through the various discussions above, we formalized a matchmaking module. The proposed task flow was:</p>\n<ul>\n<li>Introduce a new route for exploration called interests. Users without even signing up can click on this. </li>\n<li>They would be presented with interests: tiles with categories like music, technology, culture etc.  </li>\n<li>Once they select some of their interests, they would be taken to matchmaking screen. Here the user will be presented with the list of communities that correspond to user interests. </li>\n<li>The communities will also be tagged through their content, and the users can also further make their search specific by clicking on the tags.</li>\n</ul>\n<p>Mockup of the above workflow:<br><img src=\"/images/gsoc/matchmaking_mocks.jpg\" alt=\"Workflow\"></p>\n<p>Through the above feature-set, the friction the user feels in terms of exploration on their own will drastically get reduced. Usability studies were also conducted to validate our design hypothesis: </p>\n<ul>\n<li><a href=\"https://popapp.in/w/projects/573c352f5dadb3423eba1c7f/preview/573d807cefecdecb057c2a50?transition=none&amp;t=1471383993798\" target=\"_blank\" rel=\"external\">Mobile Prototype</a>.</li>\n<li><a href=\"https://docs.google.com/document/d/1DfvKFUM0av9GngK-hunPttGycYIui95A2wMsnJa-bjE/edit?usp=sharing\" target=\"_blank\" rel=\"external\">Usability Experiment conducted with 2 college friends</a>.</li>\n</ul>\n<h2 id=\"Let-the-coding-begin\"><a href=\"#Let-the-coding-begin\" class=\"headerlink\" title=\"Let the coding begin!\"></a>Let the coding begin!</h2><p>The above solution was broken down into 2 parts:</p>\n<h3 id=\"Developing-an-automatic-keyphrase-extraction-system\"><a href=\"#Developing-an-automatic-keyphrase-extraction-system\" class=\"headerlink\" title=\"Developing an automatic keyphrase extraction system:\"></a>Developing an automatic keyphrase extraction system:</h3><p><strong>Objective:</strong><br>Automatic analysis of the textual content of communities and teams in the platform to get valid and important tokens. By analyzing the data from the communities, we can generate a map of interests. The user can be onboarded more easily through the idea of having to select their interests and then being directed to relevant communities. Future goals of this module is to become a full fledged Machine Learning + Natural Language Processing tasks related to the project.</p>\n<p><strong>Architecture:</strong><br>The module is written in <a href=\"https://www.python.org/\" target=\"_blank\" rel=\"external\">Python</a> and makes extensive use of <a href=\"http://www.nltk.org/\" target=\"_blank\" rel=\"external\">NLTK</a>. <a href=\"http://flask.pocoo.org/\" target=\"_blank\" rel=\"external\">Flask</a> is added on top to provide webserver support. This entire module is dockerised into <a href=\"https://hub.docker.com/r/p2pvalue/teem-tag/\" target=\"_blank\" rel=\"external\">Teem-Tag image</a>. The image is used in a docker container which integrates with the <a href=\"https://github.com/P2Pvalue/swellrt\" target=\"_blank\" rel=\"external\">SwellRT</a>, the full-stack backend framework for Teem. SwellRT makes a HTTP dispatch to Teem-tag Daemon server which receives the text, processes it, and makes a POST request containing the tags back to SwellRT to update the teem/community object. Following is a schematic diagram for the same: </p>\n<p><img src=\"/images/image07.png\" alt=\"Architecture\"></p>\n<p>Code for this module: <a href=\"https://github.com/p2pvalue/teem-tag\" target=\"_blank\" rel=\"external\">https://github.com/p2pvalue/teem-tag</a>. </p>\n<p>This module received the following mentions in various contests apart from GSoC:</p>\n<ul>\n<li>I presented this module as a speaker in Pycon, Indias Annual Python Conference. <a href=\"https://docs.google.com/presentation/d/1VLjU2MQnB3GUw7p4z_Q6olFdYoW2q-LTsE8OUFZqrgI/edit?usp=sharing\" target=\"_blank\" rel=\"external\">Pycon16 Slides</a>.</li>\n<li>This module was extended to incorporate image processing support using Tensorflow. It was awarded the first and the second prize in <a href=\"https://swellrt.org/contest\" target=\"_blank\" rel=\"external\">SwellRTs free software contest</a>.</li>\n</ul>\n<h3 id=\"Developing-the-Matchmaking-screens\"><a href=\"#Developing-the-Matchmaking-screens\" class=\"headerlink\" title=\"Developing the Matchmaking screens:\"></a>Developing the Matchmaking screens:</h3><p><strong>Objective</strong><br>The screens had to be integrated with the current design philosophy of Teem. I took some time to read and get used to the design thinking behind the platform. Worked extensively with Elena to finalize the screens so that they can get implemented. We used <a href=\"https://zpl.io/11GBjj\" target=\"_blank\" rel=\"external\">Zeplin</a> to convert low fidelity mockups to high fidelity prototypes to make the process of converting design to working code easier:</p>\n<p><img src=\"/images/image10.png\" alt=\"Prototypes Demo\">  </p>\n<p><strong>Progress</strong></p>\n<p>Interests Screen:<br><img src=\"/images/image08.png\" alt=\"Interests_Screen\"></p>\n<p>Matchmaking Screen:<br><img src=\"/images/image09.png\" alt=\"Matchmaking_Screen\">  </p>\n<p>Commmits for this module: <a href=\"https://github.com/P2Pvalue/teem/commits/staging?author=prastut\" target=\"_blank\" rel=\"external\">Matchmaking Commits</a></p>\n<h2 id=\"Mentors-and-Teem-Project-Members\"><a href=\"#Mentors-and-Teem-Project-Members\" class=\"headerlink\" title=\"Mentors and Teem Project Members\"></a>Mentors and Teem Project Members</h2><p>I thank all of the following members for patiently listening to every doubt, motivating me when I was initially failing, and helping me become a more mature person:  </p>\n<ul>\n<li><a href=\"http://samer.hassan.name/\" target=\"_blank\" rel=\"external\">Samer Hassan</a>, researcher at Berkman Klein Center, Harvard University. UCM Principal Investigator in the P2Pvalue. Leads research at Teem.</li>\n<li><a href=\"http://singularities.org/atd/\" target=\"_blank\" rel=\"external\">Antonio Tapiador</a>, developer, sysops, researcher at UCM. </li>\n<li><a href=\"http://p2pvalue.eu/author/pojanguren/\" target=\"_blank\" rel=\"external\">Pablo Ojanguren</a>, lead developer of SwellRT, the Teem backend. </li>\n<li><a href=\"http://p2pvalue.eu/author/emartinez/\" target=\"_blank\" rel=\"external\">Elena Martinez</a>, lead designer at Teem. </li>\n</ul>\n<h2 id=\"If-I-could-do-it-over\"><a href=\"#If-I-could-do-it-over\" class=\"headerlink\" title=\"If I could do it over?\"></a>If I could do it over?</h2><ul>\n<li>Speed up design process by A/B testing: Since I wanted pixel perfection in my designs, I spent a lot of time on thinking about them, which I could have spent on evaluating my hypothesis in the open and then pivoting from there based on the insights from the data collected. </li>\n<li>Hustle more myself: Initially I thought the role of mentors was to guide me at each and every step. I was stopping a lot of times, in the fear of doing something wrong. It would have surely reduced the counts of reiteration.    </li>\n<li>Get into the boots of the team: When you join another team, you start from scratch. Whereas the team members have been breathing in the project space for months! Asking more questions about the vision of the project and what it is trying to accomplish, leads your designs to be sensitive. Because a lighter shade of green doesnt matter in the large scheme of things.</li>\n<li>Work life balance: I would have spent some more time with my family and my friends, who were given a not available status in the GSoC period. Balance leads to less burnouts and sometimes change does wonder for that frustrating creative block.</li>\n</ul>\n<h2 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h2><p>Participating in Google Summer of Code has brought me closer to the Teems project members which comprises of an amazing group of developers and designers. The experience in working with them taught me essential soft skills like effective communication, designing for users and much more, than just writing code. I will be forever indebted to them for providing such a nurturing environment. </p>\n<p>Last but not the least, I thank Google for conducting Google Summer of Code. If it werent for GSoC, I would have never learnt Python in depth, couldnt have been selected as a speaker at Pycon, wouldnt have the opportunity to present my work to Harvard Geeks!  </p>\n<blockquote>\n<p>You cant connect the dots looking forward; you can only connect them looking backwards. So you have to trust that the dots will somehow connect in your future - Steve Jobs.</p>\n</blockquote>\n<p>I have been a fond believer of Googles vision through their products, and an avid follower of Googles design philosophy. Through GSoC, my belief in its ethos becomes more stronger, of being a value driven company. I got to experience what it feels like to work in an organization which led me to gain more respect for Google because of the scale it operates on.</p>\n"},{"title":"Houseafic","subtitle":"Full Stack Developer Intern.","cover_index":"/images/posts/houseafic_cover.jpg","live_preview":"https://www.houseafic.com/","project_duration":"December - March 2015.","date":"2016-06-30T12:19:32.000Z","_content":"\n## About Houseafic\nHouseafic is trying to disrupt the monopoly of corrupt real estate builders in India by shifting the focus to the customers. By empowering the buyer to make better decisions, the idea is to change the dynamics of the current market. People have the right to know what they are actually buying instead of pamphlets and paper trail and Houseafic endeavours to provide them with this information.\n\n## Idea\n\nThrough market research, the founders came to the conclusion that customers who are purchasing real-estate are being victims of the monopoly of builders. By collating all the available information related to the customer's project under one platform and dispatching reports with technical analysis and observations, the vision is that customers can one day track their property, and make informed decisions. The real value is the decoding engine: getting help reading between the lines. Houseafic deconstructs developer offers into simple understandable terms and measure actually impactable to the end customer.\n\n## Recommendation\n\n{% blockquote Aditya Kumar Nayak, - Co-Founder at Houseafic.%}\nPrastut has the right combination of audacity, hunger and humanity. :)\n{% endblockquote %}\n\n\n## My Role\nI joined a small team of 8 full time members and collaborated with the founders, product manager, engineers and other interns to understand the company's core values. My major project was to create and improve the B2C dashboard for customers to easily schedule project reports. My role in the project included: \n* Design: Used the existing designs from B2B dashboard to create the initial layout for B2C. Evaluated similar products, explored ideas and functionalities with the founders.\n* Tech: Created the current user interface for B2C clients. Closed Parse API by assigning ACL. Moved code server side using Express to increase SEO.\n* Technical Lead for new interns. Assisted in managing the code-base and delegating issues on Github.\n\nAll work samples / project images cannot be shown here because of NDA.\n\n## Conclusion\n\nInterning at Houseafic was a gamechanger for me. I matured as a designer and equipped myself with more tech chops. I was able to see the power of technology in revolutionizing things which were never even heard of and how design plays a massive role. The most important win for me was that I found a lifelong mentor in Mr. Aditya, the cofounder of Houseafic. \n\n![webapp](/images/houseafic/pc.jpg)","source":"_posts/houseafic.md","raw":"---\ntitle: Houseafic\nsubtitle: Full Stack Developer Intern.\ncover_index: /images/posts/houseafic_cover.jpg\nlive_preview: https://www.houseafic.com/\nproject_duration: December - March 2015.\ndate: 2016-06-30 17:49:32 \n---\n\n## About Houseafic\nHouseafic is trying to disrupt the monopoly of corrupt real estate builders in India by shifting the focus to the customers. By empowering the buyer to make better decisions, the idea is to change the dynamics of the current market. People have the right to know what they are actually buying instead of pamphlets and paper trail and Houseafic endeavours to provide them with this information.\n\n## Idea\n\nThrough market research, the founders came to the conclusion that customers who are purchasing real-estate are being victims of the monopoly of builders. By collating all the available information related to the customer's project under one platform and dispatching reports with technical analysis and observations, the vision is that customers can one day track their property, and make informed decisions. The real value is the decoding engine: getting help reading between the lines. Houseafic deconstructs developer offers into simple understandable terms and measure actually impactable to the end customer.\n\n## Recommendation\n\n{% blockquote Aditya Kumar Nayak, - Co-Founder at Houseafic.%}\nPrastut has the right combination of audacity, hunger and humanity. :)\n{% endblockquote %}\n\n\n## My Role\nI joined a small team of 8 full time members and collaborated with the founders, product manager, engineers and other interns to understand the company's core values. My major project was to create and improve the B2C dashboard for customers to easily schedule project reports. My role in the project included: \n* Design: Used the existing designs from B2B dashboard to create the initial layout for B2C. Evaluated similar products, explored ideas and functionalities with the founders.\n* Tech: Created the current user interface for B2C clients. Closed Parse API by assigning ACL. Moved code server side using Express to increase SEO.\n* Technical Lead for new interns. Assisted in managing the code-base and delegating issues on Github.\n\nAll work samples / project images cannot be shown here because of NDA.\n\n## Conclusion\n\nInterning at Houseafic was a gamechanger for me. I matured as a designer and equipped myself with more tech chops. I was able to see the power of technology in revolutionizing things which were never even heard of and how design plays a massive role. The most important win for me was that I found a lifelong mentor in Mr. Aditya, the cofounder of Houseafic. \n\n![webapp](/images/houseafic/pc.jpg)","slug":"houseafic","published":1,"updated":"2017-01-11T07:26:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj5o1vdnb0007rtwy2y6zuhei","content":"<h2 id=\"About-Houseafic\"><a href=\"#About-Houseafic\" class=\"headerlink\" title=\"About Houseafic\"></a>About Houseafic</h2><p>Houseafic is trying to disrupt the monopoly of corrupt real estate builders in India by shifting the focus to the customers. By empowering the buyer to make better decisions, the idea is to change the dynamics of the current market. People have the right to know what they are actually buying instead of pamphlets and paper trail and Houseafic endeavours to provide them with this information.</p>\n<h2 id=\"Idea\"><a href=\"#Idea\" class=\"headerlink\" title=\"Idea\"></a>Idea</h2><p>Through market research, the founders came to the conclusion that customers who are purchasing real-estate are being victims of the monopoly of builders. By collating all the available information related to the customers project under one platform and dispatching reports with technical analysis and observations, the vision is that customers can one day track their property, and make informed decisions. The real value is the decoding engine: getting help reading between the lines. Houseafic deconstructs developer offers into simple understandable terms and measure actually impactable to the end customer.</p>\n<h2 id=\"Recommendation\"><a href=\"#Recommendation\" class=\"headerlink\" title=\"Recommendation\"></a>Recommendation</h2><blockquote><p>Prastut has the right combination of audacity, hunger and humanity. :)</p>\n<footer><strong>Aditya Kumar Nayak</strong><cite>- Co-Founder at Houseafic.</cite></footer></blockquote>\n<h2 id=\"My-Role\"><a href=\"#My-Role\" class=\"headerlink\" title=\"My Role\"></a>My Role</h2><p>I joined a small team of 8 full time members and collaborated with the founders, product manager, engineers and other interns to understand the companys core values. My major project was to create and improve the B2C dashboard for customers to easily schedule project reports. My role in the project included: </p>\n<ul>\n<li>Design: Used the existing designs from B2B dashboard to create the initial layout for B2C. Evaluated similar products, explored ideas and functionalities with the founders.</li>\n<li>Tech: Created the current user interface for B2C clients. Closed Parse API by assigning ACL. Moved code server side using Express to increase SEO.</li>\n<li>Technical Lead for new interns. Assisted in managing the code-base and delegating issues on Github.</li>\n</ul>\n<p>All work samples / project images cannot be shown here because of NDA.</p>\n<h2 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h2><p>Interning at Houseafic was a gamechanger for me. I matured as a designer and equipped myself with more tech chops. I was able to see the power of technology in revolutionizing things which were never even heard of and how design plays a massive role. The most important win for me was that I found a lifelong mentor in Mr. Aditya, the cofounder of Houseafic. </p>\n<p><img src=\"/images/houseafic/pc.jpg\" alt=\"webapp\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"About-Houseafic\"><a href=\"#About-Houseafic\" class=\"headerlink\" title=\"About Houseafic\"></a>About Houseafic</h2><p>Houseafic is trying to disrupt the monopoly of corrupt real estate builders in India by shifting the focus to the customers. By empowering the buyer to make better decisions, the idea is to change the dynamics of the current market. People have the right to know what they are actually buying instead of pamphlets and paper trail and Houseafic endeavours to provide them with this information.</p>\n<h2 id=\"Idea\"><a href=\"#Idea\" class=\"headerlink\" title=\"Idea\"></a>Idea</h2><p>Through market research, the founders came to the conclusion that customers who are purchasing real-estate are being victims of the monopoly of builders. By collating all the available information related to the customers project under one platform and dispatching reports with technical analysis and observations, the vision is that customers can one day track their property, and make informed decisions. The real value is the decoding engine: getting help reading between the lines. Houseafic deconstructs developer offers into simple understandable terms and measure actually impactable to the end customer.</p>\n<h2 id=\"Recommendation\"><a href=\"#Recommendation\" class=\"headerlink\" title=\"Recommendation\"></a>Recommendation</h2><blockquote><p>Prastut has the right combination of audacity, hunger and humanity. :)</p>\n<footer><strong>Aditya Kumar Nayak</strong><cite>- Co-Founder at Houseafic.</cite></footer></blockquote>\n<h2 id=\"My-Role\"><a href=\"#My-Role\" class=\"headerlink\" title=\"My Role\"></a>My Role</h2><p>I joined a small team of 8 full time members and collaborated with the founders, product manager, engineers and other interns to understand the companys core values. My major project was to create and improve the B2C dashboard for customers to easily schedule project reports. My role in the project included: </p>\n<ul>\n<li>Design: Used the existing designs from B2B dashboard to create the initial layout for B2C. Evaluated similar products, explored ideas and functionalities with the founders.</li>\n<li>Tech: Created the current user interface for B2C clients. Closed Parse API by assigning ACL. Moved code server side using Express to increase SEO.</li>\n<li>Technical Lead for new interns. Assisted in managing the code-base and delegating issues on Github.</li>\n</ul>\n<p>All work samples / project images cannot be shown here because of NDA.</p>\n<h2 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h2><p>Interning at Houseafic was a gamechanger for me. I matured as a designer and equipped myself with more tech chops. I was able to see the power of technology in revolutionizing things which were never even heard of and how design plays a massive role. The most important win for me was that I found a lifelong mentor in Mr. Aditya, the cofounder of Houseafic. </p>\n<p><img src=\"/images/houseafic/pc.jpg\" alt=\"webapp\"></p>\n"},{"title":"Finalist, World UX Championship.","subtitle":"Selected amongst top 10 students all over the world.","date":"2016-07-30T12:19:32.000Z","cover_index":"/images/posts/wux_cover.jpg","cover_detail":"/images/WUX/participants.jpg","live_preview":"http://www.worldusabilitycongress.com/ux-world-championship/","_content":"*^ With all the 10 participants and Pegasus, the mascot of [World Usability Congress (WUC)](http://www.worldusabilitycongress.com/). (I am the one on the extreme left)*\n\n## About\n[World Usability Congress (WUC)](http://www.worldusabilitycongress.com/) is one of the premier conferences on Usability, User Experience (UX) and Customer Experience in the world. It's regularly attended by top UX speakers from companies ranging from Google, HP, IKEA, Skype etc. In 2016, for the very first time they organized the [World User Experience championship](http://www.worldusabilitycongress.com/ux-world-championship/). Details:\n\n* 150 different universities from all around the globe had been invited to be part of [the championship](http://www.worldusabilitycongress.com/ux-world-championship/), and had to send their top UX students to participate. \n* All participating students had to solve the same task individually, visualize and prepare their solution as an A0 PDF.\n* This, in turn, will then be sent to the UX World Championship Jury.\n* The best 10 students will be invited to be part of the UX World Championship finals.\n\nI was one of the 10 students who got the opportunity to represent their own college at the finals, which were held in Graz, Austria! This post documents the work that I did for the competition. [Read more about my travel experience on Medium.](https://medium.com/@kr.prastut/world-user-experience-championship-a-whirlwind-of-an-experience-9d2d2d3f32c1)\n\n## Problem Statement\n\nThe competition challenged students to develop interactive concepts for future shopping experiences in order to improve the way we shop. Each entrant had to design a poster depicting their ideas.\n\n\n## Needfinding\n\nI stared with interviewing several people in and outside our campus. First I defined the target userbase and then fanned out to discover people I wanted to interact it. The goal was to identify people's frustration points and the degree till which the UX demands extreme measures. Since the market in Chennai is still not developed for e-commerce based marketplace, the majority opinions and feedback I received was for offline commerce. \n\n![needfinding](/images/WUX/needfinding.jpg)\n\n\n## Affinity Wall\nBased on the above observations, I started building an affinity wall to define two categories: online and offline commerce. I brainstormed a lot over the extent of technology that I wanted to incorporate in the final UX. I could had even suggested a VR based online commerce, but decided against it due to the various reasons listed below. \n\n![affinity](/images/WUX/affinitywall.jpg)\n## Winning Poster\n\n![poster](/images/WUX/poster.jpg)\n\n## Finals\n\nThe finals took place in Austria on 17th October, 2016. The World UX Congress took care of my flights and stay as well as sightseeing in Austria. At the finals, I received two additional tasks. \n\n## Task 1 \nIt involved a questionnaire on design principles. Before coming for the finals, I read a lot about design theory which helped me in overcoming some of the tricky questions. Recommended books: [Don't make me think](http://www.amazon.in/Dont-Make-Me-Think-Usability/dp/0321344758) , [Lean UX](http://shop.oreilly.com/product/0636920021827.do). I skimmed through [Design of everyday things](http://www.amazon.in/Design-Everyday-Things-Donald-Norman/dp/0465050654/ref=pd_sim_14_1?_encoding=UTF8&psc=1&refRID=1B4P1RHDN5DZPRKTAY0Y) again so that I don't lose sight of the big picture.\n\n![poster](/images/WUX/task1.jpg)\n\n*^ Participants engaged in both the tasks.*\n\n## Task 2\nAll participants then had to design an app experience for the following problem statement:\n*\"You are the assistant store lead for Wallmart, who are in the process of revamping their inventory management. You need to design a mobile app for electronic store pricing. The phones that are going to be deployed have NFC and Bluetooth. All assumptions have to be stated and explained.\"*\n\nEach participant was given 5 minutes to pitch the idea to the jury. I first started with explaining what all tech I am going to use, followed by elaboration on the mockups. This was way before [Amazon's Go](https://www.amazon.com/b?node=16008589011) launch so I am delighted that my hypothesis, on which my proposal was built, got validated. My proposal for the same is as follows: \n\n### Technology Explanation:\n\n![techspec](/images/WUX/final.jpg)\n\n### Mockup's :\n\n![mockups](/images/WUX/app.jpg)\n\nEach participant had 5 minutes to present their concept to the jury. I had to rush throughout the presentation, as I had a lot of explaining to do.   \n\n## If I could do it over? \n* Time management: The 3 hours design sprint was new to me and I should have balanced the time well. Corner cases were not given enough thought. The 5 minute pitch gave me insights that if the idea (presented in it's most abstracted form) takes more than 5 minutes to explain, you are doing something wrong.  \n* Pragmatic vs Out of box thinking: I am fortunately or unfortunately a practical person, which sometimes hampers my creative thinking. Some of the submissions by other participants had a very creative and out of the box approach, though they couldn't explain how they were going to do it in practice. A balance should be ideal. \n* Use different personas in different context: My entire app was dependent on the hypothesis that WallMart's personnel should have minimum friction while using the app. Therefore my app uses a lot of technology to automate even the rudimentary parts. Flaws seem to emerge eg. if the personnel knew the store blueprint inside out, do we require floor mapping? Meeting the people for whom you are going to design is always imperative. \n\n## Conclusion\n\nThe jury, which was composed of experts from sponsoring partners and WUC speakers, chose the winner of the UX World Championship. Sadly, I couldn't win the competition but the tremendous exposure and learnings that I got meant so much more than that. I had an amazing time meeting and deriving insights from the jury as well as people who attended WUC. I thank [Mr. Hannes Robier](https://www.linkedin.com/in/hannesrobier), Chair and Organizer of WUC, for giving me an opportunity of a lifetime.\n","source":"_posts/wux.md","raw":"---\ntitle: Finalist, World UX Championship. \nsubtitle: Selected amongst top 10 students all over the world.\ndate: 2016-07-30 17:49:32\ncover_index: /images/posts/wux_cover.jpg\ncover_detail: /images/WUX/participants.jpg\nlive_preview: http://www.worldusabilitycongress.com/ux-world-championship/\n---\n*^ With all the 10 participants and Pegasus, the mascot of [World Usability Congress (WUC)](http://www.worldusabilitycongress.com/). (I am the one on the extreme left)*\n\n## About\n[World Usability Congress (WUC)](http://www.worldusabilitycongress.com/) is one of the premier conferences on Usability, User Experience (UX) and Customer Experience in the world. It's regularly attended by top UX speakers from companies ranging from Google, HP, IKEA, Skype etc. In 2016, for the very first time they organized the [World User Experience championship](http://www.worldusabilitycongress.com/ux-world-championship/). Details:\n\n* 150 different universities from all around the globe had been invited to be part of [the championship](http://www.worldusabilitycongress.com/ux-world-championship/), and had to send their top UX students to participate. \n* All participating students had to solve the same task individually, visualize and prepare their solution as an A0 PDF.\n* This, in turn, will then be sent to the UX World Championship Jury.\n* The best 10 students will be invited to be part of the UX World Championship finals.\n\nI was one of the 10 students who got the opportunity to represent their own college at the finals, which were held in Graz, Austria! This post documents the work that I did for the competition. [Read more about my travel experience on Medium.](https://medium.com/@kr.prastut/world-user-experience-championship-a-whirlwind-of-an-experience-9d2d2d3f32c1)\n\n## Problem Statement\n\nThe competition challenged students to develop interactive concepts for future shopping experiences in order to improve the way we shop. Each entrant had to design a poster depicting their ideas.\n\n\n## Needfinding\n\nI stared with interviewing several people in and outside our campus. First I defined the target userbase and then fanned out to discover people I wanted to interact it. The goal was to identify people's frustration points and the degree till which the UX demands extreme measures. Since the market in Chennai is still not developed for e-commerce based marketplace, the majority opinions and feedback I received was for offline commerce. \n\n![needfinding](/images/WUX/needfinding.jpg)\n\n\n## Affinity Wall\nBased on the above observations, I started building an affinity wall to define two categories: online and offline commerce. I brainstormed a lot over the extent of technology that I wanted to incorporate in the final UX. I could had even suggested a VR based online commerce, but decided against it due to the various reasons listed below. \n\n![affinity](/images/WUX/affinitywall.jpg)\n## Winning Poster\n\n![poster](/images/WUX/poster.jpg)\n\n## Finals\n\nThe finals took place in Austria on 17th October, 2016. The World UX Congress took care of my flights and stay as well as sightseeing in Austria. At the finals, I received two additional tasks. \n\n## Task 1 \nIt involved a questionnaire on design principles. Before coming for the finals, I read a lot about design theory which helped me in overcoming some of the tricky questions. Recommended books: [Don't make me think](http://www.amazon.in/Dont-Make-Me-Think-Usability/dp/0321344758) , [Lean UX](http://shop.oreilly.com/product/0636920021827.do). I skimmed through [Design of everyday things](http://www.amazon.in/Design-Everyday-Things-Donald-Norman/dp/0465050654/ref=pd_sim_14_1?_encoding=UTF8&psc=1&refRID=1B4P1RHDN5DZPRKTAY0Y) again so that I don't lose sight of the big picture.\n\n![poster](/images/WUX/task1.jpg)\n\n*^ Participants engaged in both the tasks.*\n\n## Task 2\nAll participants then had to design an app experience for the following problem statement:\n*\"You are the assistant store lead for Wallmart, who are in the process of revamping their inventory management. You need to design a mobile app for electronic store pricing. The phones that are going to be deployed have NFC and Bluetooth. All assumptions have to be stated and explained.\"*\n\nEach participant was given 5 minutes to pitch the idea to the jury. I first started with explaining what all tech I am going to use, followed by elaboration on the mockups. This was way before [Amazon's Go](https://www.amazon.com/b?node=16008589011) launch so I am delighted that my hypothesis, on which my proposal was built, got validated. My proposal for the same is as follows: \n\n### Technology Explanation:\n\n![techspec](/images/WUX/final.jpg)\n\n### Mockup's :\n\n![mockups](/images/WUX/app.jpg)\n\nEach participant had 5 minutes to present their concept to the jury. I had to rush throughout the presentation, as I had a lot of explaining to do.   \n\n## If I could do it over? \n* Time management: The 3 hours design sprint was new to me and I should have balanced the time well. Corner cases were not given enough thought. The 5 minute pitch gave me insights that if the idea (presented in it's most abstracted form) takes more than 5 minutes to explain, you are doing something wrong.  \n* Pragmatic vs Out of box thinking: I am fortunately or unfortunately a practical person, which sometimes hampers my creative thinking. Some of the submissions by other participants had a very creative and out of the box approach, though they couldn't explain how they were going to do it in practice. A balance should be ideal. \n* Use different personas in different context: My entire app was dependent on the hypothesis that WallMart's personnel should have minimum friction while using the app. Therefore my app uses a lot of technology to automate even the rudimentary parts. Flaws seem to emerge eg. if the personnel knew the store blueprint inside out, do we require floor mapping? Meeting the people for whom you are going to design is always imperative. \n\n## Conclusion\n\nThe jury, which was composed of experts from sponsoring partners and WUC speakers, chose the winner of the UX World Championship. Sadly, I couldn't win the competition but the tremendous exposure and learnings that I got meant so much more than that. I had an amazing time meeting and deriving insights from the jury as well as people who attended WUC. I thank [Mr. Hannes Robier](https://www.linkedin.com/in/hannesrobier), Chair and Organizer of WUC, for giving me an opportunity of a lifetime.\n","slug":"wux","published":1,"updated":"2017-07-29T15:46:28.000Z","_id":"cj5o1vdnf0008rtwysx3e4i6t","comments":1,"layout":"post","photos":[],"link":"","content":"<p><em>^ With all the 10 participants and Pegasus, the mascot of <a href=\"http://www.worldusabilitycongress.com/\" target=\"_blank\" rel=\"external\">World Usability Congress (WUC)</a>. (I am the one on the extreme left)</em></p>\n<h2 id=\"About\"><a href=\"#About\" class=\"headerlink\" title=\"About\"></a>About</h2><p><a href=\"http://www.worldusabilitycongress.com/\" target=\"_blank\" rel=\"external\">World Usability Congress (WUC)</a> is one of the premier conferences on Usability, User Experience (UX) and Customer Experience in the world. Its regularly attended by top UX speakers from companies ranging from Google, HP, IKEA, Skype etc. In 2016, for the very first time they organized the <a href=\"http://www.worldusabilitycongress.com/ux-world-championship/\" target=\"_blank\" rel=\"external\">World User Experience championship</a>. Details:</p>\n<ul>\n<li>150 different universities from all around the globe had been invited to be part of <a href=\"http://www.worldusabilitycongress.com/ux-world-championship/\" target=\"_blank\" rel=\"external\">the championship</a>, and had to send their top UX students to participate. </li>\n<li>All participating students had to solve the same task individually, visualize and prepare their solution as an A0 PDF.</li>\n<li>This, in turn, will then be sent to the UX World Championship Jury.</li>\n<li>The best 10 students will be invited to be part of the UX World Championship finals.</li>\n</ul>\n<p>I was one of the 10 students who got the opportunity to represent their own college at the finals, which were held in Graz, Austria! This post documents the work that I did for the competition. <a href=\"https://medium.com/@kr.prastut/world-user-experience-championship-a-whirlwind-of-an-experience-9d2d2d3f32c1\" target=\"_blank\" rel=\"external\">Read more about my travel experience on Medium.</a></p>\n<h2 id=\"Problem-Statement\"><a href=\"#Problem-Statement\" class=\"headerlink\" title=\"Problem Statement\"></a>Problem Statement</h2><p>The competition challenged students to develop interactive concepts for future shopping experiences in order to improve the way we shop. Each entrant had to design a poster depicting their ideas.</p>\n<h2 id=\"Needfinding\"><a href=\"#Needfinding\" class=\"headerlink\" title=\"Needfinding\"></a>Needfinding</h2><p>I stared with interviewing several people in and outside our campus. First I defined the target userbase and then fanned out to discover people I wanted to interact it. The goal was to identify peoples frustration points and the degree till which the UX demands extreme measures. Since the market in Chennai is still not developed for e-commerce based marketplace, the majority opinions and feedback I received was for offline commerce. </p>\n<p><img src=\"/images/WUX/needfinding.jpg\" alt=\"needfinding\"></p>\n<h2 id=\"Affinity-Wall\"><a href=\"#Affinity-Wall\" class=\"headerlink\" title=\"Affinity Wall\"></a>Affinity Wall</h2><p>Based on the above observations, I started building an affinity wall to define two categories: online and offline commerce. I brainstormed a lot over the extent of technology that I wanted to incorporate in the final UX. I could had even suggested a VR based online commerce, but decided against it due to the various reasons listed below. </p>\n<p><img src=\"/images/WUX/affinitywall.jpg\" alt=\"affinity\"></p>\n<h2 id=\"Winning-Poster\"><a href=\"#Winning-Poster\" class=\"headerlink\" title=\"Winning Poster\"></a>Winning Poster</h2><p><img src=\"/images/WUX/poster.jpg\" alt=\"poster\"></p>\n<h2 id=\"Finals\"><a href=\"#Finals\" class=\"headerlink\" title=\"Finals\"></a>Finals</h2><p>The finals took place in Austria on 17th October, 2016. The World UX Congress took care of my flights and stay as well as sightseeing in Austria. At the finals, I received two additional tasks. </p>\n<h2 id=\"Task-1\"><a href=\"#Task-1\" class=\"headerlink\" title=\"Task 1\"></a>Task 1</h2><p>It involved a questionnaire on design principles. Before coming for the finals, I read a lot about design theory which helped me in overcoming some of the tricky questions. Recommended books: <a href=\"http://www.amazon.in/Dont-Make-Me-Think-Usability/dp/0321344758\" target=\"_blank\" rel=\"external\">Dont make me think</a> , <a href=\"http://shop.oreilly.com/product/0636920021827.do\" target=\"_blank\" rel=\"external\">Lean UX</a>. I skimmed through <a href=\"http://www.amazon.in/Design-Everyday-Things-Donald-Norman/dp/0465050654/ref=pd_sim_14_1?_encoding=UTF8&amp;psc=1&amp;refRID=1B4P1RHDN5DZPRKTAY0Y\" target=\"_blank\" rel=\"external\">Design of everyday things</a> again so that I dont lose sight of the big picture.</p>\n<p><img src=\"/images/WUX/task1.jpg\" alt=\"poster\"></p>\n<p><em>^ Participants engaged in both the tasks.</em></p>\n<h2 id=\"Task-2\"><a href=\"#Task-2\" class=\"headerlink\" title=\"Task 2\"></a>Task 2</h2><p>All participants then had to design an app experience for the following problem statement:<br><em>You are the assistant store lead for Wallmart, who are in the process of revamping their inventory management. You need to design a mobile app for electronic store pricing. The phones that are going to be deployed have NFC and Bluetooth. All assumptions have to be stated and explained.</em></p>\n<p>Each participant was given 5 minutes to pitch the idea to the jury. I first started with explaining what all tech I am going to use, followed by elaboration on the mockups. This was way before <a href=\"https://www.amazon.com/b?node=16008589011\" target=\"_blank\" rel=\"external\">Amazons Go</a> launch so I am delighted that my hypothesis, on which my proposal was built, got validated. My proposal for the same is as follows: </p>\n<h3 id=\"Technology-Explanation\"><a href=\"#Technology-Explanation\" class=\"headerlink\" title=\"Technology Explanation:\"></a>Technology Explanation:</h3><p><img src=\"/images/WUX/final.jpg\" alt=\"techspec\"></p>\n<h3 id=\"Mockups\"><a href=\"#Mockups\" class=\"headerlink\" title=\"Mockups :\"></a>Mockups :</h3><p><img src=\"/images/WUX/app.jpg\" alt=\"mockups\"></p>\n<p>Each participant had 5 minutes to present their concept to the jury. I had to rush throughout the presentation, as I had a lot of explaining to do.   </p>\n<h2 id=\"If-I-could-do-it-over\"><a href=\"#If-I-could-do-it-over\" class=\"headerlink\" title=\"If I could do it over?\"></a>If I could do it over?</h2><ul>\n<li>Time management: The 3 hours design sprint was new to me and I should have balanced the time well. Corner cases were not given enough thought. The 5 minute pitch gave me insights that if the idea (presented in its most abstracted form) takes more than 5 minutes to explain, you are doing something wrong.  </li>\n<li>Pragmatic vs Out of box thinking: I am fortunately or unfortunately a practical person, which sometimes hampers my creative thinking. Some of the submissions by other participants had a very creative and out of the box approach, though they couldnt explain how they were going to do it in practice. A balance should be ideal. </li>\n<li>Use different personas in different context: My entire app was dependent on the hypothesis that WallMarts personnel should have minimum friction while using the app. Therefore my app uses a lot of technology to automate even the rudimentary parts. Flaws seem to emerge eg. if the personnel knew the store blueprint inside out, do we require floor mapping? Meeting the people for whom you are going to design is always imperative. </li>\n</ul>\n<h2 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h2><p>The jury, which was composed of experts from sponsoring partners and WUC speakers, chose the winner of the UX World Championship. Sadly, I couldnt win the competition but the tremendous exposure and learnings that I got meant so much more than that. I had an amazing time meeting and deriving insights from the jury as well as people who attended WUC. I thank <a href=\"https://www.linkedin.com/in/hannesrobier\" target=\"_blank\" rel=\"external\">Mr. Hannes Robier</a>, Chair and Organizer of WUC, for giving me an opportunity of a lifetime.</p>\n","site":{"data":{}},"excerpt":"","more":"<p><em>^ With all the 10 participants and Pegasus, the mascot of <a href=\"http://www.worldusabilitycongress.com/\" target=\"_blank\" rel=\"external\">World Usability Congress (WUC)</a>. (I am the one on the extreme left)</em></p>\n<h2 id=\"About\"><a href=\"#About\" class=\"headerlink\" title=\"About\"></a>About</h2><p><a href=\"http://www.worldusabilitycongress.com/\" target=\"_blank\" rel=\"external\">World Usability Congress (WUC)</a> is one of the premier conferences on Usability, User Experience (UX) and Customer Experience in the world. Its regularly attended by top UX speakers from companies ranging from Google, HP, IKEA, Skype etc. In 2016, for the very first time they organized the <a href=\"http://www.worldusabilitycongress.com/ux-world-championship/\" target=\"_blank\" rel=\"external\">World User Experience championship</a>. Details:</p>\n<ul>\n<li>150 different universities from all around the globe had been invited to be part of <a href=\"http://www.worldusabilitycongress.com/ux-world-championship/\" target=\"_blank\" rel=\"external\">the championship</a>, and had to send their top UX students to participate. </li>\n<li>All participating students had to solve the same task individually, visualize and prepare their solution as an A0 PDF.</li>\n<li>This, in turn, will then be sent to the UX World Championship Jury.</li>\n<li>The best 10 students will be invited to be part of the UX World Championship finals.</li>\n</ul>\n<p>I was one of the 10 students who got the opportunity to represent their own college at the finals, which were held in Graz, Austria! This post documents the work that I did for the competition. <a href=\"https://medium.com/@kr.prastut/world-user-experience-championship-a-whirlwind-of-an-experience-9d2d2d3f32c1\" target=\"_blank\" rel=\"external\">Read more about my travel experience on Medium.</a></p>\n<h2 id=\"Problem-Statement\"><a href=\"#Problem-Statement\" class=\"headerlink\" title=\"Problem Statement\"></a>Problem Statement</h2><p>The competition challenged students to develop interactive concepts for future shopping experiences in order to improve the way we shop. Each entrant had to design a poster depicting their ideas.</p>\n<h2 id=\"Needfinding\"><a href=\"#Needfinding\" class=\"headerlink\" title=\"Needfinding\"></a>Needfinding</h2><p>I stared with interviewing several people in and outside our campus. First I defined the target userbase and then fanned out to discover people I wanted to interact it. The goal was to identify peoples frustration points and the degree till which the UX demands extreme measures. Since the market in Chennai is still not developed for e-commerce based marketplace, the majority opinions and feedback I received was for offline commerce. </p>\n<p><img src=\"/images/WUX/needfinding.jpg\" alt=\"needfinding\"></p>\n<h2 id=\"Affinity-Wall\"><a href=\"#Affinity-Wall\" class=\"headerlink\" title=\"Affinity Wall\"></a>Affinity Wall</h2><p>Based on the above observations, I started building an affinity wall to define two categories: online and offline commerce. I brainstormed a lot over the extent of technology that I wanted to incorporate in the final UX. I could had even suggested a VR based online commerce, but decided against it due to the various reasons listed below. </p>\n<p><img src=\"/images/WUX/affinitywall.jpg\" alt=\"affinity\"></p>\n<h2 id=\"Winning-Poster\"><a href=\"#Winning-Poster\" class=\"headerlink\" title=\"Winning Poster\"></a>Winning Poster</h2><p><img src=\"/images/WUX/poster.jpg\" alt=\"poster\"></p>\n<h2 id=\"Finals\"><a href=\"#Finals\" class=\"headerlink\" title=\"Finals\"></a>Finals</h2><p>The finals took place in Austria on 17th October, 2016. The World UX Congress took care of my flights and stay as well as sightseeing in Austria. At the finals, I received two additional tasks. </p>\n<h2 id=\"Task-1\"><a href=\"#Task-1\" class=\"headerlink\" title=\"Task 1\"></a>Task 1</h2><p>It involved a questionnaire on design principles. Before coming for the finals, I read a lot about design theory which helped me in overcoming some of the tricky questions. Recommended books: <a href=\"http://www.amazon.in/Dont-Make-Me-Think-Usability/dp/0321344758\" target=\"_blank\" rel=\"external\">Dont make me think</a> , <a href=\"http://shop.oreilly.com/product/0636920021827.do\" target=\"_blank\" rel=\"external\">Lean UX</a>. I skimmed through <a href=\"http://www.amazon.in/Design-Everyday-Things-Donald-Norman/dp/0465050654/ref=pd_sim_14_1?_encoding=UTF8&amp;psc=1&amp;refRID=1B4P1RHDN5DZPRKTAY0Y\" target=\"_blank\" rel=\"external\">Design of everyday things</a> again so that I dont lose sight of the big picture.</p>\n<p><img src=\"/images/WUX/task1.jpg\" alt=\"poster\"></p>\n<p><em>^ Participants engaged in both the tasks.</em></p>\n<h2 id=\"Task-2\"><a href=\"#Task-2\" class=\"headerlink\" title=\"Task 2\"></a>Task 2</h2><p>All participants then had to design an app experience for the following problem statement:<br><em>You are the assistant store lead for Wallmart, who are in the process of revamping their inventory management. You need to design a mobile app for electronic store pricing. The phones that are going to be deployed have NFC and Bluetooth. All assumptions have to be stated and explained.</em></p>\n<p>Each participant was given 5 minutes to pitch the idea to the jury. I first started with explaining what all tech I am going to use, followed by elaboration on the mockups. This was way before <a href=\"https://www.amazon.com/b?node=16008589011\" target=\"_blank\" rel=\"external\">Amazons Go</a> launch so I am delighted that my hypothesis, on which my proposal was built, got validated. My proposal for the same is as follows: </p>\n<h3 id=\"Technology-Explanation\"><a href=\"#Technology-Explanation\" class=\"headerlink\" title=\"Technology Explanation:\"></a>Technology Explanation:</h3><p><img src=\"/images/WUX/final.jpg\" alt=\"techspec\"></p>\n<h3 id=\"Mockups\"><a href=\"#Mockups\" class=\"headerlink\" title=\"Mockups :\"></a>Mockups :</h3><p><img src=\"/images/WUX/app.jpg\" alt=\"mockups\"></p>\n<p>Each participant had 5 minutes to present their concept to the jury. I had to rush throughout the presentation, as I had a lot of explaining to do.   </p>\n<h2 id=\"If-I-could-do-it-over\"><a href=\"#If-I-could-do-it-over\" class=\"headerlink\" title=\"If I could do it over?\"></a>If I could do it over?</h2><ul>\n<li>Time management: The 3 hours design sprint was new to me and I should have balanced the time well. Corner cases were not given enough thought. The 5 minute pitch gave me insights that if the idea (presented in its most abstracted form) takes more than 5 minutes to explain, you are doing something wrong.  </li>\n<li>Pragmatic vs Out of box thinking: I am fortunately or unfortunately a practical person, which sometimes hampers my creative thinking. Some of the submissions by other participants had a very creative and out of the box approach, though they couldnt explain how they were going to do it in practice. A balance should be ideal. </li>\n<li>Use different personas in different context: My entire app was dependent on the hypothesis that WallMarts personnel should have minimum friction while using the app. Therefore my app uses a lot of technology to automate even the rudimentary parts. Flaws seem to emerge eg. if the personnel knew the store blueprint inside out, do we require floor mapping? Meeting the people for whom you are going to design is always imperative. </li>\n</ul>\n<h2 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h2><p>The jury, which was composed of experts from sponsoring partners and WUC speakers, chose the winner of the UX World Championship. Sadly, I couldnt win the competition but the tremendous exposure and learnings that I got meant so much more than that. I had an amazing time meeting and deriving insights from the jury as well as people who attended WUC. I thank <a href=\"https://www.linkedin.com/in/hannesrobier\" target=\"_blank\" rel=\"external\">Mr. Hannes Robier</a>, Chair and Organizer of WUC, for giving me an opportunity of a lifetime.</p>\n"},{"title":"Bubble Social","subtitle":"Data Visualization Research Intern","cover_index":"/images/posts/dataviz_cover.jpg","project_duration":"June 2017 - Present","date":"2016-09-30T12:19:32.000Z","_content":"\nThis post documents my experience of working with [Professor Venkatesh Rajamanickam](http://www.idc.iitb.ac.in/venkat/index.html) as a research intern. Professor Venkatesh heads the [Info Design Lab](https://info-design-lab.github.io/) as well as the [Interaction Design Program](http://www.idc.iitb.ac.in/academics/interaction-design.html) at [Industrial Design Center (IDC)](http://www.idc.iitb.ac.in/), IIT Bombay. He is amongst the leading experts in the field of data visualization in India. \n\nBubble is a startup idea by Shivam Kumar & Harsha Gangisetty, students at IIT Bombay, and they are mentored by Professor Venkatesh. According to the skillsets of the interns, he asked if I wished to collobarate with them. I was more than happy to accept! The idea of hacking onto a product has always excited me. \n\n^ Needs more explanation\n\n## About Bubble Social\nA large volume of data is generated by people on Social Media platforms each day. This data is made up of comments and opinions about whats happening around the world. Be it a political event or a natural disaster, a sports event happening halfway across the globe or a new product release. Owing to its massive volume, the data is not consumable for people who want to use social media to follow one or more of the above mentioned topics.\n\nSocial Media platforms have tackled this problem by establishing content recommendation engines which provide people most relevant comments and opinions. This leaves the important aspect of overall crowd opinion out of the scope of the platforms. Its impact can be seen in the form of current social media consumption trends where users get stuck in niches based on their usage trends. This is the single biggest challenge to the evolution of Social Media as Participatory Media Platforms.\n\nBubble integrates social interactions with content consumption experience to provide you a single stream for all your news/debates/discussions alike. The proposed framework distilles large volumes of social media data about any given topic to mine crowd opinion and present it in a consumable format for the people.\n\n## Primary Research\nWe initially focused on sports events...\nWe started with observing the global trends on how sports fans engage in a match-watching activity and analyzed their needs and the cause of their behaviour. The same is tabulated below.\n\n![primresearch](/images/dataviz/primresearch.jpg)\n\n## Understanding the User\n \nWe conducted several contextual inquiries inside and outside the IIT Bombay campus to understand the user domain. It took us a week to create affinity maps and come up with insights about our user. We tried to analyse user needs, user behaviour, their response and affinity towards sport news and then categorised them into different user groups.\n\n\n## Result of Research\nWe classified the users into 5 groups:\n \n* **Basic 1** : Do not care about the sport news, does not proactively spend time to research the sport news, but will consume news only when it is spoon-fed to them in a digestible format.\n* **Basic 2** : Want basic sport news, but are not ready to devote their time to watch the matches.\n* **Intermediate 1** : Actively seek basic sport info and watch the matches.\n* **Intermediate 2** : Actively seek intermediate sport info and share/seek opinions of other sport fans.\n* **Advanced** : Actively seek all the info and participate in deep opinionated sport discussions.\n \nOut of the above categories, we decided that we would not be able to help the Basic 1 category because they simple do not care about sports. Also we would not be able to help the Advanced category because they already know it all and will continue to do so even without any help.\n \nSo we decided that our target users would be the three categories of Basic 2, Intermediate 1, and Intermediate 2.\n\n\n![resultresearch](/images/dataviz/resultresearch-1.jpg)\n<span class=\"image-caption\">We decided our target users as Basic 2, Intermediate 1 and Intermediate 2. It was very difficult to give information to Basic 1 as they do not want to take any effort. At the same time, advanced users are experts and know everything already.</span>\n\n![resultresearch](/images/dataviz/resultresearch-2.jpg)\n<span class=\"image-caption\">Cause & Behaviour Matrix</span>\n\n\n## Framework\n\nWe extract Social Media posts relevant to a topic using Listeners. A Listener is a set of keywords corresponding to a topic,updated and maintained manually. \n\n\n![framework](/images/dataviz/framework.jpg)\n\nEach post is then processed using using our Sentiments Analysis engine which provides 3 things:\n* Sentiment value carried by the post (positive or negative)\n* Entities mentioned in the post\n* Timestamp\n\nUsing the processed data we compute an Opinion Index which represents the overall crowd opinion towards the topic at that particular instant. Coupled with time, this index enables us to capture the evolution of crowd sentiments over time. Further, posts can be filtered based on the entities they have mentioned, which gives individual trends for each entity associated with the topic.\n\nNext, we propose a framework to represent this information in a consumable format for the people. \n\n### Consumable Framework\n\nOpinion Index consists of two values, Positive Sentiment Index and Negative Sentiment Index, along with a timestamp. We opted against computing a single index to preserve the polarity of the crowd opinion at any given instant. \n\n\nThe horizontal axis represents time and the vertical axis represents magnitude of the Opinion Index. The Positive and Negative Opinion Index is represented by Green and Red lines respectively.\n\nWe intend to provide two bits of information through this visualisation:\nPolarity of crowd opinion which is communicated by the relative position of Positive and Negative lines corresponding to any given point on the horizontal axis\nEvolution of crowd opinion over time which is communicated by the trends formed by the line charts over time\n\nThe horizontal axis represents time and the vertical axis represents magnitude of the Opinion Index. The Positive and Negative Opinion Index is represented by Green and Red lines respectively.\n\nWe intend to provide two bits of information through this visualisation:\nPolarity of crowd opinion which is communicated by the relative position of Positive and Negative lines corresponding to any given point on the horizontal axis\nEvolution of crowd opinion over time which is communicated by the trends formed by the line charts over time\n\n(adding context)\n\nIt was observed that people were unable to get the context of the crowd opinion while consuming the visualisation. To counter this, factual description of the events were added by replacing the horizontal axis with an events timeline.\n\n> insert line chart along with events timeline screenshot\n\nThe crowd opinion plotted over an events timeline gives a context for consuming crowd reactions. \n\nWe then decided to project the continuous index values to an axis of discrete values represented by emoticons. Emoticons make the sentiment information represented by the line chart more comprehensible.\n\n> insert line chart with emoticon axis and events timeline screenshot)\n\nA user can explore the events on the events timeline and get the crowd reactions using the line chart. Hovering over the line chart reveals emoticons and shows the polarity of the opinion as percentage split between positive and negative opinions. \n\n(adding Bubbles)\n\nWhile Opinion Index provides information about how the crowd is reacting towards a topic on the whole, qualitative information such as observations and analysis are hidden in individual social media posts.\n\nTo integrate this feature into the proposed framework, we built a layer of Bubble chart over line chart, keeping the axes constant. \n\n> insert bubble chart screenshot>\n\nEach post is represented by a bubble. The vertical position of the bubble corresponds to the magnitude of sentiment the post carries, represented by emoticons. The horizontal position is simply the time at which it was posted. We classify bubbles as positive or negative using green or red colored outline respectively. The size of the bubble represents the popularity of the post.\n\nBubble chart faced an overcrowding problem owing to the high volume of the data. To filter the data, instead of opting for a recommendation engine, we rather use an algorithm which predicts the popularity of the post in general. \n\n> insert filtered bubble chart screenshot>\n\n## Conclusion\n\nThe proposed framework provides information about the overall crowd reaction about a given topic. Using event timeline, a temporal aspect is added which aids the overall understanding by adding a chronological sense to the series of events. Popular posts about the topic are also integrated into the framework. \n\nPeople can use this framework as a participatory media platform for following an event or a news.\n\n\n","source":"_posts/dataviz.md","raw":"---\ntitle: Bubble Social\nsubtitle: Data Visualization Research Intern\ncover_index: /images/posts/dataviz_cover.jpg\nproject_duration: June 2017 - Present\ndate: 2016-09-30 17:49:32\n---\n\nThis post documents my experience of working with [Professor Venkatesh Rajamanickam](http://www.idc.iitb.ac.in/venkat/index.html) as a research intern. Professor Venkatesh heads the [Info Design Lab](https://info-design-lab.github.io/) as well as the [Interaction Design Program](http://www.idc.iitb.ac.in/academics/interaction-design.html) at [Industrial Design Center (IDC)](http://www.idc.iitb.ac.in/), IIT Bombay. He is amongst the leading experts in the field of data visualization in India. \n\nBubble is a startup idea by Shivam Kumar & Harsha Gangisetty, students at IIT Bombay, and they are mentored by Professor Venkatesh. According to the skillsets of the interns, he asked if I wished to collobarate with them. I was more than happy to accept! The idea of hacking onto a product has always excited me. \n\n^ Needs more explanation\n\n## About Bubble Social\nA large volume of data is generated by people on Social Media platforms each day. This data is made up of comments and opinions about whats happening around the world. Be it a political event or a natural disaster, a sports event happening halfway across the globe or a new product release. Owing to its massive volume, the data is not consumable for people who want to use social media to follow one or more of the above mentioned topics.\n\nSocial Media platforms have tackled this problem by establishing content recommendation engines which provide people most relevant comments and opinions. This leaves the important aspect of overall crowd opinion out of the scope of the platforms. Its impact can be seen in the form of current social media consumption trends where users get stuck in niches based on their usage trends. This is the single biggest challenge to the evolution of Social Media as Participatory Media Platforms.\n\nBubble integrates social interactions with content consumption experience to provide you a single stream for all your news/debates/discussions alike. The proposed framework distilles large volumes of social media data about any given topic to mine crowd opinion and present it in a consumable format for the people.\n\n## Primary Research\nWe initially focused on sports events...\nWe started with observing the global trends on how sports fans engage in a match-watching activity and analyzed their needs and the cause of their behaviour. The same is tabulated below.\n\n![primresearch](/images/dataviz/primresearch.jpg)\n\n## Understanding the User\n \nWe conducted several contextual inquiries inside and outside the IIT Bombay campus to understand the user domain. It took us a week to create affinity maps and come up with insights about our user. We tried to analyse user needs, user behaviour, their response and affinity towards sport news and then categorised them into different user groups.\n\n\n## Result of Research\nWe classified the users into 5 groups:\n \n* **Basic 1** : Do not care about the sport news, does not proactively spend time to research the sport news, but will consume news only when it is spoon-fed to them in a digestible format.\n* **Basic 2** : Want basic sport news, but are not ready to devote their time to watch the matches.\n* **Intermediate 1** : Actively seek basic sport info and watch the matches.\n* **Intermediate 2** : Actively seek intermediate sport info and share/seek opinions of other sport fans.\n* **Advanced** : Actively seek all the info and participate in deep opinionated sport discussions.\n \nOut of the above categories, we decided that we would not be able to help the Basic 1 category because they simple do not care about sports. Also we would not be able to help the Advanced category because they already know it all and will continue to do so even without any help.\n \nSo we decided that our target users would be the three categories of Basic 2, Intermediate 1, and Intermediate 2.\n\n\n![resultresearch](/images/dataviz/resultresearch-1.jpg)\n<span class=\"image-caption\">We decided our target users as Basic 2, Intermediate 1 and Intermediate 2. It was very difficult to give information to Basic 1 as they do not want to take any effort. At the same time, advanced users are experts and know everything already.</span>\n\n![resultresearch](/images/dataviz/resultresearch-2.jpg)\n<span class=\"image-caption\">Cause & Behaviour Matrix</span>\n\n\n## Framework\n\nWe extract Social Media posts relevant to a topic using Listeners. A Listener is a set of keywords corresponding to a topic,updated and maintained manually. \n\n\n![framework](/images/dataviz/framework.jpg)\n\nEach post is then processed using using our Sentiments Analysis engine which provides 3 things:\n* Sentiment value carried by the post (positive or negative)\n* Entities mentioned in the post\n* Timestamp\n\nUsing the processed data we compute an Opinion Index which represents the overall crowd opinion towards the topic at that particular instant. Coupled with time, this index enables us to capture the evolution of crowd sentiments over time. Further, posts can be filtered based on the entities they have mentioned, which gives individual trends for each entity associated with the topic.\n\nNext, we propose a framework to represent this information in a consumable format for the people. \n\n### Consumable Framework\n\nOpinion Index consists of two values, Positive Sentiment Index and Negative Sentiment Index, along with a timestamp. We opted against computing a single index to preserve the polarity of the crowd opinion at any given instant. \n\n\nThe horizontal axis represents time and the vertical axis represents magnitude of the Opinion Index. The Positive and Negative Opinion Index is represented by Green and Red lines respectively.\n\nWe intend to provide two bits of information through this visualisation:\nPolarity of crowd opinion which is communicated by the relative position of Positive and Negative lines corresponding to any given point on the horizontal axis\nEvolution of crowd opinion over time which is communicated by the trends formed by the line charts over time\n\nThe horizontal axis represents time and the vertical axis represents magnitude of the Opinion Index. The Positive and Negative Opinion Index is represented by Green and Red lines respectively.\n\nWe intend to provide two bits of information through this visualisation:\nPolarity of crowd opinion which is communicated by the relative position of Positive and Negative lines corresponding to any given point on the horizontal axis\nEvolution of crowd opinion over time which is communicated by the trends formed by the line charts over time\n\n(adding context)\n\nIt was observed that people were unable to get the context of the crowd opinion while consuming the visualisation. To counter this, factual description of the events were added by replacing the horizontal axis with an events timeline.\n\n> insert line chart along with events timeline screenshot\n\nThe crowd opinion plotted over an events timeline gives a context for consuming crowd reactions. \n\nWe then decided to project the continuous index values to an axis of discrete values represented by emoticons. Emoticons make the sentiment information represented by the line chart more comprehensible.\n\n> insert line chart with emoticon axis and events timeline screenshot)\n\nA user can explore the events on the events timeline and get the crowd reactions using the line chart. Hovering over the line chart reveals emoticons and shows the polarity of the opinion as percentage split between positive and negative opinions. \n\n(adding Bubbles)\n\nWhile Opinion Index provides information about how the crowd is reacting towards a topic on the whole, qualitative information such as observations and analysis are hidden in individual social media posts.\n\nTo integrate this feature into the proposed framework, we built a layer of Bubble chart over line chart, keeping the axes constant. \n\n> insert bubble chart screenshot>\n\nEach post is represented by a bubble. The vertical position of the bubble corresponds to the magnitude of sentiment the post carries, represented by emoticons. The horizontal position is simply the time at which it was posted. We classify bubbles as positive or negative using green or red colored outline respectively. The size of the bubble represents the popularity of the post.\n\nBubble chart faced an overcrowding problem owing to the high volume of the data. To filter the data, instead of opting for a recommendation engine, we rather use an algorithm which predicts the popularity of the post in general. \n\n> insert filtered bubble chart screenshot>\n\n## Conclusion\n\nThe proposed framework provides information about the overall crowd reaction about a given topic. Using event timeline, a temporal aspect is added which aids the overall understanding by adding a chronological sense to the series of events. Popular posts about the topic are also integrated into the framework. \n\nPeople can use this framework as a participatory media platform for following an event or a news.\n\n\n","slug":"dataviz","published":1,"updated":"2017-07-30T13:38:41.000Z","_id":"cj5o2e7ro000qrtwyu8xpao7a","comments":1,"layout":"post","photos":[],"link":"","content":"<p>This post documents my experience of working with <a href=\"http://www.idc.iitb.ac.in/venkat/index.html\" target=\"_blank\" rel=\"external\">Professor Venkatesh Rajamanickam</a> as a research intern. Professor Venkatesh heads the <a href=\"https://info-design-lab.github.io/\" target=\"_blank\" rel=\"external\">Info Design Lab</a> as well as the <a href=\"http://www.idc.iitb.ac.in/academics/interaction-design.html\" target=\"_blank\" rel=\"external\">Interaction Design Program</a> at <a href=\"http://www.idc.iitb.ac.in/\" target=\"_blank\" rel=\"external\">Industrial Design Center (IDC)</a>, IIT Bombay. He is amongst the leading experts in the field of data visualization in India. </p>\n<p>Bubble is a startup idea by Shivam Kumar &amp; Harsha Gangisetty, students at IIT Bombay, and they are mentored by Professor Venkatesh. According to the skillsets of the interns, he asked if I wished to collobarate with them. I was more than happy to accept! The idea of hacking onto a product has always excited me. </p>\n<p>^ Needs more explanation</p>\n<h2 id=\"About-Bubble-Social\"><a href=\"#About-Bubble-Social\" class=\"headerlink\" title=\"About Bubble Social\"></a>About Bubble Social</h2><p>A large volume of data is generated by people on Social Media platforms each day. This data is made up of comments and opinions about whats happening around the world. Be it a political event or a natural disaster, a sports event happening halfway across the globe or a new product release. Owing to its massive volume, the data is not consumable for people who want to use social media to follow one or more of the above mentioned topics.</p>\n<p>Social Media platforms have tackled this problem by establishing content recommendation engines which provide people most relevant comments and opinions. This leaves the important aspect of overall crowd opinion out of the scope of the platforms. Its impact can be seen in the form of current social media consumption trends where users get stuck in niches based on their usage trends. This is the single biggest challenge to the evolution of Social Media as Participatory Media Platforms.</p>\n<p>Bubble integrates social interactions with content consumption experience to provide you a single stream for all your news/debates/discussions alike. The proposed framework distilles large volumes of social media data about any given topic to mine crowd opinion and present it in a consumable format for the people.</p>\n<h2 id=\"Primary-Research\"><a href=\"#Primary-Research\" class=\"headerlink\" title=\"Primary Research\"></a>Primary Research</h2><p>We initially focused on sports events<br>We started with observing the global trends on how sports fans engage in a match-watching activity and analyzed their needs and the cause of their behaviour. The same is tabulated below.</p>\n<p><img src=\"/images/dataviz/primresearch.jpg\" alt=\"primresearch\"></p>\n<h2 id=\"Understanding-the-User\"><a href=\"#Understanding-the-User\" class=\"headerlink\" title=\"Understanding the User\"></a>Understanding the User</h2><p>We conducted several contextual inquiries inside and outside the IIT Bombay campus to understand the user domain. It took us a week to create affinity maps and come up with insights about our user. We tried to analyse user needs, user behaviour, their response and affinity towards sport news and then categorised them into different user groups.</p>\n<h2 id=\"Result-of-Research\"><a href=\"#Result-of-Research\" class=\"headerlink\" title=\"Result of Research\"></a>Result of Research</h2><p>We classified the users into 5 groups:</p>\n<ul>\n<li><strong>Basic 1</strong> : Do not care about the sport news, does not proactively spend time to research the sport news, but will consume news only when it is spoon-fed to them in a digestible format.</li>\n<li><strong>Basic 2</strong> : Want basic sport news, but are not ready to devote their time to watch the matches.</li>\n<li><strong>Intermediate 1</strong> : Actively seek basic sport info and watch the matches.</li>\n<li><strong>Intermediate 2</strong> : Actively seek intermediate sport info and share/seek opinions of other sport fans.</li>\n<li><strong>Advanced</strong> : Actively seek all the info and participate in deep opinionated sport discussions.</li>\n</ul>\n<p>Out of the above categories, we decided that we would not be able to help the Basic 1 category because they simple do not care about sports. Also we would not be able to help the Advanced category because they already know it all and will continue to do so even without any help.</p>\n<p>So we decided that our target users would be the three categories of Basic 2, Intermediate 1, and Intermediate 2.</p>\n<p><img src=\"/images/dataviz/resultresearch-1.jpg\" alt=\"resultresearch\"><br><span class=\"image-caption\">We decided our target users as Basic 2, Intermediate 1 and Intermediate 2. It was very difficult to give information to Basic 1 as they do not want to take any effort. At the same time, advanced users are experts and know everything already.</span></p>\n<p><img src=\"/images/dataviz/resultresearch-2.jpg\" alt=\"resultresearch\"><br><span class=\"image-caption\">Cause &amp; Behaviour Matrix</span></p>\n<h2 id=\"Framework\"><a href=\"#Framework\" class=\"headerlink\" title=\"Framework\"></a>Framework</h2><p>We extract Social Media posts relevant to a topic using Listeners. A Listener is a set of keywords corresponding to a topic,updated and maintained manually. </p>\n<p><img src=\"/images/dataviz/framework.jpg\" alt=\"framework\"></p>\n<p>Each post is then processed using using our Sentiments Analysis engine which provides 3 things:</p>\n<ul>\n<li>Sentiment value carried by the post (positive or negative)</li>\n<li>Entities mentioned in the post</li>\n<li>Timestamp</li>\n</ul>\n<p>Using the processed data we compute an Opinion Index which represents the overall crowd opinion towards the topic at that particular instant. Coupled with time, this index enables us to capture the evolution of crowd sentiments over time. Further, posts can be filtered based on the entities they have mentioned, which gives individual trends for each entity associated with the topic.</p>\n<p>Next, we propose a framework to represent this information in a consumable format for the people. </p>\n<h3 id=\"Consumable-Framework\"><a href=\"#Consumable-Framework\" class=\"headerlink\" title=\"Consumable Framework\"></a>Consumable Framework</h3><p>Opinion Index consists of two values, Positive Sentiment Index and Negative Sentiment Index, along with a timestamp. We opted against computing a single index to preserve the polarity of the crowd opinion at any given instant. </p>\n<p>The horizontal axis represents time and the vertical axis represents magnitude of the Opinion Index. The Positive and Negative Opinion Index is represented by Green and Red lines respectively.</p>\n<p>We intend to provide two bits of information through this visualisation:<br>Polarity of crowd opinion which is communicated by the relative position of Positive and Negative lines corresponding to any given point on the horizontal axis<br>Evolution of crowd opinion over time which is communicated by the trends formed by the line charts over time</p>\n<p>The horizontal axis represents time and the vertical axis represents magnitude of the Opinion Index. The Positive and Negative Opinion Index is represented by Green and Red lines respectively.</p>\n<p>We intend to provide two bits of information through this visualisation:<br>Polarity of crowd opinion which is communicated by the relative position of Positive and Negative lines corresponding to any given point on the horizontal axis<br>Evolution of crowd opinion over time which is communicated by the trends formed by the line charts over time</p>\n<p>(adding context)</p>\n<p>It was observed that people were unable to get the context of the crowd opinion while consuming the visualisation. To counter this, factual description of the events were added by replacing the horizontal axis with an events timeline.</p>\n<blockquote>\n<p>insert line chart along with events timeline screenshot</p>\n</blockquote>\n<p>The crowd opinion plotted over an events timeline gives a context for consuming crowd reactions. </p>\n<p>We then decided to project the continuous index values to an axis of discrete values represented by emoticons. Emoticons make the sentiment information represented by the line chart more comprehensible.</p>\n<blockquote>\n<p>insert line chart with emoticon axis and events timeline screenshot)</p>\n</blockquote>\n<p>A user can explore the events on the events timeline and get the crowd reactions using the line chart. Hovering over the line chart reveals emoticons and shows the polarity of the opinion as percentage split between positive and negative opinions. </p>\n<p>(adding Bubbles)</p>\n<p>While Opinion Index provides information about how the crowd is reacting towards a topic on the whole, qualitative information such as observations and analysis are hidden in individual social media posts.</p>\n<p>To integrate this feature into the proposed framework, we built a layer of Bubble chart over line chart, keeping the axes constant. </p>\n<blockquote>\n<p>insert bubble chart screenshot&gt;</p>\n</blockquote>\n<p>Each post is represented by a bubble. The vertical position of the bubble corresponds to the magnitude of sentiment the post carries, represented by emoticons. The horizontal position is simply the time at which it was posted. We classify bubbles as positive or negative using green or red colored outline respectively. The size of the bubble represents the popularity of the post.</p>\n<p>Bubble chart faced an overcrowding problem owing to the high volume of the data. To filter the data, instead of opting for a recommendation engine, we rather use an algorithm which predicts the popularity of the post in general. </p>\n<blockquote>\n<p>insert filtered bubble chart screenshot&gt;</p>\n</blockquote>\n<h2 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h2><p>The proposed framework provides information about the overall crowd reaction about a given topic. Using event timeline, a temporal aspect is added which aids the overall understanding by adding a chronological sense to the series of events. Popular posts about the topic are also integrated into the framework. </p>\n<p>People can use this framework as a participatory media platform for following an event or a news.</p>\n","site":{"data":{}},"excerpt":"","more":"<p>This post documents my experience of working with <a href=\"http://www.idc.iitb.ac.in/venkat/index.html\" target=\"_blank\" rel=\"external\">Professor Venkatesh Rajamanickam</a> as a research intern. Professor Venkatesh heads the <a href=\"https://info-design-lab.github.io/\" target=\"_blank\" rel=\"external\">Info Design Lab</a> as well as the <a href=\"http://www.idc.iitb.ac.in/academics/interaction-design.html\" target=\"_blank\" rel=\"external\">Interaction Design Program</a> at <a href=\"http://www.idc.iitb.ac.in/\" target=\"_blank\" rel=\"external\">Industrial Design Center (IDC)</a>, IIT Bombay. He is amongst the leading experts in the field of data visualization in India. </p>\n<p>Bubble is a startup idea by Shivam Kumar &amp; Harsha Gangisetty, students at IIT Bombay, and they are mentored by Professor Venkatesh. According to the skillsets of the interns, he asked if I wished to collobarate with them. I was more than happy to accept! The idea of hacking onto a product has always excited me. </p>\n<p>^ Needs more explanation</p>\n<h2 id=\"About-Bubble-Social\"><a href=\"#About-Bubble-Social\" class=\"headerlink\" title=\"About Bubble Social\"></a>About Bubble Social</h2><p>A large volume of data is generated by people on Social Media platforms each day. This data is made up of comments and opinions about whats happening around the world. Be it a political event or a natural disaster, a sports event happening halfway across the globe or a new product release. Owing to its massive volume, the data is not consumable for people who want to use social media to follow one or more of the above mentioned topics.</p>\n<p>Social Media platforms have tackled this problem by establishing content recommendation engines which provide people most relevant comments and opinions. This leaves the important aspect of overall crowd opinion out of the scope of the platforms. Its impact can be seen in the form of current social media consumption trends where users get stuck in niches based on their usage trends. This is the single biggest challenge to the evolution of Social Media as Participatory Media Platforms.</p>\n<p>Bubble integrates social interactions with content consumption experience to provide you a single stream for all your news/debates/discussions alike. The proposed framework distilles large volumes of social media data about any given topic to mine crowd opinion and present it in a consumable format for the people.</p>\n<h2 id=\"Primary-Research\"><a href=\"#Primary-Research\" class=\"headerlink\" title=\"Primary Research\"></a>Primary Research</h2><p>We initially focused on sports events<br>We started with observing the global trends on how sports fans engage in a match-watching activity and analyzed their needs and the cause of their behaviour. The same is tabulated below.</p>\n<p><img src=\"/images/dataviz/primresearch.jpg\" alt=\"primresearch\"></p>\n<h2 id=\"Understanding-the-User\"><a href=\"#Understanding-the-User\" class=\"headerlink\" title=\"Understanding the User\"></a>Understanding the User</h2><p>We conducted several contextual inquiries inside and outside the IIT Bombay campus to understand the user domain. It took us a week to create affinity maps and come up with insights about our user. We tried to analyse user needs, user behaviour, their response and affinity towards sport news and then categorised them into different user groups.</p>\n<h2 id=\"Result-of-Research\"><a href=\"#Result-of-Research\" class=\"headerlink\" title=\"Result of Research\"></a>Result of Research</h2><p>We classified the users into 5 groups:</p>\n<ul>\n<li><strong>Basic 1</strong> : Do not care about the sport news, does not proactively spend time to research the sport news, but will consume news only when it is spoon-fed to them in a digestible format.</li>\n<li><strong>Basic 2</strong> : Want basic sport news, but are not ready to devote their time to watch the matches.</li>\n<li><strong>Intermediate 1</strong> : Actively seek basic sport info and watch the matches.</li>\n<li><strong>Intermediate 2</strong> : Actively seek intermediate sport info and share/seek opinions of other sport fans.</li>\n<li><strong>Advanced</strong> : Actively seek all the info and participate in deep opinionated sport discussions.</li>\n</ul>\n<p>Out of the above categories, we decided that we would not be able to help the Basic 1 category because they simple do not care about sports. Also we would not be able to help the Advanced category because they already know it all and will continue to do so even without any help.</p>\n<p>So we decided that our target users would be the three categories of Basic 2, Intermediate 1, and Intermediate 2.</p>\n<p><img src=\"/images/dataviz/resultresearch-1.jpg\" alt=\"resultresearch\"><br><span class=\"image-caption\">We decided our target users as Basic 2, Intermediate 1 and Intermediate 2. It was very difficult to give information to Basic 1 as they do not want to take any effort. At the same time, advanced users are experts and know everything already.</span></p>\n<p><img src=\"/images/dataviz/resultresearch-2.jpg\" alt=\"resultresearch\"><br><span class=\"image-caption\">Cause &amp; Behaviour Matrix</span></p>\n<h2 id=\"Framework\"><a href=\"#Framework\" class=\"headerlink\" title=\"Framework\"></a>Framework</h2><p>We extract Social Media posts relevant to a topic using Listeners. A Listener is a set of keywords corresponding to a topic,updated and maintained manually. </p>\n<p><img src=\"/images/dataviz/framework.jpg\" alt=\"framework\"></p>\n<p>Each post is then processed using using our Sentiments Analysis engine which provides 3 things:</p>\n<ul>\n<li>Sentiment value carried by the post (positive or negative)</li>\n<li>Entities mentioned in the post</li>\n<li>Timestamp</li>\n</ul>\n<p>Using the processed data we compute an Opinion Index which represents the overall crowd opinion towards the topic at that particular instant. Coupled with time, this index enables us to capture the evolution of crowd sentiments over time. Further, posts can be filtered based on the entities they have mentioned, which gives individual trends for each entity associated with the topic.</p>\n<p>Next, we propose a framework to represent this information in a consumable format for the people. </p>\n<h3 id=\"Consumable-Framework\"><a href=\"#Consumable-Framework\" class=\"headerlink\" title=\"Consumable Framework\"></a>Consumable Framework</h3><p>Opinion Index consists of two values, Positive Sentiment Index and Negative Sentiment Index, along with a timestamp. We opted against computing a single index to preserve the polarity of the crowd opinion at any given instant. </p>\n<p>The horizontal axis represents time and the vertical axis represents magnitude of the Opinion Index. The Positive and Negative Opinion Index is represented by Green and Red lines respectively.</p>\n<p>We intend to provide two bits of information through this visualisation:<br>Polarity of crowd opinion which is communicated by the relative position of Positive and Negative lines corresponding to any given point on the horizontal axis<br>Evolution of crowd opinion over time which is communicated by the trends formed by the line charts over time</p>\n<p>The horizontal axis represents time and the vertical axis represents magnitude of the Opinion Index. The Positive and Negative Opinion Index is represented by Green and Red lines respectively.</p>\n<p>We intend to provide two bits of information through this visualisation:<br>Polarity of crowd opinion which is communicated by the relative position of Positive and Negative lines corresponding to any given point on the horizontal axis<br>Evolution of crowd opinion over time which is communicated by the trends formed by the line charts over time</p>\n<p>(adding context)</p>\n<p>It was observed that people were unable to get the context of the crowd opinion while consuming the visualisation. To counter this, factual description of the events were added by replacing the horizontal axis with an events timeline.</p>\n<blockquote>\n<p>insert line chart along with events timeline screenshot</p>\n</blockquote>\n<p>The crowd opinion plotted over an events timeline gives a context for consuming crowd reactions. </p>\n<p>We then decided to project the continuous index values to an axis of discrete values represented by emoticons. Emoticons make the sentiment information represented by the line chart more comprehensible.</p>\n<blockquote>\n<p>insert line chart with emoticon axis and events timeline screenshot)</p>\n</blockquote>\n<p>A user can explore the events on the events timeline and get the crowd reactions using the line chart. Hovering over the line chart reveals emoticons and shows the polarity of the opinion as percentage split between positive and negative opinions. </p>\n<p>(adding Bubbles)</p>\n<p>While Opinion Index provides information about how the crowd is reacting towards a topic on the whole, qualitative information such as observations and analysis are hidden in individual social media posts.</p>\n<p>To integrate this feature into the proposed framework, we built a layer of Bubble chart over line chart, keeping the axes constant. </p>\n<blockquote>\n<p>insert bubble chart screenshot&gt;</p>\n</blockquote>\n<p>Each post is represented by a bubble. The vertical position of the bubble corresponds to the magnitude of sentiment the post carries, represented by emoticons. The horizontal position is simply the time at which it was posted. We classify bubbles as positive or negative using green or red colored outline respectively. The size of the bubble represents the popularity of the post.</p>\n<p>Bubble chart faced an overcrowding problem owing to the high volume of the data. To filter the data, instead of opting for a recommendation engine, we rather use an algorithm which predicts the popularity of the post in general. </p>\n<blockquote>\n<p>insert filtered bubble chart screenshot&gt;</p>\n</blockquote>\n<h2 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h2><p>The proposed framework provides information about the overall crowd reaction about a given topic. Using event timeline, a temporal aspect is added which aids the overall understanding by adding a chronological sense to the series of events. Popular posts about the topic are also integrated into the framework. </p>\n<p>People can use this framework as a participatory media platform for following an event or a news.</p>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[],"Tag":[]}}